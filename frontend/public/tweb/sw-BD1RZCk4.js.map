{"version":3,"file":"sw-BD1RZCk4.js","sources":["src/config/modes.ts","src/config/debug.ts","src/environment/ctx.ts","src/environment/userAgent.ts","src/helpers/context.ts","src/helpers/dT.ts","src/lib/logger.ts","src/helpers/schedulers/pause.ts","src/lib/serviceWorker/cache.ts","src/helpers/blob/readBlobAs.ts","src/helpers/blob/readBlobAsArrayBuffer.ts","src/helpers/blob/readBlobAsUint8Array.ts","src/helpers/bytes/bufferConcats.ts","src/helpers/noop.ts","src/helpers/cancellablePromise.ts","src/helpers/bytes/bytesFromHex.ts","src/helpers/bytes/bytesCmp.ts","src/helpers/fixChromiumMp4.ts","src/helpers/schedulers/debounce.ts","src/lib/accounts/getValidatedAccount.ts","src/lib/accounts/constants.ts","src/lib/accounts/getCurrentAccountFromURL.ts","src/helpers/array/toArray.ts","src/helpers/blob/blobSafeMimeType.ts","src/helpers/blob/blobConstruct.ts","src/helpers/makeError.ts","src/lib/staticUtilityClass.ts","src/lib/passcode/keyStore.ts","src/config/tabId.ts","src/helpers/array/indexOfAndSplice.ts","src/helpers/eventListenerBase.ts","src/lib/mtproto/superMessagePort.ts","src/lib/crypto/cryptoMessagePort.ts","src/lib/passcode/deferredIsUsingPasscode.ts","src/lib/files/memoryWriter.ts","src/lib/files/cacheStorage.ts","src/lib/serviceWorker/timeout.ts","src/lib/serviceWorker/stream.ts","src/config/databases/state.ts","src/config/notifications.ts","src/helpers/object/deepEqual.ts","src/helpers/object/safeAssign.ts","src/lib/files/idb.ts","src/lib/serviceWorker/push.ts","src/lib/serviceWorker/serviceMessagePort.ts","src/helpers/listenMessagePort.ts","src/lib/serviceWorker/download.ts","src/lib/serviceWorker/share.ts","src/lib/calls/constants.ts","src/lib/rtmp/utils.ts","node_modules/.pnpm/big-integer@1.6.52/node_modules/big-integer/BigInteger.js","src/lib/rtmp/isoboxer.js","src/lib/rtmp/flac-crc.ts","src/lib/rtmp/flac.ts","src/lib/rtmp/mp4.ts","src/lib/rtmp/opus.ts","src/lib/rtmp/fmp4.ts","src/vendor/simple-yenc.js","src/vendor/opus/WASMAudioDecoderCommon.js","src/vendor/opus/EmscriptenWasm.js","src/vendor/opus/index.js","src/helpers/number/clamp.ts","src/lib/serviceWorker/rtmp.ts","src/lib/serviceWorker/errors.ts","src/lib/hls/common.ts","src/lib/hls/requestSynchronizer.ts","src/lib/hls/onHlsQualityFileFetch.ts","src/lib/hls/fetchAndConcatFileParts.ts","src/lib/hls/splitRangeForGettingFileParts.ts","src/lib/hls/onHlsStreamFetch.ts","src/environment/utils.ts","src/lib/hls/createHlsVideoSource.ts","src/lib/hls/onHlsPlaylistFetch.ts","src/lib/serviceWorker/backgrounds.ts","src/lib/serviceWorker/watchMtprotoOnDev.ts","src/lib/serviceWorker/index.service.ts"],"sourcesContent":["/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n *\r\n * Originally from:\r\n * https://github.com/zhukov/webogram\r\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\r\n * https://github.com/zhukov/webogram/blob/master/LICENSE\r\n */\r\n\r\nimport type {TransportType} from '../lib/mtproto/dcConfigurator';\r\n\r\nconst Modes = {\r\n  test: location.search.indexOf('test=1') > 0/*  || true */,\r\n  debug: location.search.indexOf('debug=1') > 0,\r\n  http: false,\r\n  ssl: true, // location.search.indexOf('ssl=1') > 0 || location.protocol === 'https:' && location.search.indexOf('ssl=0') === -1,\r\n  asServiceWorker: !!import.meta.env.VITE_MTPROTO_SW,\r\n  transport: 'websocket' as TransportType,\r\n  noSharedWorker: location.search.indexOf('noSharedWorker=1') > 0,\r\n  multipleTransports: !!(import.meta.env.VITE_MTPROTO_AUTO && import.meta.env.VITE_MTPROTO_HAS_HTTP && import.meta.env.VITE_MTPROTO_HAS_WS) && location.search.indexOf('noMultipleTransports=1') === -1,\r\n  noPfs: true || location.search.indexOf('noPfs=1') > 0\r\n};\r\n\r\nif(import.meta.env.VITE_MTPROTO_HAS_HTTP) {\r\n  const httpOnly = Modes.http = location.search.indexOf('http=1') > 0;\r\n  if(httpOnly) {\r\n    Modes.multipleTransports = false;\r\n  }\r\n}\r\n\r\n// * start with HTTP first\r\nif(Modes.multipleTransports) {\r\n  Modes.http = true;\r\n}\r\n\r\nif(Modes.http) {\r\n  Modes.transport = 'https';\r\n}\r\n\r\nexport default Modes;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport Modes from './modes';\r\n\r\nexport const IS_BETA = import.meta.env.DEV;\r\nexport const DEBUG = (IS_BETA || Modes.debug)/*  && false */;\r\nconst ctx: any = typeof(window) !== 'undefined' ? window : self;\r\nexport const MOUNT_CLASS_TO: any = DEBUG || true/*  && false */ ? ctx : {};\r\nexport default DEBUG;\r\n\r\n// let m = DEBUG;\r\n/* if(!DEBUG) {\r\n  ctx.sandpitTurtle = () => {\r\n    //if(!m) {\r\n      for(let i in MOUNT_CLASS_TO) {\r\n        ctx[i] = MOUNT_CLASS_TO[i];\r\n      }\r\n      //m = true;\r\n    //}\r\n\r\n    //DEBUG = !DEBUG;\r\n  };\r\n} */\r\n\r\n/* export const superDebug = (object: any, key: string) => {\r\n  var d = object[key];\r\n  var beforeStr = '', afterStr = '';\r\n  for(var r of d) {\r\n    beforeStr += r.before.hex + '\\n';\r\n    afterStr += r.after.hex + '\\n';\r\n  }\r\n\r\n  beforeStr = beforeStr.trim();\r\n  afterStr = afterStr.trim();\r\n  //var beforeStr = d.map((r) => r.before.hex).join('\\n');\r\n  //var afterStr = d.map((r) => r.after.hex).join('\\n');\r\n\r\n  var dada = (name: string, str: string) => {\r\n    var a = document.createElement('a');\r\n    a.target = '_blank';\r\n    a.download = name + '.txt';\r\n    a.href = URL.createObjectURL(new Blob([str], {\r\n      type: 'text/plain'\r\n    }));\r\n    document.body.append(a);\r\n    a.click();\r\n  };\r\n\r\n  dada(key + '_' + 'before', beforeStr);\r\n  dada(key + '_' + 'after', afterStr);\r\n}\r\n\r\nMOUNT_CLASS_TO.superDebug = superDebug; */\r\n","const ctx = typeof(window) !== 'undefined' ? window : self;\r\n\r\nexport default ctx;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport ctx from './ctx';\r\n\r\nexport const USER_AGENT = navigator ? navigator.userAgent : null;\r\nexport const IS_APPLE = navigator.userAgent.search(/OS X|iPhone|iPad|iOS/i) !== -1;\r\nexport const IS_ANDROID = navigator.userAgent.toLowerCase().indexOf('android') !== -1;\r\nexport const IS_CHROMIUM = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\r\nexport const CHROMIUM_VERSION = (() => {\r\n  try {\r\n    return +navigator.userAgent.match(/Chrom(?:e|ium)\\/(.+?)(?:\\s|\\.)/)[1];\r\n  } catch(err) {\r\n  }\r\n})();\r\n\r\n// https://stackoverflow.com/a/58065241\r\nexport const IS_APPLE_MOBILE = (/iPad|iPhone|iPod/.test(navigator.platform) ||\r\n  (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) &&\r\n  !(ctx as any).MSStream;\r\n\r\nexport const IS_SAFARI = !!('safari' in ctx) || !!(USER_AGENT && (/\\b(iPad|iPhone|iPod)\\b/.test(USER_AGENT) || (!!USER_AGENT.match('Safari') && !USER_AGENT.match('Chrome'))))/*  || true */;\r\nexport const IS_FIREFOX = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\r\n\r\nexport const IS_MOBILE_SAFARI = IS_SAFARI && IS_APPLE_MOBILE;\r\n\r\nexport const IS_MOBILE = (navigator.maxTouchPoints === undefined || navigator.maxTouchPoints > 0) && navigator.userAgent.search(/iOS|iPhone OS|Android|BlackBerry|BB10|Series ?[64]0|J2ME|MIDP|opera mini|opera mobi|mobi.+Gecko|Windows Phone/i) != -1;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\n// в SW может быть сразу две переменных TRUE\r\nexport const IS_SERVICE_WORKER = typeof ServiceWorkerGlobalScope !== 'undefined' && self instanceof ServiceWorkerGlobalScope;\r\nexport const IS_WEB_WORKER = typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope && !IS_SERVICE_WORKER;\r\nexport const IS_WORKER = IS_WEB_WORKER || IS_SERVICE_WORKER;\r\n\r\nexport const getWindowClients = () => {\r\n  return (self as any as ServiceWorkerGlobalScope)\r\n  .clients\r\n  .matchAll({includeUncontrolled: false, type: 'window'});\r\n};\r\n\r\nexport const getLastWindowClient = () => getWindowClients().then((windowClients) => windowClients.slice(-1)[0]);\r\n\r\nconst postMessage = (listener: WindowClient | DedicatedWorkerGlobalScope, ...args: any[]) => {\r\n  try {\r\n    // @ts-ignore\r\n    listener.postMessage(...args);\r\n  } catch(err) {\r\n    console.error('[worker] postMessage error:', err, args);\r\n  }\r\n};\r\n\r\nconst notifyServiceWorker = (all: boolean, ...args: any[]) => {\r\n  getWindowClients().then((listeners) => {\r\n    if(!listeners.length) {\r\n      // console.trace('no listeners?', self, listeners);\r\n      return;\r\n    }\r\n\r\n    listeners.slice(all ? 0 : -1).forEach((listener) => {\r\n      postMessage(listener, ...args);\r\n    });\r\n  });\r\n};\r\n\r\nconst notifyWorker = (...args: any[]) => {\r\n  postMessage(self as any as DedicatedWorkerGlobalScope, ...args);\r\n};\r\n\r\nconst noop = () => {};\r\n\r\nexport const notifySomeone = IS_SERVICE_WORKER ? notifyServiceWorker.bind(null, false) : (IS_WEB_WORKER ? notifyWorker : noop);\r\nexport const notifyAll = IS_SERVICE_WORKER ? notifyServiceWorker.bind(null, true) : (IS_WEB_WORKER ? notifyWorker : noop);\r\n","const _logTimer = Date.now();\r\nexport default function dT() {\r\n  return '[' + ((Date.now() - _logTimer) / 1000).toFixed(3) + ']';\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport DEBUG from '../config/debug';\r\nimport {IS_FIREFOX, IS_SAFARI} from '../environment/userAgent';\r\nimport {IS_SERVICE_WORKER, IS_WEB_WORKER} from '../helpers/context';\r\nimport dT from '../helpers/dT';\r\n\r\nexport enum LogTypes {\r\n  None = 0,\r\n  Error = 1,\r\n  Warn = 2,\r\n  Log = 4,\r\n  Debug = 8\r\n};\r\n\r\nexport const LOG_LEVELS = [\r\n  LogTypes.None,\r\n  LogTypes.Error,\r\n  LogTypes.Warn,\r\n  LogTypes.Log,\r\n  LogTypes.Debug\r\n];\r\n\r\nconst IS_WEBKIT = IS_SAFARI || IS_FIREFOX;\r\n\r\n// let getCallerFunctionNameFromLine: (line: string) => string;\r\n// if(IS_WEBKIT) {\r\n//   getCallerFunctionNameFromLine = (line) => {\r\n//     const splitted = line.split('@');\r\n//     return splitted[0];\r\n//   };\r\n// } else {\r\n//   getCallerFunctionNameFromLine = (line: string) => {\r\n//     const splitted = line.trim().split(' ');\r\n//     if(splitted.length === 3) {\r\n//       return splitted[1].slice(splitted[1].lastIndexOf('.') + 1);\r\n//     }\r\n//   };\r\n// }\r\n\r\nconst STYLES_SUPPORTED = !IS_WEBKIT;\r\n// const LINE_INDEX = IS_WEBKIT ? 2 : 3;\r\n\r\n// function getCallerFunctionName() {\r\n//   const stack = new Error().stack;\r\n//   const lines = stack.split('\\n');\r\n//   const line = lines[LINE_INDEX] || lines[lines.length - 1];\r\n//   // const match = line.match(/\\.([^\\.]+?)\\s/);\r\n//   // line = match ? match[1] : line.trim();\r\n//   const caller = getCallerFunctionNameFromLine(line) || '<anonymous>';\r\n//   return '[' + caller + ']';\r\n// }\r\n\r\nexport const LOGGER_STYLES = {\r\n  reset: '\\x1b[0m',\r\n  bright: '\\x1b[1m',\r\n  dim: '\\x1b[2m',\r\n  underscore: '\\x1b[4m',\r\n  blink: '\\x1b[5m',\r\n  reverse: '\\x1b[7m',\r\n  hidden: '\\x1b[8m',\r\n  // Foreground (text) colors\r\n  fg: {\r\n    black: '\\x1b[30m',\r\n    red: '\\x1b[31m',\r\n    green: '\\x1b[32m',\r\n    yellow: '\\x1b[33m',\r\n    blue: '\\x1b[34m',\r\n    magenta: '\\x1b[35m',\r\n    cyan: '\\x1b[36m',\r\n    white: '\\x1b[37m'\r\n  },\r\n  // Background colors\r\n  bg: {\r\n    black: '\\x1b[40m',\r\n    red: '\\x1b[41m',\r\n    green: '\\x1b[42m',\r\n    yellow: '\\x1b[43m',\r\n    blue: '\\x1b[44m',\r\n    magenta: '\\x1b[45m',\r\n    cyan: '\\x1b[46m',\r\n    white: '\\x1b[47m'\r\n  }\r\n};\r\n\r\nexport type Logger = {\r\n  (...args: any[]): void;\r\n  warn(...args: any[]): void;\r\n  info(...args: any[]): void;\r\n  error(...args: any[]): void;\r\n  trace(...args: any[]): void;\r\n  debug(...args: any[]): void;\r\n  assert(...args: any[]): void;\r\n  // log(...args: any[]): void;\r\n  group(...args: any[]): void;\r\n  groupCollapsed(...args: any[]): void;\r\n  groupEnd(...args: any[]): void;\r\n  setPrefix(newPrefix: string): void;\r\n  setLevel(level: 0 | 1 | 2 | 3 | 4): void;\r\n  bindPrefix(prefix: string, type?: LogTypes): Logger;\r\n};\r\n\r\nconst methods: [\r\n  'debug' | 'info' | 'warn' | 'error' | 'assert' | 'trace'/*  | 'log' */ | 'group' | 'groupCollapsed' | 'groupEnd',\r\n  LogTypes\r\n][] = [\r\n  ['debug', LogTypes.Debug],\r\n  ['info', LogTypes.Log],\r\n  ['warn', LogTypes.Warn],\r\n  ['error', LogTypes.Error],\r\n  ['assert', LogTypes.Error],\r\n  ['trace', LogTypes.Log],\r\n  ['group', LogTypes.Log],\r\n  ['groupCollapsed', LogTypes.Log],\r\n  ['groupEnd', LogTypes.Log]\r\n  // [\"log\", LogTypes.Log]\r\n];\r\n\r\nexport function logger(\r\n  prefix: string,\r\n  type: LogTypes = LogTypes.Log | LogTypes.Warn | LogTypes.Error,\r\n  ignoreDebugReset = false,\r\n  style = ''\r\n): Logger {\r\n  let originalPrefix: string;\r\n  if(!DEBUG && !ignoreDebugReset/*  || true */) {\r\n    type = LogTypes.Error;\r\n  }\r\n\r\n  if(!STYLES_SUPPORTED) {\r\n    style = '';\r\n  } else if(!style) {\r\n    if(IS_SERVICE_WORKER) style = LOGGER_STYLES.fg.yellow;\r\n    else if(IS_WEB_WORKER) style = LOGGER_STYLES.fg.cyan;\r\n  }\r\n\r\n  const originalStyle = style;\r\n  if(style) style = `%s ${style}%s`;\r\n  else style = '%s';\r\n\r\n  // level = LogLevels.log | LogLevels.warn | LogLevels.error | LogLevels.debug\r\n\r\n  const log: Logger = function(...args: any[]) {\r\n    return type & LogTypes.Log && console.log(style, dT(), prefix, /* getCallerFunctionName(), */ ...args);\r\n  } as any;\r\n\r\n  methods.forEach(([method, logType]) => {\r\n    log[method] = function(...args: any[]) {\r\n      return type & logType && console[method](style, dT(), prefix, /* getCallerFunctionName(), */ ...args);\r\n    };\r\n  });\r\n\r\n  log.setPrefix = function(newPrefix: string) {\r\n    originalPrefix = newPrefix;\r\n    prefix = '[' + newPrefix + ']';\r\n  };\r\n\r\n  log.setPrefix(prefix);\r\n\r\n  log.setLevel = function(level: 0 | 1 | 2 | 3 | 4) {\r\n    type = LOG_LEVELS.slice(0, level + 1).reduce((acc, v) => acc | v, 0) as any;\r\n  };\r\n\r\n  const prefixCache: {[prefix: string]: Logger} = {};\r\n  log.bindPrefix = function(prefix: string, _type = type) {\r\n    return prefixCache[prefix] ??= logger(\r\n      // `${originalPrefix}] ${LOGGER_STYLES.fg.magenta}[${prefix}`,\r\n      `${originalPrefix}] ${STYLES_SUPPORTED && originalStyle ? LOGGER_STYLES.reset : ''}[${prefix}`,\r\n      // `${originalPrefix}] [${prefix}`,\r\n      _type,\r\n      ignoreDebugReset,\r\n      // originalStyle || LOGGER_STYLES.reset\r\n      originalStyle\r\n      // LOGGER_STYLES.reset\r\n    );\r\n  };\r\n\r\n  return log;\r\n};\r\n","export default function pause(ms: number) {\r\n  return new Promise<void>((resolve) => {\r\n    setTimeout(resolve, ms);\r\n  });\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport pause from '../../helpers/schedulers/pause';\r\n\r\nconst ctx = self as any as ServiceWorkerGlobalScope;\r\nexport const CACHE_ASSETS_NAME = 'cachedAssets';\r\n\r\nfunction isCorrectResponse(response: Response) {\r\n  return response.ok && response.status === 200;\r\n}\r\n\r\nfunction timeoutRace<T extends Promise<any>>(promise: T) {\r\n  return Promise.race([\r\n    promise,\r\n    pause(10000).then(() => Promise.reject())\r\n  ]);\r\n}\r\n\r\nexport async function requestCache(event: FetchEvent) {\r\n  try {\r\n    // const cache = await ctx.caches.open(CACHE_ASSETS_NAME);\r\n    const cache = await timeoutRace(ctx.caches.open(CACHE_ASSETS_NAME));\r\n    const file = await timeoutRace(cache.match(event.request, {ignoreVary: true}));\r\n\r\n    if(file && isCorrectResponse(file)) {\r\n      return file;\r\n    }\r\n\r\n    const headers: HeadersInit = {'Vary': '*'};\r\n    let response = await fetch(event.request, {headers});\r\n    if(isCorrectResponse(response)) {\r\n      cache.put(event.request, response.clone());\r\n    } else if(response.status === 304) { // possible fix for 304 in Safari\r\n      const url = event.request.url.replace(/\\?.+$/, '') + '?' + (Math.random() * 100000 | 0);\r\n      response = await fetch(url, {headers});\r\n      if(isCorrectResponse(response)) {\r\n        cache.put(event.request, response.clone());\r\n      }\r\n    }\r\n\r\n    return response;\r\n  } catch(err) {\r\n    return fetch(event.request);\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\n// import { IS_WEB_WORKER } from \"../context\";\r\n\r\n// const id = IS_WEB_WORKER ? Math.random() * 0x1000 | 0 : 0;\r\nexport default function readBlobAs(blob: Blob, method: 'readAsText'): Promise<string>;\r\nexport default function readBlobAs(blob: Blob, method: 'readAsDataURL'): Promise<string>;\r\nexport default function readBlobAs(blob: Blob, method: 'readAsArrayBuffer'): Promise<ArrayBuffer>;\r\nexport default function readBlobAs(blob: Blob, method: 'readAsArrayBuffer' | 'readAsText' | 'readAsDataURL'): Promise<any> {\r\n  // const perf = performance.now();\r\n  return new Promise<any>((resolve) => {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('loadend', (e) => {\r\n      // console.log(`readBlobAs [${id}] ${method} time ${performance.now() - perf}`);\r\n      resolve(e.target.result);\r\n    });\r\n    reader[method](blob);\r\n  });\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport readBlobAs from './readBlobAs';\r\n\r\nexport default function readBlobAsArrayBuffer(blob: Blob) {\r\n  return readBlobAs(blob, 'readAsArrayBuffer');\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport readBlobAsArrayBuffer from './readBlobAsArrayBuffer';\r\n\r\nexport default function readBlobAsUint8Array(blob: Blob) {\r\n  return readBlobAsArrayBuffer(blob).then((buffer) => new Uint8Array(buffer));\r\n}\r\n","export default function bufferConcats(...args: (ArrayBuffer | Uint8Array | number[])[]) {\r\n  const length = args.reduce((acc, v) => acc + ((v as ArrayBuffer).byteLength || (v as Uint8Array).length), 0);\r\n\r\n  const tmp = new Uint8Array(length);\r\n\r\n  let lastLength = 0;\r\n  args.forEach((b) => {\r\n    tmp.set(b instanceof ArrayBuffer ? new Uint8Array(b) : b, lastLength);\r\n    lastLength += (b as ArrayBuffer).byteLength || (b as Uint8Array).length;\r\n  });\r\n\r\n  return tmp/* .buffer */;\r\n}\r\n","export default function noop() {}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport noop from './noop';\r\n\r\nexport interface CancellablePromise<T> extends Promise<T> {\r\n  resolve?: (value: T) => void,\r\n  reject?: (...args: any[]) => void,\r\n  cancel?: (reason?: any) => void,\r\n\r\n  notify?: (...args: any[]) => void,\r\n  notifyAll?: (...args: any[]) => void,\r\n  lastNotify?: any,\r\n  listeners?: Array<(...args: any[]) => void>,\r\n  addNotifyListener?: (callback: (...args: any[]) => void) => void,\r\n\r\n  isFulfilled?: boolean,\r\n  isRejected?: boolean,\r\n\r\n  onFinish?: () => void,\r\n  _resolve?: (value: T) => void,\r\n  _reject?: (...args: any[]) => void\r\n}\r\n\r\nconst deferredHelper = {\r\n  isFulfilled: false,\r\n  isRejected: false,\r\n\r\n  notify: () => {},\r\n  notifyAll: function(...args: any[]) {\r\n    this.lastNotify = args;\r\n    this.listeners?.forEach((callback: any) => callback(...args));\r\n  },\r\n\r\n  addNotifyListener: function(callback: (...args: any[]) => void) {\r\n    if(this.lastNotify) {\r\n      callback(...this.lastNotify);\r\n    }\r\n\r\n    (this.listeners ??= []).push(callback);\r\n  },\r\n\r\n  resolve: function(value) {\r\n    if(this.isFulfilled || this.isRejected) return;\r\n\r\n    this.isFulfilled = true;\r\n    this._resolve(value);\r\n    this.onFinish();\r\n  },\r\n\r\n  reject: function(...args) {\r\n    if(this.isRejected || this.isFulfilled) return;\r\n\r\n    this.isRejected = true;\r\n    this._reject(...args);\r\n    this.onFinish();\r\n  },\r\n\r\n  onFinish: function() {\r\n    this.notify = this.notifyAll = this.lastNotify = null;\r\n    if(this.listeners) this.listeners.length = 0;\r\n\r\n    if(this.cancel) {\r\n      this.cancel = noop;\r\n    }\r\n  }\r\n} as CancellablePromise<any>;\r\n\r\nexport default function deferredPromise<T>() {\r\n  let resolve: (value: T) => void, reject: (...args: any[]) => void;\r\n  const deferred: CancellablePromise<T> = new Promise<T>((_resolve, _reject) => {\r\n    resolve = _resolve, reject = _reject;\r\n  });\r\n\r\n  Object.assign(deferred, deferredHelper);\r\n  deferred._resolve = resolve;\r\n  deferred._reject = reject;\r\n\r\n  return deferred;\r\n}\r\n\r\nexport function bindPromiseToDeferred<T>(promise: Promise<T>, deferred: CancellablePromise<T>) {\r\n  promise.then(deferred.resolve.bind(deferred), deferred.reject.bind(deferred));\r\n}\r\n\r\n(self as any).deferredPromise = deferredPromise;\r\n","import {MOUNT_CLASS_TO} from '../../config/debug';\r\n\r\nexport default function bytesFromHex(hexString: string) {\r\n  const len = hexString.length;\r\n  const bytes = new Uint8Array(Math.ceil(len / 2));\r\n  let start = 0;\r\n\r\n  if(len % 2) { // read 0x581 as 0x0581\r\n    bytes[start++] = parseInt(hexString.charAt(0), 16);\r\n  }\r\n\r\n  for(let i = start; i < len; i += 2) {\r\n    bytes[start++] = parseInt(hexString.substr(i, 2), 16);\r\n  }\r\n\r\n  return bytes;\r\n}\r\n\r\nMOUNT_CLASS_TO.bytesFromHex = bytesFromHex;\r\n","export default function bytesCmp(bytes1: number[] | Uint8Array, bytes2: number[] | Uint8Array) {\r\n  const len = bytes1.length;\r\n  if(len !== bytes2.length) {\r\n    return false;\r\n  }\r\n\r\n  for(let i = 0; i < len; ++i) {\r\n    if(bytes1[i] !== bytes2[i]) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n","import bytesFromHex from './bytes/bytesFromHex';\r\nimport bytesCmp from './bytes/bytesCmp';\r\n\r\nfunction readLengthField(buf: Uint8Array, offset: number) {\r\n  let length = 0;\r\n  let size = 0;\r\n\r\n  for(let i = 0; i < 4; i++) {\r\n    const byte = buf[offset + i];\r\n    length = (length << 7) + (byte & 0x7f);\r\n    size++;\r\n    if((byte & 0x80) === 0) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  return [size, length];\r\n}\r\n\r\nfunction parseDecoderSpecificInfo(buf: Uint8Array) {\r\n  if(buf[0] !== 0x05) {\r\n    throw new Error('Invalid DecoderSpecificInfo tag');\r\n  }\r\n\r\n  const [lenSz, len] = readLengthField(buf, 1);\r\n  const offset = 1 + lenSz;\r\n\r\n  return buf.subarray(offset, offset + len);\r\n}\r\n\r\nfunction parseDecoderConfigDescriptor(buf: Uint8Array) {\r\n  if(buf[0] !== 0x04) {\r\n    throw new Error('Invalid DecoderConfigDescriptor tag');\r\n  }\r\n\r\n  const [lenSz, len] = readLengthField(buf, 1);\r\n  let offset = 1 + lenSz;\r\n\r\n  offset += 1 + // oti\r\n        1 + // flags\r\n        3 + // bufferSizeDB\r\n        4 + // maxBitRate\r\n        4;  // avgBitRate\r\n\r\n  const decoderSpecificInfo = parseDecoderSpecificInfo(buf.subarray(offset));\r\n\r\n  return decoderSpecificInfo;\r\n}\r\n\r\nfunction parseES_Descriptor(buf: Uint8Array) {\r\n  if(buf[0] !== 0x03) {\r\n    throw new Error('Invalid ES_Descriptor tag');\r\n  }\r\n\r\n  const dv = new DataView(buf.buffer, buf.byteOffset, buf.byteLength);\r\n  const [lenSz, len] = readLengthField(buf, 1);\r\n  let offset = 1 + lenSz;\r\n  offset += 2; // ES_ID\r\n  const flags = dv.getUint8(offset);\r\n  offset += 1;\r\n\r\n  const streamDependenceFlag = flags & 0x80;\r\n  const URL_Flag = flags & 0x40;\r\n\r\n  if(streamDependenceFlag) {\r\n    offset += 2;\r\n  }\r\n  if(URL_Flag) {\r\n    const URLlength = readLengthField(buf, offset);\r\n    offset += 1 + URLlength[0] + URLlength[1];\r\n  }\r\n\r\n  const decoderConfigDescriptor = parseDecoderConfigDescriptor(buf.subarray(offset));\r\n\r\n  return {decoderConfigDescriptor};\r\n}\r\n\r\n// function isoMakePath(box: any) {\r\n//   const path = []\r\n//   let cur = box\r\n//   while(cur._parent) {\r\n//     path.unshift(cur.type)\r\n//     cur = cur._parent\r\n//   }\r\n//   return path.join('.')\r\n// }\r\n\r\nconst BROKEN_DSCI = [0x13, 0x88];\r\n// a proper working esds, containing:\r\n// - profile = AAC_LC, sample rate = 22050, channels = MONO\r\n// - sync extension with profile = AAC_SBR, sample rate = 44100\r\nconst FIXED_ESDS = bytesFromHex('0327000100041940150000000001f4000000bb750507138856e5a5');\r\nconst ESDS = new TextEncoder().encode('esds');\r\nconst MP4A = new TextEncoder().encode('mp4a');\r\n\r\nfunction findUint8ArrayBack(buf: Uint8Array, needle: Uint8Array, start = buf.length) {\r\n  for(let i = start - needle.length; i >= 0; i--) {\r\n    let found = true;\r\n    for(let j = 0; j < needle.length; j++) {\r\n      if(buf[i + j] !== needle[j]) {\r\n        found = false;\r\n        break;\r\n      }\r\n    }\r\n    if(found) return i;\r\n  }\r\n\r\n  return -1;\r\n}\r\n\r\nfunction fixMp4ForChromium(u8: Uint8Array) {\r\n  const dv = new DataView(u8.buffer, u8.byteOffset, u8.byteLength);\r\n\r\n  // starting from end is more efficient because mdat is usually at the start\r\n  let pos = u8.length;\r\n  let found = null;\r\n  while(true) {\r\n    const esdsOffset = findUint8ArrayBack(u8, ESDS, pos);\r\n    if(esdsOffset === -1) break;\r\n    pos = esdsOffset;\r\n\r\n    // validate size\r\n    const esdsSize = dv.getUint32(esdsOffset - 4); // mp4 box\r\n    if(esdsSize < 0 || esdsOffset + esdsSize > u8.length) {\r\n      // invalid esds\r\n      continue;\r\n    }\r\n\r\n    // esds can only be inside mp4a\r\n    const mp4aOffset = findUint8ArrayBack(u8, MP4A, esdsOffset);\r\n    if(mp4aOffset === -1 || esdsOffset - mp4aOffset > 100) continue;\r\n\r\n    found = {offset: esdsOffset + 8, size: esdsSize - 12};\r\n  }\r\n\r\n  if(!found) throw new Error('No ESDS found');\r\n\r\n  const esds = u8.subarray(found.offset, found.offset + found.size);\r\n\r\n  const parsed = parseES_Descriptor(esds);\r\n  if(!parsed) throw new Error('Invalid ESDS');\r\n  if(!bytesCmp(parsed.decoderConfigDescriptor, BROKEN_DSCI)) {\r\n    throw new Error('Not a broken DSCI');\r\n  }\r\n\r\n  if(found.size < FIXED_ESDS.length) {\r\n    throw new Error(`ESDS Size not enough (expected at least ${FIXED_ESDS.length}, got ${found.size})`);\r\n  }\r\n\r\n  u8.set(FIXED_ESDS, found.offset);\r\n}\r\n\r\nexport default function tryPatchMp4(u8: Uint8Array) {\r\n  // since we are patching chunks and not the entire file, only the chunk\r\n  // containing the ESDS will succeed, so we can safely ignore errors\r\n  //\r\n  // there's an edge case where the ESDS is split between two chunks, but\r\n  // that's quite unlikely to happen, so we ignore it for now\r\n\r\n  try {\r\n    fixMp4ForChromium(u8);\r\n    return true;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n}\r\n","// * Jolly Cobra's schedulers\r\n\r\nimport ctx from '../../environment/ctx';\r\nimport {AnyFunction} from '../../types';\r\nimport noop from '../noop';\r\n\r\nexport type DebounceReturnType<F extends AnyFunction> = {\r\n  (...args: Parameters<F>): Promise<Awaited<ReturnType<F>>>;\r\n  clearTimeout(): void;\r\n  isDebounced(): boolean;\r\n};\r\n\r\nexport default function debounce<F extends AnyFunction>(\r\n  fn: F,\r\n  ms: number,\r\n  shouldRunFirst = true,\r\n  shouldRunLast = true\r\n): DebounceReturnType<F> {\r\n  let waitingTimeout: number;\r\n  let waitingPromise: Promise<Awaited<ReturnType<F>>>, resolve: (result: any) => void, reject: () => void;\r\n  let hadNewCall = false;\r\n\r\n  const invoke = (args: Parameters<F>) => {\r\n    const _resolve = resolve, _reject = reject;\r\n    try {\r\n      const result = fn.apply(null, args);\r\n      _resolve(result);\r\n    } catch(err) {\r\n      console.error('debounce error', err);\r\n      // @ts-ignore\r\n      _reject(err);\r\n    }\r\n  };\r\n\r\n  const debounce = (...args: Parameters<F>) => {\r\n    if(!waitingPromise) waitingPromise = new Promise((_resolve, _reject) => (resolve = _resolve, reject = _reject));\r\n\r\n    if(waitingTimeout) {\r\n      clearTimeout(waitingTimeout);\r\n      hadNewCall = true;\r\n      reject();\r\n      waitingPromise = new Promise((_resolve, _reject) => (resolve = _resolve, reject = _reject));\r\n    } else if(shouldRunFirst) {\r\n      invoke(args);\r\n      hadNewCall = false;\r\n    }\r\n\r\n    const _waitingTimeout = ctx.setTimeout(() => {\r\n      // will run if should run last or first but with new call\r\n      if(shouldRunLast && (!shouldRunFirst || hadNewCall)) {\r\n        invoke(args);\r\n      }\r\n\r\n      // if debounce was called during invoking\r\n      if(waitingTimeout === _waitingTimeout) {\r\n        waitingTimeout = waitingPromise = resolve = reject = undefined;\r\n        hadNewCall = false;\r\n      }\r\n    }, ms);\r\n\r\n    waitingTimeout = _waitingTimeout;\r\n    waitingPromise.catch(noop);\r\n    return waitingPromise;\r\n  };\r\n\r\n  debounce.clearTimeout = () => {\r\n    if(waitingTimeout) {\r\n      ctx.clearTimeout(waitingTimeout);\r\n      reject();\r\n      waitingTimeout = waitingPromise = resolve = reject = undefined;\r\n      hadNewCall = false;\r\n    }\r\n  };\r\n\r\n  debounce.isDebounced = () => !!waitingTimeout;\r\n\r\n  return debounce;\r\n}\r\n","import {ActiveAccountNumber} from './types';\r\n\r\nexport function getValidatedAccount(input: string | number) {\r\n  input = parseInt((input || '1') + '');\r\n  return (input <= 4 && input >= 1 ? input : 1) as ActiveAccountNumber;\r\n}\r\n","export const CURRENT_ACCOUNT_QUERY_PARAM = 'account';\r\n\r\nexport const MAX_ACCOUNTS_FREE = 3;\r\nexport const MAX_ACCOUNTS_PREMIUM = 4;\r\nexport const MAX_ACCOUNTS = MAX_ACCOUNTS_PREMIUM;\r\n","import {getValidatedAccount} from './getValidatedAccount';\r\nimport {CURRENT_ACCOUNT_QUERY_PARAM} from './constants';\r\n\r\nexport function getCurrentAccountFromURL(urlString: string) {\r\n  const params = new URL(urlString).searchParams;\r\n  return getValidatedAccount(params.get(CURRENT_ACCOUNT_QUERY_PARAM) || '');\r\n}\r\n","export default function toArray<T>(value: T | T[]): T[] {\r\n  return Array.isArray(value) ? value : [value];\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n *\r\n * Originally from:\r\n * https://github.com/zhukov/webogram\r\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\r\n * https://github.com/zhukov/webogram/blob/master/LICENSE\r\n */\r\n\r\n// https://www.iana.org/assignments/media-types/media-types.xhtml\r\nexport default function blobSafeMimeType(mimeType: string) {\r\n  if([\r\n    'image/jpeg',\r\n    'image/png',\r\n    'image/gif',\r\n    'image/svg+xml',\r\n    'image/webp',\r\n    'image/bmp',\r\n    'image/avif',\r\n    'image/jxl',\r\n    'video/mp4',\r\n    'video/webm',\r\n    'video/quicktime',\r\n    'audio/ogg',\r\n    'audio/mpeg',\r\n    'audio/mp4',\r\n    'audio/wav', // though it is not in list\r\n    'application/json',\r\n    'application/pdf'\r\n  ].indexOf(mimeType) === -1) {\r\n    return 'application/octet-stream';\r\n  }\r\n\r\n  return mimeType;\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n *\r\n * Originally from:\r\n * https://github.com/zhukov/webogram\r\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\r\n * https://github.com/zhukov/webogram/blob/master/LICENSE\r\n */\r\n\r\nimport toArray from '../array/toArray';\r\nimport blobSafeMimeType from './blobSafeMimeType';\r\n\r\nexport default function blobConstruct<T extends Uint8Array | string>(blobParts: Array<T> | T, mimeType: string = ''): Blob {\r\n  blobParts = toArray(blobParts);\r\n  const safeMimeType = blobSafeMimeType(mimeType);\r\n  const blob = new Blob(blobParts, {type: safeMimeType});\r\n  return blob;\r\n}\r\n","export default function makeError(type: ErrorType, message?: string): ApiError {\r\n  const realError = new Error();\r\n  const error: ApiError = {type, stack: realError.stack};\r\n  if(message) {\r\n    error.message = message;\r\n  }\r\n\r\n  return error;\r\n}\r\n","export default class StaticUtilityClass {\r\n  constructor() {\r\n    throw new Error('Cannot instantiate a static utility class');\r\n  }\r\n}\r\n","import deferredPromise from '../../helpers/cancellablePromise';\r\nimport StaticUtilityClass from '../staticUtilityClass';\r\n\r\n\r\nexport default class EncryptionKeyStore extends StaticUtilityClass {\r\n  private static key: CryptoKey | null = null;\r\n\r\n  private static deferred = deferredPromise<void>();\r\n\r\n  public static async get() {\r\n    if(this.deferred) await this.deferred;\r\n    return this.key;\r\n  }\r\n\r\n  public static async getAsBase64() {\r\n    const key = await this.get();\r\n    if(!key) return null;\r\n\r\n    const exportedKey = await crypto.subtle.exportKey('raw', key);\r\n    const base64Key = btoa(String.fromCharCode(...new Uint8Array(exportedKey)));\r\n\r\n    return base64Key;\r\n  }\r\n\r\n  public static save(key?: CryptoKey) {\r\n    this.key = key || null;\r\n    this.deferred?.resolve();\r\n    this.deferred = undefined;\r\n  }\r\n\r\n  /**\r\n   * Mainly for Service Worker\r\n   */\r\n  public static resetDeferred() {\r\n    this.key = null;\r\n    this.deferred = deferredPromise();\r\n  }\r\n}\r\n","const tabId = Date.now() % Math.random() * 100000000 | 0;\r\nexport default tabId;\r\n","export default function indexOfAndSplice<T>(array: Array<T>, item: T) {\r\n  const idx = array.indexOf(item);\r\n  const spliced = idx === -1 ? undefined : array.splice(idx, 1);\r\n  return spliced?.[0];\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\n// import { MOUNT_CLASS_TO } from \"../config/debug\";\r\nimport type {ArgumentTypes, SuperReturnType} from '../types';\r\n\r\n// class EventSystem {\r\n//   wm: WeakMap<any, Record<any, Set<any>>> = new WeakMap();\r\n\r\n//   add(target: any, event: any, listener: any) {\r\n//     let listeners = this.wm.get(target);\r\n//     if (listeners === undefined) {\r\n//         listeners = {};\r\n//     }\r\n//     let listenersForEvent = listeners[event];\r\n//     if (listenersForEvent === undefined) {\r\n//         listenersForEvent = new Set();\r\n//     }\r\n//     listenersForEvent.add(listener);\r\n//     listeners[event] = listenersForEvent;\r\n//     //target.addEventListener(event, listener);\r\n//     this.wm.set(target, listeners);\r\n//   };\r\n\r\n//   remove(target: any, event: any, listener: any) {\r\n//     let listeners = this.wm.get(target);\r\n//     if (!listeners) return;\r\n//     let listenersForEvent = listeners[event];\r\n//     if (!listenersForEvent) return;\r\n//     listenersForEvent.delete(listener);\r\n//   };\r\n\r\n//   /* fire(target, event) {\r\n//      let listeners = this.wm.get(target);\r\n//      if (!listeners) return;\r\n//      let listenersForEvent = listeners[event];\r\n//      if (!listenersForEvent) return;\r\n//      for (let handler of handlers) {\r\n//          setTimeout(handler, 0, event, target); // we use a setTimeout here because we want event triggering to be asynchronous.\r\n//      }\r\n//   }; */\r\n// }\r\n\r\n// console.log = () => {};\r\n\r\n// const e = new EventSystem();\r\n// MOUNT_CLASS_TO.e = e;\r\n\r\nexport type EventListenerListeners = Record<string, Function>;\r\n// export type EventListenerListeners = Record<string, (...args: any[]) => any>;\r\n// export type EventListenerListeners = {[name in string]: Function};\r\n\r\n/**\r\n * Better not to remove listeners during setting\r\n * Should add listener callback only once\r\n */\r\n\r\ntype ListenerObject<T> = {callback: T, options: boolean | AddEventListenerOptions};\r\n\r\n// type EventLitenerCallback<T> = (data: T) =>\r\n// export default class EventListenerBase<Listeners extends {[name: string]: Function}> {\r\nexport default class EventListenerBase<Listeners extends EventListenerListeners> {\r\n  protected listeners: Partial<{\r\n    [k in keyof Listeners]: Set<ListenerObject<Listeners[k]>>\r\n  }>;\r\n  protected listenerResults: Partial<{\r\n    [k in keyof Listeners]: ArgumentTypes<Listeners[k]>\r\n  }>;\r\n\r\n  private reuseResults: boolean;\r\n\r\n  constructor(reuseResults?: boolean) {\r\n    this._constructor(reuseResults);\r\n  }\r\n\r\n  public _constructor(reuseResults?: boolean): any {\r\n    this.reuseResults = reuseResults;\r\n    this.listeners = {};\r\n    this.listenerResults = {};\r\n  }\r\n\r\n  public addEventListener<T extends keyof Listeners>(name: T, callback: Listeners[T], options?: boolean | AddEventListenerOptions) {\r\n    const listenerObject: ListenerObject<Listeners[T]> = {callback, options};\r\n    (this.listeners[name] ??= new Set()).add(listenerObject); // ! add before because if you don't, you won't be able to delete it from callback\r\n\r\n    if(this.listenerResults.hasOwnProperty(name)) {\r\n      callback(...this.listenerResults[name]);\r\n\r\n      if((options as AddEventListenerOptions)?.once) {\r\n        this.listeners[name].delete(listenerObject);\r\n        return;\r\n      }\r\n    }\r\n\r\n    // e.add(this, name, {callback, once});\r\n  }\r\n\r\n  public addMultipleEventsListeners(obj: {\r\n    [name in keyof Listeners]?: Listeners[name]\r\n  }) {\r\n    for(const i in obj) {\r\n      this.addEventListener(i, obj[i]);\r\n    }\r\n  }\r\n\r\n  public removeEventListener<T extends keyof Listeners>(\r\n    name: T,\r\n    callback: Listeners[T],\r\n    options?: boolean | AddEventListenerOptions\r\n  ) {\r\n    if(this.listeners[name]) {\r\n      for(const l of this.listeners[name]) {\r\n        if(l.callback === callback) {\r\n          this.listeners[name].delete(l);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    // e.remove(this, name, callback);\r\n  }\r\n\r\n  protected invokeListenerCallback<T extends keyof Listeners, L extends ListenerObject<any>>(\r\n    name: T,\r\n    listener: L,\r\n    ...args: ArgumentTypes<L['callback']>\r\n  ) {\r\n    let result: any, error: any;\r\n    try {\r\n      result = listener.callback(...args);\r\n    } catch(err) {\r\n      error = err;\r\n      // console.error('listener callback error', err);\r\n    }\r\n\r\n    if((listener.options as AddEventListenerOptions)?.once) {\r\n      this.removeEventListener(name, listener.callback);\r\n    }\r\n\r\n    if(error) {\r\n      throw error;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  private _dispatchEvent<T extends keyof Listeners>(\r\n    name: T,\r\n    collectResults: boolean,\r\n    ...args: ArgumentTypes<Listeners[T]>\r\n  ) {\r\n    if(this.reuseResults) {\r\n      this.listenerResults[name] = args;\r\n    }\r\n\r\n    const results: Array<SuperReturnType<Listeners[typeof name]>> = collectResults && [];\r\n\r\n    const listeners = this.listeners[name];\r\n    for(const listener of listeners || []) {\r\n      try {\r\n        const result = this.invokeListenerCallback(name, listener, ...args);\r\n        if(results) {\r\n          results.push(result);\r\n        }\r\n      } catch(err) {\r\n        if(results) {\r\n          throw err;\r\n        }\r\n      }\r\n    }\r\n\r\n    return results;\r\n  }\r\n\r\n  public dispatchResultableEvent<T extends keyof Listeners>(name: T, ...args: ArgumentTypes<Listeners[T]>) {\r\n    return this._dispatchEvent(name, true, ...args);\r\n  }\r\n\r\n  // * must be protected, but who cares\r\n  public dispatchEvent<L extends EventListenerListeners = Listeners, T extends keyof L = keyof L>(\r\n    name: T,\r\n    ...args: ArgumentTypes<L[T]>\r\n  ) {\r\n    // @ts-ignore\r\n    this._dispatchEvent(name, false, ...args);\r\n  }\r\n\r\n  public cleanup() {\r\n    this.listeners = {};\r\n    this.listenerResults = {};\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport DEBUG from '../../config/debug';\r\nimport tabId from '../../config/tabId';\r\nimport ctx from '../../environment/ctx';\r\nimport indexOfAndSplice from '../../helpers/array/indexOfAndSplice';\r\nimport {IS_WORKER} from '../../helpers/context';\r\nimport EventListenerBase from '../../helpers/eventListenerBase';\r\nimport makeError from '../../helpers/makeError';\r\nimport {WorkerTaskTemplate, WorkerTaskVoidTemplate} from '../../types';\r\nimport {logger} from '../logger';\r\n\r\ntype SuperMessagePortTask = WorkerTaskTemplate & {\r\n  transfer?: Transferable[]\r\n};\r\n\r\ninterface InvokeTask extends SuperMessagePortTask {\r\n  type: 'invoke',\r\n  payload: WorkerTaskVoidTemplate & {withAck?: boolean, void?: boolean}\r\n}\r\n\r\ninterface ResultTask extends SuperMessagePortTask {\r\n  type: 'result',\r\n  payload: {\r\n    taskId: number,\r\n    result?: any,\r\n    error?: any\r\n  }\r\n}\r\n\r\ninterface AckTask extends SuperMessagePortTask {\r\n  type: 'ack',\r\n  payload: {\r\n    cached: boolean,\r\n    taskId: number\r\n    result?: any,\r\n    error?: any,\r\n  }\r\n}\r\n\r\ninterface PingTask extends SuperMessagePortTask {\r\n  type: 'ping'\r\n}\r\n\r\ninterface PongTask extends SuperMessagePortTask {\r\n  type: 'pong'\r\n}\r\n\r\ninterface BatchTask extends SuperMessagePortTask {\r\n  type: 'batch',\r\n  payload: Task[]\r\n}\r\n\r\ninterface CloseTask extends SuperMessagePortTask {\r\n  type: 'close'\r\n}\r\n\r\n// interface OpenTask extends SuperMessagePortTask {\r\n//   type: 'open'\r\n// }\r\n\r\ninterface LockTask extends SuperMessagePortTask {\r\n  type: 'lock',\r\n  payload: string\r\n}\r\n\r\ntype Task = InvokeTask | ResultTask | AckTask | PingTask | PongTask | BatchTask | CloseTask/*  | OpenTask */ | LockTask;\r\ntype TaskMap = {\r\n  [type in Task as type['type']]?: (task: Extract<Task, type>, source: MessageEventSource, event: MessageEvent<any>) => void | Promise<any>\r\n};\r\n\r\nexport type AckedResult<T> = {\r\n  cached: boolean,\r\n  result: Promise<T>\r\n};\r\n// export type AckedResult<T> = {\r\n//   cached: true,\r\n//   result: T\r\n// } | {\r\n//   cached: false,\r\n//   result: Promise<T>\r\n// };\r\n\r\ntype ListenPort = WindowProxy | MessagePort | ServiceWorker | Worker | ServiceWorkerContainer;\r\ntype SendPort = Pick<MessageEventSource, 'postMessage'>/* WindowProxy | MessagePort | ServiceWorker | Worker */;\r\n\r\nexport type MessageListenPort = ListenPort;\r\nexport type MessageSendPort = SendPort;\r\n\r\ntype ListenerCallback = (payload: any, source: MessageEventSource, event: MessageEvent<any>) => any;\r\ntype Listeners = Record<string, ListenerCallback>;\r\n\r\nconst USE_LOCKS = true;\r\nconst USE_BATCHING = true;\r\n\r\n// const PING_INTERVAL = DEBUG && false ? 0x7FFFFFFF : 5000;\r\n// const PING_TIMEOUT = DEBUG && false ? 0x7FFFFFFF : 10000;\r\n\r\n\r\nclass SuperMessagePort<\r\n  Workers extends Listeners,\r\n  Masters extends Listeners,\r\n  IsMaster extends boolean,\r\n  Receive extends Listeners = IsMaster extends true ? Masters : Workers,\r\n  Send extends Listeners = IsMaster extends true ? Workers : Masters\r\n> extends EventListenerBase<Receive> {\r\n  protected listenPorts: Array<ListenPort>;\r\n  protected sendPorts: Array<SendPort>;\r\n  protected pingResolves: Map<SendPort, () => void>;\r\n\r\n  protected taskId: number;\r\n  protected awaiting: {\r\n    [id: number]: {\r\n      resolve: any,\r\n      reject: any,\r\n      taskType: string,\r\n      port?: SendPort\r\n    }\r\n  };\r\n  protected pending: Map<SendPort, Task[]>;\r\n\r\n  protected log: ReturnType<typeof logger>;\r\n  protected debug: boolean;\r\n  protected releasingPending: boolean;\r\n\r\n  protected processTaskMap: TaskMap;\r\n\r\n  protected onPortDisconnect: (source: MessageEventSource) => void;\r\n  // protected onPortConnect: (source: MessageEventSource) => void;\r\n\r\n  protected heldLocks: Map<SendPort, {resolve: () => void, id: string}>;\r\n  protected requestedLocks: Map<string, SendPort>;\r\n\r\n  constructor(protected logSuffix?: string) {\r\n    super(false);\r\n\r\n    this.listenPorts = [];\r\n    this.sendPorts = [];\r\n    this.pingResolves = new Map();\r\n    this.taskId = Math.random(); // [0 <-> 1] Have some decimals to prevent tabs from overlapping ids\r\n    this.awaiting = {};\r\n    this.pending = new Map();\r\n    this.log = logger('MP' + (logSuffix ? '-' + logSuffix : ''));\r\n    this.debug = DEBUG;\r\n    this.heldLocks = new Map();\r\n    this.requestedLocks = new Map();\r\n\r\n    this.processTaskMap = {\r\n      result: this.processResultTask,\r\n      ack: this.processAckTask,\r\n      invoke: this.processInvokeTask,\r\n      ping: this.processPingTask,\r\n      pong: this.processPongTask,\r\n      close: this.processCloseTask,\r\n      // open: this.processOpenTask,\r\n      lock: this.processLockTask,\r\n      batch: this.processBatchTask\r\n    };\r\n  }\r\n\r\n  public setOnPortDisconnect(callback: (source: MessageEventSource) => void) {\r\n    this.onPortDisconnect = callback;\r\n  }\r\n\r\n  // public setOnPortConnect(callback: (source: MessageEventSource) => void) {\r\n  //   this.onPortConnect = callback;\r\n  // }\r\n\r\n  public attachPort(port: MessageEventSource) {\r\n    this.attachListenPort(port);\r\n    this.attachSendPort(port);\r\n  }\r\n\r\n  public attachListenPort(port: ListenPort) {\r\n    this.listenPorts.push(port);\r\n    port.addEventListener('message', this.onMessage as any);\r\n  }\r\n\r\n  public attachSendPort(port: SendPort) {\r\n    this.log.warn('attaching send port');\r\n\r\n    (port as MessagePort).start?.();\r\n\r\n    this.sendPorts.push(port);\r\n    // this.sendPing(port);\r\n\r\n    // const task = this.createTask('open', undefined);\r\n    // this.postMessage(port, task);\r\n\r\n    if(typeof(window) !== 'undefined' && USE_LOCKS) {\r\n      if('locks' in navigator) {\r\n        const id = ['lock', tabId, this.logSuffix || '', Math.random() * 0x7FFFFFFF | 0].join('-');\r\n        this.log.warn('created lock', id);\r\n        const promise = new Promise<void>((resolve) => this.heldLocks.set(port, {resolve, id}))\r\n        .then(() => this.heldLocks.delete(port));\r\n        navigator.locks.request(id, () => {\r\n          this.resendLockTask(port);\r\n          return promise;\r\n        });\r\n      } else {\r\n        window.addEventListener('beforeunload', () => {\r\n          const task = this.createTask('close', undefined);\r\n          this.postMessage(undefined, task);\r\n        });\r\n      }\r\n    }\r\n\r\n    this.releasePending();\r\n  }\r\n\r\n  public resendLockTask(port: SendPort) {\r\n    const lock = this.heldLocks.get(port);\r\n    if(!lock) {\r\n      return;\r\n    }\r\n\r\n    this.pushTask(this.createTask('lock', lock.id), port);\r\n  }\r\n\r\n  // ! Can't rely on ping because timers can be suspended\r\n  // protected sendPing(port: SendPort, loop = IS_WORKER) {\r\n  //   let timeout: number;\r\n  //   const promise = new Promise<void>((resolve, reject) => {\r\n  //     this.pingResolves.set(port, resolve);\r\n  //     this.pushTask(this.createTask('ping', undefined), port);\r\n\r\n  //     timeout = ctx.setTimeout(() => {\r\n  //       reject();\r\n  //     }, PING_TIMEOUT);\r\n  //   });\r\n\r\n  //   promise.then(() => {\r\n  //     // this.log('got pong');\r\n\r\n  //     clearTimeout(timeout);\r\n  //     this.pingResolves.delete(port);\r\n\r\n  //     if(loop) {\r\n  //       this.sendPingWithTimeout(port);\r\n  //     }\r\n  //   }, () => {\r\n  //     this.pingResolves.delete(port);\r\n  //     this.detachPort(port);\r\n  //   });\r\n  // }\r\n\r\n  // protected sendPingWithTimeout(port: SendPort, timeout = PING_INTERVAL) {\r\n  //   ctx.setTimeout(() => {\r\n  //     if(!this.sendPorts.includes(port)) {\r\n  //       return;\r\n  //     }\r\n\r\n  //     this.sendPing(port);\r\n  //   }, timeout);\r\n  // }\r\n\r\n  public detachPort(port: ListenPort) {\r\n    this.log.warn('disconnecting port');\r\n\r\n    indexOfAndSplice(this.listenPorts, port);\r\n    indexOfAndSplice(this.sendPorts, port as any);\r\n\r\n    port.removeEventListener?.('message', this.onMessage as any);\r\n    (port as MessagePort).close?.();\r\n\r\n    this.onPortDisconnect?.(port as any);\r\n\r\n    const heldLock = this.heldLocks.get(port as SendPort);\r\n    heldLock?.resolve();\r\n\r\n    const error = makeError('PORT_DISCONNECTED');\r\n    for(const id in this.awaiting) {\r\n      const task = this.awaiting[id];\r\n      if(task.port === port) {\r\n        task.reject(error);\r\n        delete this.awaiting[id];\r\n      }\r\n    }\r\n  }\r\n\r\n  protected postMessage(port: SendPort | SendPort[], task: Task) {\r\n    const ports = Array.isArray(port) ? port : (port ? [port] : this.sendPorts);\r\n    ports.forEach((port) => {\r\n      if(import.meta.env.MODE === 'test') {\r\n        return;\r\n      }\r\n\r\n      // try {\r\n      //   const perf = performance.now();\r\n      //   const clone = structuredClone(task); clone;\r\n      //   this.log('postMessage clone time',\r\n      //     task.type,\r\n      //     performance.now() - perf,\r\n      //     task.type === 'batch' ? task.payload.length : undefined\r\n      //   );\r\n      // } catch(err) {\r\n      //   console.error('postMessage clone error', err);\r\n      // }\r\n\r\n      port.postMessage(task, task.transfer as any);\r\n    });\r\n  }\r\n\r\n  protected onMessage = (event: MessageEvent) => {\r\n    const task: Task = event.data;\r\n    // this.log('got message', task);\r\n\r\n    const source: MessageEventSource = event.source || event.currentTarget as any; // can have no source\r\n\r\n    // @ts-ignore\r\n    this.processTaskMap[task.type](task, source, event);\r\n  };\r\n\r\n  protected async releasePending() {\r\n    // return;\r\n\r\n    if(/* !this.listenPorts.length || !this.sendPorts.length ||  */this.releasingPending) {\r\n      return;\r\n    }\r\n\r\n    this.releasingPending = true;\r\n    // const perf = performance.now();\r\n\r\n    if(USE_BATCHING) {\r\n      await Promise.resolve();\r\n    }\r\n    // await pause(0);\r\n\r\n    this.debug && this.log.debug('releasing tasks, length:', this.pending.size/* , performance.now() - perf */);\r\n\r\n    this.pending.forEach((portTasks, port) => {\r\n      let tasks: Task[] = portTasks;\r\n      if(USE_BATCHING) {\r\n        let batchTask: BatchTask;\r\n        tasks = [];\r\n        portTasks.forEach((task) => {\r\n          if(task.transfer) {\r\n            batchTask = undefined;\r\n            tasks.push(task);\r\n          } else {\r\n            if(!batchTask) {\r\n              batchTask = this.createTask('batch', []);\r\n              tasks.push(batchTask);\r\n            }\r\n\r\n            batchTask.payload.push(task);\r\n          }\r\n        });\r\n      }\r\n\r\n      const ports = port ? [port] : this.sendPorts;\r\n      if(!ports.length) {\r\n        return;\r\n      }\r\n\r\n      tasks.forEach((task) => {\r\n        // if(USE_BATCHING && task.type === 'batch') {\r\n        //   this.log(`batching ${task.payload.length} tasks`);\r\n        // }\r\n\r\n        try {\r\n          // if(IS_SERVICE_WORKER && !port) {\r\n          //   notifyAll(task);\r\n          // } else {\r\n          this.postMessage(ports, task);\r\n          // }\r\n        } catch(err) {\r\n          this.log.error('postMessage error:', err, task, ports);\r\n        }\r\n      });\r\n\r\n      this.pending.delete(port);\r\n    });\r\n\r\n    this.debug && this.log.debug('released tasks');\r\n\r\n    this.releasingPending = false;\r\n  }\r\n\r\n  protected processResultTask = (task: ResultTask) => {\r\n    const {taskId, result, error} = task.payload;\r\n    const deferred = this.awaiting[taskId];\r\n    if(!deferred) {\r\n      return;\r\n    }\r\n\r\n    this.debug && this.log.debug('done', deferred.taskType, result, error);\r\n    'error' in task.payload ? deferred.reject(error) : deferred.resolve(result);\r\n    delete this.awaiting[taskId];\r\n  };\r\n\r\n  protected processAckTask = (task: AckTask) => {\r\n    const payload = task.payload;\r\n    const deferred = this.awaiting[payload.taskId];\r\n    if(!deferred) {\r\n      return;\r\n    }\r\n\r\n    // * will finish the init promise with incoming result\r\n    const previousResolve: (acked: AckedResult<any>) => void = deferred.resolve;\r\n    // const previousReject = deferred.reject;\r\n\r\n    // if(payload.cached) {\r\n    //   if('result' in payload) {\r\n    //     previousResolve({\r\n    //       cached: true,\r\n    //       result: payload.result\r\n    //     });\r\n    //   } else {\r\n    //     previousReject(payload.error);\r\n    //   }\r\n    // } else {\r\n    //   const ret: AckedResult<any> = {\r\n    //     cached: false,\r\n    //     result: new Promise((resolve, reject) => {\r\n    //       deferred.resolve = resolve;\r\n    //       deferred.reject = reject;\r\n    //     })\r\n    //   };\r\n\r\n    //   previousResolve(ret);\r\n    // }\r\n\r\n    const ret: AckedResult<any> = {\r\n      cached: payload.cached,\r\n      result: payload.cached ? ('result' in payload ? Promise.resolve(payload.result) : Promise.reject(payload.error)) : new Promise((resolve, reject) => {\r\n        deferred.resolve = resolve;\r\n        deferred.reject = reject;\r\n      })\r\n    };\r\n\r\n    previousResolve(ret);\r\n\r\n    if(payload.cached) {\r\n      delete this.awaiting[payload.taskId];\r\n    }\r\n  };\r\n\r\n  protected processPingTask = (task: PingTask, source: MessageEventSource, event: MessageEvent) => {\r\n    this.pushTask(this.createTask('pong', undefined), event.source);\r\n  };\r\n\r\n  protected processPongTask = (task: PongTask, source: MessageEventSource, event: MessageEvent) => {\r\n    const pingResolve = this.pingResolves.get(source);\r\n    if(pingResolve) {\r\n      this.pingResolves.delete(source);\r\n      pingResolve();\r\n    }\r\n  };\r\n\r\n  protected processCloseTask = (task: CloseTask, source: MessageEventSource, event: MessageEvent) => {\r\n    this.detachPort(source);\r\n  };\r\n\r\n  protected processBatchTask = (task: BatchTask, source: MessageEventSource, event: MessageEvent) => {\r\n    if(!USE_BATCHING) {\r\n      return;\r\n    }\r\n\r\n    const newEvent: MessageEvent = {data: event.data, source: event.source, currentTarget: event.currentTarget} as any;\r\n    task.payload.forEach((task) => {\r\n      // @ts-ignore\r\n      newEvent.data = task;\r\n      this.onMessage(newEvent);\r\n    });\r\n  };\r\n\r\n  // * it's just an 'open' callback, DO NOT attach port from here\r\n  // protected processOpenTask = (task: OpenTask, source: MessageEventSource, event: MessageEvent) => {\r\n  //   this.onPortConnect?.(source);\r\n  // };\r\n\r\n  protected processLockTask = (task: LockTask, source: MessageEventSource, event: MessageEvent) => {\r\n    const id = task.payload;\r\n    if(this.requestedLocks.has(id)) {\r\n      return;\r\n    }\r\n\r\n    this.requestedLocks.set(id, source);\r\n    navigator.locks.request(id, () => {\r\n      this.processCloseTask(undefined, source, undefined);\r\n      this.requestedLocks.delete(id);\r\n    });\r\n  };\r\n\r\n  protected processInvokeTask = async(task: InvokeTask, source: MessageEventSource, event: MessageEvent) => {\r\n    const id = task.id;\r\n    const innerTask = task.payload;\r\n\r\n    let resultTaskPayload: ResultTask['payload'];\r\n    let resultTask: ResultTask, ackTask: AckTask;\r\n    if(!innerTask.void) {\r\n      resultTaskPayload = {taskId: id};\r\n      resultTask = this.createTask('result', resultTaskPayload);\r\n    }\r\n\r\n    if(innerTask.withAck) {\r\n      ackTask = this.createTask('ack', {\r\n        taskId: id,\r\n        cached: true\r\n      });\r\n    }\r\n\r\n    let isPromise: boolean;\r\n\r\n    try {\r\n      const listeners = this.listeners[innerTask.type];\r\n      if(!listeners?.size) {\r\n        throw new Error('no listener');\r\n      }\r\n\r\n      const listener = listeners.values().next().value;\r\n\r\n      // @ts-ignore\r\n      let result = this.invokeListenerCallback(innerTask.type, listener, innerTask.payload, source, event);\r\n      if(innerTask.void) {\r\n        return;\r\n      }\r\n\r\n      isPromise = result instanceof Promise;\r\n\r\n      if(ackTask) {\r\n        const cached = !isPromise;\r\n        ackTask.payload.cached = cached;\r\n        if(cached) ackTask.payload.result = result;\r\n        this.pushTask(ackTask, source);\r\n\r\n        if(cached) {\r\n          return;\r\n        }\r\n      }\r\n\r\n      if(isPromise) {\r\n        result = await result;\r\n      }\r\n\r\n      if(result instanceof SuperMessagePort.TransferableResult) {\r\n        resultTask.transfer = result.transferables;\r\n        result = result.value;\r\n      }\r\n\r\n      resultTaskPayload.result = result;\r\n    } catch(error) {\r\n      this.log.error('worker task error:', error, task);\r\n      if(innerTask.void) {\r\n        return;\r\n      }\r\n\r\n      if(ackTask && ackTask.payload.cached) {\r\n        ackTask.payload.error = error;\r\n        this.pushTask(ackTask, source);\r\n        return;\r\n      }\r\n\r\n      resultTaskPayload.error = error;\r\n    }\r\n\r\n    this.pushTask(resultTask, source);\r\n  };\r\n\r\n  protected createTask<T extends Task['type'], K extends Task = Parameters<TaskMap[T]>[0]>(type: T, payload: K['payload'], transfer?: Transferable[]): K {\r\n    return {\r\n      type,\r\n      payload,\r\n      id: this.taskId++,\r\n      transfer\r\n    } as K;\r\n  }\r\n\r\n  protected createInvokeTask(type: string, payload: any, withAck?: boolean, _void?: boolean, transfer?: Transferable[]): InvokeTask {\r\n    return this.createTask('invoke', {\r\n      type,\r\n      payload,\r\n      withAck,\r\n      void: _void\r\n    }, transfer);\r\n  }\r\n\r\n  protected pushTask(task: Task, port?: SendPort) {\r\n    let tasks = this.pending.get(port);\r\n    if(!tasks) {\r\n      this.pending.set(port, tasks = []);\r\n    }\r\n\r\n    tasks.push(task);\r\n    this.releasePending();\r\n  }\r\n\r\n  public invokeVoid<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], port?: SendPort, transfer?: Transferable[]) {\r\n    const task = this.createInvokeTask(type as string, payload, undefined, true, transfer);\r\n    this.pushTask(task, port);\r\n  }\r\n\r\n  public invoke<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], withAck?: false, port?: SendPort, transfer?: Transferable[], timeout?: number): Promise<Awaited<ReturnType<Send[T]>>>;\r\n  public invoke<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], withAck?: true, port?: SendPort, transfer?: Transferable[], timeout?: number): Promise<AckedResult<Awaited<ReturnType<Send[T]>>>>;\r\n  public invoke<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], withAck?: boolean, port?: SendPort, transfer?: Transferable[], timeout?: number) {\r\n    this.debug && this.log.debug('start', type, payload);\r\n\r\n    let task: InvokeTask;\r\n    const promise = new Promise<Awaited<ReturnType<Send[T]>>>((resolve, reject) => {\r\n      task = this.createInvokeTask(type as string, payload, withAck, undefined, transfer);\r\n      this.awaiting[task.id] = {resolve, reject, taskType: type as string, port};\r\n      this.pushTask(task, port);\r\n    });\r\n\r\n    if(timeout) {\r\n      const {reject} = this.awaiting[task.id];\r\n      setTimeout(() => {\r\n        reject(makeError('TIMEOUT'));\r\n      }, timeout);\r\n    }\r\n\r\n    if(IS_WORKER/*  || true */) {\r\n      promise.finally(() => {\r\n        clearInterval(interval);\r\n      });\r\n\r\n      const interval = ctx.setInterval(() => {\r\n        this.log.error('task still has no result', task, port);\r\n      }, IS_WORKER ? 60e3 : 5e3);\r\n    } else if(false) {\r\n      // let timedOut = false;\r\n      const startTime = Date.now();\r\n      promise.finally(() => {\r\n        const elapsedTime = Date.now() - startTime;\r\n        if(elapsedTime >= TIMEOUT) {\r\n          this.log.error(`task was processing ${Date.now() - startTime}ms`, task.payload.payload, port);\r\n        }/*  else {\r\n          clearTimeout(timeout);\r\n        } */\r\n      });\r\n\r\n      const TIMEOUT = 10;\r\n      // const timeout = ctx.setTimeout(() => {\r\n      //   timedOut = true;\r\n      //   // this.log.error(`task is processing more than ${TIMEOUT} milliseconds`, task, port);\r\n      // }, TIMEOUT);\r\n    }\r\n\r\n    return promise;\r\n  }\r\n\r\n  public invokeExceptSource<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], source?: SendPort) {\r\n    const ports = this.sendPorts.slice();\r\n    indexOfAndSplice(ports, source);\r\n\r\n    ports.forEach((target) => {\r\n      this.invokeVoid(type, payload, target);\r\n    });\r\n  }\r\n\r\n  public async invokeExceptSourceAsync<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], source?: SendPort) {\r\n    const ports = this.sendPorts.slice();\r\n    indexOfAndSplice(ports, source);\r\n\r\n    await Promise.all(ports.map((target) => this.invoke(type, payload, undefined, target)));\r\n  }\r\n}\r\n\r\nnamespace SuperMessagePort {\r\n  export type TransferableResultValue<T> = T extends MaybePromise<TransferableResult<infer U>> ? U : T;\r\n\r\n  export class TransferableResult<T> {\r\n    constructor(public value: T, public transferables: Transferable[]) { }\r\n  };\r\n}\r\n\r\nexport default SuperMessagePort;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport {CryptoMethods} from './crypto_methods';\r\nimport SuperMessagePort from '../mtproto/superMessagePort';\r\nimport {MOUNT_CLASS_TO} from '../../config/debug';\r\nimport {IS_WORKER} from '../../helpers/context';\r\n\r\n\r\ntype CryptoEvent = {\r\n  invoke: <T extends keyof CryptoMethods>(payload: {method: T, args: Parameters<CryptoMethods[T]>}) =>\r\n    SuperMessagePort.TransferableResultValue<ReturnType<CryptoMethods[T]>>,\r\n  port: (payload: void, source: MessageEventSource, event: MessageEvent) => void,\r\n  terminate: () => void\r\n};\r\n\r\nexport class CryptoMessagePort<Master extends boolean = false> extends SuperMessagePort<CryptoEvent, CryptoEvent, Master> {\r\n  private lastIndex: number;\r\n\r\n  constructor() {\r\n    super('CRYPTO');\r\n    this.lastIndex = -1;\r\n  }\r\n\r\n  // TODO: Transfer transferables on result tasks?\r\n  public invokeCryptoNew<T extends keyof CryptoMethods>({method, args, transfer}: {\r\n    method: T,\r\n    args: Parameters<CryptoMethods[T]>,\r\n    transfer?: Transferable[]\r\n  }): Promise<Awaited<SuperMessagePort.TransferableResultValue<ReturnType<CryptoMethods[T]>>>> {\r\n    const payload = {method, args};\r\n    const listeners = this.listeners['invoke'];\r\n    if(listeners?.size) { // already in worker\r\n      // try {\r\n      let result: any = listeners.values().next().value.callback(payload);\r\n      if(!IS_WORKER && !(result instanceof Promise)) {\r\n        result = Promise.resolve(result);\r\n      }\r\n\r\n      return result;\r\n      // } catch(err) {\r\n      //   return Promise.reject(err);\r\n      // }\r\n    }\r\n\r\n    const sendPortIndex = method === 'aes-encrypt' || method === 'aes-decrypt' ?\r\n      this.lastIndex = (this.lastIndex + 1) % this.sendPorts.length :\r\n      0;\r\n    // @ts-ignore\r\n    return this.invoke('invoke', payload, undefined, this.sendPorts[sendPortIndex], transfer);\r\n  }\r\n\r\n  public invokeCrypto<T extends keyof CryptoMethods>(method: T, ...args: Parameters<CryptoMethods[T]>) {\r\n    return this.invokeCryptoNew({method, args});\r\n  }\r\n\r\n  public sendToOnePort(port: MessagePort) {\r\n    this.invokeVoid('port', undefined, this.sendPorts[0], [port]);\r\n  }\r\n}\r\n\r\nconst cryptoMessagePort = new CryptoMessagePort<false>();\r\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.cryptoMessagePort = cryptoMessagePort);\r\nexport default cryptoMessagePort;\r\n","import deferredPromise from '../../helpers/cancellablePromise';\r\n\r\nimport StaticUtilityClass from '../staticUtilityClass';\r\n\r\n\r\nexport default class DeferredIsUsingPasscode extends StaticUtilityClass {\r\n  private static deferred = deferredPromise<void>();\r\n  private static value: boolean;\r\n\r\n  public static resolveDeferred(value: boolean) {\r\n    this.value = value;\r\n    this.deferred?.resolve();\r\n    this.deferred = undefined;\r\n  }\r\n\r\n  public static async isUsingPasscode() {\r\n    if(this.deferred) await this.deferred;\r\n\r\n    if(typeof this.value !== 'boolean') throw new Error('Is using passcode is not boolean WTF?');\r\n\r\n    return this.value;\r\n  }\r\n\r\n  /**\r\n   * Mainly for Service worker\r\n   */\r\n  public static resetDeferred() {\r\n    this.value = undefined;\r\n    this.deferred = deferredPromise();\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport blobConstruct from '../../helpers/blob/blobConstruct';\r\nimport StreamWriter from './streamWriter';\r\n\r\nexport default class MemoryWriter implements StreamWriter {\r\n  private bytes: Uint8Array;\r\n\r\n  constructor(\r\n    private mimeType: string,\r\n    private size: number,\r\n    private saveFileCallback?: (blob: Blob) => Promise<Blob>\r\n  ) {\r\n    this.bytes = new Uint8Array(size);\r\n  }\r\n\r\n  public async write(part: Uint8Array, offset: number) {\r\n    // sometimes file size can be bigger than the prov\r\n    const endOffset = offset + part.byteLength;\r\n    if(endOffset > this.bytes.byteLength) {\r\n      const newBytes = new Uint8Array(endOffset);\r\n      newBytes.set(this.bytes, 0);\r\n      this.bytes = newBytes;\r\n    }\r\n\r\n    this.bytes.set(part, offset);\r\n  };\r\n\r\n  public truncate() {\r\n    this.bytes = new Uint8Array();\r\n  }\r\n\r\n  public trim(size: number) {\r\n    this.bytes = this.bytes.slice(0, size);\r\n  }\r\n\r\n  public finalize(saveToStorage = true) {\r\n    const blob = blobConstruct(this.bytes, this.mimeType);\r\n\r\n    if(saveToStorage && this.saveFileCallback) {\r\n      this.saveFileCallback(blob);\r\n    }\r\n\r\n    return blob;\r\n  }\r\n\r\n  public getParts() {\r\n    return this.bytes;\r\n  }\r\n\r\n  public replaceParts(parts: Uint8Array) {\r\n    this.bytes = parts;\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport Modes from '../../config/modes';\r\nimport blobConstruct from '../../helpers/blob/blobConstruct';\r\nimport deferredPromise, {CancellablePromise} from '../../helpers/cancellablePromise';\r\nimport makeError from '../../helpers/makeError';\r\nimport readBlobAsUint8Array from '../../helpers/blob/readBlobAsUint8Array';\r\n\r\nimport EncryptionKeyStore from '../passcode/keyStore';\r\nimport cryptoMessagePort from '../crypto/cryptoMessagePort';\r\nimport DeferredIsUsingPasscode from '../passcode/deferredIsUsingPasscode';\r\n\r\nimport MemoryWriter from './memoryWriter';\r\nimport FileStorage from './fileStorage';\r\n\r\n\r\ntype CacheStorageDbConfigEntry = {\r\n  encryptable: boolean;\r\n};\r\n\r\nconst cacheStorageDbConfig = {\r\n  cachedAssets: {\r\n    encryptable: false\r\n  },\r\n  cachedBackgrounds: {\r\n    encryptable: false\r\n  },\r\n  cachedFiles: {\r\n    encryptable: true\r\n  },\r\n  cachedStreamChunks: {\r\n    encryptable: true\r\n  },\r\n  cachedHlsQualityFiles: {\r\n    encryptable: true\r\n  },\r\n  cachedHlsStreamChunks: {\r\n    encryptable: true\r\n  }\r\n} satisfies Record<string, CacheStorageDbConfigEntry>;\r\n\r\nexport type CacheStorageDbName = keyof typeof cacheStorageDbConfig;\r\n\r\nexport default class CacheStorageController implements FileStorage {\r\n  private static STORAGES: CacheStorageController[] = [];\r\n  private openDbPromise: Promise<Cache>;\r\n  private config: CacheStorageDbConfigEntry;\r\n\r\n  private useStorage = true;\r\n\r\n  private static disabledPromise: CancellablePromise<void>;\r\n\r\n  // private log: ReturnType<typeof logger> = logger('CS');\r\n\r\n  constructor(private dbName: CacheStorageDbName) {\r\n    if(Modes.test) {\r\n      this.dbName += '_test';\r\n    }\r\n\r\n    if(CacheStorageController.STORAGES.length) {\r\n      this.useStorage = CacheStorageController.STORAGES[0].useStorage;\r\n    }\r\n\r\n    this.config = Object.entries(cacheStorageDbConfig).find(([name]) => name === dbName)?.[1];\r\n\r\n    this.openDatabase();\r\n    CacheStorageController.STORAGES.push(this);\r\n  }\r\n\r\n  get isEncryptable() {\r\n    return this.config?.encryptable;\r\n  }\r\n\r\n  private static async encrypt(blob: Blob) {\r\n    const key = await EncryptionKeyStore.get();\r\n    const dataAsBuffer = await readBlobAsUint8Array(blob);\r\n\r\n    const type = blob.type;\r\n\r\n    const result = await cryptoMessagePort.invokeCryptoNew({\r\n      method: 'aes-local-encrypt',\r\n      args: [{\r\n        key,\r\n        data: dataAsBuffer\r\n      }],\r\n      transfer: [dataAsBuffer.buffer]\r\n    });\r\n\r\n    return new Blob([result], {type});\r\n  }\r\n\r\n  private static async decrypt(blob: Blob) {\r\n    const key = await EncryptionKeyStore.get();\r\n    const dataAsBuffer = await readBlobAsUint8Array(blob);\r\n\r\n    const type = blob.type;\r\n\r\n    const result = await cryptoMessagePort.invokeCryptoNew({\r\n      method: 'aes-local-decrypt',\r\n      args: [{\r\n        key,\r\n        encryptedData: dataAsBuffer\r\n      }],\r\n      transfer: [dataAsBuffer.buffer]\r\n    });\r\n\r\n    return new Blob([result], {type});\r\n  }\r\n\r\n  private async waitToEnable() {\r\n    if(CacheStorageController.disabledPromise) await CacheStorageController.disabledPromise;\r\n  }\r\n\r\n  private openDatabase(): Promise<Cache> {\r\n    return this.openDbPromise ?? (this.openDbPromise = caches.open(this.dbName));\r\n  }\r\n\r\n  public delete(entryName: string) {\r\n    return this.timeoutOperation((cache) => cache.delete('/' + entryName));\r\n  }\r\n\r\n  /**\r\n   * Requires reconnection in order to save to disc again\r\n   */\r\n  public deleteAll() {\r\n    this.openDbPromise = undefined;\r\n    return caches.delete(this.dbName);\r\n  }\r\n\r\n  public reset() {\r\n    this.openDbPromise = undefined;\r\n  }\r\n\r\n  public async has(entryName: string) {\r\n    const response = await this.timeoutOperation((cache) => cache.match('/' + entryName));\r\n    return !!response;\r\n  }\r\n\r\n  public async get(entryName: string) {\r\n    await this.waitToEnable();\r\n\r\n    const response = await this.timeoutOperation((cache) => cache.match('/' + entryName));\r\n    if(!response) return undefined;\r\n\r\n    if(this.config?.encryptable && await DeferredIsUsingPasscode.isUsingPasscode()) {\r\n      return new Response(\r\n        await CacheStorageController.decrypt(await response.blob()),\r\n        {\r\n          headers: response.headers,\r\n          status: response.status,\r\n          statusText: response.statusText\r\n        }\r\n      );\r\n    }\r\n\r\n    return response;\r\n  }\r\n\r\n  public async save(entryName: string, response: Response) {\r\n    await this.waitToEnable();\r\n\r\n    let result = response;\r\n\r\n    if(this.config?.encryptable && await DeferredIsUsingPasscode.isUsingPasscode()) {\r\n      result = new Response(\r\n        await CacheStorageController.encrypt(await response.blob()),\r\n        {\r\n          headers: response.headers,\r\n          status: response.status,\r\n          statusText: response.statusText\r\n        }\r\n      );\r\n    }\r\n\r\n    return this.timeoutOperation((cache) => cache.put('/' + entryName, result));\r\n  }\r\n\r\n  public getFile(fileName: string, method: 'blob' | 'json' | 'text' = 'blob'): Promise<any> {\r\n    // if(method === 'blob') {\r\n    //   return Promise.reject(makeError('NO_ENTRY_FOUND'));\r\n    // }\r\n\r\n    // const str = `get fileName: ${fileName}`;\r\n    // console.time(str);\r\n    return this.get(fileName).then((response) => {\r\n      if(!response) {\r\n        // console.warn('getFile:', response, fileName);\r\n        throw makeError('NO_ENTRY_FOUND');\r\n      }\r\n\r\n      const promise = response[method]();\r\n      // promise.then(() => {\r\n      //   console.timeEnd(str);\r\n      // });\r\n      return promise;\r\n    });\r\n  }\r\n\r\n  public saveFile(fileName: string, blob: Blob | Uint8Array) {\r\n    // return Promise.resolve(blobConstruct([blob]));\r\n    if(!(blob instanceof Blob)) {\r\n      blob = blobConstruct(blob);\r\n    }\r\n\r\n    const response = new Response(blob, {\r\n      headers: {\r\n        'Content-Length': '' + blob.size\r\n      }\r\n    });\r\n\r\n    return this.save(fileName, response).then(() => blob as Blob);\r\n  }\r\n\r\n  public timeoutOperation<T>(callback: (cache: Cache) => Promise<T>) {\r\n    if(!this.useStorage) {\r\n      return Promise.reject(makeError('STORAGE_OFFLINE'));\r\n    }\r\n\r\n    return new Promise<T>(async(resolve, reject) => {\r\n      let rejected = false;\r\n      const timeout = setTimeout(() => {\r\n        reject();\r\n        // console.warn('CACHESTORAGE TIMEOUT');\r\n        rejected = true;\r\n      }, 15e3);\r\n\r\n      try {\r\n        const cache = await this.openDatabase();\r\n        if(!cache) {\r\n          this.useStorage = false;\r\n          this.openDbPromise = undefined;\r\n          throw 'no cache?';\r\n        }\r\n\r\n        const res = await callback(cache);\r\n\r\n        if(rejected) return;\r\n        resolve(res);\r\n      } catch(err) {\r\n        reject(err);\r\n      }\r\n\r\n      clearTimeout(timeout);\r\n    });\r\n  }\r\n\r\n  public prepareWriting(fileName: string, fileSize: number, mimeType: string) {\r\n    return {\r\n      deferred: deferredPromise<Blob>(),\r\n      getWriter: () => {\r\n        const writer = new MemoryWriter(mimeType, fileSize, (blob) => {\r\n          return this.saveFile(fileName, blob).catch(() => blob);\r\n        });\r\n\r\n        return writer;\r\n      }\r\n    };\r\n  }\r\n\r\n  public static toggleStorage(enabled: boolean, _clearWrite: boolean) {\r\n    this.STORAGES.forEach((storage) => {\r\n      storage.useStorage = enabled;\r\n    });\r\n    return Promise.resolve();\r\n  }\r\n\r\n  public static async deleteAllStorages() {\r\n    const storageNames = Object.keys(cacheStorageDbConfig) as CacheStorageDbName[];\r\n\r\n    await Promise.all(storageNames.map(async(storageName) => {\r\n      const storage = new CacheStorageController(storageName);\r\n      await storage.deleteAll();\r\n    }));\r\n  }\r\n\r\n\r\n  public static temporarilyToggle(enabled: boolean) {\r\n    if(enabled) {\r\n      this.disabledPromise?.resolve();\r\n      this.disabledPromise = undefined;\r\n    } else {\r\n      this.disabledPromise = deferredPromise();\r\n    }\r\n  }\r\n\r\n  public static async clearEncryptableStorages() {\r\n    const encryptableStorageNames = Object.entries(cacheStorageDbConfig)\r\n    .filter(([, {encryptable}]) => encryptable)\r\n    .map(([name]) => name) as CacheStorageDbName[];\r\n\r\n    try {\r\n      await Promise.all(encryptableStorageNames.map(async(storageName) => {\r\n        // Make sure we have all encryptable storages in current thread, can't get from .STORAGES\r\n        const storage = new CacheStorageController(storageName);\r\n\r\n        await storage.deleteAll();\r\n\r\n        // Don't redo to this, as if the cache is too large, it will throw\r\n        // await storage.timeoutOperation(async(cache) => {\r\n        //   const keys = await cache.keys();\r\n        //   await Promise.all(keys.map(request => cache.delete(request)));\r\n        // });\r\n      }));\r\n    } catch(e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  public static getOpenEncryptableStorages() {\r\n    return this.STORAGES.filter(storage => storage.isEncryptable);\r\n  }\r\n\r\n  public static async resetOpenEncryptableCacheStorages() {\r\n    this.getOpenEncryptableStorages().forEach(async(storage) => {\r\n      storage.reset();\r\n    });\r\n  }\r\n}\r\n","export default function timeout(delay: number): Promise<Response> {\r\n  return new Promise(((resolve) => {\r\n    setTimeout(() => {\r\n      resolve(new Response('', {\r\n        status: 408,\r\n        statusText: 'Request timed out.'\r\n      }));\r\n    }, delay);\r\n  }));\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport readBlobAsUint8Array from '../../helpers/blob/readBlobAsUint8Array';\r\nimport bufferConcats from '../../helpers/bytes/bufferConcats';\r\nimport deferredPromise, {CancellablePromise} from '../../helpers/cancellablePromise';\r\nimport tryPatchMp4 from '../../helpers/fixChromiumMp4';\r\nimport debounce, {DebounceReturnType} from '../../helpers/schedulers/debounce';\r\nimport pause from '../../helpers/schedulers/pause';\r\nimport {InputFileLocation} from '../../layer';\r\nimport {getCurrentAccountFromURL} from '../accounts/getCurrentAccountFromURL';\r\nimport {ActiveAccountNumber} from '../accounts/types';\r\nimport CacheStorageController from '../files/cacheStorage';\r\nimport {DownloadOptions, MyUploadFile} from '../mtproto/apiFileManager';\r\nimport {getMtprotoMessagePort, log, serviceMessagePort} from './index.service';\r\nimport {ServiceRequestFilePartTaskPayload} from './serviceMessagePort';\r\nimport timeout from './timeout';\r\n\r\nconst ctx = self as any as ServiceWorkerGlobalScope;\r\n\r\nconst deferredPromises: Map<MessagePort, {[taskId: string]: CancellablePromise<MyUploadFile>}> = new Map();\r\nconst cacheStorage = new CacheStorageController('cachedStreamChunks');\r\nconst CHUNK_TTL = 86400;\r\nconst CHUNK_CACHED_TIME_HEADER = 'Time-Cached';\r\nconst USE_CACHE = true;\r\nconst TEST_SLOW = false;\r\nconst PRELOAD_SIZE = 20 * 1024 * 1024;\r\n\r\nconst clearOldChunks = () => {\r\n  return cacheStorage.timeoutOperation((cache) => {\r\n    return cache.keys().then((requests) => {\r\n      const filtered: Map<DocId, Request> = new Map();\r\n      const timestamp = Date.now() / 1000 | 0;\r\n      for(const request of requests) {\r\n        const match = request.url.match(/\\/(\\d+?)\\?/);\r\n        if(match && !filtered.has(match[1])) {\r\n          filtered.set(match[1], request);\r\n        }\r\n      }\r\n\r\n      const promises: Promise<any>[] = [];\r\n      for(const [id, request] of filtered) {\r\n        const promise = cache.match(request).then((response) => {\r\n          if((+response.headers.get(CHUNK_CACHED_TIME_HEADER) + CHUNK_TTL) <= timestamp) {\r\n            log('will delete stream chunk:', id);\r\n            return cache.delete(request, {ignoreSearch: true, ignoreVary: true});\r\n          }\r\n        });\r\n\r\n        promises.push(promise);\r\n      }\r\n\r\n      return Promise.all(promises);\r\n    });\r\n  });\r\n};\r\n\r\nsetInterval(clearOldChunks, 1800e3);\r\nsetInterval(() => {\r\n  const mtprotoMessagePort = getMtprotoMessagePort();\r\n  for(const [messagePort, promises] of deferredPromises) {\r\n    if(messagePort === mtprotoMessagePort) {\r\n      continue;\r\n    }\r\n\r\n    for(const taskId in promises) {\r\n      const promise = promises[taskId];\r\n      promise.reject();\r\n    }\r\n\r\n    deferredPromises.delete(messagePort);\r\n  }\r\n}, 120e3);\r\n\r\ntype StreamRange = [number, number];\r\ntype StreamId = `${ActiveAccountNumber}-${DocId}`;\r\n\r\nconst streams: Map<StreamId, Stream> = new Map();\r\n(ctx as any).streams = streams;\r\nclass Stream {\r\n  private destroyDebounced: DebounceReturnType<() => void>;\r\n  private id: StreamId;\r\n  private limitPart: number;\r\n  private loadedOffsets: Set<number> = new Set();\r\n  private shouldPatchMp4: boolean | number;\r\n  private inUse: number;\r\n\r\n  constructor(private info: DownloadOptions) {\r\n    this.id = Stream.getId(info);\r\n    streams.set(this.id, this);\r\n    this.inUse = 0;\r\n\r\n    // ! если грузить очень большое видео чанками по 512Кб в мобильном Safari, то стрим не запустится\r\n    this.limitPart = info.size > (75 * 1024 * 1024) ? STREAM_CHUNK_UPPER_LIMIT : STREAM_CHUNK_MIDDLE_LIMIT;\r\n    this.destroyDebounced = debounce(this.destroy, 150000, false, true);\r\n  }\r\n\r\n  private destroy = () => {\r\n    this.destroyDebounced.clearTimeout();\r\n    streams.delete(this.id);\r\n    serviceMessagePort.invokeVoid('cancelFilePartRequests', {\r\n      docId: Stream.getDocId(this.info),\r\n      accountNumber: this.info.accountNumber\r\n    }, getMtprotoMessagePort());\r\n  };\r\n\r\n  public toggleInUse = (inUse: boolean) => {\r\n    this.inUse += inUse ? 1 : -1;\r\n    if(!this.inUse) {\r\n      this.destroy();\r\n    }\r\n  };\r\n\r\n  private async requestFilePartFromWorker(alignedOffset: number, limit: number, fromPreload = false) {\r\n    const payload: ServiceRequestFilePartTaskPayload = {\r\n      docId: Stream.getDocId(this.info),\r\n      dcId: this.info.dcId,\r\n      offset: alignedOffset,\r\n      limit,\r\n      accountNumber: this.info.accountNumber\r\n    };\r\n\r\n    const taskId = JSON.stringify(payload);\r\n\r\n    const mtprotoMessagePort = getMtprotoMessagePort();\r\n    let promises = deferredPromises.get(mtprotoMessagePort);\r\n    if(!promises) {\r\n      deferredPromises.set(mtprotoMessagePort, promises = {});\r\n    }\r\n\r\n    let deferred = promises[taskId];\r\n    if(deferred) {\r\n      return deferred.then((uploadFile) => uploadFile.bytes);\r\n    }\r\n\r\n    this.loadedOffsets.add(alignedOffset);\r\n\r\n    deferred = promises[taskId] = deferredPromise();\r\n\r\n    serviceMessagePort.invoke('requestFilePart', payload, undefined, mtprotoMessagePort, undefined, 60e3)\r\n    .then(deferred.resolve.bind(deferred), deferred.reject.bind(deferred)).finally(() => {\r\n      if(promises[taskId] === deferred) {\r\n        delete promises[taskId];\r\n\r\n        if(!Object.keys(promises).length) {\r\n          deferredPromises.delete(mtprotoMessagePort);\r\n        }\r\n      }\r\n    });\r\n\r\n    const bytesPromise = deferred.then((uploadFile) => uploadFile.bytes);\r\n\r\n    if(USE_CACHE) {\r\n      this.saveChunkToCache(bytesPromise, alignedOffset, limit);\r\n      !fromPreload && this.preloadChunks(alignedOffset, PRELOAD_SIZE);\r\n    }\r\n\r\n    return bytesPromise;\r\n  }\r\n\r\n  private requestFilePartFromCache(alignedOffset: number, limit: number, fromPreload?: boolean) {\r\n    if(!USE_CACHE) {\r\n      return Promise.resolve();\r\n    }\r\n\r\n    const key = this.getChunkKey(alignedOffset, limit);\r\n    return cacheStorage.getFile(key).then((blob: Blob) => {\r\n      return fromPreload ? new Uint8Array() : readBlobAsUint8Array(blob);\r\n    }, (error: ApiError) => {\r\n      if(error.type === 'NO_ENTRY_FOUND') {\r\n        return;\r\n      }\r\n    });\r\n  }\r\n\r\n  private requestFilePart(alignedOffset: number, limit: number, fromPreload?: boolean) {\r\n    const promise = this.requestFilePartFromCache(alignedOffset, limit, fromPreload).then((bytes) => {\r\n      return bytes || this.requestFilePartFromWorker(alignedOffset, limit, fromPreload);\r\n    });\r\n\r\n    if(TEST_SLOW) {\r\n      return promise.then((bytes) => {\r\n        log.warn('delaying chunk', alignedOffset, limit);\r\n        return pause(3000).then(() => {\r\n          log.warn('releasing chunk', alignedOffset, limit);\r\n          return bytes;\r\n        });\r\n      });\r\n    }\r\n\r\n    return promise;\r\n  }\r\n\r\n  private saveChunkToCache(deferred: Promise<Uint8Array>, alignedOffset: number, limit: number) {\r\n    return deferred.then((bytes) => {\r\n      const key = this.getChunkKey(alignedOffset, limit);\r\n      const response = new Response(bytes, {\r\n        headers: {\r\n          'Content-Length': '' + bytes.length,\r\n          'Content-Type': 'application/octet-stream',\r\n          [CHUNK_CACHED_TIME_HEADER]: '' + (Date.now() / 1000 | 0)\r\n        }\r\n      });\r\n\r\n      return cacheStorage.save(key, response);\r\n    });\r\n  }\r\n\r\n  private preloadChunk(offset: number) {\r\n    if(this.loadedOffsets.has(offset)) {\r\n      return;\r\n    }\r\n\r\n    this.loadedOffsets.add(offset);\r\n    this.requestFilePart(offset, this.limitPart, true);\r\n  }\r\n\r\n  private preloadChunks(offset: number, end: number) {\r\n    if(end > this.info.size) {\r\n      end = this.info.size;\r\n    }\r\n\r\n    if(!offset) { // load last chunk for bounds\r\n      this.preloadChunk(alignOffset(offset, this.limitPart));\r\n    } else { // don't preload next chunks before the start\r\n      for(; offset < end; offset += this.limitPart) {\r\n        this.preloadChunk(offset);\r\n      }\r\n    }\r\n  }\r\n\r\n  public requestRange(range: StreamRange) {\r\n    this.destroyDebounced();\r\n\r\n    const possibleResponse = responseForSafariFirstRange(range, this.info.mimeType, this.info.size);\r\n    if(possibleResponse) {\r\n      return possibleResponse;\r\n    }\r\n\r\n    let [offset, end] = range;\r\n\r\n    /* if(info.size > limitPart && isSafari && offset === limitPart) {\r\n      //end = info.size - 1;\r\n      //offset = info.size - 1 - limitPart;\r\n      offset = info.size - (info.size % limitPart);\r\n    } */\r\n\r\n    const limit = end && end < this.limitPart ? alignLimit(end - offset + 1) : this.limitPart;\r\n    const alignedOffset = alignOffset(offset, limit);\r\n\r\n    if(!end) {\r\n      end = Math.min(offset + limit, this.info.size - 1);\r\n    }\r\n\r\n    let overflow: number;\r\n    if(offset !== alignedOffset || end !== (alignedOffset + limit)) {\r\n      overflow = end - alignedOffset - limit + 1;\r\n    }\r\n\r\n    const parts = Promise.all([\r\n      this.requestFilePart(alignedOffset, limit),\r\n      overflow && this.requestFilePart(alignedOffset + limit, limit)\r\n    ]);\r\n\r\n    return parts.then((parts) => {\r\n      let ab = bufferConcats(...parts.filter(Boolean));\r\n      // log.debug('[stream] requestFilePart result:', result);\r\n\r\n      // if(isSafari) {\r\n      if(offset !== alignedOffset || end !== (alignedOffset + limit)) {\r\n        const sliceStart = offset - alignedOffset;\r\n        const sliceEnd = end - alignedOffset + 1;\r\n        ab = ab.slice(sliceStart, sliceEnd);\r\n      }\r\n\r\n      if(this.shouldPatchMp4 === true || this.shouldPatchMp4 === alignedOffset) {\r\n        if(tryPatchMp4(ab)) {\r\n          this.shouldPatchMp4 = alignedOffset;\r\n        }\r\n      }\r\n      // if(this.shouldPatchMp4) {\r\n      //   tryPatchMp4(ab);\r\n      // }\r\n\r\n      const headers: Record<string, string> = {\r\n        'Accept-Ranges': 'bytes',\r\n        'Content-Range': `bytes ${offset}-${offset + ab.byteLength - 1}/${this.info.size || '*'}`,\r\n        'Content-Length': `${ab.byteLength}`,\r\n        'Response-Time': '' + Date.now()\r\n      };\r\n\r\n      if(this.info.mimeType) {\r\n        headers['Content-Type'] = this.info.mimeType;\r\n      }\r\n\r\n      // simulate slow connection\r\n      // setTimeout(() => {\r\n      return new Response(ab, {\r\n        status: 206,\r\n        statusText: 'Partial Content',\r\n        headers\r\n      });\r\n      // }, 2.5e3);\r\n    });\r\n  }\r\n\r\n  private getChunkKey(alignedOffset: number, limit: number) {\r\n    return this.id + '?offset=' + alignedOffset + '&limit=' + limit;\r\n  }\r\n\r\n  public patchChromiumMp4() {\r\n    this.shouldPatchMp4 = true;\r\n  }\r\n\r\n  public static get(info: DownloadOptions) {\r\n    return streams.get(this.getId(info)) ?? new Stream(info);\r\n  }\r\n\r\n  private static getId(info: DownloadOptions): StreamId {\r\n    return `${info.accountNumber}-${this.getDocId(info)}`;\r\n  }\r\n\r\n  private static getDocId(info: DownloadOptions) {\r\n    return (info.location as InputFileLocation.inputDocumentFileLocation).id;\r\n  }\r\n}\r\n\r\nfunction parseInfo(params: string) {\r\n  return JSON.parse(decodeURIComponent(params)) as DownloadOptions;\r\n}\r\n\r\nexport default function onStreamFetch(event: FetchEvent, params: string, search: string) {\r\n  async function performRequest() {\r\n    const range = parseRange(event.request.headers.get('Range'));\r\n    const info = parseInfo(params);\r\n\r\n    const client = await ctx.clients.get(event.clientId);\r\n    // Theoretically should never happen otherwise\r\n    if(client?.type === 'window') info.accountNumber = getCurrentAccountFromURL(client.url);\r\n\r\n    const stream = Stream.get(info);\r\n\r\n    if(search === '_crbug1250841') {\r\n      stream.patchChromiumMp4();\r\n    }\r\n\r\n    return stream.requestRange(range);\r\n  }\r\n\r\n  // log.debug('[stream]', url, offset, end);\r\n\r\n  event.respondWith(Promise.race([\r\n    timeout(45 * 1000),\r\n    performRequest()\r\n  ]));\r\n}\r\n\r\nexport function toggleStreamInUse({url, inUse, accountNumber}: {url: string, inUse: boolean, accountNumber: ActiveAccountNumber}) {\r\n  [url] = url.split('?');\r\n  const needle = 'stream/';\r\n  const index = url.indexOf(needle);\r\n  const info = parseInfo(url.slice(index + needle.length));\r\n  info.accountNumber = accountNumber;\r\n  const stream = Stream.get(info);\r\n  stream.toggleInUse(inUse);\r\n}\r\n\r\nfunction responseForSafariFirstRange(range: StreamRange, mimeType: string, size: number): Response {\r\n  if(range[0] === 0 && range[1] === 1) {\r\n    return new Response(new Uint8Array(2).buffer, {\r\n      status: 206,\r\n      statusText: 'Partial Content',\r\n      headers: {\r\n        'Accept-Ranges': 'bytes',\r\n        'Content-Range': `bytes 0-1/${size || '*'}`,\r\n        'Content-Length': '2',\r\n        'Content-Type': mimeType || 'video/mp4'\r\n      }\r\n    });\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/* const STREAM_CHUNK_UPPER_LIMIT = 256 * 1024;\r\nconst SMALLEST_CHUNK_LIMIT = 256 * 4; */\r\n/* const STREAM_CHUNK_UPPER_LIMIT = 1024 * 1024;\r\nconst SMALLEST_CHUNK_LIMIT = 1024 * 4; */\r\nconst STREAM_CHUNK_MIDDLE_LIMIT = 512 * 1024;\r\nconst STREAM_CHUNK_UPPER_LIMIT = 1024 * 1024;\r\nconst SMALLEST_CHUNK_LIMIT = 512 * 4;\r\n\r\nexport function parseRange(header: string): StreamRange {\r\n  if(!header) return [0, 0];\r\n  const [, chunks] = header.split('=');\r\n  const ranges = chunks.split(', ');\r\n  const [offset, end] = ranges[0].split('-');\r\n\r\n  return [+offset, +end || 0];\r\n}\r\n\r\nfunction alignOffset(offset: number, base = SMALLEST_CHUNK_LIMIT) {\r\n  return offset - (offset % base);\r\n}\r\n\r\nfunction alignLimit(limit: number) {\r\n  return 2 ** Math.ceil(Math.log(limit) / Math.log(2));\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {Database} from '.';\r\nimport {ActiveAccountNumber} from '../../lib/accounts/types';\r\nimport {MOUNT_CLASS_TO} from '../debug';\r\n\r\nexport type AccountDatabase = Database<'session' | 'stickerSets' | 'users' | 'chats' | 'messages' | 'dialogs' | 'webapp'>;\r\nexport type CommonDatabase = Database<'session' | 'localStorage'>;\r\n\r\nexport const getOldDatabaseState = (): AccountDatabase => ({\r\n  name: `tweb`,\r\n  version: 7,\r\n  stores: [\r\n    {\r\n      name: 'session'\r\n    },\r\n    {\r\n      name: 'stickerSets'\r\n    },\r\n    {\r\n      name: 'users'\r\n    },\r\n    {\r\n      name: 'chats'\r\n    },\r\n    {\r\n      name: 'dialogs'\r\n    },\r\n    {\r\n      name: 'messages'\r\n    }\r\n  ]\r\n});\r\n\r\nexport const getCommonDatabaseState = (): CommonDatabase => ({\r\n  name: `tweb-common`,\r\n  version: 8,\r\n  stores: [\r\n    {\r\n      name: 'session'\r\n    },\r\n    {\r\n      name: 'localStorage', // not used (\r\n      encryptedName: 'localStorage__encrypted'\r\n    }\r\n  ]\r\n});\r\n\r\nexport const getDatabaseState = (\r\n  accountNumber: ActiveAccountNumber\r\n): Database<'session' | 'stickerSets' | 'users' | 'chats' | 'messages' | 'dialogs' | 'webapp'> => ({\r\n  name: `tweb-account-${accountNumber}`,\r\n  version: 9,\r\n  stores: [\r\n    {\r\n      name: 'session',\r\n      encryptedName: 'session__encrypted'\r\n    },\r\n    {\r\n      name: 'stickerSets',\r\n      encryptedName: 'stickerSets__encrypted'\r\n    },\r\n    {\r\n      name: 'users',\r\n      encryptedName: 'users__encrypted'\r\n    },\r\n    {\r\n      name: 'chats',\r\n      encryptedName: 'chats__encrypted'\r\n    },\r\n    {\r\n      name: 'dialogs',\r\n      encryptedName: 'dialogs__encrypted'\r\n    },\r\n    {\r\n      name: 'messages',\r\n      encryptedName: 'messages__encrypted'\r\n    },\r\n    {\r\n      name: 'webapp',\r\n      encryptedName: 'webapp__encrypted'\r\n    }\r\n  ]\r\n});\r\n\r\nMOUNT_CLASS_TO.getDatabaseState = getDatabaseState;\r\n","export const NOTIFICATION_ICON_PATH = 'assets/img/logo_filled_rounded.png';\r\nexport const NOTIFICATION_BADGE_PATH = 'assets/img/logo_plain.svg'; // masked\r\n","/**\r\n * ignores `undefined` properties\r\n */\r\nexport default function deepEqual<T>(x: T, y: T, ignoreKeys?: (keyof T)[]): boolean {\r\n  const ignoreSet = ignoreKeys && new Set(ignoreKeys);\r\n  const okok = (obj: any) => Object.keys(obj).filter((key) => obj[key] !== undefined);\r\n  const ok = ignoreKeys ? (obj: any) => okok(obj).filter((key) => !ignoreSet.has(key as any)) : okok,\r\n    tx = typeof x,\r\n    ty = typeof y;\r\n  return x && y && tx === 'object' && tx === ty ? (\r\n    ok(x).length === ok(y).length &&\r\n      ok(x).every((key) => deepEqual((x as any)[key], (y as any)[key], ignoreKeys))\r\n  ) : (x === y);\r\n}\r\n","export default function safeAssign<T>(object: T, fromObject: any) {\r\n  if(fromObject) {\r\n    for(const i in fromObject) {\r\n      if(fromObject[i] !== undefined) {\r\n        // @ts-ignore\r\n        object[i] = fromObject[i];\r\n      }\r\n    }\r\n  }\r\n\r\n  return object;\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n *\r\n * Originally from:\r\n * https://github.com/zhukov/webogram\r\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\r\n * https://github.com/zhukov/webogram/blob/master/LICENSE\r\n */\r\n\r\nimport {Database} from '../../config/databases';\r\nimport Modes from '../../config/modes';\r\nimport makeError from '../../helpers/makeError';\r\nimport safeAssign from '../../helpers/object/safeAssign';\r\nimport {logger} from '../logger';\r\n\r\n/**\r\n * https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore/createIndex\r\n */\r\nexport type IDBIndex = {\r\n  indexName: string,\r\n  keyPath: string,\r\n  objectParameters: IDBIndexParameters\r\n};\r\n\r\nexport type IDBStore = {\r\n  name: string,\r\n  encryptedName?: string,\r\n  indexes?: IDBIndex[]\r\n};\r\n\r\nexport type IDBOptions = {\r\n  name?: string,\r\n  storeName: string,\r\n  stores?: IDBStore[],\r\n  version?: number\r\n};\r\n\r\nconst DEBUG = false;\r\n\r\nexport class IDB {\r\n  private static INSTANCES: IDB[] = [];\r\n  private openDbPromise: MaybePromise<IDBDatabase>;\r\n  private db: IDBDatabase;\r\n  private storageIsAvailable: boolean;\r\n  private log: ReturnType<typeof logger>;\r\n  private name: string;\r\n  private version: number;\r\n  private stores: IDBStore[];\r\n\r\n  constructor(db: Database<any>) {\r\n    safeAssign(this, db);\r\n\r\n    if(Modes.test) {\r\n      this.name += '_test';\r\n    }\r\n\r\n    this.storageIsAvailable = true;\r\n    this.log = logger(['IDB', db.name].join('-'));\r\n    this.log('constructor');\r\n\r\n    this.openDatabase(true);\r\n\r\n    IDB.INSTANCES.push(this);\r\n  }\r\n\r\n  public isAvailable() {\r\n    return this.storageIsAvailable;\r\n  }\r\n\r\n  public openDatabase(createNew = false): IDB['openDbPromise'] {\r\n    if(this.openDbPromise && !createNew) {\r\n      return this.openDbPromise;\r\n    }\r\n\r\n    const createIndexes = (os: IDBObjectStore, store: IDBStore) => {\r\n      const indexNames = Array.from(os.indexNames);\r\n      for(const indexName of indexNames) {\r\n        os.deleteIndex(indexName);\r\n      }\r\n\r\n      if(!store.indexes?.length) {\r\n        return;\r\n      }\r\n\r\n      for(const index of store.indexes) {\r\n        if(os.indexNames.contains(index.indexName)) {\r\n          continue;\r\n        }\r\n\r\n        os.createIndex(index.indexName, index.keyPath, index.objectParameters);\r\n      }\r\n    };\r\n\r\n    const createObjectStore = (db: IDBDatabase, store: IDBStore) => {\r\n      const os = db.createObjectStore(store.name);\r\n      createIndexes(os, store);\r\n    };\r\n\r\n    try {\r\n      var request = indexedDB.open(this.name, this.version);\r\n      if(!request) {\r\n        return Promise.reject();\r\n      }\r\n    } catch(error) {\r\n      this.log.error('error opening db', (error as Error).message);\r\n      this.storageIsAvailable = false;\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    let finished = false;\r\n    setTimeout(() => {\r\n      if(!finished) {\r\n        request.onerror(makeError('IDB_CREATE_TIMEOUT') as any as Event);\r\n      }\r\n    }, 3000);\r\n\r\n    return this.openDbPromise = new Promise<IDBDatabase>((resolve, reject) => {\r\n      request.onsuccess = (event) => {\r\n        finished = true;\r\n        const db = request.result;\r\n        let calledNew = false;\r\n\r\n        this.log('Opened');\r\n\r\n        db.onerror = (error) => {\r\n          this.storageIsAvailable = false;\r\n          this.log.error('Error creating/accessing IndexedDB database', error);\r\n          reject(error);\r\n        };\r\n\r\n        db.onclose = (e) => {\r\n          this.log.error('closed:', e);\r\n          !calledNew && this.openDatabase();\r\n        };\r\n\r\n        db.onabort = (e) => {\r\n          this.log.error('abort:', e);\r\n          const transaction = e.target as IDBTransaction;\r\n\r\n          this.openDatabase(calledNew = true);\r\n\r\n          if(transaction.onerror) {\r\n            transaction.onerror(e);\r\n          }\r\n\r\n          db.close();\r\n        };\r\n\r\n        db.onversionchange = (e) => {\r\n          this.log.error('onversionchange, lol?');\r\n        };\r\n\r\n        resolve(this.db = db);\r\n      };\r\n\r\n      request.onerror = (event) => {\r\n        finished = true;\r\n        this.storageIsAvailable = false;\r\n        this.log.error('Error creating/accessing IndexedDB database', event);\r\n        reject(event);\r\n      };\r\n\r\n      request.onupgradeneeded = (event) => {\r\n        finished = true;\r\n        this.log.warn('performing idb upgrade from', event.oldVersion, 'to', event.newVersion);\r\n\r\n        const target = event.target as IDBOpenDBRequest;\r\n        const db = target.result;\r\n        this.stores.forEach((store) => {\r\n          /* if(db.objectStoreNames.contains(store.name)) {\r\n            //if(event.oldVersion === 1) {\r\n              db.deleteObjectStore(store.name);\r\n            //}\r\n          } */\r\n\r\n          if(!db.objectStoreNames.contains(store.name)) {\r\n            createObjectStore(db, store);\r\n          } else {\r\n            const txn = target.transaction;\r\n            const os = txn.objectStore(store.name);\r\n            createIndexes(os, store);\r\n          }\r\n\r\n          if(store.encryptedName && !db.objectStoreNames.contains(store.encryptedName)) {\r\n            db.createObjectStore(store.encryptedName);\r\n          }\r\n        });\r\n      };\r\n    }).then((db) => this.openDbPromise = db);\r\n  }\r\n\r\n  // * can't return promise here since some connections can be opened in other threads and it won't resolve\r\n  public async closeDatabase() {\r\n    if(!this.db) {\r\n      return;\r\n    }\r\n\r\n    // * overwrite handler to prevent reopening\r\n    this.db.onclose = () => {};\r\n    this.db.close();\r\n  }\r\n\r\n  public static create<T extends Database<any>>(db: T) {\r\n    return this.INSTANCES.find((instance) => instance.name === db.name) ?? new IDB(db);\r\n  }\r\n\r\n  public static closeDatabases(preserve?: IDB) {\r\n    this.INSTANCES.forEach((storage) => {\r\n      if(preserve && preserve === storage) {\r\n        return;\r\n      }\r\n\r\n      storage.closeDatabase();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * ! WARNING ! function requires at least one opened connection\r\n   */\r\n  /* public static clearObjectStores() {\r\n    const storage = this.STORAGES[0];\r\n    this.closeDatabases(storage);\r\n\r\n    const names = Array.from(storage.db.objectStoreNames);\r\n    const promises = names.map((name) => storage.clear(name));\r\n    return Promise.all(promises);\r\n  } */\r\n\r\n  /* public static deleteDatabase() {\r\n    this.closeDatabases();\r\n\r\n    const storages = this.STORAGES;\r\n    const dbNames = Array.from(new Set(storages.map((storage) => storage.name)));\r\n    const promises = dbNames.map((dbName) => {\r\n      this.deleteDatabaseByName(dbName);\r\n    });\r\n\r\n    return Promise.all(promises);\r\n  } */\r\n\r\n  /**\r\n   * Promise will be resolved only when all connections are closed \\\r\n   * You can skip waiting since it'll be deleted after all connections are closed\r\n   */\r\n  public static deleteDatabaseByName(dbName: string) {\r\n    return new Promise<void>((resolve, reject) => {\r\n      this.INSTANCES.forEach((storage) => {\r\n        if(storage.name === dbName) {\r\n          return storage.closeDatabase();\r\n        }\r\n      });\r\n\r\n      const request = indexedDB.deleteDatabase(dbName);\r\n      request.onerror = () => reject();\r\n      request.onsuccess = () => resolve();\r\n    });\r\n  }\r\n}\r\n\r\nnamespace IDBStorage {\r\n  export type Entries = Array<[IDBValidKey, any]>\r\n}\r\n\r\nclass IDBStorage<T extends Database<any>, StoreName extends string = T['stores'][number]['name']> {\r\n  private log: ReturnType<typeof logger>;\r\n  private storeName: T['stores'][0]['name'];\r\n  private idb: IDB;\r\n\r\n  constructor(db: T, storeName: T['stores'][0]['name' | 'encryptedName']) {\r\n    this.storeName = storeName;\r\n    this.log = logger(['IDB', db.name, storeName].join('-'));\r\n    this.idb = IDB.create(db);\r\n  }\r\n\r\n  public close() {\r\n    return this.idb.closeDatabase();\r\n  }\r\n\r\n  public delete(entryName: string | string[], storeName?: StoreName): Promise<void> {\r\n    // return Promise.resolve();\r\n    const isArray = Array.isArray(entryName);\r\n    if(!isArray) {\r\n      entryName = [].concat(entryName);\r\n    }\r\n\r\n    return this.getObjectStore('readwrite', (objectStore) => {\r\n      const promises = (entryName as string[]).map((entryName) => objectStore.delete(entryName));\r\n      return isArray ? promises : promises[0];\r\n    }, DEBUG ? 'delete: ' + (entryName as string[]).join(', ') : '', storeName);\r\n  }\r\n\r\n  public clear(storeName?: StoreName): Promise<void> {\r\n    return this.getObjectStore('readwrite', (objectStore) => objectStore.clear(), DEBUG ? 'clear' : '', storeName);\r\n  }\r\n\r\n  public save(entryName: string | string[], value: any | any[], storeName?: StoreName) {\r\n    // const handleError = (error: Error) => {\r\n    //   this.log.error('save: transaction error:', entryName, value, db, error, error && error.name);\r\n    //   if((!error || error.name === 'InvalidStateError')/*  && false */) {\r\n    //     setTimeout(() => {\r\n    //       this.save(entryName, value);\r\n    //     }, 2e3);\r\n    //   } else {\r\n    //     //console.error('IndexedDB saveFile transaction error:', error, error && error.name);\r\n    //   }\r\n    // };\r\n\r\n    const isArray = Array.isArray(entryName);\r\n    if(!isArray) {\r\n      entryName = [entryName] as string[];\r\n      value = [value];\r\n    }\r\n\r\n    return this.getObjectStore('readwrite', (objectStore) => {\r\n      const promises = (entryName as string[]).map((entryName, idx) => objectStore.put(value[idx], entryName));\r\n      return isArray ? promises : promises[0];\r\n    }, DEBUG ? 'save: ' + (entryName as string[]).join(', ') : '', storeName);\r\n  }\r\n\r\n  // public saveFile(fileName: string, blob: Blob | Uint8Array) {\r\n  //   //return Promise.resolve(blobConstruct([blob]));\r\n  //   if(!(blob instanceof Blob)) {\r\n  //     blob = blobConstruct(blob);\r\n  //   }\r\n\r\n  //   return this.save(fileName, blob);\r\n  // }\r\n\r\n  /* public saveFileBase64(db: IDBDatabase, fileName: string, blob: Blob | any): Promise<Blob> {\r\n    if(this.getBlobSize(blob) > 10 * 1024 * 1024) {\r\n      return Promise.reject();\r\n    }\r\n\r\n    if(!(blob instanceof Blob)) {\r\n      var safeMimeType = blobSafeMimeType(blob.type || 'image/jpeg');\r\n      var address = 'data:' + safeMimeType + ';base64,' + bytesToBase64(blob);\r\n      return this.storagePutB64String(db, fileName, address).then(() => {\r\n        return blob;\r\n      });\r\n    }\r\n\r\n    try {\r\n      var reader = new FileReader();\r\n    } catch (e) {\r\n      this.storageIsAvailable = false;\r\n      return Promise.reject();\r\n    }\r\n\r\n    let promise = new Promise<Blob>((resolve, reject) => {\r\n      reader.onloadend = () => {\r\n        this.storagePutB64String(db, fileName, reader.result as string).then(() => {\r\n          resolve(blob);\r\n        }, reject);\r\n      }\r\n\r\n      reader.onerror = reject;\r\n    });\r\n\r\n\r\n    try {\r\n      reader.readAsDataURL(blob);\r\n    } catch (e) {\r\n      this.storageIsAvailable = false;\r\n      return Promise.reject();\r\n    }\r\n\r\n    return promise;\r\n  }\r\n\r\n  public storagePutB64String(db: IDBDatabase, fileName: string, b64string: string) {\r\n    try {\r\n      var objectStore = db.transaction([this.storeName], 'readwrite')\r\n        .objectStore(this.storeName);\r\n      var request = objectStore.put(b64string, fileName);\r\n    } catch(error) {\r\n      this.storageIsAvailable = false;\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      request.onsuccess = function(event) {\r\n        resolve();\r\n      };\r\n\r\n      request.onerror = reject;\r\n    });\r\n  }\r\n\r\n  public getBlobSize(blob: any) {\r\n    return blob.size || blob.byteLength || blob.length;\r\n  } */\r\n\r\n  public get<T>(entryName: string[], storeName?: StoreName): Promise<T[]>;\r\n  public get<T>(entryName: string, storeName?: StoreName): Promise<T>;\r\n  public get<T>(entryName: string | string[], storeName?: StoreName): Promise<T> | Promise<T[]> {\r\n    // return Promise.reject();\r\n\r\n    const isArray = Array.isArray(entryName);\r\n    if(!isArray) {\r\n      if(!entryName) {\r\n        return undefined;\r\n      }\r\n\r\n      entryName = [].concat(entryName);\r\n    } else if(!entryName.length) {\r\n      return Promise.resolve([]) as any;\r\n    }\r\n\r\n    return this.getObjectStore<T>('readonly', (objectStore) => {\r\n      const promises = (entryName as string[]).map((entryName) => objectStore.get(entryName));\r\n      return isArray ? promises : promises[0];\r\n    }, DEBUG ? 'get: ' + (entryName as string[]).join(', ') : '', storeName);\r\n  }\r\n\r\n  private async getObjectStore<T>(\r\n    mode: IDBTransactionMode,\r\n    callback: (objectStore: IDBObjectStore, onComplete: () => void, onError: () => void) => IDBRequest | IDBRequest[],\r\n    log?: string,\r\n    storeName = this.storeName\r\n  ) {\r\n    let perf: number;\r\n\r\n    if(log) {\r\n      perf = performance.now();\r\n      this.log(log + ': start');\r\n    }\r\n\r\n    const timeout = setTimeout(() => {\r\n      this.log.error('transaction not finished', transaction, log);\r\n    }, 10000);\r\n\r\n    const _db = this.idb.openDatabase();\r\n    const db = _db instanceof Promise ? await _db : _db;\r\n\r\n    let resolve: (value: T) => void, reject: (reason?: any) => void;\r\n    const promise = new Promise<T>((a, b) => [resolve, reject] = [a, b]);\r\n\r\n    // * https://developer.chrome.com/blog/indexeddb-durability-mode-now-defaults-to-relaxed\r\n    const transaction = db.transaction([storeName], mode, {durability: 'relaxed'});\r\n\r\n    const onError = () => {\r\n      clearTimeout(timeout);\r\n      reject(transaction.error);\r\n    };\r\n\r\n    const onComplete = (/* what: string */) => {\r\n      clearTimeout(timeout);\r\n\r\n      if(log) {\r\n        this.log(log + ': end', performance.now() - perf/* , what */);\r\n      }\r\n\r\n      const results = requests.map((r) => r.result);\r\n      resolve(isArray ? results : results[0]);\r\n\r\n      if(log) {\r\n        this.log(log + ': resolved', isArray ? results : results[0]);\r\n      }\r\n    };\r\n\r\n    transaction.onerror = onError;\r\n\r\n    // * have to wait while clearing or setting something\r\n    const waitForTransactionComplete = mode === 'readwrite';\r\n    if(waitForTransactionComplete) {\r\n      transaction.oncomplete = () => onComplete(/* 'transaction' */);\r\n    }\r\n\r\n    const callbackResult = callback(transaction.objectStore(storeName), onComplete, onError);\r\n    const isArray = Array.isArray(callbackResult);\r\n    const requests: IDBRequest[] = isArray ? callbackResult : [].concat(callbackResult) as any;\r\n\r\n    if(waitForTransactionComplete) {\r\n      return promise;\r\n    }\r\n\r\n    const length = requests.length;\r\n    let left = length;\r\n\r\n    const onRequestFinished = () => {\r\n      if(transaction.error) {\r\n        return;\r\n      }\r\n\r\n      if(!--left) {\r\n        onComplete(/* 'requests' */);\r\n      }\r\n    };\r\n\r\n    for(let i = 0; i < length; ++i) {\r\n      const request = requests[i];\r\n      request.onerror = onError;\r\n      request.onsuccess = onRequestFinished;\r\n    }\r\n\r\n    return promise;\r\n  }\r\n\r\n  public getAll<T>(storeName?: StoreName): Promise<T[]> {\r\n    return this.getObjectStore<T[]>('readonly', (objectStore) => objectStore.getAll(), DEBUG ? 'getAll' : '', storeName);\r\n  }\r\n\r\n  public getAllKeys(storeName?: StoreName): Promise<IDBValidKey[]> {\r\n    return this.getObjectStore<IDBValidKey[]>('readonly', (objectStore) => objectStore.getAllKeys(), DEBUG ? 'getAll' : '', storeName);\r\n  }\r\n\r\n  public getAllEntries(storeName?: StoreName) {\r\n    const entries: IDBStorage.Entries = [];\r\n    return new Promise<IDBStorage.Entries>((resolve, reject) => {\r\n      this.getObjectStore<T[]>('readonly', (objectStore, onComplete, onError) => {\r\n        const request = objectStore.openCursor();\r\n        request.onsuccess = (event) => {\r\n          const cursor = (event.target as IDBRequest<IDBCursorWithValue | null>).result;\r\n          if(cursor) {\r\n            entries.push([cursor.key, cursor.value])\r\n            cursor.continue();\r\n          } else {\r\n            onComplete();\r\n            resolve(entries);\r\n          }\r\n        };\r\n        request.onerror = onError;\r\n        return [];\r\n      }, DEBUG ? 'getAllEntries' : '', storeName).catch(reject);\r\n    });\r\n  }\r\n\r\n  /* public getAllKeys(): Promise<Array<string>> {\r\n    console.time('getAllEntries');\r\n    return this.openDatabase().then((db) => {\r\n      var objectStore = db.transaction([this.storeName], 'readonly')\r\n        .objectStore(this.storeName);\r\n      var request = objectStore.getAllKeys();\r\n\r\n      return new Promise((resolve, reject) => {\r\n        request.onsuccess = function(event) {\r\n          // @ts-ignore\r\n          var result = event.target.result;\r\n          resolve(result);\r\n          console.timeEnd('getAllEntries');\r\n        }\r\n\r\n        request.onerror = reject;\r\n      });\r\n    });\r\n  } */\r\n\r\n  /* public isFileExists(fileName: string): Promise<boolean> {\r\n    console.time('isFileExists');\r\n    return this.openDatabase().then((db) => {\r\n      var objectStore = db.transaction([this.storeName], 'readonly')\r\n        .objectStore(this.storeName);\r\n      var request = objectStore.openCursor(fileName);\r\n\r\n      return new Promise((resolve, reject) => {\r\n        request.onsuccess = function(event) {\r\n          // @ts-ignore\r\n          var cursor = event.target.result;\r\n          resolve(!!cursor);\r\n          console.timeEnd('isFileExists');\r\n        }\r\n\r\n        request.onerror = reject;\r\n      });\r\n    });\r\n  } */\r\n\r\n  /* public getFileWriter(fileName: string, mimeType: string) {\r\n    var fakeWriter = FileManager.getFakeFileWriter(mimeType, (blob) => {\r\n      return this.saveFile(fileName, blob);\r\n    });\r\n\r\n    return Promise.resolve(fakeWriter);\r\n  } */\r\n}\r\n\r\nexport default IDBStorage;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n *\r\n * Originally from:\r\n * https://github.com/zhukov/webogram\r\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\r\n * https://github.com/zhukov/webogram/blob/master/LICENSE\r\n */\r\n\r\nimport type {ActiveAccountNumber} from '../accounts/types';\r\nimport {Database} from '../../config/databases';\r\nimport {CommonDatabase, getCommonDatabaseState} from '../../config/databases/state';\r\nimport {NOTIFICATION_BADGE_PATH, NOTIFICATION_ICON_PATH} from '../../config/notifications';\r\nimport {IS_FIREFOX} from '../../environment/userAgent';\r\nimport deepEqual from '../../helpers/object/deepEqual';\r\nimport IDBStorage from '../files/idb';\r\nimport {log, serviceMessagePort} from './index.service';\r\nimport {ServicePushPingTaskPayload} from './serviceMessagePort';\r\nimport {CURRENT_ACCOUNT_QUERY_PARAM} from '../accounts/constants';\r\nimport DeferredIsUsingPasscode from '../passcode/deferredIsUsingPasscode';\r\nimport EncryptionKeyStore from '../passcode/keyStore';\r\nimport pause from '../../helpers/schedulers/pause';\r\nimport {getWindowClients} from '../../helpers/context';\r\n\r\nconst ctx = self as any as ServiceWorkerGlobalScope;\r\nconst defaultBaseUrl = location.protocol + '//' + location.hostname + location.pathname.split('/').slice(0, -1).join('/') + '/';\r\nlet localNotificationsAvailable = true;\r\n\r\nexport type EncryptedPushNotificationObject = {\r\n  p: string | false\r\n};\r\n\r\nexport type PushNotificationObject = {\r\n  loc_key: string,\r\n  loc_args: string[],\r\n  // user_id: number, // should be number\r\n  custom: {\r\n    channel_id?: string, // should be number\r\n    chat_id?: string, // should be number\r\n    from_id?: string, // should be number\r\n    msg_id: string,\r\n    peerId?: string, // should be number\r\n    silent?: string // can be '1'\r\n  },\r\n  sound?: string,\r\n  random_id: number,\r\n  badge?: string, // should be number\r\n  description: string,\r\n  mute: string, // should be number\r\n  title: string,\r\n  message?: string,\r\n  user_id?: number // receiver user id\r\n} & { // will be set before postMessage to main thread\r\n  action?: 'mute1d' | 'push_settings',\r\n  accountNumber: ActiveAccountNumber,\r\n  p?: string,\r\n  keyIdBase64?: string\r\n};\r\n\r\nclass SomethingGetter<T extends Database<any>, Storage extends Record<string, any>> {\r\n  private cache: Partial<Storage> = {};\r\n  private storage: IDBStorage<T>;\r\n\r\n  constructor(\r\n    db: T,\r\n    storeName: T['stores'][number]['name'],\r\n    private defaults: {\r\n      [Property in keyof Storage]: ((value: Storage[Property]) => Storage[Property]) | Storage[Property]\r\n    }\r\n  ) {\r\n    this.storage = new IDBStorage<T>(db, storeName);\r\n  }\r\n\r\n  private getDefault<T extends keyof Storage>(key: T) {\r\n    const callback = this.defaults[key];\r\n    return typeof(callback) === 'function' ? callback() : callback;\r\n  }\r\n\r\n  public get<T extends keyof Storage>(key: T) {\r\n    if(this.cache.hasOwnProperty(key)) {\r\n      return this.cache[key];\r\n    }\r\n\r\n    const promise = this.storage.get(key as string) as Promise<Storage[T]>;\r\n    return promise.then((value) => value, () => undefined as Storage[T]).then((value) => {\r\n      if(this.cache.hasOwnProperty(key)) {\r\n        return this.cache[key];\r\n      }\r\n\r\n      value ??= this.getDefault(key);\r\n\r\n      return this.cache[key] = value;\r\n    });\r\n  }\r\n\r\n  public getCached<T extends keyof Storage>(key: T) {\r\n    const value = this.get(key);\r\n    if(value instanceof Promise) {\r\n      throw 'no property';\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  public async set<T extends keyof Storage>(key: T, value: Storage[T]) {\r\n    const cached = this.cache[key] ?? this.defaults[key];\r\n    if(deepEqual(cached, value)) {\r\n      return;\r\n    }\r\n\r\n    this.cache[key] = value;\r\n\r\n    try {\r\n      this.storage.save(key as string, value);\r\n    } catch(err) {\r\n\r\n    }\r\n  }\r\n}\r\n\r\ntype PushStorage = {\r\n  push_mute_until: number,\r\n  push_lang: Partial<ServicePushPingTaskPayload['lang']>\r\n  push_settings: Partial<ServicePushPingTaskPayload['settings']>\r\n  push_accounts: ServicePushPingTaskPayload['accounts'],\r\n  push_keys_ids_base64: string[]\r\n};\r\n\r\nconst defaults: PushStorage = {\r\n  push_mute_until: 0,\r\n  push_lang: {\r\n    push_message_nopreview: 'You have a new message',\r\n    push_message_error: 'Telegram is syncing in the background...',\r\n    push_action_mute1d: 'Mute for 24H',\r\n    push_action_settings: 'Settings'\r\n  },\r\n  push_settings: {},\r\n  push_accounts: {},\r\n  push_keys_ids_base64: []\r\n};\r\n\r\nconst getter = new SomethingGetter<CommonDatabase, PushStorage>(getCommonDatabaseState(), 'session', defaults);\r\n\r\n// fill cache\r\nfor(const i in defaults) {\r\n  getter.get(i as keyof PushStorage);\r\n}\r\n\r\nasync function handlePushNotificationObject(obj: PushNotificationObject) {\r\n  const copy = JSON.parse(JSON.stringify(obj));\r\n  log('push', copy);\r\n\r\n  let fix = false,\r\n    _lang: PushStorage['push_lang'];\r\n  try {\r\n    // * this should never happen, but just in case\r\n    if(obj.mute === '1') {\r\n      throw `supress push notification because obj.mute is 1`;\r\n    }\r\n\r\n    const [muteUntil, settings, lang, windowClients] = await Promise.all([\r\n      getter.get('push_mute_until'),\r\n      getter.get('push_settings'),\r\n      getter.get('push_lang'),\r\n      getWindowClients()\r\n    ]);\r\n    _lang = lang;\r\n\r\n    const nowTime = Date.now();\r\n    if(\r\n      userInvisibleIsSupported() &&\r\n      muteUntil &&\r\n      nowTime < muteUntil\r\n    ) {\r\n      throw `supress push notification because mute for ${Math.ceil((muteUntil - nowTime) / 60000)} min`;\r\n    }\r\n\r\n    const hasActiveWindow = windowClients.length && localNotificationsAvailable;\r\n    if(hasActiveWindow) {\r\n      // fix = !windowClients.some((windowClient) => windowClient.focused);\r\n      fix = false;\r\n      throw 'supress push notification because some instance is alive';\r\n    }\r\n\r\n    const notificationPromise = fireNotification(obj, settings, lang);\r\n    await notificationPromise.catch((err) => {\r\n      log.error('push notification error', err, copy);\r\n      throw err;\r\n    });\r\n  } catch(err) {\r\n    log(err);\r\n\r\n    if(!fix) {\r\n      return;\r\n    }\r\n\r\n    const tag = 'fix';\r\n    const notificationPromise = ctx.registration.showNotification('Telegram Web', {\r\n      body: _lang.push_message_error,\r\n      icon: NOTIFICATION_ICON_PATH,\r\n      tag,\r\n      badge: NOTIFICATION_BADGE_PATH,\r\n      silent: true\r\n    });\r\n\r\n    notificationPromise.then(() => {\r\n      setTimeout(() => {\r\n        closeAllNotifications(tag);\r\n      }, 2000);\r\n    });\r\n\r\n    return notificationPromise;\r\n  }\r\n}\r\n\r\n(ctx as any).handlePushNotificationObject = handlePushNotificationObject;\r\n\r\nfunction onPushEvent(event: PushEvent) {\r\n  const obj: EncryptedPushNotificationObject | PushNotificationObject = event.data.json();\r\n  if(!('p' in obj)) {\r\n    event.waitUntil(handlePushNotificationObject(obj));\r\n    return;\r\n  }\r\n\r\n  const emptyNotification: PushNotificationObject = {\r\n    loc_key: '',\r\n    loc_args: [],\r\n    custom: {\r\n      msg_id: ''\r\n    },\r\n    random_id: 0,\r\n    description: '',\r\n    title: '',\r\n    mute: '0',\r\n    user_id: 0,\r\n    accountNumber: 1\r\n  };\r\n\r\n  log('encrypted push', obj);\r\n\r\n  const {p} = obj;\r\n  if(!p) {\r\n    log('no p');\r\n    event.waitUntil(handlePushNotificationObject(emptyNotification));\r\n    return;\r\n  }\r\n\r\n  const keysIdsBase64 = getter.getCached('push_keys_ids_base64');\r\n  const keyIndex = keysIdsBase64?.findIndex((key) => p.startsWith(key)) ?? -1;\r\n  if(keyIndex === -1) {\r\n    log('no key');\r\n    event.waitUntil(handlePushNotificationObject(emptyNotification));\r\n    return;\r\n  }\r\n\r\n  const keyIdBase64 = keysIdsBase64[keyIndex];\r\n  emptyNotification.accountNumber = keyIndex + 1 as ActiveAccountNumber;\r\n  emptyNotification.p = p;\r\n  emptyNotification.keyIdBase64 = keyIdBase64;\r\n  event.waitUntil(\r\n    serviceMessagePort.invoke('decryptPush', {p, keyIdBase64}, undefined, undefined, undefined, 1000)\r\n    .catch((err) => {\r\n      log.error('decryptPush error', err);\r\n      return emptyNotification;\r\n    })\r\n    .then(handlePushNotificationObject)\r\n  );\r\n}\r\n\r\nasync function isPasscodeLocked() {\r\n  return Promise.race([\r\n    pause(1000).then(() => undefined as boolean),\r\n    Promise.all([\r\n      DeferredIsUsingPasscode.isUsingPasscode(),\r\n      EncryptionKeyStore.get()\r\n    ]).then(([isUsingPasscode, encryptionKey]) => {\r\n      return isUsingPasscode && !encryptionKey;\r\n    })\r\n  ]);\r\n}\r\n\r\nfunction onNotificationClick(event: NotificationEvent) {\r\n  const notification = event.notification;\r\n  log('on notification click', notification);\r\n  notification.close();\r\n\r\n  const action = event.action as PushNotificationObject['action'];\r\n  if(action === 'mute1d' && userInvisibleIsSupported()) {\r\n    log('[SW] mute for 1d');\r\n    getter.set('push_mute_until', Date.now() + 86400e3);\r\n    return;\r\n  }\r\n\r\n  const data: PushNotificationObject = notification.data;\r\n  if(!data) {\r\n    return;\r\n  }\r\n\r\n  const promise = Promise.all([\r\n    ctx.clients.matchAll({type: 'window'}),\r\n    getter.get('push_settings'),\r\n    getter.get('push_accounts'),\r\n    isPasscodeLocked()\r\n  ]).then(([clientList, settings, accounts, isLocked]) => {\r\n    data.action = action;\r\n    for(const _accountNumber in accounts) { // * find correct account number for this notification\r\n      const accountNumber = +_accountNumber as ActiveAccountNumber;\r\n      if(accounts[accountNumber] === data.user_id) {\r\n        data.accountNumber = accountNumber;\r\n        break;\r\n      }\r\n    }\r\n\r\n    pendingNotification = data;\r\n    for(let i = 0; i < clientList.length; ++i) {\r\n      const client = clientList[i];\r\n      if(!('focus' in client)) {\r\n        continue;\r\n      }\r\n\r\n      // * verify account number\r\n      const url = new URL(client.url);\r\n      if((+url.searchParams.get(CURRENT_ACCOUNT_QUERY_PARAM) || 1) !== data.accountNumber) {\r\n        continue;\r\n      }\r\n\r\n      client.focus();\r\n      if(isLocked) { // * wait until app is unlocked\r\n        return;\r\n      }\r\n\r\n      serviceMessagePort.invokeVoid('pushClick', pendingNotification, client);\r\n      pendingNotification = undefined;\r\n      return;\r\n    }\r\n\r\n    if(ctx.clients.openWindow) {\r\n      const url = new URL(settings.baseUrl || defaultBaseUrl);\r\n      if(data.accountNumber && data.accountNumber > 1) { // * set account number\r\n        url.searchParams.set(CURRENT_ACCOUNT_QUERY_PARAM, data.accountNumber + '');\r\n      }\r\n\r\n      return ctx.clients.openWindow(url);\r\n    }\r\n  }).catch((error) => {\r\n    log.error('Clients.matchAll error', error);\r\n  })\r\n\r\n  event.waitUntil(promise);\r\n}\r\n\r\nconst notifications: Set<Notification> = new Set();\r\nlet pendingNotification: PushNotificationObject;\r\nfunction pushToNotifications(notification: Notification) {\r\n  if(!notifications.has(notification)) {\r\n    notifications.add(notification);\r\n    // @ts-ignore\r\n    notification.onclose = onCloseNotification;\r\n  }\r\n}\r\n\r\nfunction onCloseNotification(event: NotificationEvent) {\r\n  removeFromNotifications(event.notification)\r\n}\r\n\r\nfunction removeFromNotifications(notification: Notification) {\r\n  notifications.delete(notification);\r\n}\r\n\r\nexport function closeAllNotifications(tag?: string) {\r\n  for(const notification of notifications) {\r\n    try {\r\n      if(tag && notification.tag !== tag) {\r\n        continue;\r\n      }\r\n\r\n      notification.close();\r\n      notifications.delete(notification);\r\n    } catch(e) {}\r\n  }\r\n\r\n  let promise: Promise<void>;\r\n  if('getNotifications' in ctx.registration) {\r\n    promise = ctx.registration.getNotifications({tag}).then((notifications) => {\r\n      for(let i = 0, len = notifications.length; i < len; ++i) {\r\n        try {\r\n          notifications[i].close();\r\n        } catch(e) {}\r\n      }\r\n    }).catch((error) => {\r\n      log.error('Offline register SW error', error);\r\n    });\r\n  } else {\r\n    promise = Promise.resolve();\r\n  }\r\n\r\n  return promise;\r\n}\r\n\r\nfunction userInvisibleIsSupported() {\r\n  return IS_FIREFOX;\r\n}\r\n\r\nexport function fillPushObject(obj: PushNotificationObject) {\r\n  let peerId: string;\r\n\r\n  if(obj.custom) {\r\n    if(obj.custom.channel_id) {\r\n      peerId = '' + -obj.custom.channel_id;\r\n    } else if(obj.custom.chat_id) {\r\n      peerId = '' + -obj.custom.chat_id;\r\n    } else {\r\n      peerId = obj.custom.from_id || '';\r\n    }\r\n  }\r\n\r\n  obj.custom.peerId = '' + peerId;\r\n  return obj;\r\n}\r\n\r\nfunction fireNotification(\r\n  obj: PushNotificationObject,\r\n  settings: PushStorage['push_settings'],\r\n  lang: PushStorage['push_lang']\r\n) {\r\n  obj = fillPushObject(obj);\r\n  const peerId = obj.custom.peerId;\r\n  let title = obj.title || 'Telegram';\r\n  let body = obj.description || '';\r\n  let tag = 'peer' + peerId;\r\n\r\n  const messageKey = peerId + '_' + obj.custom.msg_id;\r\n  if(ignoreMessages.has(messageKey)) {\r\n    const error = 'ignoring push';\r\n    log.warn(error, obj);\r\n    ignoreMessages.delete(messageKey);\r\n    throw error;\r\n  }\r\n\r\n  if(settings?.nopreview || !obj.loc_key) {\r\n    title = 'Telegram';\r\n    body = lang.push_message_nopreview;\r\n    tag = 'unknown_peer';\r\n  }\r\n\r\n  const actions: (Omit<NotificationAction, 'action'> & {action: PushNotificationObject['action']})[] = [\r\n    userInvisibleIsSupported() && {\r\n      action: 'mute1d',\r\n      title: lang.push_action_mute1d\r\n    }/* , {\r\n    action: 'push_settings',\r\n    title: lang.push_action_settings || 'Settings'\r\n  } */];\r\n\r\n  const notificationOptions: NotificationOptions = {\r\n    body,\r\n    icon: NOTIFICATION_ICON_PATH,\r\n    tag,\r\n    data: obj,\r\n    actions: actions.filter(Boolean),\r\n    badge: NOTIFICATION_BADGE_PATH,\r\n    silent: obj.custom.silent === '1'\r\n  };\r\n\r\n  log('show notify', title, body, obj, notificationOptions);\r\n\r\n  const notificationPromise = ctx.registration.showNotification(title, notificationOptions);\r\n  return notificationPromise.catch((error) => {\r\n    log.error('show notification promise error', error);\r\n    throw error;\r\n  });\r\n}\r\n\r\nexport async function canSaveAccounts() {\r\n  const [isUsingPasscode/* , encryptionKey */] = await Promise.all([\r\n    DeferredIsUsingPasscode.isUsingPasscode()/* ,\r\n    EncryptionKeyStore.get() */\r\n  ]);\r\n  // * if no passcode or app is unlocked\r\n  return !isUsingPasscode/*  || !!encryptionKey */;\r\n}\r\n\r\nexport async function onPing(payload: ServicePushPingTaskPayload, source?: MessageEventSource) {\r\n  localNotificationsAvailable = payload.localNotifications;\r\n\r\n  if(pendingNotification && source) {\r\n    serviceMessagePort.invokeVoid('pushClick', pendingNotification, source);\r\n    pendingNotification = undefined;\r\n  }\r\n\r\n  if(payload.lang) {\r\n    getter.set('push_lang', payload.lang);\r\n  }\r\n\r\n  if(payload.settings) {\r\n    getter.set('push_settings', payload.settings);\r\n  }\r\n\r\n  const canSave = await canSaveAccounts();\r\n  getter.set('push_accounts', (canSave && payload.accounts) || defaults.push_accounts);\r\n  getter.set('push_keys_ids_base64', payload.keysIdsBase64 || defaults.push_keys_ids_base64);\r\n}\r\n\r\nexport function resetPushAccounts() {\r\n  getter.set('push_accounts', defaults.push_accounts);\r\n}\r\n\r\nconst ignoreMessages: Map<string, number> = new Map();\r\nexport function onShownNotification(payload: string) {\r\n  ignoreMessages.set(payload, Date.now());\r\n}\r\n\r\nsetInterval(() => {\r\n  const time = Date.now();\r\n  ignoreMessages.forEach((_time, key) => {\r\n    if((time - _time) > 30e3) {\r\n      ignoreMessages.delete(key);\r\n    }\r\n  });\r\n}, 30 * 60e3);\r\n\r\nctx.addEventListener('notificationclick', onNotificationClick);\r\nctx.addEventListener('notificationclose', onCloseNotification);\r\nctx.addEventListener('push', onPushEvent);\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {WebPushApiManager} from '../mtproto/webPushApiManager';\r\nimport type {PushNotificationObject} from './push';\r\nimport type {MyUploadFile} from '../mtproto/apiFileManager';\r\nimport type {Document, InputFileLocation, InputGroupCall} from '../../layer';\r\nimport type {GroupCallRtmpState} from '../appManagers/appGroupCallsManager';\r\nimport type {ActiveAccountNumber} from '../accounts/types';\r\nimport type {getEnvironment} from '../../environment/utils';\r\nimport type {ToggleUsingPasscodePayload} from '../mtproto/mtprotoMessagePort';\r\nimport type {VideoStreamInfo} from '../calls/videoStreamInfo';\r\nimport type {PushKey, PushSingleManager} from '../mtproto/pushSingleManager';\r\nimport SuperMessagePort from '../mtproto/superMessagePort';\r\nimport {MOUNT_CLASS_TO} from '../../config/debug';\r\n\r\nexport type ServicePushPingTaskPayload = {\r\n  localNotifications: boolean,\r\n  lang: {\r\n    push_action_mute1d: string\r\n    push_action_settings: string\r\n    push_message_nopreview: string,\r\n    push_message_error: string\r\n  },\r\n  settings: WebPushApiManager['settings'],\r\n  accounts: {[key in ActiveAccountNumber]?: UserId},\r\n  keysIdsBase64: string[]\r\n};\r\n\r\nexport type ServiceRequestFilePartTaskPayload = {\r\n  docId: DocId,\r\n  dcId: number,\r\n  offset: number,\r\n  limit: number,\r\n  accountNumber: ActiveAccountNumber\r\n};\r\n\r\nexport type ServiceRequestRtmpPartTaskPayload = {\r\n  request: InputFileLocation.inputGroupCallStream,\r\n  dcId: number,\r\n  accountNumber: ActiveAccountNumber\r\n};\r\n\r\nexport type ServiceDownloadTaskPayload = {\r\n  headers: any,\r\n  id: string\r\n};\r\n\r\nexport type ServiceEvent = {\r\n  port: (payload: void, source: MessageEventSource, event: MessageEvent) => void\r\n};\r\n\r\nexport default class ServiceMessagePort<Master extends boolean = false> extends SuperMessagePort<{\r\n  // from main thread to service worker\r\n  environment: (environment: ReturnType<typeof getEnvironment>) => void,\r\n  notificationsClear: () => void,\r\n  toggleStorages: (payload: {enabled: boolean, clearWrite: boolean}) => void,\r\n  pushPing: (payload: ServicePushPingTaskPayload, source: MessageEventSource, event: MessageEvent) => void,\r\n  hello: (payload: void, source: MessageEventSource, event: MessageEvent) => void,\r\n  shownNotification: (payload: string) => void,\r\n  leaveRtmpCall: (payload: [Long, boolean]) => void,\r\n  toggleStreamInUse: (payload: {url: string, inUse: boolean, accountNumber: ActiveAccountNumber}) => void,\r\n  toggleCacheStorage: (value: boolean) => void,\r\n  resetEncryptableCacheStorages: () => void,\r\n  toggleUsingPasscode: (payload: ToggleUsingPasscodePayload, source: MessageEventSource) => void,\r\n  saveEncryptionKey: (payload: CryptoKey) => void,\r\n  fillPushObject: (payload: PushNotificationObject) => PushNotificationObject,\r\n\r\n  // from mtproto worker\r\n  download: (payload: ServiceDownloadTaskPayload) => void,\r\n  downloadChunk: (payload: {id: ServiceDownloadTaskPayload['id'], chunk: Uint8Array}) => void\r\n  downloadFinalize: (payload: ServiceDownloadTaskPayload['id']) => void,\r\n  downloadCancel: (payload: ServiceDownloadTaskPayload['id']) => void,\r\n}, {\r\n  // to main thread\r\n  pushClick: (payload: PushNotificationObject) => void,\r\n  hello: (payload: void, source: MessageEventSource) => void,\r\n  share: (payload: ShareData) => void,\r\n  rtmpStreamTime: (payload: {callId: Long, time: string}) => void,\r\n  rtmpStreamDestroyed: (payload: Long) => void,\r\n  downloadRequestReceived: (payload: string) => void,\r\n  serviceCryptoPort: (payload: undefined, source: MessageEventSource, event: MessageEvent) => void,\r\n\r\n  // to mtproto worker\r\n  requestFilePart: (payload: ServiceRequestFilePartTaskPayload) => MaybePromise<MyUploadFile>,\r\n  cancelFilePartRequests: (payload: {docId: DocId, accountNumber: ActiveAccountNumber}) => void,\r\n  requestRtmpState: (payload: {call: InputGroupCall.inputGroupCall, accountNumber: ActiveAccountNumber}) => MaybePromise<GroupCallRtmpState>,\r\n  requestRtmpPart: (payload: ServiceRequestRtmpPartTaskPayload) => MaybePromise<VideoStreamInfo>,\r\n  downloadDoc: (payload: {docId: DocId, accountNumber: ActiveAccountNumber}) => MaybePromise<Blob>,\r\n  requestDoc: (payload: {docId: DocId, accountNumber: ActiveAccountNumber}) => MaybePromise<Document.document>,\r\n  requestAltDocsByDoc: (payload: {docId: DocId, accountNumber: ActiveAccountNumber}) => MaybePromise<Document.document[]>,\r\n  decryptPush: (payload: {p: string, keyIdBase64: string}) => ReturnType<PushSingleManager['decryptPush']>\r\n} & ServiceEvent, Master> {\r\n  constructor() {\r\n    super('SERVICE');\r\n\r\n    MOUNT_CLASS_TO && (MOUNT_CLASS_TO.serviceMessagePort = this);\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type SuperMessagePort from '../lib/mtproto/superMessagePort';\r\nimport ctx from '../environment/ctx';\r\n\r\nexport default function listenMessagePort(\r\n  messagePort: SuperMessagePort<any, any, any>,\r\n  onConnect?: (source: MessageEventSource) => void,\r\n  onDisconnect?: (source: MessageEventSource) => void\r\n) {\r\n  const attachPort = (listenPort: any, sendPort: any) => {\r\n    messagePort.attachListenPort(listenPort);\r\n    sendPort && messagePort.attachSendPort(sendPort);\r\n    onConnect?.(listenPort);\r\n  };\r\n\r\n  messagePort.setOnPortDisconnect(onDisconnect);\r\n\r\n  if(typeof(SharedWorkerGlobalScope) !== 'undefined') {\r\n    (ctx as any as SharedWorkerGlobalScope).addEventListener('connect', (e) => attachPort(e.source, e.source));\r\n  } else if(typeof(ServiceWorkerGlobalScope) !== 'undefined') {\r\n    attachPort(ctx, null);\r\n  } else {\r\n    attachPort(ctx, ctx);\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {ServiceDownloadTaskPayload} from './serviceMessagePort';\r\nimport type ServiceMessagePort from './serviceMessagePort';\r\nimport deferredPromise, {CancellablePromise} from '../../helpers/cancellablePromise';\r\nimport makeError from '../../helpers/makeError';\r\nimport pause from '../../helpers/schedulers/pause';\r\nimport {logger} from '../logger';\r\nimport {invokeVoidAll, log} from './index.service';\r\n\r\ntype DownloadType = Uint8Array;\r\ntype DownloadItem = ServiceDownloadTaskPayload & {\r\n  log: ReturnType<typeof logger>,\r\n  // transformStream: TransformStream<DownloadType, DownloadType>,\r\n  readableStream: ReadableStream<DownloadType>,\r\n  // writableStream: WritableStream<DownloadType>,\r\n  // writer: WritableStreamDefaultWriter<DownloadType>,\r\n  // controller: TransformStreamDefaultController<DownloadType>,\r\n  controller: ReadableStreamController<Uint8Array>,\r\n  promise: CancellablePromise<void>,\r\n  // downloadPromise: Promise<void>,\r\n  used?: boolean\r\n};\r\nconst downloadMap: Map<string, DownloadItem> = new Map();\r\nconst DOWNLOAD_ERROR = makeError('UNKNOWN');\r\nconst DOWNLOAD_TEST = false;\r\n\r\n(self as any).downloadMap = downloadMap;\r\n\r\ntype A = Parameters<ServiceMessagePort<false>['addMultipleEventsListeners']>[0];\r\n\r\nconst events: A = {\r\n  download: (payload) => {\r\n    const {id} = payload;\r\n    if(downloadMap.has(id)) {\r\n      return Promise.reject(DOWNLOAD_ERROR);\r\n    }\r\n\r\n    const log = logger('DOWNLOAD-' + id);\r\n    log('prepare');\r\n\r\n    // const y = (20 * 1024 * 1024) / payload.limitPart;\r\n    // const strategy = new ByteLengthQueuingStrategy({highWaterMark: y});\r\n    // let controller: TransformStreamDefaultController<DownloadType>;\r\n    const strategy = new CountQueuingStrategy({highWaterMark: 1});\r\n    // const transformStream = new TransformStream<DownloadType, DownloadType>(/* {\r\n    //   start: (_controller) => controller = _controller,\r\n    // },  */undefined, strategy, strategy);\r\n\r\n    // const {readable, writable} = transformStream;\r\n    // const writer = writable.getWriter();\r\n\r\n    const promise = deferredPromise<void>();\r\n    promise.then(() => {\r\n      setTimeout(() => {\r\n        downloadMap.delete(id);\r\n      }, 5e3);\r\n    }, () => {\r\n      downloadMap.delete(id);\r\n    });\r\n\r\n    // writer.closed.then(promise.resolve, promise.reject);\r\n\r\n    let controller: ReadableStreamController<any>;\r\n    const readable = new ReadableStream({\r\n      start: (_controller) => {\r\n        controller = _controller;\r\n      },\r\n\r\n      cancel: (reason) => {\r\n        log('cancel', id, reason);\r\n        promise.reject(DOWNLOAD_ERROR);\r\n      }\r\n    }, strategy);\r\n\r\n    // writer.closed.catch(noop).finally(() => {\r\n    //   log.error('closed writer');\r\n    //   onEnd();\r\n    // });\r\n\r\n    // const downloadPromise = writer.closed.catch(() => {throw DOWNLOAD_ERROR;});\r\n    const item: DownloadItem = {\r\n      ...payload,\r\n      // transformStream,\r\n      readableStream: readable,\r\n      // writableStream: writable,\r\n      // writer,\r\n      // downloadPromise,\r\n      promise,\r\n      controller,\r\n      log\r\n    };\r\n\r\n    downloadMap.set(id, item);\r\n\r\n    // return downloadPromise;\r\n    return promise.catch(() => {throw DOWNLOAD_ERROR});\r\n  },\r\n\r\n  downloadChunk: ({id, chunk}) => {\r\n    const item = downloadMap.get(id);\r\n    if(!item) {\r\n      return Promise.reject();\r\n    }\r\n\r\n    // log('got chunk', id, chunk.length);\r\n\r\n    // return item.controller.enqueue(chunk);\r\n    // return item.writer.write(chunk);\r\n    // @ts-ignore\r\n    return item.controller.enqueue(chunk);\r\n  },\r\n\r\n  downloadFinalize: (id) => {\r\n    const item = downloadMap.get(id);\r\n    if(!item) {\r\n      return Promise.reject();\r\n    }\r\n\r\n    item.log('finalize');\r\n\r\n    item.promise.resolve();\r\n    // return item.controller.terminate();\r\n    // return item.writer.close();\r\n    return item.controller.close();\r\n  },\r\n\r\n  downloadCancel: (id) => {\r\n    const item = downloadMap.get(id);\r\n    if(!item) {\r\n      return;\r\n    }\r\n\r\n    item.log('cancel');\r\n\r\n    item.promise.reject();\r\n    // return item.controller.error();\r\n    // return item.writer.abort();\r\n    return item.controller.error();\r\n  }\r\n};\r\n\r\nexport default function handleDownload(serviceMessagePort: ServiceMessagePort<false>) {\r\n  serviceMessagePort.addMultipleEventsListeners(events);\r\n\r\n  return {\r\n    onDownloadFetch,\r\n    onClosedWindows: cancelAllDownloads\r\n  };\r\n}\r\n\r\nfunction onDownloadFetch(event: FetchEvent, params: string) {\r\n  invokeVoidAll('downloadRequestReceived', params);\r\n\r\n  const promise = pause(100).then(() => {\r\n    const item = downloadMap.get(params);\r\n    if(!item || (item.used && !DOWNLOAD_TEST)) {\r\n      log.warn('no such download', params);\r\n      return;\r\n    }\r\n\r\n    item.log('fetch');\r\n    item.used = true;\r\n    const stream = item.readableStream;\r\n    const response = new Response(stream, {headers: item.headers, status: 200});\r\n    return response;\r\n  });\r\n\r\n  event.respondWith(promise);\r\n}\r\n\r\nfunction cancelAllDownloads() {\r\n  log('cancelling all downloads');\r\n  if(downloadMap.size) {\r\n    for(const [id, item] of downloadMap) {\r\n      // item.writer.abort().catch(noop);\r\n      item.controller.error();\r\n    }\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport {log, serviceMessagePort} from './index.service';\r\n\r\nconst deferred: {[id: string]: ShareData[]} = {};\r\n\r\nfunction parseFormData(formData: FormData): ShareData {\r\n  return {\r\n    files: formData.getAll('files') as File[],\r\n    title: formData.get('title') as string,\r\n    text: formData.get('text') as string,\r\n    url: formData.get('url') as string\r\n  };\r\n}\r\n\r\nasync function processShareEvent(formData: FormData, clientId: string) {\r\n  try {\r\n    log('share data', formData);\r\n    const data = parseFormData(formData);\r\n    (deferred[clientId] ??= []).push(data);\r\n  } catch(err) {\r\n    log.warn('something wrong with the data', err);\r\n  }\r\n};\r\n\r\nexport function checkWindowClientForDeferredShare(windowClient: WindowClient) {\r\n  const arr = deferred[windowClient.id];\r\n  if(!arr) {\r\n    return;\r\n  }\r\n\r\n  delete deferred[windowClient.id];\r\n\r\n  log('releasing share events to client:', windowClient.id, 'length:', arr.length);\r\n  arr.forEach((data) => {\r\n    serviceMessagePort.invokeVoid('share', data, windowClient);\r\n  });\r\n}\r\n\r\nexport default function onShareFetch(event: FetchEvent, params: string) {\r\n  const promise = event.request.formData()\r\n  .then((formData) => {\r\n    processShareEvent(formData, event.resultingClientId)\r\n    return Response.redirect('..');\r\n  });\r\n\r\n  event.respondWith(promise);\r\n}\r\n","export const GROUP_CALL_AMPLITUDE_ANALYSE_COUNT_MAX = 50;\r\nexport const GROUP_CALL_AMPLITUDE_ANALYSE_INTERVAL_MS = 100;\r\nexport const GROUP_CALL_PARTICIPANTS_LOAD_LIMIT = 100;\r\n\r\nexport const enum GroupCallVideoQuality {\r\n  Thumbnail = 0,\r\n  Medium = 1,\r\n  Full = 2\r\n};\r\n\r\nexport const RTMP_UNIFIED_CHANNEL_ID = 1;\r\nexport const RTMP_UNIFIED_QUALITY = GroupCallVideoQuality.Full;\r\n","export function findIsoBox(box: any, type: string): any {\r\n  if(box.type === type) return box;\r\n  if(!box.boxes) return null;\r\n  for(const b of box.boxes) {\r\n    // todo: avoid recursion\r\n    const res = findIsoBox(b, type);\r\n    if(res) return res;\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function isoBoxToBuffer(box: any) {\r\n  return new Uint8Array(box._raw.buffer, box._raw.byteOffset, box._raw.byteLength);\r\n}\r\n","var bigInt = (function (undefined) {\r\n    \"use strict\";\r\n\r\n    var BASE = 1e7,\r\n        LOG_BASE = 7,\r\n        MAX_INT = 9007199254740992,\r\n        MAX_INT_ARR = smallToArray(MAX_INT),\r\n        DEFAULT_ALPHABET = \"0123456789abcdefghijklmnopqrstuvwxyz\";\r\n\r\n    var supportsNativeBigInt = typeof BigInt === \"function\";\r\n\r\n    function Integer(v, radix, alphabet, caseSensitive) {\r\n        if (typeof v === \"undefined\") return Integer[0];\r\n        if (typeof radix !== \"undefined\") return +radix === 10 && !alphabet ? parseValue(v) : parseBase(v, radix, alphabet, caseSensitive);\r\n        return parseValue(v);\r\n    }\r\n\r\n    function BigInteger(value, sign) {\r\n        this.value = value;\r\n        this.sign = sign;\r\n        this.isSmall = false;\r\n    }\r\n    BigInteger.prototype = Object.create(Integer.prototype);\r\n\r\n    function SmallInteger(value) {\r\n        this.value = value;\r\n        this.sign = value < 0;\r\n        this.isSmall = true;\r\n    }\r\n    SmallInteger.prototype = Object.create(Integer.prototype);\r\n\r\n    function NativeBigInt(value) {\r\n        this.value = value;\r\n    }\r\n    NativeBigInt.prototype = Object.create(Integer.prototype);\r\n\r\n    function isPrecise(n) {\r\n        return -MAX_INT < n && n < MAX_INT;\r\n    }\r\n\r\n    function smallToArray(n) { // For performance reasons doesn't reference BASE, need to change this function if BASE changes\r\n        if (n < 1e7)\r\n            return [n];\r\n        if (n < 1e14)\r\n            return [n % 1e7, Math.floor(n / 1e7)];\r\n        return [n % 1e7, Math.floor(n / 1e7) % 1e7, Math.floor(n / 1e14)];\r\n    }\r\n\r\n    function arrayToSmall(arr) { // If BASE changes this function may need to change\r\n        trim(arr);\r\n        var length = arr.length;\r\n        if (length < 4 && compareAbs(arr, MAX_INT_ARR) < 0) {\r\n            switch (length) {\r\n                case 0: return 0;\r\n                case 1: return arr[0];\r\n                case 2: return arr[0] + arr[1] * BASE;\r\n                default: return arr[0] + (arr[1] + arr[2] * BASE) * BASE;\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function trim(v) {\r\n        var i = v.length;\r\n        while (v[--i] === 0);\r\n        v.length = i + 1;\r\n    }\r\n\r\n    function createArray(length) { // function shamelessly stolen from Yaffle's library https://github.com/Yaffle/BigInteger\r\n        var x = new Array(length);\r\n        var i = -1;\r\n        while (++i < length) {\r\n            x[i] = 0;\r\n        }\r\n        return x;\r\n    }\r\n\r\n    function truncate(n) {\r\n        if (n > 0) return Math.floor(n);\r\n        return Math.ceil(n);\r\n    }\r\n\r\n    function add(a, b) { // assumes a and b are arrays with a.length >= b.length\r\n        var l_a = a.length,\r\n            l_b = b.length,\r\n            r = new Array(l_a),\r\n            carry = 0,\r\n            base = BASE,\r\n            sum, i;\r\n        for (i = 0; i < l_b; i++) {\r\n            sum = a[i] + b[i] + carry;\r\n            carry = sum >= base ? 1 : 0;\r\n            r[i] = sum - carry * base;\r\n        }\r\n        while (i < l_a) {\r\n            sum = a[i] + carry;\r\n            carry = sum === base ? 1 : 0;\r\n            r[i++] = sum - carry * base;\r\n        }\r\n        if (carry > 0) r.push(carry);\r\n        return r;\r\n    }\r\n\r\n    function addAny(a, b) {\r\n        if (a.length >= b.length) return add(a, b);\r\n        return add(b, a);\r\n    }\r\n\r\n    function addSmall(a, carry) { // assumes a is array, carry is number with 0 <= carry < MAX_INT\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            base = BASE,\r\n            sum, i;\r\n        for (i = 0; i < l; i++) {\r\n            sum = a[i] - base + carry;\r\n            carry = Math.floor(sum / base);\r\n            r[i] = sum - carry * base;\r\n            carry += 1;\r\n        }\r\n        while (carry > 0) {\r\n            r[i++] = carry % base;\r\n            carry = Math.floor(carry / base);\r\n        }\r\n        return r;\r\n    }\r\n\r\n    BigInteger.prototype.add = function (v) {\r\n        var n = parseValue(v);\r\n        if (this.sign !== n.sign) {\r\n            return this.subtract(n.negate());\r\n        }\r\n        var a = this.value, b = n.value;\r\n        if (n.isSmall) {\r\n            return new BigInteger(addSmall(a, Math.abs(b)), this.sign);\r\n        }\r\n        return new BigInteger(addAny(a, b), this.sign);\r\n    };\r\n    BigInteger.prototype.plus = BigInteger.prototype.add;\r\n\r\n    SmallInteger.prototype.add = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value;\r\n        if (a < 0 !== n.sign) {\r\n            return this.subtract(n.negate());\r\n        }\r\n        var b = n.value;\r\n        if (n.isSmall) {\r\n            if (isPrecise(a + b)) return new SmallInteger(a + b);\r\n            b = smallToArray(Math.abs(b));\r\n        }\r\n        return new BigInteger(addSmall(b, Math.abs(a)), a < 0);\r\n    };\r\n    SmallInteger.prototype.plus = SmallInteger.prototype.add;\r\n\r\n    NativeBigInt.prototype.add = function (v) {\r\n        return new NativeBigInt(this.value + parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.plus = NativeBigInt.prototype.add;\r\n\r\n    function subtract(a, b) { // assumes a and b are arrays with a >= b\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            r = new Array(a_l),\r\n            borrow = 0,\r\n            base = BASE,\r\n            i, difference;\r\n        for (i = 0; i < b_l; i++) {\r\n            difference = a[i] - borrow - b[i];\r\n            if (difference < 0) {\r\n                difference += base;\r\n                borrow = 1;\r\n            } else borrow = 0;\r\n            r[i] = difference;\r\n        }\r\n        for (i = b_l; i < a_l; i++) {\r\n            difference = a[i] - borrow;\r\n            if (difference < 0) difference += base;\r\n            else {\r\n                r[i++] = difference;\r\n                break;\r\n            }\r\n            r[i] = difference;\r\n        }\r\n        for (; i < a_l; i++) {\r\n            r[i] = a[i];\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    function subtractAny(a, b, sign) {\r\n        var value;\r\n        if (compareAbs(a, b) >= 0) {\r\n            value = subtract(a, b);\r\n        } else {\r\n            value = subtract(b, a);\r\n            sign = !sign;\r\n        }\r\n        value = arrayToSmall(value);\r\n        if (typeof value === \"number\") {\r\n            if (sign) value = -value;\r\n            return new SmallInteger(value);\r\n        }\r\n        return new BigInteger(value, sign);\r\n    }\r\n\r\n    function subtractSmall(a, b, sign) { // assumes a is array, b is number with 0 <= b < MAX_INT\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            carry = -b,\r\n            base = BASE,\r\n            i, difference;\r\n        for (i = 0; i < l; i++) {\r\n            difference = a[i] + carry;\r\n            carry = Math.floor(difference / base);\r\n            difference %= base;\r\n            r[i] = difference < 0 ? difference + base : difference;\r\n        }\r\n        r = arrayToSmall(r);\r\n        if (typeof r === \"number\") {\r\n            if (sign) r = -r;\r\n            return new SmallInteger(r);\r\n        } return new BigInteger(r, sign);\r\n    }\r\n\r\n    BigInteger.prototype.subtract = function (v) {\r\n        var n = parseValue(v);\r\n        if (this.sign !== n.sign) {\r\n            return this.add(n.negate());\r\n        }\r\n        var a = this.value, b = n.value;\r\n        if (n.isSmall)\r\n            return subtractSmall(a, Math.abs(b), this.sign);\r\n        return subtractAny(a, b, this.sign);\r\n    };\r\n    BigInteger.prototype.minus = BigInteger.prototype.subtract;\r\n\r\n    SmallInteger.prototype.subtract = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value;\r\n        if (a < 0 !== n.sign) {\r\n            return this.add(n.negate());\r\n        }\r\n        var b = n.value;\r\n        if (n.isSmall) {\r\n            return new SmallInteger(a - b);\r\n        }\r\n        return subtractSmall(b, Math.abs(a), a >= 0);\r\n    };\r\n    SmallInteger.prototype.minus = SmallInteger.prototype.subtract;\r\n\r\n    NativeBigInt.prototype.subtract = function (v) {\r\n        return new NativeBigInt(this.value - parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.minus = NativeBigInt.prototype.subtract;\r\n\r\n    BigInteger.prototype.negate = function () {\r\n        return new BigInteger(this.value, !this.sign);\r\n    };\r\n    SmallInteger.prototype.negate = function () {\r\n        var sign = this.sign;\r\n        var small = new SmallInteger(-this.value);\r\n        small.sign = !sign;\r\n        return small;\r\n    };\r\n    NativeBigInt.prototype.negate = function () {\r\n        return new NativeBigInt(-this.value);\r\n    }\r\n\r\n    BigInteger.prototype.abs = function () {\r\n        return new BigInteger(this.value, false);\r\n    };\r\n    SmallInteger.prototype.abs = function () {\r\n        return new SmallInteger(Math.abs(this.value));\r\n    };\r\n    NativeBigInt.prototype.abs = function () {\r\n        return new NativeBigInt(this.value >= 0 ? this.value : -this.value);\r\n    }\r\n\r\n\r\n    function multiplyLong(a, b) {\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            l = a_l + b_l,\r\n            r = createArray(l),\r\n            base = BASE,\r\n            product, carry, i, a_i, b_j;\r\n        for (i = 0; i < a_l; ++i) {\r\n            a_i = a[i];\r\n            for (var j = 0; j < b_l; ++j) {\r\n                b_j = b[j];\r\n                product = a_i * b_j + r[i + j];\r\n                carry = Math.floor(product / base);\r\n                r[i + j] = product - carry * base;\r\n                r[i + j + 1] += carry;\r\n            }\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    function multiplySmall(a, b) { // assumes a is array, b is number with |b| < BASE\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            base = BASE,\r\n            carry = 0,\r\n            product, i;\r\n        for (i = 0; i < l; i++) {\r\n            product = a[i] * b + carry;\r\n            carry = Math.floor(product / base);\r\n            r[i] = product - carry * base;\r\n        }\r\n        while (carry > 0) {\r\n            r[i++] = carry % base;\r\n            carry = Math.floor(carry / base);\r\n        }\r\n        return r;\r\n    }\r\n\r\n    function shiftLeft(x, n) {\r\n        var r = [];\r\n        while (n-- > 0) r.push(0);\r\n        return r.concat(x);\r\n    }\r\n\r\n    function multiplyKaratsuba(x, y) {\r\n        var n = Math.max(x.length, y.length);\r\n\r\n        if (n <= 30) return multiplyLong(x, y);\r\n        n = Math.ceil(n / 2);\r\n\r\n        var b = x.slice(n),\r\n            a = x.slice(0, n),\r\n            d = y.slice(n),\r\n            c = y.slice(0, n);\r\n\r\n        var ac = multiplyKaratsuba(a, c),\r\n            bd = multiplyKaratsuba(b, d),\r\n            abcd = multiplyKaratsuba(addAny(a, b), addAny(c, d));\r\n\r\n        var product = addAny(addAny(ac, shiftLeft(subtract(subtract(abcd, ac), bd), n)), shiftLeft(bd, 2 * n));\r\n        trim(product);\r\n        return product;\r\n    }\r\n\r\n    // The following function is derived from a surface fit of a graph plotting the performance difference\r\n    // between long multiplication and karatsuba multiplication versus the lengths of the two arrays.\r\n    function useKaratsuba(l1, l2) {\r\n        return -0.012 * l1 - 0.012 * l2 + 0.000015 * l1 * l2 > 0;\r\n    }\r\n\r\n    BigInteger.prototype.multiply = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value, b = n.value,\r\n            sign = this.sign !== n.sign,\r\n            abs;\r\n        if (n.isSmall) {\r\n            if (b === 0) return Integer[0];\r\n            if (b === 1) return this;\r\n            if (b === -1) return this.negate();\r\n            abs = Math.abs(b);\r\n            if (abs < BASE) {\r\n                return new BigInteger(multiplySmall(a, abs), sign);\r\n            }\r\n            b = smallToArray(abs);\r\n        }\r\n        if (useKaratsuba(a.length, b.length)) // Karatsuba is only faster for certain array sizes\r\n            return new BigInteger(multiplyKaratsuba(a, b), sign);\r\n        return new BigInteger(multiplyLong(a, b), sign);\r\n    };\r\n\r\n    BigInteger.prototype.times = BigInteger.prototype.multiply;\r\n\r\n    function multiplySmallAndArray(a, b, sign) { // a >= 0\r\n        if (a < BASE) {\r\n            return new BigInteger(multiplySmall(b, a), sign);\r\n        }\r\n        return new BigInteger(multiplyLong(b, smallToArray(a)), sign);\r\n    }\r\n    SmallInteger.prototype._multiplyBySmall = function (a) {\r\n        if (isPrecise(a.value * this.value)) {\r\n            return new SmallInteger(a.value * this.value);\r\n        }\r\n        return multiplySmallAndArray(Math.abs(a.value), smallToArray(Math.abs(this.value)), this.sign !== a.sign);\r\n    };\r\n    BigInteger.prototype._multiplyBySmall = function (a) {\r\n        if (a.value === 0) return Integer[0];\r\n        if (a.value === 1) return this;\r\n        if (a.value === -1) return this.negate();\r\n        return multiplySmallAndArray(Math.abs(a.value), this.value, this.sign !== a.sign);\r\n    };\r\n    SmallInteger.prototype.multiply = function (v) {\r\n        return parseValue(v)._multiplyBySmall(this);\r\n    };\r\n    SmallInteger.prototype.times = SmallInteger.prototype.multiply;\r\n\r\n    NativeBigInt.prototype.multiply = function (v) {\r\n        return new NativeBigInt(this.value * parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.times = NativeBigInt.prototype.multiply;\r\n\r\n    function square(a) {\r\n        //console.assert(2 * BASE * BASE < MAX_INT);\r\n        var l = a.length,\r\n            r = createArray(l + l),\r\n            base = BASE,\r\n            product, carry, i, a_i, a_j;\r\n        for (i = 0; i < l; i++) {\r\n            a_i = a[i];\r\n            carry = 0 - a_i * a_i;\r\n            for (var j = i; j < l; j++) {\r\n                a_j = a[j];\r\n                product = 2 * (a_i * a_j) + r[i + j] + carry;\r\n                carry = Math.floor(product / base);\r\n                r[i + j] = product - carry * base;\r\n            }\r\n            r[i + l] = carry;\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    BigInteger.prototype.square = function () {\r\n        return new BigInteger(square(this.value), false);\r\n    };\r\n\r\n    SmallInteger.prototype.square = function () {\r\n        var value = this.value * this.value;\r\n        if (isPrecise(value)) return new SmallInteger(value);\r\n        return new BigInteger(square(smallToArray(Math.abs(this.value))), false);\r\n    };\r\n\r\n    NativeBigInt.prototype.square = function (v) {\r\n        return new NativeBigInt(this.value * this.value);\r\n    }\r\n\r\n    function divMod1(a, b) { // Left over from previous version. Performs faster than divMod2 on smaller input sizes.\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            base = BASE,\r\n            result = createArray(b.length),\r\n            divisorMostSignificantDigit = b[b_l - 1],\r\n            // normalization\r\n            lambda = Math.ceil(base / (2 * divisorMostSignificantDigit)),\r\n            remainder = multiplySmall(a, lambda),\r\n            divisor = multiplySmall(b, lambda),\r\n            quotientDigit, shift, carry, borrow, i, l, q;\r\n        if (remainder.length <= a_l) remainder.push(0);\r\n        divisor.push(0);\r\n        divisorMostSignificantDigit = divisor[b_l - 1];\r\n        for (shift = a_l - b_l; shift >= 0; shift--) {\r\n            quotientDigit = base - 1;\r\n            if (remainder[shift + b_l] !== divisorMostSignificantDigit) {\r\n                quotientDigit = Math.floor((remainder[shift + b_l] * base + remainder[shift + b_l - 1]) / divisorMostSignificantDigit);\r\n            }\r\n            // quotientDigit <= base - 1\r\n            carry = 0;\r\n            borrow = 0;\r\n            l = divisor.length;\r\n            for (i = 0; i < l; i++) {\r\n                carry += quotientDigit * divisor[i];\r\n                q = Math.floor(carry / base);\r\n                borrow += remainder[shift + i] - (carry - q * base);\r\n                carry = q;\r\n                if (borrow < 0) {\r\n                    remainder[shift + i] = borrow + base;\r\n                    borrow = -1;\r\n                } else {\r\n                    remainder[shift + i] = borrow;\r\n                    borrow = 0;\r\n                }\r\n            }\r\n            while (borrow !== 0) {\r\n                quotientDigit -= 1;\r\n                carry = 0;\r\n                for (i = 0; i < l; i++) {\r\n                    carry += remainder[shift + i] - base + divisor[i];\r\n                    if (carry < 0) {\r\n                        remainder[shift + i] = carry + base;\r\n                        carry = 0;\r\n                    } else {\r\n                        remainder[shift + i] = carry;\r\n                        carry = 1;\r\n                    }\r\n                }\r\n                borrow += carry;\r\n            }\r\n            result[shift] = quotientDigit;\r\n        }\r\n        // denormalization\r\n        remainder = divModSmall(remainder, lambda)[0];\r\n        return [arrayToSmall(result), arrayToSmall(remainder)];\r\n    }\r\n\r\n    function divMod2(a, b) { // Implementation idea shamelessly stolen from Silent Matt's library http://silentmatt.com/biginteger/\r\n        // Performs faster than divMod1 on larger input sizes.\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            result = [],\r\n            part = [],\r\n            base = BASE,\r\n            guess, xlen, highx, highy, check;\r\n        while (a_l) {\r\n            part.unshift(a[--a_l]);\r\n            trim(part);\r\n            if (compareAbs(part, b) < 0) {\r\n                result.push(0);\r\n                continue;\r\n            }\r\n            xlen = part.length;\r\n            highx = part[xlen - 1] * base + part[xlen - 2];\r\n            highy = b[b_l - 1] * base + b[b_l - 2];\r\n            if (xlen > b_l) {\r\n                highx = (highx + 1) * base;\r\n            }\r\n            guess = Math.ceil(highx / highy);\r\n            do {\r\n                check = multiplySmall(b, guess);\r\n                if (compareAbs(check, part) <= 0) break;\r\n                guess--;\r\n            } while (guess);\r\n            result.push(guess);\r\n            part = subtract(part, check);\r\n        }\r\n        result.reverse();\r\n        return [arrayToSmall(result), arrayToSmall(part)];\r\n    }\r\n\r\n    function divModSmall(value, lambda) {\r\n        var length = value.length,\r\n            quotient = createArray(length),\r\n            base = BASE,\r\n            i, q, remainder, divisor;\r\n        remainder = 0;\r\n        for (i = length - 1; i >= 0; --i) {\r\n            divisor = remainder * base + value[i];\r\n            q = truncate(divisor / lambda);\r\n            remainder = divisor - q * lambda;\r\n            quotient[i] = q | 0;\r\n        }\r\n        return [quotient, remainder | 0];\r\n    }\r\n\r\n    function divModAny(self, v) {\r\n        var value, n = parseValue(v);\r\n        if (supportsNativeBigInt) {\r\n            return [new NativeBigInt(self.value / n.value), new NativeBigInt(self.value % n.value)];\r\n        }\r\n        var a = self.value, b = n.value;\r\n        var quotient;\r\n        if (b === 0) throw new Error(\"Cannot divide by zero\");\r\n        if (self.isSmall) {\r\n            if (n.isSmall) {\r\n                return [new SmallInteger(truncate(a / b)), new SmallInteger(a % b)];\r\n            }\r\n            return [Integer[0], self];\r\n        }\r\n        if (n.isSmall) {\r\n            if (b === 1) return [self, Integer[0]];\r\n            if (b == -1) return [self.negate(), Integer[0]];\r\n            var abs = Math.abs(b);\r\n            if (abs < BASE) {\r\n                value = divModSmall(a, abs);\r\n                quotient = arrayToSmall(value[0]);\r\n                var remainder = value[1];\r\n                if (self.sign) remainder = -remainder;\r\n                if (typeof quotient === \"number\") {\r\n                    if (self.sign !== n.sign) quotient = -quotient;\r\n                    return [new SmallInteger(quotient), new SmallInteger(remainder)];\r\n                }\r\n                return [new BigInteger(quotient, self.sign !== n.sign), new SmallInteger(remainder)];\r\n            }\r\n            b = smallToArray(abs);\r\n        }\r\n        var comparison = compareAbs(a, b);\r\n        if (comparison === -1) return [Integer[0], self];\r\n        if (comparison === 0) return [Integer[self.sign === n.sign ? 1 : -1], Integer[0]];\r\n\r\n        // divMod1 is faster on smaller input sizes\r\n        if (a.length + b.length <= 200)\r\n            value = divMod1(a, b);\r\n        else value = divMod2(a, b);\r\n\r\n        quotient = value[0];\r\n        var qSign = self.sign !== n.sign,\r\n            mod = value[1],\r\n            mSign = self.sign;\r\n        if (typeof quotient === \"number\") {\r\n            if (qSign) quotient = -quotient;\r\n            quotient = new SmallInteger(quotient);\r\n        } else quotient = new BigInteger(quotient, qSign);\r\n        if (typeof mod === \"number\") {\r\n            if (mSign) mod = -mod;\r\n            mod = new SmallInteger(mod);\r\n        } else mod = new BigInteger(mod, mSign);\r\n        return [quotient, mod];\r\n    }\r\n\r\n    BigInteger.prototype.divmod = function (v) {\r\n        var result = divModAny(this, v);\r\n        return {\r\n            quotient: result[0],\r\n            remainder: result[1]\r\n        };\r\n    };\r\n    NativeBigInt.prototype.divmod = SmallInteger.prototype.divmod = BigInteger.prototype.divmod;\r\n\r\n\r\n    BigInteger.prototype.divide = function (v) {\r\n        return divModAny(this, v)[0];\r\n    };\r\n    NativeBigInt.prototype.over = NativeBigInt.prototype.divide = function (v) {\r\n        return new NativeBigInt(this.value / parseValue(v).value);\r\n    };\r\n    SmallInteger.prototype.over = SmallInteger.prototype.divide = BigInteger.prototype.over = BigInteger.prototype.divide;\r\n\r\n    BigInteger.prototype.mod = function (v) {\r\n        return divModAny(this, v)[1];\r\n    };\r\n    NativeBigInt.prototype.mod = NativeBigInt.prototype.remainder = function (v) {\r\n        return new NativeBigInt(this.value % parseValue(v).value);\r\n    };\r\n    SmallInteger.prototype.remainder = SmallInteger.prototype.mod = BigInteger.prototype.remainder = BigInteger.prototype.mod;\r\n\r\n    BigInteger.prototype.pow = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value,\r\n            value, x, y;\r\n        if (b === 0) return Integer[1];\r\n        if (a === 0) return Integer[0];\r\n        if (a === 1) return Integer[1];\r\n        if (a === -1) return n.isEven() ? Integer[1] : Integer[-1];\r\n        if (n.sign) {\r\n            return Integer[0];\r\n        }\r\n        if (!n.isSmall) throw new Error(\"The exponent \" + n.toString() + \" is too large.\");\r\n        if (this.isSmall) {\r\n            if (isPrecise(value = Math.pow(a, b)))\r\n                return new SmallInteger(truncate(value));\r\n        }\r\n        x = this;\r\n        y = Integer[1];\r\n        while (true) {\r\n            if (b & 1 === 1) {\r\n                y = y.times(x);\r\n                --b;\r\n            }\r\n            if (b === 0) break;\r\n            b /= 2;\r\n            x = x.square();\r\n        }\r\n        return y;\r\n    };\r\n    SmallInteger.prototype.pow = BigInteger.prototype.pow;\r\n\r\n    NativeBigInt.prototype.pow = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value, b = n.value;\r\n        var _0 = BigInt(0), _1 = BigInt(1), _2 = BigInt(2);\r\n        if (b === _0) return Integer[1];\r\n        if (a === _0) return Integer[0];\r\n        if (a === _1) return Integer[1];\r\n        if (a === BigInt(-1)) return n.isEven() ? Integer[1] : Integer[-1];\r\n        if (n.isNegative()) return new NativeBigInt(_0);\r\n        var x = this;\r\n        var y = Integer[1];\r\n        while (true) {\r\n            if ((b & _1) === _1) {\r\n                y = y.times(x);\r\n                --b;\r\n            }\r\n            if (b === _0) break;\r\n            b /= _2;\r\n            x = x.square();\r\n        }\r\n        return y;\r\n    }\r\n\r\n    BigInteger.prototype.modPow = function (exp, mod) {\r\n        exp = parseValue(exp);\r\n        mod = parseValue(mod);\r\n        if (mod.isZero()) throw new Error(\"Cannot take modPow with modulus 0\");\r\n        var r = Integer[1],\r\n            base = this.mod(mod);\r\n        if (exp.isNegative()) {\r\n            exp = exp.multiply(Integer[-1]);\r\n            base = base.modInv(mod);\r\n        }\r\n        while (exp.isPositive()) {\r\n            if (base.isZero()) return Integer[0];\r\n            if (exp.isOdd()) r = r.multiply(base).mod(mod);\r\n            exp = exp.divide(2);\r\n            base = base.square().mod(mod);\r\n        }\r\n        return r;\r\n    };\r\n    NativeBigInt.prototype.modPow = SmallInteger.prototype.modPow = BigInteger.prototype.modPow;\r\n\r\n    function compareAbs(a, b) {\r\n        if (a.length !== b.length) {\r\n            return a.length > b.length ? 1 : -1;\r\n        }\r\n        for (var i = a.length - 1; i >= 0; i--) {\r\n            if (a[i] !== b[i]) return a[i] > b[i] ? 1 : -1;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    BigInteger.prototype.compareAbs = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (n.isSmall) return 1;\r\n        return compareAbs(a, b);\r\n    };\r\n    SmallInteger.prototype.compareAbs = function (v) {\r\n        var n = parseValue(v),\r\n            a = Math.abs(this.value),\r\n            b = n.value;\r\n        if (n.isSmall) {\r\n            b = Math.abs(b);\r\n            return a === b ? 0 : a > b ? 1 : -1;\r\n        }\r\n        return -1;\r\n    };\r\n    NativeBigInt.prototype.compareAbs = function (v) {\r\n        var a = this.value;\r\n        var b = parseValue(v).value;\r\n        a = a >= 0 ? a : -a;\r\n        b = b >= 0 ? b : -b;\r\n        return a === b ? 0 : a > b ? 1 : -1;\r\n    }\r\n\r\n    BigInteger.prototype.compare = function (v) {\r\n        // See discussion about comparison with Infinity:\r\n        // https://github.com/peterolson/BigInteger.js/issues/61\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (this.sign !== n.sign) {\r\n            return n.sign ? 1 : -1;\r\n        }\r\n        if (n.isSmall) {\r\n            return this.sign ? -1 : 1;\r\n        }\r\n        return compareAbs(a, b) * (this.sign ? -1 : 1);\r\n    };\r\n    BigInteger.prototype.compareTo = BigInteger.prototype.compare;\r\n\r\n    SmallInteger.prototype.compare = function (v) {\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (n.isSmall) {\r\n            return a == b ? 0 : a > b ? 1 : -1;\r\n        }\r\n        if (a < 0 !== n.sign) {\r\n            return a < 0 ? -1 : 1;\r\n        }\r\n        return a < 0 ? 1 : -1;\r\n    };\r\n    SmallInteger.prototype.compareTo = SmallInteger.prototype.compare;\r\n\r\n    NativeBigInt.prototype.compare = function (v) {\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n        var a = this.value;\r\n        var b = parseValue(v).value;\r\n        return a === b ? 0 : a > b ? 1 : -1;\r\n    }\r\n    NativeBigInt.prototype.compareTo = NativeBigInt.prototype.compare;\r\n\r\n    BigInteger.prototype.equals = function (v) {\r\n        return this.compare(v) === 0;\r\n    };\r\n    NativeBigInt.prototype.eq = NativeBigInt.prototype.equals = SmallInteger.prototype.eq = SmallInteger.prototype.equals = BigInteger.prototype.eq = BigInteger.prototype.equals;\r\n\r\n    BigInteger.prototype.notEquals = function (v) {\r\n        return this.compare(v) !== 0;\r\n    };\r\n    NativeBigInt.prototype.neq = NativeBigInt.prototype.notEquals = SmallInteger.prototype.neq = SmallInteger.prototype.notEquals = BigInteger.prototype.neq = BigInteger.prototype.notEquals;\r\n\r\n    BigInteger.prototype.greater = function (v) {\r\n        return this.compare(v) > 0;\r\n    };\r\n    NativeBigInt.prototype.gt = NativeBigInt.prototype.greater = SmallInteger.prototype.gt = SmallInteger.prototype.greater = BigInteger.prototype.gt = BigInteger.prototype.greater;\r\n\r\n    BigInteger.prototype.lesser = function (v) {\r\n        return this.compare(v) < 0;\r\n    };\r\n    NativeBigInt.prototype.lt = NativeBigInt.prototype.lesser = SmallInteger.prototype.lt = SmallInteger.prototype.lesser = BigInteger.prototype.lt = BigInteger.prototype.lesser;\r\n\r\n    BigInteger.prototype.greaterOrEquals = function (v) {\r\n        return this.compare(v) >= 0;\r\n    };\r\n    NativeBigInt.prototype.geq = NativeBigInt.prototype.greaterOrEquals = SmallInteger.prototype.geq = SmallInteger.prototype.greaterOrEquals = BigInteger.prototype.geq = BigInteger.prototype.greaterOrEquals;\r\n\r\n    BigInteger.prototype.lesserOrEquals = function (v) {\r\n        return this.compare(v) <= 0;\r\n    };\r\n    NativeBigInt.prototype.leq = NativeBigInt.prototype.lesserOrEquals = SmallInteger.prototype.leq = SmallInteger.prototype.lesserOrEquals = BigInteger.prototype.leq = BigInteger.prototype.lesserOrEquals;\r\n\r\n    BigInteger.prototype.isEven = function () {\r\n        return (this.value[0] & 1) === 0;\r\n    };\r\n    SmallInteger.prototype.isEven = function () {\r\n        return (this.value & 1) === 0;\r\n    };\r\n    NativeBigInt.prototype.isEven = function () {\r\n        return (this.value & BigInt(1)) === BigInt(0);\r\n    }\r\n\r\n    BigInteger.prototype.isOdd = function () {\r\n        return (this.value[0] & 1) === 1;\r\n    };\r\n    SmallInteger.prototype.isOdd = function () {\r\n        return (this.value & 1) === 1;\r\n    };\r\n    NativeBigInt.prototype.isOdd = function () {\r\n        return (this.value & BigInt(1)) === BigInt(1);\r\n    }\r\n\r\n    BigInteger.prototype.isPositive = function () {\r\n        return !this.sign;\r\n    };\r\n    SmallInteger.prototype.isPositive = function () {\r\n        return this.value > 0;\r\n    };\r\n    NativeBigInt.prototype.isPositive = SmallInteger.prototype.isPositive;\r\n\r\n    BigInteger.prototype.isNegative = function () {\r\n        return this.sign;\r\n    };\r\n    SmallInteger.prototype.isNegative = function () {\r\n        return this.value < 0;\r\n    };\r\n    NativeBigInt.prototype.isNegative = SmallInteger.prototype.isNegative;\r\n\r\n    BigInteger.prototype.isUnit = function () {\r\n        return false;\r\n    };\r\n    SmallInteger.prototype.isUnit = function () {\r\n        return Math.abs(this.value) === 1;\r\n    };\r\n    NativeBigInt.prototype.isUnit = function () {\r\n        return this.abs().value === BigInt(1);\r\n    }\r\n\r\n    BigInteger.prototype.isZero = function () {\r\n        return false;\r\n    };\r\n    SmallInteger.prototype.isZero = function () {\r\n        return this.value === 0;\r\n    };\r\n    NativeBigInt.prototype.isZero = function () {\r\n        return this.value === BigInt(0);\r\n    }\r\n\r\n    BigInteger.prototype.isDivisibleBy = function (v) {\r\n        var n = parseValue(v);\r\n        if (n.isZero()) return false;\r\n        if (n.isUnit()) return true;\r\n        if (n.compareAbs(2) === 0) return this.isEven();\r\n        return this.mod(n).isZero();\r\n    };\r\n    NativeBigInt.prototype.isDivisibleBy = SmallInteger.prototype.isDivisibleBy = BigInteger.prototype.isDivisibleBy;\r\n\r\n    function isBasicPrime(v) {\r\n        var n = v.abs();\r\n        if (n.isUnit()) return false;\r\n        if (n.equals(2) || n.equals(3) || n.equals(5)) return true;\r\n        if (n.isEven() || n.isDivisibleBy(3) || n.isDivisibleBy(5)) return false;\r\n        if (n.lesser(49)) return true;\r\n        // we don't know if it's prime: let the other functions figure it out\r\n    }\r\n\r\n    function millerRabinTest(n, a) {\r\n        var nPrev = n.prev(),\r\n            b = nPrev,\r\n            r = 0,\r\n            d, t, i, x;\r\n        while (b.isEven()) b = b.divide(2), r++;\r\n        next: for (i = 0; i < a.length; i++) {\r\n            if (n.lesser(a[i])) continue;\r\n            x = bigInt(a[i]).modPow(b, n);\r\n            if (x.isUnit() || x.equals(nPrev)) continue;\r\n            for (d = r - 1; d != 0; d--) {\r\n                x = x.square().mod(n);\r\n                if (x.isUnit()) return false;\r\n                if (x.equals(nPrev)) continue next;\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // Set \"strict\" to true to force GRH-supported lower bound of 2*log(N)^2\r\n    BigInteger.prototype.isPrime = function (strict) {\r\n        var isPrime = isBasicPrime(this);\r\n        if (isPrime !== undefined) return isPrime;\r\n        var n = this.abs();\r\n        var bits = n.bitLength();\r\n        if (bits <= 64)\r\n            return millerRabinTest(n, [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37]);\r\n        var logN = Math.log(2) * bits.toJSNumber();\r\n        var t = Math.ceil((strict === true) ? (2 * Math.pow(logN, 2)) : logN);\r\n        for (var a = [], i = 0; i < t; i++) {\r\n            a.push(bigInt(i + 2));\r\n        }\r\n        return millerRabinTest(n, a);\r\n    };\r\n    NativeBigInt.prototype.isPrime = SmallInteger.prototype.isPrime = BigInteger.prototype.isPrime;\r\n\r\n    BigInteger.prototype.isProbablePrime = function (iterations, rng) {\r\n        var isPrime = isBasicPrime(this);\r\n        if (isPrime !== undefined) return isPrime;\r\n        var n = this.abs();\r\n        var t = iterations === undefined ? 5 : iterations;\r\n        for (var a = [], i = 0; i < t; i++) {\r\n            a.push(bigInt.randBetween(2, n.minus(2), rng));\r\n        }\r\n        return millerRabinTest(n, a);\r\n    };\r\n    NativeBigInt.prototype.isProbablePrime = SmallInteger.prototype.isProbablePrime = BigInteger.prototype.isProbablePrime;\r\n\r\n    BigInteger.prototype.modInv = function (n) {\r\n        var t = bigInt.zero, newT = bigInt.one, r = parseValue(n), newR = this.abs(), q, lastT, lastR;\r\n        while (!newR.isZero()) {\r\n            q = r.divide(newR);\r\n            lastT = t;\r\n            lastR = r;\r\n            t = newT;\r\n            r = newR;\r\n            newT = lastT.subtract(q.multiply(newT));\r\n            newR = lastR.subtract(q.multiply(newR));\r\n        }\r\n        if (!r.isUnit()) throw new Error(this.toString() + \" and \" + n.toString() + \" are not co-prime\");\r\n        if (t.compare(0) === -1) {\r\n            t = t.add(n);\r\n        }\r\n        if (this.isNegative()) {\r\n            return t.negate();\r\n        }\r\n        return t;\r\n    };\r\n\r\n    NativeBigInt.prototype.modInv = SmallInteger.prototype.modInv = BigInteger.prototype.modInv;\r\n\r\n    BigInteger.prototype.next = function () {\r\n        var value = this.value;\r\n        if (this.sign) {\r\n            return subtractSmall(value, 1, this.sign);\r\n        }\r\n        return new BigInteger(addSmall(value, 1), this.sign);\r\n    };\r\n    SmallInteger.prototype.next = function () {\r\n        var value = this.value;\r\n        if (value + 1 < MAX_INT) return new SmallInteger(value + 1);\r\n        return new BigInteger(MAX_INT_ARR, false);\r\n    };\r\n    NativeBigInt.prototype.next = function () {\r\n        return new NativeBigInt(this.value + BigInt(1));\r\n    }\r\n\r\n    BigInteger.prototype.prev = function () {\r\n        var value = this.value;\r\n        if (this.sign) {\r\n            return new BigInteger(addSmall(value, 1), true);\r\n        }\r\n        return subtractSmall(value, 1, this.sign);\r\n    };\r\n    SmallInteger.prototype.prev = function () {\r\n        var value = this.value;\r\n        if (value - 1 > -MAX_INT) return new SmallInteger(value - 1);\r\n        return new BigInteger(MAX_INT_ARR, true);\r\n    };\r\n    NativeBigInt.prototype.prev = function () {\r\n        return new NativeBigInt(this.value - BigInt(1));\r\n    }\r\n\r\n    var powersOfTwo = [1];\r\n    while (2 * powersOfTwo[powersOfTwo.length - 1] <= BASE) powersOfTwo.push(2 * powersOfTwo[powersOfTwo.length - 1]);\r\n    var powers2Length = powersOfTwo.length, highestPower2 = powersOfTwo[powers2Length - 1];\r\n\r\n    function shift_isSmall(n) {\r\n        return Math.abs(n) <= BASE;\r\n    }\r\n\r\n    BigInteger.prototype.shiftLeft = function (v) {\r\n        var n = parseValue(v).toJSNumber();\r\n        if (!shift_isSmall(n)) {\r\n            throw new Error(String(n) + \" is too large for shifting.\");\r\n        }\r\n        if (n < 0) return this.shiftRight(-n);\r\n        var result = this;\r\n        if (result.isZero()) return result;\r\n        while (n >= powers2Length) {\r\n            result = result.multiply(highestPower2);\r\n            n -= powers2Length - 1;\r\n        }\r\n        return result.multiply(powersOfTwo[n]);\r\n    };\r\n    NativeBigInt.prototype.shiftLeft = SmallInteger.prototype.shiftLeft = BigInteger.prototype.shiftLeft;\r\n\r\n    BigInteger.prototype.shiftRight = function (v) {\r\n        var remQuo;\r\n        var n = parseValue(v).toJSNumber();\r\n        if (!shift_isSmall(n)) {\r\n            throw new Error(String(n) + \" is too large for shifting.\");\r\n        }\r\n        if (n < 0) return this.shiftLeft(-n);\r\n        var result = this;\r\n        while (n >= powers2Length) {\r\n            if (result.isZero() || (result.isNegative() && result.isUnit())) return result;\r\n            remQuo = divModAny(result, highestPower2);\r\n            result = remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];\r\n            n -= powers2Length - 1;\r\n        }\r\n        remQuo = divModAny(result, powersOfTwo[n]);\r\n        return remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];\r\n    };\r\n    NativeBigInt.prototype.shiftRight = SmallInteger.prototype.shiftRight = BigInteger.prototype.shiftRight;\r\n\r\n    function bitwise(x, y, fn) {\r\n        y = parseValue(y);\r\n        var xSign = x.isNegative(), ySign = y.isNegative();\r\n        var xRem = xSign ? x.not() : x,\r\n            yRem = ySign ? y.not() : y;\r\n        var xDigit = 0, yDigit = 0;\r\n        var xDivMod = null, yDivMod = null;\r\n        var result = [];\r\n        while (!xRem.isZero() || !yRem.isZero()) {\r\n            xDivMod = divModAny(xRem, highestPower2);\r\n            xDigit = xDivMod[1].toJSNumber();\r\n            if (xSign) {\r\n                xDigit = highestPower2 - 1 - xDigit; // two's complement for negative numbers\r\n            }\r\n\r\n            yDivMod = divModAny(yRem, highestPower2);\r\n            yDigit = yDivMod[1].toJSNumber();\r\n            if (ySign) {\r\n                yDigit = highestPower2 - 1 - yDigit; // two's complement for negative numbers\r\n            }\r\n\r\n            xRem = xDivMod[0];\r\n            yRem = yDivMod[0];\r\n            result.push(fn(xDigit, yDigit));\r\n        }\r\n        var sum = fn(xSign ? 1 : 0, ySign ? 1 : 0) !== 0 ? bigInt(-1) : bigInt(0);\r\n        for (var i = result.length - 1; i >= 0; i -= 1) {\r\n            sum = sum.multiply(highestPower2).add(bigInt(result[i]));\r\n        }\r\n        return sum;\r\n    }\r\n\r\n    BigInteger.prototype.not = function () {\r\n        return this.negate().prev();\r\n    };\r\n    NativeBigInt.prototype.not = SmallInteger.prototype.not = BigInteger.prototype.not;\r\n\r\n    BigInteger.prototype.and = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a & b; });\r\n    };\r\n    NativeBigInt.prototype.and = SmallInteger.prototype.and = BigInteger.prototype.and;\r\n\r\n    BigInteger.prototype.or = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a | b; });\r\n    };\r\n    NativeBigInt.prototype.or = SmallInteger.prototype.or = BigInteger.prototype.or;\r\n\r\n    BigInteger.prototype.xor = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a ^ b; });\r\n    };\r\n    NativeBigInt.prototype.xor = SmallInteger.prototype.xor = BigInteger.prototype.xor;\r\n\r\n    var LOBMASK_I = 1 << 30, LOBMASK_BI = (BASE & -BASE) * (BASE & -BASE) | LOBMASK_I;\r\n    function roughLOB(n) { // get lowestOneBit (rough)\r\n        // SmallInteger: return Min(lowestOneBit(n), 1 << 30)\r\n        // BigInteger: return Min(lowestOneBit(n), 1 << 14) [BASE=1e7]\r\n        var v = n.value,\r\n            x = typeof v === \"number\" ? v | LOBMASK_I :\r\n                typeof v === \"bigint\" ? v | BigInt(LOBMASK_I) :\r\n                    v[0] + v[1] * BASE | LOBMASK_BI;\r\n        return x & -x;\r\n    }\r\n\r\n    function integerLogarithm(value, base) {\r\n        if (base.compareTo(value) <= 0) {\r\n            var tmp = integerLogarithm(value, base.square(base));\r\n            var p = tmp.p;\r\n            var e = tmp.e;\r\n            var t = p.multiply(base);\r\n            return t.compareTo(value) <= 0 ? { p: t, e: e * 2 + 1 } : { p: p, e: e * 2 };\r\n        }\r\n        return { p: bigInt(1), e: 0 };\r\n    }\r\n\r\n    BigInteger.prototype.bitLength = function () {\r\n        var n = this;\r\n        if (n.compareTo(bigInt(0)) < 0) {\r\n            n = n.negate().subtract(bigInt(1));\r\n        }\r\n        if (n.compareTo(bigInt(0)) === 0) {\r\n            return bigInt(0);\r\n        }\r\n        return bigInt(integerLogarithm(n, bigInt(2)).e).add(bigInt(1));\r\n    }\r\n    NativeBigInt.prototype.bitLength = SmallInteger.prototype.bitLength = BigInteger.prototype.bitLength;\r\n\r\n    function max(a, b) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        return a.greater(b) ? a : b;\r\n    }\r\n    function min(a, b) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        return a.lesser(b) ? a : b;\r\n    }\r\n    function gcd(a, b) {\r\n        a = parseValue(a).abs();\r\n        b = parseValue(b).abs();\r\n        if (a.equals(b)) return a;\r\n        if (a.isZero()) return b;\r\n        if (b.isZero()) return a;\r\n        var c = Integer[1], d, t;\r\n        while (a.isEven() && b.isEven()) {\r\n            d = min(roughLOB(a), roughLOB(b));\r\n            a = a.divide(d);\r\n            b = b.divide(d);\r\n            c = c.multiply(d);\r\n        }\r\n        while (a.isEven()) {\r\n            a = a.divide(roughLOB(a));\r\n        }\r\n        do {\r\n            while (b.isEven()) {\r\n                b = b.divide(roughLOB(b));\r\n            }\r\n            if (a.greater(b)) {\r\n                t = b; b = a; a = t;\r\n            }\r\n            b = b.subtract(a);\r\n        } while (!b.isZero());\r\n        return c.isUnit() ? a : a.multiply(c);\r\n    }\r\n    function lcm(a, b) {\r\n        a = parseValue(a).abs();\r\n        b = parseValue(b).abs();\r\n        return a.divide(gcd(a, b)).multiply(b);\r\n    }\r\n    function randBetween(a, b, rng) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        var usedRNG = rng || Math.random;\r\n        var low = min(a, b), high = max(a, b);\r\n        var range = high.subtract(low).add(1);\r\n        if (range.isSmall) return low.add(Math.floor(usedRNG() * range));\r\n        var digits = toBase(range, BASE).value;\r\n        var result = [], restricted = true;\r\n        for (var i = 0; i < digits.length; i++) {\r\n            var top = restricted ? digits[i] + (i + 1 < digits.length ? digits[i + 1] / BASE : 0) : BASE;\r\n            var digit = truncate(usedRNG() * top);\r\n            result.push(digit);\r\n            if (digit < digits[i]) restricted = false;\r\n        }\r\n        return low.add(Integer.fromArray(result, BASE, false));\r\n    }\r\n\r\n    var parseBase = function (text, base, alphabet, caseSensitive) {\r\n        alphabet = alphabet || DEFAULT_ALPHABET;\r\n        text = String(text);\r\n        if (!caseSensitive) {\r\n            text = text.toLowerCase();\r\n            alphabet = alphabet.toLowerCase();\r\n        }\r\n        var length = text.length;\r\n        var i;\r\n        var absBase = Math.abs(base);\r\n        var alphabetValues = {};\r\n        for (i = 0; i < alphabet.length; i++) {\r\n            alphabetValues[alphabet[i]] = i;\r\n        }\r\n        for (i = 0; i < length; i++) {\r\n            var c = text[i];\r\n            if (c === \"-\") continue;\r\n            if (c in alphabetValues) {\r\n                if (alphabetValues[c] >= absBase) {\r\n                    if (c === \"1\" && absBase === 1) continue;\r\n                    throw new Error(c + \" is not a valid digit in base \" + base + \".\");\r\n                }\r\n            }\r\n        }\r\n        base = parseValue(base);\r\n        var digits = [];\r\n        var isNegative = text[0] === \"-\";\r\n        for (i = isNegative ? 1 : 0; i < text.length; i++) {\r\n            var c = text[i];\r\n            if (c in alphabetValues) digits.push(parseValue(alphabetValues[c]));\r\n            else if (c === \"<\") {\r\n                var start = i;\r\n                do { i++; } while (text[i] !== \">\" && i < text.length);\r\n                digits.push(parseValue(text.slice(start + 1, i)));\r\n            }\r\n            else throw new Error(c + \" is not a valid character\");\r\n        }\r\n        return parseBaseFromArray(digits, base, isNegative);\r\n    };\r\n\r\n    function parseBaseFromArray(digits, base, isNegative) {\r\n        var val = Integer[0], pow = Integer[1], i;\r\n        for (i = digits.length - 1; i >= 0; i--) {\r\n            val = val.add(digits[i].times(pow));\r\n            pow = pow.times(base);\r\n        }\r\n        return isNegative ? val.negate() : val;\r\n    }\r\n\r\n    function stringify(digit, alphabet) {\r\n        alphabet = alphabet || DEFAULT_ALPHABET;\r\n        if (digit < alphabet.length) {\r\n            return alphabet[digit];\r\n        }\r\n        return \"<\" + digit + \">\";\r\n    }\r\n\r\n    function toBase(n, base) {\r\n        base = bigInt(base);\r\n        if (base.isZero()) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n            throw new Error(\"Cannot convert nonzero numbers to base 0.\");\r\n        }\r\n        if (base.equals(-1)) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n            if (n.isNegative())\r\n                return {\r\n                    value: [].concat.apply([], Array.apply(null, Array(-n.toJSNumber()))\r\n                        .map(Array.prototype.valueOf, [1, 0])\r\n                    ),\r\n                    isNegative: false\r\n                };\r\n\r\n            var arr = Array.apply(null, Array(n.toJSNumber() - 1))\r\n                .map(Array.prototype.valueOf, [0, 1]);\r\n            arr.unshift([1]);\r\n            return {\r\n                value: [].concat.apply([], arr),\r\n                isNegative: false\r\n            };\r\n        }\r\n\r\n        var neg = false;\r\n        if (n.isNegative() && base.isPositive()) {\r\n            neg = true;\r\n            n = n.abs();\r\n        }\r\n        if (base.isUnit()) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n\r\n            return {\r\n                value: Array.apply(null, Array(n.toJSNumber()))\r\n                    .map(Number.prototype.valueOf, 1),\r\n                isNegative: neg\r\n            };\r\n        }\r\n        var out = [];\r\n        var left = n, divmod;\r\n        while (left.isNegative() || left.compareAbs(base) >= 0) {\r\n            divmod = left.divmod(base);\r\n            left = divmod.quotient;\r\n            var digit = divmod.remainder;\r\n            if (digit.isNegative()) {\r\n                digit = base.minus(digit).abs();\r\n                left = left.next();\r\n            }\r\n            out.push(digit.toJSNumber());\r\n        }\r\n        out.push(left.toJSNumber());\r\n        return { value: out.reverse(), isNegative: neg };\r\n    }\r\n\r\n    function toBaseString(n, base, alphabet) {\r\n        var arr = toBase(n, base);\r\n        return (arr.isNegative ? \"-\" : \"\") + arr.value.map(function (x) {\r\n            return stringify(x, alphabet);\r\n        }).join('');\r\n    }\r\n\r\n    BigInteger.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    SmallInteger.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    NativeBigInt.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    BigInteger.prototype.toString = function (radix, alphabet) {\r\n        if (radix === undefined) radix = 10;\r\n        if (radix !== 10 || alphabet) return toBaseString(this, radix, alphabet);\r\n        var v = this.value, l = v.length, str = String(v[--l]), zeros = \"0000000\", digit;\r\n        while (--l >= 0) {\r\n            digit = String(v[l]);\r\n            str += zeros.slice(digit.length) + digit;\r\n        }\r\n        var sign = this.sign ? \"-\" : \"\";\r\n        return sign + str;\r\n    };\r\n\r\n    SmallInteger.prototype.toString = function (radix, alphabet) {\r\n        if (radix === undefined) radix = 10;\r\n        if (radix != 10 || alphabet) return toBaseString(this, radix, alphabet);\r\n        return String(this.value);\r\n    };\r\n\r\n    NativeBigInt.prototype.toString = SmallInteger.prototype.toString;\r\n\r\n    NativeBigInt.prototype.toJSON = BigInteger.prototype.toJSON = SmallInteger.prototype.toJSON = function () { return this.toString(); }\r\n\r\n    BigInteger.prototype.valueOf = function () {\r\n        return parseInt(this.toString(), 10);\r\n    };\r\n    BigInteger.prototype.toJSNumber = BigInteger.prototype.valueOf;\r\n\r\n    SmallInteger.prototype.valueOf = function () {\r\n        return this.value;\r\n    };\r\n    SmallInteger.prototype.toJSNumber = SmallInteger.prototype.valueOf;\r\n    NativeBigInt.prototype.valueOf = NativeBigInt.prototype.toJSNumber = function () {\r\n        return parseInt(this.toString(), 10);\r\n    }\r\n\r\n    function parseStringValue(v) {\r\n        if (isPrecise(+v)) {\r\n            var x = +v;\r\n            if (x === truncate(x))\r\n                return supportsNativeBigInt ? new NativeBigInt(BigInt(x)) : new SmallInteger(x);\r\n            throw new Error(\"Invalid integer: \" + v);\r\n        }\r\n        var sign = v[0] === \"-\";\r\n        if (sign) v = v.slice(1);\r\n        var split = v.split(/e/i);\r\n        if (split.length > 2) throw new Error(\"Invalid integer: \" + split.join(\"e\"));\r\n        if (split.length === 2) {\r\n            var exp = split[1];\r\n            if (exp[0] === \"+\") exp = exp.slice(1);\r\n            exp = +exp;\r\n            if (exp !== truncate(exp) || !isPrecise(exp)) throw new Error(\"Invalid integer: \" + exp + \" is not a valid exponent.\");\r\n            var text = split[0];\r\n            var decimalPlace = text.indexOf(\".\");\r\n            if (decimalPlace >= 0) {\r\n                exp -= text.length - decimalPlace - 1;\r\n                text = text.slice(0, decimalPlace) + text.slice(decimalPlace + 1);\r\n            }\r\n            if (exp < 0) throw new Error(\"Cannot include negative exponent part for integers\");\r\n            text += (new Array(exp + 1)).join(\"0\");\r\n            v = text;\r\n        }\r\n        var isValid = /^([0-9][0-9]*)$/.test(v);\r\n        if (!isValid) throw new Error(\"Invalid integer: \" + v);\r\n        if (supportsNativeBigInt) {\r\n            return new NativeBigInt(BigInt(sign ? \"-\" + v : v));\r\n        }\r\n        var r = [], max = v.length, l = LOG_BASE, min = max - l;\r\n        while (max > 0) {\r\n            r.push(+v.slice(min, max));\r\n            min -= l;\r\n            if (min < 0) min = 0;\r\n            max -= l;\r\n        }\r\n        trim(r);\r\n        return new BigInteger(r, sign);\r\n    }\r\n\r\n    function parseNumberValue(v) {\r\n        if (supportsNativeBigInt) {\r\n            return new NativeBigInt(BigInt(v));\r\n        }\r\n        if (isPrecise(v)) {\r\n            if (v !== truncate(v)) throw new Error(v + \" is not an integer.\");\r\n            return new SmallInteger(v);\r\n        }\r\n        return parseStringValue(v.toString());\r\n    }\r\n\r\n    function parseValue(v) {\r\n        if (typeof v === \"number\") {\r\n            return parseNumberValue(v);\r\n        }\r\n        if (typeof v === \"string\") {\r\n            return parseStringValue(v);\r\n        }\r\n        if (typeof v === \"bigint\") {\r\n            return new NativeBigInt(v);\r\n        }\r\n        return v;\r\n    }\r\n    // Pre-define numbers in range [-999,999]\r\n    for (var i = 0; i < 1000; i++) {\r\n        Integer[i] = parseValue(i);\r\n        if (i > 0) Integer[-i] = parseValue(-i);\r\n    }\r\n    // Backwards compatibility\r\n    Integer.one = Integer[1];\r\n    Integer.zero = Integer[0];\r\n    Integer.minusOne = Integer[-1];\r\n    Integer.max = max;\r\n    Integer.min = min;\r\n    Integer.gcd = gcd;\r\n    Integer.lcm = lcm;\r\n    Integer.isInstance = function (x) { return x instanceof BigInteger || x instanceof SmallInteger || x instanceof NativeBigInt; };\r\n    Integer.randBetween = randBetween;\r\n\r\n    Integer.fromArray = function (digits, base, isNegative) {\r\n        return parseBaseFromArray(digits.map(parseValue), parseValue(base || 10), isNegative);\r\n    };\r\n\r\n    return Integer;\r\n})();\r\n\r\n// Node.js check\r\nif (typeof module !== \"undefined\" && module.hasOwnProperty(\"exports\")) {\r\n    module.exports = bigInt;\r\n}\r\n\r\n//amd check\r\nif (typeof define === \"function\" && define.amd) {\r\n    define( function () {\r\n        return bigInt;\r\n    });\r\n}\r\n","/* based on codem-isoboxer v0.3.8 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */\r\n\r\nimport bigInt from 'big-integer';\r\n\r\nvar ISOBoxer = {};\r\n\r\nISOBoxer.parseBuffer = function(arrayBuffer) {\r\n  return new ISOFile(arrayBuffer).parse();\r\n};\r\n\r\nISOBoxer.addBoxProcessor = function(type, parser) {\r\n  if(typeof type !== 'string' || typeof parser !== 'function') {\r\n    return;\r\n  }\r\n  ISOBox.prototype._boxProcessors[type] = parser;\r\n};\r\n\r\nISOBoxer.createFile = function() {\r\n  return new ISOFile();\r\n};\r\n\r\n// See ISOBoxer.append() for 'pos' parameter syntax\r\nISOBoxer.createBox = function(type, parent, pos) {\r\n  var newBox = ISOBox.create(type);\r\n  if(parent) {\r\n    parent.append(newBox, pos);\r\n  }\r\n  return newBox;\r\n};\r\n\r\n// See ISOBoxer.append() for 'pos' parameter syntax\r\nISOBoxer.createFullBox = function(type, parent, pos) {\r\n  var newBox = ISOBoxer.createBox(type, parent, pos);\r\n  newBox.version = 0;\r\n  newBox.flags = 0;\r\n  return newBox;\r\n};\r\n\r\nISOBoxer.Utils = {};\r\nISOBoxer.Utils.dataViewToString = function(dataView, encoding) {\r\n  var impliedEncoding = encoding || 'utf-8';\r\n  if(typeof TextDecoder !== 'undefined') {\r\n    return new TextDecoder(impliedEncoding).decode(dataView);\r\n  }\r\n  var a = [];\r\n  var i = 0;\r\n\r\n  if(impliedEncoding === 'utf-8') {\r\n    /* The following algorithm is essentially a rewrite of the UTF8.decode at\r\n    http://bannister.us/weblog/2007/simple-base64-encodedecode-javascript/\r\n    */\r\n\r\n    while(i < dataView.byteLength) {\r\n      var c = dataView.getUint8(i++);\r\n      if(c < 0x80) {\r\n        // 1-byte character (7 bits)\r\n      } else if(c < 0xe0) {\r\n        // 2-byte character (11 bits)\r\n        c = (c & 0x1f) << 6;\r\n        c |= (dataView.getUint8(i++) & 0x3f);\r\n      } else if(c < 0xf0) {\r\n        // 3-byte character (16 bits)\r\n        c = (c & 0xf) << 12;\r\n        c |= (dataView.getUint8(i++) & 0x3f) << 6;\r\n        c |= (dataView.getUint8(i++) & 0x3f);\r\n      } else {\r\n        // 4-byte character (21 bits)\r\n        c = (c & 0x7) << 18;\r\n        c |= (dataView.getUint8(i++) & 0x3f) << 12;\r\n        c |= (dataView.getUint8(i++) & 0x3f) << 6;\r\n        c |= (dataView.getUint8(i++) & 0x3f);\r\n      }\r\n      a.push(String.fromCharCode(c));\r\n    }\r\n  } else { // Just map byte-by-byte (probably wrong)\r\n    while(i < dataView.byteLength) {\r\n      a.push(String.fromCharCode(dataView.getUint8(i++)));\r\n    }\r\n  }\r\n  return a.join('');\r\n};\r\n\r\nISOBoxer.Utils.utf8ToByteArray = function(string) {\r\n  // Only UTF-8 encoding is supported by TextEncoder\r\n  var u, i;\r\n  if(typeof TextEncoder !== 'undefined') {\r\n    u = new TextEncoder().encode(string);\r\n  } else {\r\n    u = [];\r\n    for(i = 0; i < string.length; ++i) {\r\n      var c = string.charCodeAt(i);\r\n      if(c < 0x80) {\r\n        u.push(c);\r\n      } else if(c < 0x800) {\r\n        u.push(0xC0 | (c >> 6));\r\n        u.push(0x80 | (63 & c));\r\n      } else if(c < 0x10000) {\r\n        u.push(0xE0 | (c >> 12));\r\n        u.push(0x80 | (63 & (c >> 6)));\r\n        u.push(0x80 | (63 & c));\r\n      } else {\r\n        u.push(0xF0 | (c >> 18));\r\n        u.push(0x80 | (63 & (c >> 12)));\r\n        u.push(0x80 | (63 & (c >> 6)));\r\n        u.push(0x80 | (63 & c));\r\n      }\r\n    }\r\n  }\r\n  return u;\r\n};\r\n\r\n// Method to append a box in the list of child boxes\r\n// The 'pos' parameter can be either:\r\n//   - (number) a position index at which to insert the new box\r\n//   - (string) the type of the box after which to insert the new box\r\n//   - (object) the box after which to insert the new box\r\nISOBoxer.Utils.appendBox = function(parent, box, pos) {\r\n  box._offset = parent._cursor.offset;\r\n  box._root = (parent._root ? parent._root : parent);\r\n  box._raw = parent._raw;\r\n  box._parent = parent;\r\n\r\n  if(pos === -1) {\r\n    // The new box is a sub-box of the parent but not added in boxes array,\r\n    // for example when the new box is set as an entry (see dref and stsd for example)\r\n    return;\r\n  }\r\n\r\n  if(pos === undefined || pos === null) {\r\n    parent.boxes.push(box);\r\n    return;\r\n  }\r\n\r\n  var index = -1,\r\n    type;\r\n\r\n  if(typeof pos === 'number') {\r\n    index = pos;\r\n  } else {\r\n    if(typeof pos === 'string') {\r\n      type = pos;\r\n    } else if(typeof pos === 'object' && pos.type) {\r\n      type = pos.type;\r\n    } else {\r\n      parent.boxes.push(box);\r\n      return;\r\n    }\r\n\r\n    for(var i = 0; i < parent.boxes.length; i++) {\r\n      if(type === parent.boxes[i].type) {\r\n        index = i + 1;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  parent.boxes.splice(index, 0, box);\r\n};\r\n\r\nISOBoxer.Cursor = function(initialOffset) {\r\n  this.offset = (typeof initialOffset == 'undefined' ? 0 : initialOffset);\r\n};\r\n\r\nvar ISOFile = function(arrayBuffer) {\r\n  this._cursor = new ISOBoxer.Cursor();\r\n  this.boxes = [];\r\n  if(arrayBuffer) {\r\n    this._raw = new DataView(arrayBuffer);\r\n  }\r\n};\r\n\r\nISOFile.prototype.fetch = function(type) {\r\n  var result = this.fetchAll(type, true);\r\n  return (result.length ? result[0] : null);\r\n};\r\n\r\nISOFile.prototype.fetchAll = function(type, returnEarly) {\r\n  var result = [];\r\n  ISOFile._sweep.call(this, type, result, returnEarly);\r\n  return result;\r\n};\r\n\r\nISOFile.prototype.parse = function() {\r\n  this._cursor.offset = 0;\r\n  this.boxes = [];\r\n  while(this._cursor.offset < this._raw.byteLength) {\r\n    var box = ISOBox.parse(this);\r\n\r\n    // Box could not be parsed\r\n    if(typeof box.type === 'undefined') break;\r\n\r\n    this.boxes.push(box);\r\n  }\r\n  return this;\r\n};\r\n\r\nISOFile._sweep = function(type, result, returnEarly) {\r\n  if(this.type && this.type == type) result.push(this);\r\n  for(var box in this.boxes) {\r\n    if(result.length && returnEarly) return;\r\n    ISOFile._sweep.call(this.boxes[box], type, result, returnEarly);\r\n  }\r\n};\r\n\r\nISOFile.prototype.write = function() {\r\n  var length = 0,\r\n    i;\r\n\r\n  for(i = 0; i < this.boxes.length; i++) {\r\n    length += this.boxes[i].getLength(false);\r\n  }\r\n\r\n  var bytes = new Uint8Array(length);\r\n  this._rawo = new DataView(bytes.buffer);\r\n  this.bytes = bytes;\r\n  this._cursor.offset = 0;\r\n\r\n  for(i = 0; i < this.boxes.length; i++) {\r\n    this.boxes[i].write();\r\n  }\r\n\r\n  return bytes.buffer;\r\n};\r\n\r\nISOFile.prototype.append = function(box, pos) {\r\n  ISOBoxer.Utils.appendBox(this, box, pos);\r\n};\r\nvar ISOBox = function() {\r\n  this._cursor = new ISOBoxer.Cursor();\r\n};\r\n\r\nISOBox.parse = function(parent) {\r\n  var newBox = new ISOBox();\r\n  newBox._offset = parent._cursor.offset;\r\n  newBox._root = (parent._root ? parent._root : parent);\r\n  newBox._raw = parent._raw;\r\n  newBox._parent = parent;\r\n  newBox._parseBox();\r\n  parent._cursor.offset = newBox._raw.byteOffset + newBox._raw.byteLength;\r\n  return newBox;\r\n};\r\n\r\nISOBox.create = function(type) {\r\n  var newBox = new ISOBox();\r\n  newBox.type = type;\r\n  newBox.boxes = [];\r\n  return newBox;\r\n};\r\n\r\nISOBox.prototype._boxContainers = ['dinf', 'edts', 'mdia', 'meco', 'mfra', 'minf', 'moof', 'moov', 'mvex', 'stbl', 'strk', 'traf', 'trak', 'tref', 'udta', 'vttc', 'sinf', 'schi', 'encv', 'enca', 'ilst'];\r\n\r\nISOBox.prototype._boxProcessors = {};\r\n\r\n// /////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Generic read/write functions\r\n\r\nISOBox.prototype._procField = function(name, type, size) {\r\n  if(this._parsing) {\r\n    this[name] = this._readField(type, size);\r\n  }\r\n  else {\r\n    this._writeField(type, size, this[name]);\r\n  }\r\n};\r\n\r\nISOBox.prototype._procFieldArray = function(name, length, type, size) {\r\n  var i;\r\n  if(this._parsing) {\r\n    this[name] = [];\r\n    for(i = 0; i < length; i++) {\r\n      this[name][i] = this._readField(type, size);\r\n    }\r\n  }\r\n  else {\r\n    for(i = 0; i < this[name].length; i++) {\r\n      this._writeField(type, size, this[name][i]);\r\n    }\r\n  }\r\n};\r\n\r\nISOBox.prototype._procFullBox = function() {\r\n  this._procField('version', 'uint', 8);\r\n  this._procField('flags', 'uint', 24);\r\n};\r\n\r\nISOBox.prototype._procEntries = function(name, length, fn) {\r\n  var i;\r\n  if(this._parsing) {\r\n    this[name] = [];\r\n    for(i = 0; i < length; i++) {\r\n      this[name].push({});\r\n      fn.call(this, this[name][i]);\r\n    }\r\n  }\r\n  else {\r\n    for(i = 0; i < length; i++) {\r\n      fn.call(this, this[name][i]);\r\n    }\r\n  }\r\n};\r\n\r\nISOBox.prototype._procSubEntries = function(entry, name, length, fn) {\r\n  var i;\r\n  if(this._parsing) {\r\n    entry[name] = [];\r\n    for(i = 0; i < length; i++) {\r\n      entry[name].push({});\r\n      fn.call(this, entry[name][i]);\r\n    }\r\n  }\r\n  else {\r\n    for(i = 0; i < length; i++) {\r\n      fn.call(this, entry[name][i]);\r\n    }\r\n  }\r\n};\r\n\r\nISOBox.prototype._procEntryField = function(entry, name, type, size) {\r\n  if(this._parsing) {\r\n    entry[name] = this._readField(type, size);\r\n  }\r\n  else {\r\n    this._writeField(type, size, entry[name]);\r\n  }\r\n};\r\n\r\nISOBox.prototype._procSubBoxes = function(name, length = -1) {\r\n  const untilEnd = length === -1;\r\n\r\n  var i;\r\n  if(this._parsing) {\r\n    if(untilEnd) length = Infinity\r\n    const end = this._offset + this.size;\r\n    this[name] = [];\r\n    for(i = 0; i < length; i++) {\r\n      this[name].push(ISOBox.parse(this));\r\n      if(untilEnd && this._cursor.offset >= end) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  else {\r\n    if(untilEnd) length = this[name].length\r\n    for(i = 0; i < length; i++) {\r\n      if(this._rawo) {\r\n        this[name][i].write();\r\n      } else {\r\n        this.size += this[name][i].getLength();\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n// /////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Read/parse functions\r\n\r\nISOBox.prototype._readField = function(type, size) {\r\n  switch(type) {\r\n    case 'uint':\r\n      return this._readUint(size);\r\n    case 'int':\r\n      return this._readInt(size);\r\n    case 'template':\r\n      return this._readTemplate(size);\r\n    case 'string':\r\n      return (size === -1) ? this._readTerminatedString() : this._readString(size);\r\n    case 'data':\r\n      return this._readData(size);\r\n    case 'utf8':\r\n      return this._readUTF8String();\r\n    default:\r\n      return -1;\r\n  }\r\n};\r\n\r\nISOBox.prototype._readInt = function(size) {\r\n  var result = null,\r\n    offset = this._cursor.offset - this._raw.byteOffset;\r\n  switch(size) {\r\n    case 8:\r\n      result = this._raw.getInt8(offset);\r\n      break;\r\n    case 16:\r\n      result = this._raw.getInt16(offset);\r\n      break;\r\n    case 32:\r\n      result = this._raw.getInt32(offset);\r\n      break;\r\n    case 64: {\r\n      const hi = this._raw.getInt32(offset);\r\n      const lo = this._raw.getInt32(offset + 4);\r\n      result = bigInt(hi).shiftLeft(32).add(lo);\r\n      break;\r\n    }\r\n  }\r\n  this._cursor.offset += (size >> 3);\r\n  return result;\r\n};\r\n\r\nISOBox.prototype._readUint = function(size) {\r\n  var result = null,\r\n    offset = this._cursor.offset - this._raw.byteOffset,\r\n    s1, s2;\r\n  switch(size) {\r\n    case 8:\r\n      result = this._raw.getUint8(offset);\r\n      break;\r\n    case 16:\r\n      result = this._raw.getUint16(offset);\r\n      break;\r\n    case 24:\r\n      s1 = this._raw.getUint16(offset);\r\n      s2 = this._raw.getUint8(offset + 2);\r\n      result = (s1 << 8) + s2;\r\n      break;\r\n    case 32:\r\n      result = this._raw.getUint32(offset);\r\n      break;\r\n    case 64: {\r\n      const hi = this._raw.getUint32(offset);\r\n      const lo = this._raw.getUint32(offset + 4);\r\n      result = bigInt(hi).shiftLeft(32).add(lo);\r\n      break;\r\n    }\r\n  }\r\n  this._cursor.offset += (size >> 3);\r\n  return result;\r\n};\r\n\r\nISOBox.prototype._readString = function(length) {\r\n  var str = '';\r\n  for(var c = 0; c < length; c++) {\r\n    var char = this._readUint(8);\r\n    str += String.fromCharCode(char);\r\n  }\r\n  return str;\r\n};\r\n\r\nISOBox.prototype._readTemplate = function(size) {\r\n  var pre = this._readUint(size / 2);\r\n  var post = this._readUint(size / 2);\r\n  return pre + (post / Math.pow(2, size / 2));\r\n};\r\n\r\nISOBox.prototype._readTerminatedString = function() {\r\n  var str = '';\r\n  while(this._cursor.offset - this._offset < this._raw.byteLength) {\r\n    var char = this._readUint(8);\r\n    if(char === 0) break;\r\n    str += String.fromCharCode(char);\r\n  }\r\n  return str;\r\n};\r\n\r\nISOBox.prototype._readData = function(size) {\r\n  var length = (size > 0) ? size : (this._raw.byteLength - (this._cursor.offset - this._offset));\r\n  if(length > 0) {\r\n    var data = new Uint8Array(this._raw.buffer, this._cursor.offset, length);\r\n\r\n    this._cursor.offset += length;\r\n    return data;\r\n  }\r\n  else {\r\n    return null;\r\n  }\r\n};\r\n\r\nISOBox.prototype._readUTF8String = function() {\r\n  var length = this._raw.byteLength - (this._cursor.offset - this._offset);\r\n  var data = null;\r\n  if(length > 0) {\r\n    data = new DataView(this._raw.buffer, this._cursor.offset, length);\r\n    this._cursor.offset += length;\r\n  }\r\n\r\n  return data ? ISOBoxer.Utils.dataViewToString(data) : data;\r\n};\r\n\r\nISOBox.prototype._parseBox = function() {\r\n  this._parsing = true;\r\n  this._cursor.offset = this._offset;\r\n\r\n  // return immediately if there are not enough bytes to read the header\r\n  if(this._offset + 8 > this._raw.buffer.byteLength) {\r\n    this._root._incomplete = true;\r\n    return;\r\n  }\r\n\r\n  this._procField('size', 'uint', 32);\r\n  this._procField('type', 'string', 4);\r\n\r\n  if(this.size === 1)      { this._procField('largesize', 'uint', 64); }\r\n  if(this.type === 'uuid') { this._procFieldArray('usertype', 16, 'uint', 8); }\r\n\r\n  switch(this.size) {\r\n    case 0:\r\n    // Size zero indicates last box in the file. Consume remaining buffer.\r\n      this._raw = new DataView(this._raw.buffer, this._offset);\r\n      break;\r\n    case 1:\r\n      if(this._offset + this.size > this._raw.buffer.byteLength) {\r\n        this._incomplete = true;\r\n        this._root._incomplete = true;\r\n      } else {\r\n        this._raw = new DataView(this._raw.buffer, this._offset, this.largesize);\r\n      }\r\n      break;\r\n    default:\r\n      if(this._offset + this.size > this._raw.buffer.byteLength) {\r\n        this._incomplete = true;\r\n        this._root._incomplete = true;\r\n      } else {\r\n        this._raw = new DataView(this._raw.buffer, this._offset, this.size);\r\n      }\r\n  }\r\n\r\n  // additional parsing\r\n  if(!this._incomplete) {\r\n    if(this._boxProcessors[this.type]) {\r\n      this._boxProcessors[this.type].call(this);\r\n    }\r\n    if(this._boxContainers.indexOf(this.type) !== -1) {\r\n      this._parseContainerBox();\r\n    } else {\r\n      // Unknown box => read and store box content\r\n      this._data = this._readData();\r\n    }\r\n  }\r\n};\r\n\r\nISOBox.prototype._parseFullBox = function() {\r\n  this.version = this._readUint(8);\r\n  this.flags = this._readUint(24);\r\n};\r\n\r\nISOBox.prototype._parseContainerBox = function() {\r\n  this.boxes = [];\r\n  while(this._cursor.offset - this._raw.byteOffset < this._raw.byteLength) {\r\n    this.boxes.push(ISOBox.parse(this));\r\n  }\r\n};\r\n\r\n// /////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Write functions\r\n\r\nISOBox.prototype.append = function(box, pos) {\r\n  ISOBoxer.Utils.appendBox(this, box, pos);\r\n};\r\n\r\nISOBox.prototype.getLength = function() {\r\n  this._parsing = false;\r\n  this._rawo = null;\r\n\r\n  this.size = 0;\r\n  this._procField('size', 'uint', 32);\r\n  this._procField('type', 'string', 4);\r\n\r\n  if(this.size === 1)      { this._procField('largesize', 'uint', 64); }\r\n  if(this.type === 'uuid') { this._procFieldArray('usertype', 16, 'uint', 8); }\r\n\r\n  if(this._boxProcessors[this.type]) {\r\n    this._boxProcessors[this.type].call(this);\r\n  }\r\n\r\n  if(this._boxContainers.indexOf(this.type) !== -1) {\r\n    for(var i = 0; i < this.boxes.length; i++) {\r\n      this.size += this.boxes[i].getLength();\r\n    }\r\n  }\r\n\r\n  if(this._data) {\r\n    this._writeData(this._data);\r\n  }\r\n\r\n  return this.size;\r\n};\r\n\r\nISOBox.prototype.write = function() {\r\n  this._parsing = false;\r\n  if(!this._parent) throw new Error(`no root at ${this.type}`)\r\n  this._cursor.offset = this._parent._cursor.offset;\r\n\r\n  switch(this.size) {\r\n    case 0:\r\n      this._rawo = new DataView(this._parent._rawo.buffer, this._cursor.offset, (this.parent._rawo.byteLength - this._cursor.offset));\r\n      break;\r\n    case 1:\r\n      this._rawo = new DataView(this._parent._rawo.buffer, this._cursor.offset, this.largesize);\r\n      break;\r\n    default:\r\n      if(!this._parent._rawo) console.log(this.type)\r\n      this._rawo = new DataView(this._parent._rawo.buffer, this._cursor.offset, this.size);\r\n  }\r\n\r\n  this._procField('size', 'uint', 32);\r\n  this._procField('type', 'string', 4);\r\n\r\n  if(this.size === 1)      { this._procField('largesize', 'uint', 64); }\r\n  if(this.type === 'uuid') { this._procFieldArray('usertype', 16, 'uint', 8); }\r\n\r\n  if(this._boxProcessors[this.type]) {\r\n    this._boxProcessors[this.type].call(this);\r\n  }\r\n\r\n  if(this._boxContainers.indexOf(this.type) !== -1) {\r\n    for(var i = 0; i < this.boxes.length; i++) {\r\n      this.boxes[i].write();\r\n    }\r\n  }\r\n\r\n  if(this._data) {\r\n    this._writeData(this._data);\r\n  }\r\n\r\n  this._parent._cursor.offset += this.size;\r\n\r\n  return this.size;\r\n};\r\n\r\nISOBox.prototype._writeInt = function(size, value) {\r\n  if(this._rawo) {\r\n    var offset = this._cursor.offset - this._rawo.byteOffset;\r\n    switch(size) {\r\n      case 8:\r\n        this._rawo.setInt8(offset, value);\r\n        break;\r\n      case 16:\r\n        this._rawo.setInt16(offset, value);\r\n        break;\r\n      case 32:\r\n        this._rawo.setInt32(offset, value);\r\n        break;\r\n      case 64:\r\n        this._rawo.setUint32(offset, value.shiftRight(32).and(0xFFFFFFFF).toJSNumber());\r\n        this._rawo.setUint32(offset + 4, value.and(0xFFFFFFFF).toJSNumber());\r\n        break;\r\n    }\r\n    this._cursor.offset += (size >> 3);\r\n  } else {\r\n    this.size += (size >> 3);\r\n  }\r\n};\r\n\r\nISOBox.prototype._writeUint = function(size, value) {\r\n  if(this._rawo) {\r\n    var offset = this._cursor.offset - this._rawo.byteOffset,\r\n      s1, s2;\r\n    switch(size) {\r\n      case 8:\r\n        this._rawo.setUint8(offset, value);\r\n        break;\r\n      case 16:\r\n        this._rawo.setUint16(offset, value);\r\n        break;\r\n      case 24:\r\n        s1 = (value & 0xFFFF00) >> 8;\r\n        s2 = (value & 0x0000FF);\r\n        this._rawo.setUint16(offset, s1);\r\n        this._rawo.setUint8(offset + 2, s2);\r\n        break;\r\n      case 32:\r\n        this._rawo.setUint32(offset, value);\r\n        break;\r\n      case 64: {\r\n        this._rawo.setUint32(offset, value.shiftRight(32).and(0xFFFFFFFF).toJSNumber());\r\n        this._rawo.setUint32(offset + 4, value.and(0xFFFFFFFF).toJSNumber());\r\n        break;\r\n      }\r\n    }\r\n    this._cursor.offset += (size >> 3);\r\n  } else {\r\n    this.size += (size >> 3);\r\n  }\r\n};\r\n\r\nISOBox.prototype._writeString = function(size, str) {\r\n  for(var c = 0; c < size; c++) {\r\n    this._writeUint(8, str.charCodeAt(c));\r\n  }\r\n};\r\n\r\nISOBox.prototype._writeTerminatedString = function(str) {\r\n  if(str.length === 0) {\r\n    return;\r\n  }\r\n  for(var c = 0; c < str.length; c++) {\r\n    this._writeUint(8, str.charCodeAt(c));\r\n  }\r\n  this._writeUint(8, 0);\r\n};\r\n\r\nISOBox.prototype._writeTemplate = function(size, value) {\r\n  var pre = Math.floor(value);\r\n  var post = (value - pre) * Math.pow(2, size / 2);\r\n  this._writeUint(size / 2, pre);\r\n  this._writeUint(size / 2, post);\r\n};\r\n\r\nISOBox.prototype._writeData = function(data) {\r\n  var i;\r\n  // data to copy\r\n  if(data) {\r\n    if(this._rawo) {\r\n      // Array and Uint8Array has also to be managed\r\n      if(data instanceof Array) {\r\n        var offset = this._cursor.offset - this._rawo.byteOffset;\r\n        for(var i = 0; i < data.length; i++) {\r\n          this._rawo.setInt8(offset + i, data[i]);\r\n        }\r\n        this._cursor.offset += data.length;\r\n      }\r\n\r\n      if(data instanceof Uint8Array) {\r\n        this._root.bytes.set(data, this._cursor.offset);\r\n        this._cursor.offset += data.length;\r\n      }\r\n    } else {\r\n      // nothing to copy only size to compute\r\n      this.size += data.length;\r\n    }\r\n  }\r\n};\r\n\r\nISOBox.prototype._writeUTF8String = function(string) {\r\n  var u = ISOBoxer.Utils.utf8ToByteArray(string);\r\n  if(this._rawo) {\r\n    var dataView = new DataView(this._rawo.buffer, this._cursor.offset, u.length);\r\n    for(var i = 0; i < u.length; i++) {\r\n      dataView.setUint8(i, u[i]);\r\n    }\r\n  } else {\r\n    this.size += u.length;\r\n  }\r\n};\r\n\r\nISOBox.prototype._writeField = function(type, size, value) {\r\n  switch(type) {\r\n    case 'uint':\r\n      this._writeUint(size, value);\r\n      break;\r\n    case 'int':\r\n      this._writeInt(size, value);\r\n      break;\r\n    case 'template':\r\n      this._writeTemplate(size, value);\r\n      break;\r\n    case 'string':\r\n      if(size == -1) {\r\n        this._writeTerminatedString(value);\r\n      } else {\r\n        this._writeString(size, value);\r\n      }\r\n      break;\r\n    case 'data':\r\n      this._writeData(value);\r\n      break;\r\n    case 'utf8':\r\n      this._writeUTF8String(value);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n};\r\n\r\n// ISO/IEC 14496-15:2014 - avc1/2/3/4, hev1, hvc1, encv\r\nISOBox.prototype._boxProcessors['avc1'] =\r\nISOBox.prototype._boxProcessors['avc2'] =\r\nISOBox.prototype._boxProcessors['avc3'] =\r\nISOBox.prototype._boxProcessors['avc4'] =\r\nISOBox.prototype._boxProcessors['hvc1'] =\r\nISOBox.prototype._boxProcessors['hev1'] =\r\nISOBox.prototype._boxProcessors['encv'] = function() {\r\n  // SampleEntry fields\r\n  this._procFieldArray('reserved1', 6,    'uint', 8);\r\n  this._procField('data_reference_index', 'uint', 16);\r\n  // VisualSampleEntry fields\r\n  this._procField('pre_defined1',         'uint',     16);\r\n  this._procField('reserved2',            'uint',     16);\r\n  this._procFieldArray('pre_defined2', 3, 'uint',     32);\r\n  this._procField('width',                'uint',     16);\r\n  this._procField('height',               'uint',     16);\r\n  this._procField('horizresolution',      'template', 32);\r\n  this._procField('vertresolution',       'template', 32);\r\n  this._procField('reserved3',            'uint',     32);\r\n  this._procField('frame_count',          'uint',     16);\r\n  this._procFieldArray('compressorname', 32, 'uint',    8);\r\n  this._procField('depth',                'uint',     16);\r\n  this._procField('pre_defined3',         'int',      16);\r\n  // Codec-specific fields\r\n  this._procField('config', 'data', -1);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.6.1.3 Composition Time To Sample Box\r\nISOBox.prototype._boxProcessors['ctts'] = function() {\r\n  this._procFullBox();\r\n  this._procField('entry_count', 'uint', 32);\r\n  this._procEntries('entries', this.entry_count, function(entry) {\r\n    this._procEntryField(entry, 'sample_count', 'uint', 32);\r\n    this._procEntryField(entry, 'sample_offset', (this.version === 1) ? 'int' : 'uint', 32);\r\n  });\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.7.2 Data Reference Box\r\nISOBox.prototype._boxProcessors['dref'] = function() {\r\n  this._procFullBox();\r\n  this._procField('entry_count', 'uint', 32);\r\n  this._procSubBoxes('entries', this.entry_count);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.6.6 Edit List Box\r\nISOBox.prototype._boxProcessors['elst'] = function() {\r\n  this._procFullBox();\r\n  this._procField('entry_count', 'uint', 32);\r\n  this._procEntries('entries', this.entry_count, function(entry) {\r\n    this._procEntryField(entry, 'segment_duration',     'uint', (this.version === 1) ? 64 : 32);\r\n    this._procEntryField(entry, 'media_time',           'int',  (this.version === 1) ? 64 : 32);\r\n    this._procEntryField(entry, 'media_rate_integer',   'int',  16);\r\n    this._procEntryField(entry, 'media_rate_fraction',  'int',  16);\r\n  });\r\n};\r\n\r\n// ISO/IEC 23009-1:2014 - 5.10.3.3 Event Message Box\r\nISOBox.prototype._boxProcessors['emsg'] = function() {\r\n  this._procFullBox();\r\n  if(this.version == 1) {\r\n    this._procField('timescale',                'uint',   32);\r\n    this._procField('presentation_time',        'uint',   64);\r\n    this._procField('event_duration',           'uint',   32);\r\n    this._procField('id',                       'uint',   32);\r\n    this._procField('scheme_id_uri',            'string', -1);\r\n    this._procField('value',                    'string', -1);\r\n  } else {\r\n    this._procField('scheme_id_uri',            'string', -1);\r\n    this._procField('value',                    'string', -1);\r\n    this._procField('timescale',                'uint',   32);\r\n    this._procField('presentation_time_delta',  'uint',   32);\r\n    this._procField('event_duration',           'uint',   32);\r\n    this._procField('id',                       'uint',   32);\r\n  }\r\n  this._procField('message_data',             'data',   -1);\r\n};\r\n// ISO/IEC 14496-12:2012 - 8.1.2 Free Space Box\r\nISOBox.prototype._boxProcessors['free'] = ISOBox.prototype._boxProcessors['skip'] = function() {\r\n  this._procField('data', 'data', -1);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.12.2 Original Format Box\r\nISOBox.prototype._boxProcessors['frma'] = function() {\r\n  this._procField('data_format', 'uint', 32);\r\n};\r\n// ISO/IEC 14496-12:2012 - 4.3 File Type Box / 8.16.2 Segment Type Box\r\nISOBox.prototype._boxProcessors['ftyp'] =\r\nISOBox.prototype._boxProcessors['styp'] = function() {\r\n  this._procField('major_brand', 'string', 4);\r\n  this._procField('minor_version', 'uint', 32);\r\n  var nbCompatibleBrands = -1;\r\n  if(this._parsing) {\r\n    nbCompatibleBrands = (this._raw.byteLength - (this._cursor.offset - this._raw.byteOffset)) / 4;\r\n  }\r\n  this._procFieldArray('compatible_brands', nbCompatibleBrands, 'string', 4);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.4.3 Handler Reference Box\r\nISOBox.prototype._boxProcessors['hdlr'] = function() {\r\n  this._procFullBox();\r\n  this._procField('pre_defined',      'uint',   32);\r\n  this._procField('handler_type',     'string', 4);\r\n  this._procFieldArray('reserved', 3, 'uint', 32);\r\n  this._procField('name',             'string', -1);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.1.1 Media Data Box\r\nISOBox.prototype._boxProcessors['mdat'] = function() {\r\n  this._procField('data', 'data', -1);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.4.2 Media Header Box\r\nISOBox.prototype._boxProcessors['mdhd'] = function() {\r\n  this._procFullBox();\r\n  this._procField('creation_time',      'uint', (this.version == 1) ? 64 : 32);\r\n  this._procField('modification_time',  'uint', (this.version == 1) ? 64 : 32);\r\n  this._procField('timescale',          'uint', 32);\r\n  this._procField('duration',           'uint', (this.version == 1) ? 64 : 32);\r\n  if(!this._parsing && typeof this.language === 'string') {\r\n    // In case of writing and language has been set as a string, then convert it into char codes array\r\n    this.language = ((this.language.charCodeAt(0) - 0x60) << 10) |\r\n                    ((this.language.charCodeAt(1) - 0x60) << 5) |\r\n                    ((this.language.charCodeAt(2) - 0x60));\r\n  }\r\n  this._procField('language',           'uint', 16);\r\n  if(this._parsing) {\r\n    this.language = String.fromCharCode(((this.language >> 10) & 0x1F) + 0x60,\r\n      ((this.language >> 5) & 0x1F) + 0x60,\r\n      (this.language & 0x1F) + 0x60);\r\n  }\r\n  this._procField('pre_defined',        'uint', 16);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.8.2 Movie Extends Header Box\r\nISOBox.prototype._boxProcessors['mehd'] = function() {\r\n  this._procFullBox();\r\n  this._procField('fragment_duration', 'uint', (this.version == 1) ? 64 : 32);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.8.5 Movie Fragment Header Box\r\nISOBox.prototype._boxProcessors['mfhd'] = function() {\r\n  this._procFullBox();\r\n  this._procField('sequence_number', 'uint', 32);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.8.11 Movie Fragment Random Access Box\r\nISOBox.prototype._boxProcessors['mfro'] = function() {\r\n  this._procFullBox();\r\n  this._procField('mfra_size', 'uint', 32); // Called mfra_size to distinguish from the normal \"size\" attribute of a box\r\n};\r\n\r\n\r\n// ISO/IEC 14496-12:2012 - 8.5.2.2 mp4a box (use AudioSampleEntry definition and naming)\r\nISOBox.prototype._boxProcessors['mp4a'] = ISOBox.prototype._boxProcessors['enca'] = function() {\r\n  // SampleEntry fields\r\n  this._procFieldArray('reserved1', 6,    'uint', 8);\r\n  this._procField('data_reference_index', 'uint', 16);\r\n  // AudioSampleEntry fields\r\n  this._procFieldArray('reserved2', 2,    'uint', 32);\r\n  this._procField('channelcount',         'uint', 16);\r\n  this._procField('samplesize',           'uint', 16);\r\n  this._procField('pre_defined',          'uint', 16);\r\n  this._procField('reserved3',            'uint', 16);\r\n  this._procField('samplerate',           'template', 32);\r\n  // ESDescriptor fields\r\n  this._procSubBoxes('esds', 1);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.2.2 Movie Header Box\r\nISOBox.prototype._boxProcessors['mvhd'] = function() {\r\n  this._procFullBox();\r\n  this._procField('creation_time',      'uint',     (this.version == 1) ? 64 : 32);\r\n  this._procField('modification_time',  'uint',     (this.version == 1) ? 64 : 32);\r\n  this._procField('timescale',          'uint',     32);\r\n  this._procField('duration',           'uint',     (this.version == 1) ? 64 : 32);\r\n  this._procField('rate',               'template', 32);\r\n  this._procField('volume',             'template', 16);\r\n  this._procField('reserved1',          'uint',  16);\r\n  this._procFieldArray('reserved2', 2,  'uint',     32);\r\n  this._procFieldArray('matrix', 9,     'template', 32);\r\n  this._procFieldArray('pre_defined', 6, 'uint',   32);\r\n  this._procField('next_track_ID',      'uint',     32);\r\n};\r\n\r\n// ISO/IEC 14496-30:2014 - WebVTT Cue Payload Box.\r\nISOBox.prototype._boxProcessors['payl'] = function() {\r\n  this._procField('cue_text', 'utf8');\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.16.5 Producer Reference Time\r\nISOBox.prototype._boxProcessors['prft'] = function() {\r\n  this._procFullBox();\r\n  this._procField('reference_track_ID', 'uint', 32);\r\n  this._procField('ntp_timestamp_sec', 'uint', 32);\r\n  this._procField('ntp_timestamp_frac', 'uint', 32);\r\n  this._procField('media_time', 'uint', (this.version == 1) ? 64 : 32);\r\n};\r\n\r\n// ISO/IEC 23001-7:2011 - 8.1 Protection System Specific Header Box\r\nISOBox.prototype._boxProcessors['pssh'] = function() {\r\n  this._procFullBox();\r\n\r\n  this._procFieldArray('SystemID', 16, 'uint', 8);\r\n  this._procField('DataSize', 'uint', 32);\r\n  this._procFieldArray('Data', this.DataSize, 'uint', 8);\r\n};\r\n// ISO/IEC 14496-12:2012 - 8.12.5 Scheme Type Box\r\nISOBox.prototype._boxProcessors['schm'] = function() {\r\n  this._procFullBox();\r\n\r\n  this._procField('scheme_type', 'uint', 32);\r\n  this._procField('scheme_version', 'uint', 32);\r\n\r\n  if(this.flags & 0x000001) {\r\n    this._procField('scheme_uri', 'string', -1);\r\n  }\r\n};\r\n// ISO/IEC 14496-12:2012 - 8.6.4.1 sdtp box\r\nISOBox.prototype._boxProcessors['sdtp'] = function() {\r\n  this._procFullBox();\r\n\r\n  var sample_count = -1;\r\n  if(this._parsing) {\r\n    sample_count = (this._raw.byteLength - (this._cursor.offset - this._raw.byteOffset));\r\n  }\r\n\r\n  this._procFieldArray('sample_dependency_table', sample_count, 'uint', 8);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.16.3 Segment Index Box\r\nISOBox.prototype._boxProcessors['sidx'] = function() {\r\n  this._procFullBox();\r\n  this._procField('reference_ID', 'uint', 32);\r\n  this._procField('timescale', 'uint', 32);\r\n  this._procField('earliest_presentation_time', 'uint', (this.version == 1) ? 64 : 32);\r\n  this._procField('first_offset', 'uint', (this.version == 1) ? 64 : 32);\r\n  this._procField('reserved', 'uint', 16);\r\n  this._procField('reference_count', 'uint', 16);\r\n  this._procEntries('references', this.reference_count, function(entry) {\r\n    if(!this._parsing) {\r\n      entry.reference  = (entry.reference_type  & 0x00000001) << 31;\r\n      entry.reference |= (entry.referenced_size & 0x7FFFFFFF);\r\n      entry.sap  = (entry.starts_with_SAP & 0x00000001) << 31;\r\n      entry.sap |= (entry.SAP_type        & 0x00000003) << 28;\r\n      entry.sap |= (entry.SAP_delta_time  & 0x0FFFFFFF);\r\n    }\r\n    this._procEntryField(entry, 'reference', 'uint', 32);\r\n    this._procEntryField(entry, 'subsegment_duration', 'uint', 32);\r\n    this._procEntryField(entry, 'sap', 'uint', 32);\r\n    if(this._parsing) {\r\n      entry.reference_type = (entry.reference >> 31) & 0x00000001;\r\n      entry.referenced_size = entry.reference & 0x7FFFFFFF;\r\n      entry.starts_with_SAP  = (entry.sap >> 31) & 0x00000001;\r\n      entry.SAP_type = (entry.sap >> 28) & 0x00000007;\r\n      entry.SAP_delta_time = (entry.sap  & 0x0FFFFFFF);\r\n    }\r\n  });\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.4.5.3 Sound Media Header Box\r\nISOBox.prototype._boxProcessors['smhd'] = function() {\r\n  this._procFullBox();\r\n  this._procField('balance',  'uint', 16);\r\n  this._procField('reserved', 'uint', 16);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.16.4 Subsegment Index Box\r\nISOBox.prototype._boxProcessors['ssix'] = function() {\r\n  this._procFullBox();\r\n  this._procField('subsegment_count', 'uint', 32);\r\n  this._procEntries('subsegments', this.subsegment_count, function(subsegment) {\r\n    this._procEntryField(subsegment, 'ranges_count', 'uint', 32);\r\n    this._procSubEntries(subsegment, 'ranges', subsegment.ranges_count, function(range) {\r\n      this._procEntryField(range, 'level', 'uint', 8);\r\n      this._procEntryField(range, 'range_size', 'uint', 24);\r\n    });\r\n  });\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.5.2 Sample Description Box\r\nISOBox.prototype._boxProcessors['stsd'] = function() {\r\n  this._procFullBox();\r\n  this._procField('entry_count', 'uint', 32);\r\n  this._procSubBoxes('entries', this.entry_count);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.6.1.2 Decoding Time To Sample Box\r\nISOBox.prototype._boxProcessors['stts'] = function() {\r\n  this._procFullBox();\r\n  this._procField('entry_count', 'uint', 32);\r\n  this._procEntries('entries', this.entry_count, function(entry) {\r\n    this._procEntryField(entry, 'sample_count', 'uint', 32);\r\n    this._procEntryField(entry, 'sample_delta', 'uint', 32);\r\n  });\r\n};\r\n\r\n// ISO/IEC 14496-12:2015 - 8.7.7 Sub-Sample Information Box\r\nISOBox.prototype._boxProcessors['subs'] = function() {\r\n  this._procFullBox();\r\n  this._procField('entry_count', 'uint', 32);\r\n  this._procEntries('entries', this.entry_count, function(entry) {\r\n    this._procEntryField(entry, 'sample_delta', 'uint', 32);\r\n    this._procEntryField(entry, 'subsample_count', 'uint', 16);\r\n    this._procSubEntries(entry, 'subsamples', entry.subsample_count, function(subsample) {\r\n      this._procEntryField(subsample, 'subsample_size', 'uint', (this.version === 1) ? 32 : 16);\r\n      this._procEntryField(subsample, 'subsample_priority', 'uint', 8);\r\n      this._procEntryField(subsample, 'discardable', 'uint', 8);\r\n      this._procEntryField(subsample, 'codec_specific_parameters', 'uint', 32);\r\n    });\r\n  });\r\n};\r\n\r\n// ISO/IEC 23001-7:2011 - 8.2 Track Encryption Box\r\nISOBox.prototype._boxProcessors['tenc'] = function() {\r\n  this._procFullBox();\r\n\r\n  this._procField('default_IsEncrypted', 'uint', 24);\r\n  this._procField('default_IV_size', 'uint', 8);\r\n  this._procFieldArray('default_KID', 16,    'uint', 8);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.8.12 Track Fragmnent Decode Time\r\nISOBox.prototype._boxProcessors['tfdt'] = function() {\r\n  this._procFullBox();\r\n  this._procField('baseMediaDecodeTime', 'uint', (this.version == 1) ? 64 : 32);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.8.7 Track Fragment Header Box\r\nISOBox.prototype._boxProcessors['tfhd'] = function() {\r\n  this._procFullBox();\r\n  this._procField('track_ID', 'uint', 32);\r\n  if(this.flags & 0x01) this._procField('base_data_offset',          'uint', 64);\r\n  if(this.flags & 0x02) this._procField('sample_description_offset', 'uint', 32);\r\n  if(this.flags & 0x08) this._procField('default_sample_duration',   'uint', 32);\r\n  if(this.flags & 0x10) this._procField('default_sample_size',       'uint', 32);\r\n  if(this.flags & 0x20) this._procField('default_sample_flags',      'uint', 32);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.8.10 Track Fragment Random Access Box\r\nISOBox.prototype._boxProcessors['tfra'] = function() {\r\n  this._procFullBox();\r\n  this._procField('track_ID', 'uint', 32);\r\n  if(!this._parsing) {\r\n    this.reserved = 0;\r\n    this.reserved |= (this.length_size_of_traf_num  & 0x00000030) << 4;\r\n    this.reserved |= (this.length_size_of_trun_num  & 0x0000000C) << 2;\r\n    this.reserved |= (this.length_size_of_sample_num  & 0x00000003);\r\n  }\r\n  this._procField('reserved', 'uint', 32);\r\n  if(this._parsing) {\r\n    this.length_size_of_traf_num = (this.reserved & 0x00000030) >> 4;\r\n    this.length_size_of_trun_num = (this.reserved & 0x0000000C) >> 2;\r\n    this.length_size_of_sample_num = (this.reserved & 0x00000003);\r\n  }\r\n  this._procField('number_of_entry', 'uint', 32);\r\n  this._procEntries('entries', this.number_of_entry, function(entry) {\r\n    this._procEntryField(entry, 'time', 'uint', (this.version === 1) ? 64 : 32);\r\n    this._procEntryField(entry, 'moof_offset', 'uint', (this.version === 1) ? 64 : 32);\r\n    this._procEntryField(entry, 'traf_number', 'uint', (this.length_size_of_traf_num + 1) * 8);\r\n    this._procEntryField(entry, 'trun_number', 'uint', (this.length_size_of_trun_num + 1) * 8);\r\n    this._procEntryField(entry, 'sample_number', 'uint', (this.length_size_of_sample_num + 1) * 8);\r\n  });\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.3.2 Track Header Box\r\nISOBox.prototype._boxProcessors['tkhd'] = function() {\r\n  this._procFullBox();\r\n  this._procField('creation_time',      'uint',     (this.version == 1) ? 64 : 32);\r\n  this._procField('modification_time',  'uint',     (this.version == 1) ? 64 : 32);\r\n  this._procField('track_ID',           'uint',     32);\r\n  this._procField('reserved1',          'uint',     32);\r\n  this._procField('duration',           'uint',     (this.version == 1) ? 64 : 32);\r\n  this._procFieldArray('reserved2', 2,  'uint',     32);\r\n  this._procField('layer',              'uint',     16);\r\n  this._procField('alternate_group',    'uint',     16);\r\n  this._procField('volume',             'template', 16);\r\n  this._procField('reserved3',          'uint',     16);\r\n  this._procFieldArray('matrix', 9,     'template', 32);\r\n  this._procField('width',              'template', 32);\r\n  this._procField('height',             'template', 32);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.8.3 Track Extends Box\r\nISOBox.prototype._boxProcessors['trex'] = function() {\r\n  this._procFullBox();\r\n  this._procField('track_ID',                         'uint', 32);\r\n  this._procField('default_sample_description_index', 'uint', 32);\r\n  this._procField('default_sample_duration',          'uint', 32);\r\n  this._procField('default_sample_size',              'uint', 32);\r\n  this._procField('default_sample_flags',             'uint', 32);\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.8.8 Track Run Box\r\n// Note: the 'trun' box has a direct relation to the 'tfhd' box for defaults.\r\n// These defaults are not set explicitly here, but are left to resolve for the user.\r\nISOBox.prototype._boxProcessors['trun'] = function() {\r\n  this._procFullBox();\r\n  this._procField('sample_count', 'uint', 32);\r\n  if(this.flags & 0x1) this._procField('data_offset', 'int', 32);\r\n  if(this.flags & 0x4) this._procField('first_sample_flags', 'uint', 32);\r\n  this._procEntries('samples', this.sample_count, function(sample) {\r\n    if(this.flags & 0x100) this._procEntryField(sample, 'sample_duration', 'uint', 32);\r\n    if(this.flags & 0x200) this._procEntryField(sample, 'sample_size', 'uint', 32);\r\n    if(this.flags & 0x400) this._procEntryField(sample, 'sample_flags', 'uint', 32);\r\n    if(this.flags & 0x800) this._procEntryField(sample, 'sample_composition_time_offset', (this.version === 1) ? 'int' : 'uint',  32);\r\n  });\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.7.2 Data Reference Box\r\nISOBox.prototype._boxProcessors['url '] = ISOBox.prototype._boxProcessors['urn '] = function() {\r\n  this._procFullBox();\r\n  if(this.type === 'urn ') {\r\n    this._procField('name', 'string', -1);\r\n  }\r\n  this._procField('location', 'string', -1);\r\n};\r\n\r\n// ISO/IEC 14496-30:2014 - WebVTT Source Label Box\r\nISOBox.prototype._boxProcessors['vlab'] = function() {\r\n  this._procField('source_label', 'utf8');\r\n};\r\n\r\n// ISO/IEC 14496-12:2012 - 8.4.5.2 Video Media Header Box\r\nISOBox.prototype._boxProcessors['vmhd'] = function() {\r\n  this._procFullBox();\r\n  this._procField('graphicsmode', 'uint', 16);\r\n  this._procFieldArray('opcolor', 3, 'uint', 16);\r\n};\r\n\r\n// ISO/IEC 14496-30:2014 - WebVTT Configuration Box\r\nISOBox.prototype._boxProcessors['vttC'] = function() {\r\n  this._procField('config', 'utf8');\r\n};\r\n\r\n// ISO/IEC 14496-30:2014 - WebVTT Empty Sample Box\r\nISOBox.prototype._boxProcessors['vtte'] = function() {\r\n  // Nothing should happen here.\r\n};\r\n\r\nISOBox.prototype._boxProcessors['stco'] = function() {\r\n  this._procFullBox();\r\n  this._procField('entry_count', 'uint', 32);\r\n  this._procFieldArray('chunk_offsets', this.entry_count, 'uint', 32);\r\n};\r\n\r\nISOBox.prototype._boxProcessors['stsz'] = function() {\r\n  this._procFullBox();\r\n  this._procField('sample_size', 'uint', 32);\r\n  this._procField('sample_count', 'uint', 32);\r\n  if(this.sample_size === 0) {\r\n    this._procFieldArray('entry_sizes', this.sample_count, 'uint', 32);\r\n  }\r\n};\r\n\r\nISOBox.prototype._boxProcessors['stsc'] = function() {\r\n  this._procFullBox();\r\n  this._procField('entry_count', 'uint', 32);\r\n  this._procEntries('entries', this.entry_count, function(entry) {\r\n    this._procEntryField(entry, 'first_chunk', 'uint', 32);\r\n    this._procEntryField(entry, 'samples_per_chunk', 'uint', 32);\r\n    this._procEntryField(entry, 'sample_description_index', 'uint', 32);\r\n  });\r\n};\r\n\r\nISOBox.prototype._boxProcessors['stss'] = function() {\r\n  this._procFullBox();\r\n  this._procField('entry_count', 'uint', 32);\r\n  this._procFieldArray('sample_numbers', this.entry_count, 'uint', 32);\r\n};\r\n\r\nISOBox.prototype._boxProcessors['hdlr'] = function() {\r\n  this._procFullBox();\r\n  this._procField('pre_defined', 'uint', 32);\r\n  this._procField('handler_type', 'string', 4);\r\n  this._procFieldArray('reserved', 3, 'uint', 32);\r\n  this._procField('name', 'string', -1);\r\n};\r\n\r\nISOBox.prototype._boxProcessors['Opus'] = function() {\r\n  // SampleEntry\r\n  this._procFieldArray('reserved1', 3, 'uint', 16);\r\n  this._procField('data_reference_index', 'uint', 16);\r\n  // AudioSampleEntry\r\n  this._procFieldArray('reserved2', 2, 'uint', 32);\r\n  this._procField('channel_count', 'uint', 16);\r\n  this._procField('sample_size', 'uint', 16);\r\n  this._procFieldArray('reserved3', 2, 'uint', 16);\r\n  this._procField('samplerate', 'template', 32);\r\n  this._procSubBoxes('entries');\r\n}\r\n\r\nISOBox.prototype._boxProcessors['dOps'] = function() {\r\n  this._procField('version', 'int', 8);\r\n  this._procField('output_channel_count', 'uint', 8);\r\n  this._procField('pre_skip', 'uint', 16);\r\n  this._procField('input_sample_rate', 'uint', 32);\r\n  this._procField('output_gain', 'uint', 16);\r\n  this._procField('channel_mapping_family', 'uint', 8);\r\n  if(this.channel_mapping_family !== 0) {\r\n    this._procField('stream_count', 'uint', 8);\r\n    this._procField('coupled_count', 'uint', 8);\r\n    this._procFieldArray('channel_mapping', this.output_channel_count, 'uint', 8);\r\n  }\r\n}\r\n\r\nISOBox.prototype._boxProcessors['fLaC'] = function() {\r\n  // SampleEntry\r\n  this._procFieldArray('reserved1', 3, 'uint', 16);\r\n  this._procField('data_reference_index', 'uint', 16);\r\n  // AudioSampleEntry\r\n  this._procFieldArray('reserved2', 2, 'uint', 32);\r\n  this._procField('channel_count', 'uint', 16);\r\n  this._procField('sample_size', 'uint', 16);\r\n  this._procFieldArray('reserved3', 2, 'uint', 16);\r\n  this._procField('sample_rate', 'template', 32);\r\n  this._procSubBoxes('entries');\r\n}\r\n\r\nISOBox.prototype._boxProcessors['dfLa'] = function() {\r\n  this._procFullBox();\r\n}\r\n\r\nISOBox.prototype._boxProcessors['btrt'] = function() {\r\n  this._procField('bufferSizeDB', 'uint', 32);\r\n  this._procField('maxBitrate', 'uint', 32);\r\n  this._procField('avgBitrate', 'uint', 32);\r\n}\r\n\r\nexport default ISOBoxer\r\n","const CRC8_TABLE = new Uint8Array(\r\n  [0x00, 0x07, 0x0e, 0x09, 0x1c, 0x1b, 0x12, 0x15, 0x38, 0x3f, 0x36, 0x31, 0x24, 0x23, 0x2a,\r\n    0x2d, 0x70, 0x77, 0x7e, 0x79, 0x6c, 0x6b, 0x62, 0x65, 0x48, 0x4f, 0x46, 0x41, 0x54, 0x53,\r\n    0x5a, 0x5d, 0xe0, 0xe7, 0xee, 0xe9, 0xfc, 0xfb, 0xf2, 0xf5, 0xd8, 0xdf, 0xd6, 0xd1, 0xc4,\r\n    0xc3, 0xca, 0xcd, 0x90, 0x97, 0x9e, 0x99, 0x8c, 0x8b, 0x82, 0x85, 0xa8, 0xaf, 0xa6, 0xa1,\r\n    0xb4, 0xb3, 0xba, 0xbd, 0xc7, 0xc0, 0xc9, 0xce, 0xdb, 0xdc, 0xd5, 0xd2, 0xff, 0xf8, 0xf1,\r\n    0xf6, 0xe3, 0xe4, 0xed, 0xea, 0xb7, 0xb0, 0xb9, 0xbe, 0xab, 0xac, 0xa5, 0xa2, 0x8f, 0x88,\r\n    0x81, 0x86, 0x93, 0x94, 0x9d, 0x9a, 0x27, 0x20, 0x29, 0x2e, 0x3b, 0x3c, 0x35, 0x32, 0x1f,\r\n    0x18, 0x11, 0x16, 0x03, 0x04, 0x0d, 0x0a, 0x57, 0x50, 0x59, 0x5e, 0x4b, 0x4c, 0x45, 0x42,\r\n    0x6f, 0x68, 0x61, 0x66, 0x73, 0x74, 0x7d, 0x7a, 0x89, 0x8e, 0x87, 0x80, 0x95, 0x92, 0x9b,\r\n    0x9c, 0xb1, 0xb6, 0xbf, 0xb8, 0xad, 0xaa, 0xa3, 0xa4, 0xf9, 0xfe, 0xf7, 0xf0, 0xe5, 0xe2,\r\n    0xeb, 0xec, 0xc1, 0xc6, 0xcf, 0xc8, 0xdd, 0xda, 0xd3, 0xd4, 0x69, 0x6e, 0x67, 0x60, 0x75,\r\n    0x72, 0x7b, 0x7c, 0x51, 0x56, 0x5f, 0x58, 0x4d, 0x4a, 0x43, 0x44, 0x19, 0x1e, 0x17, 0x10,\r\n    0x05, 0x02, 0x0b, 0x0c, 0x21, 0x26, 0x2f, 0x28, 0x3d, 0x3a, 0x33, 0x34, 0x4e, 0x49, 0x40,\r\n    0x47, 0x52, 0x55, 0x5c, 0x5b, 0x76, 0x71, 0x78, 0x7f, 0x6a, 0x6d, 0x64, 0x63, 0x3e, 0x39,\r\n    0x30, 0x37, 0x22, 0x25, 0x2c, 0x2b, 0x06, 0x01, 0x08, 0x0f, 0x1a, 0x1d, 0x14, 0x13, 0xae,\r\n    0xa9, 0xa0, 0xa7, 0xb2, 0xb5, 0xbc, 0xbb, 0x96, 0x91, 0x98, 0x9f, 0x8a, 0x8d, 0x84, 0x83,\r\n    0xde, 0xd9, 0xd0, 0xd7, 0xc2, 0xc5, 0xcc, 0xcb, 0xe6, 0xe1, 0xe8, 0xef, 0xfa, 0xfd, 0xf4,\r\n    0xf3]);\r\nconst CRC16_TABLE = new Uint16Array(\r\n  [0x0000, 0x8005, 0x800f, 0x000a, 0x801b, 0x001e, 0x0014, 0x8011, 0x8033, 0x0036, 0x003c,\r\n    0x8039, 0x0028, 0x802d, 0x8027, 0x0022, 0x8063, 0x0066, 0x006c, 0x8069, 0x0078, 0x807d,\r\n    0x8077, 0x0072, 0x0050, 0x8055, 0x805f, 0x005a, 0x804b, 0x004e, 0x0044, 0x8041, 0x80c3,\r\n    0x00c6, 0x00cc, 0x80c9, 0x00d8, 0x80dd, 0x80d7, 0x00d2, 0x00f0, 0x80f5, 0x80ff, 0x00fa,\r\n    0x80eb, 0x00ee, 0x00e4, 0x80e1, 0x00a0, 0x80a5, 0x80af, 0x00aa, 0x80bb, 0x00be, 0x00b4,\r\n    0x80b1, 0x8093, 0x0096, 0x009c, 0x8099, 0x0088, 0x808d, 0x8087, 0x0082, 0x8183, 0x0186,\r\n    0x018c, 0x8189, 0x0198, 0x819d, 0x8197, 0x0192, 0x01b0, 0x81b5, 0x81bf, 0x01ba, 0x81ab,\r\n    0x01ae, 0x01a4, 0x81a1, 0x01e0, 0x81e5, 0x81ef, 0x01ea, 0x81fb, 0x01fe, 0x01f4, 0x81f1,\r\n    0x81d3, 0x01d6, 0x01dc, 0x81d9, 0x01c8, 0x81cd, 0x81c7, 0x01c2, 0x0140, 0x8145, 0x814f,\r\n    0x014a, 0x815b, 0x015e, 0x0154, 0x8151, 0x8173, 0x0176, 0x017c, 0x8179, 0x0168, 0x816d,\r\n    0x8167, 0x0162, 0x8123, 0x0126, 0x012c, 0x8129, 0x0138, 0x813d, 0x8137, 0x0132, 0x0110,\r\n    0x8115, 0x811f, 0x011a, 0x810b, 0x010e, 0x0104, 0x8101, 0x8303, 0x0306, 0x030c, 0x8309,\r\n    0x0318, 0x831d, 0x8317, 0x0312, 0x0330, 0x8335, 0x833f, 0x033a, 0x832b, 0x032e, 0x0324,\r\n    0x8321, 0x0360, 0x8365, 0x836f, 0x036a, 0x837b, 0x037e, 0x0374, 0x8371, 0x8353, 0x0356,\r\n    0x035c, 0x8359, 0x0348, 0x834d, 0x8347, 0x0342, 0x03c0, 0x83c5, 0x83cf, 0x03ca, 0x83db,\r\n    0x03de, 0x03d4, 0x83d1, 0x83f3, 0x03f6, 0x03fc, 0x83f9, 0x03e8, 0x83ed, 0x83e7, 0x03e2,\r\n    0x83a3, 0x03a6, 0x03ac, 0x83a9, 0x03b8, 0x83bd, 0x83b7, 0x03b2, 0x0390, 0x8395, 0x839f,\r\n    0x039a, 0x838b, 0x038e, 0x0384, 0x8381, 0x0280, 0x8285, 0x828f, 0x028a, 0x829b, 0x029e,\r\n    0x0294, 0x8291, 0x82b3, 0x02b6, 0x02bc, 0x82b9, 0x02a8, 0x82ad, 0x82a7, 0x02a2, 0x82e3,\r\n    0x02e6, 0x02ec, 0x82e9, 0x02f8, 0x82fd, 0x82f7, 0x02f2, 0x02d0, 0x82d5, 0x82df, 0x02da,\r\n    0x82cb, 0x02ce, 0x02c4, 0x82c1, 0x8243, 0x0246, 0x024c, 0x8249, 0x0258, 0x825d, 0x8257,\r\n    0x0252, 0x0270, 0x8275, 0x827f, 0x027a, 0x826b, 0x026e, 0x0264, 0x8261, 0x0220, 0x8225,\r\n    0x822f, 0x022a, 0x823b, 0x023e, 0x0234, 0x8231, 0x8213, 0x0216, 0x021c, 0x8219, 0x0208,\r\n    0x820d, 0x8207, 0x0202]);\r\n\r\nexport function crc8(buf: Uint8Array) {\r\n  let crc = 0;\r\n  for(let i = 0; i < buf.length; i++) {\r\n    crc = CRC8_TABLE[crc ^ buf[i]];\r\n  }\r\n  return crc;\r\n}\r\n\r\nexport function crc16(buf: Uint8Array) {\r\n  let crc = 0;\r\n  for(let i = 0; i < buf.length; i++) {\r\n    crc = ((crc << 8) ^ CRC16_TABLE[(crc >> 8) ^ buf[i]]) & 0xffff;\r\n  }\r\n  return crc;\r\n}\r\n","import {crc16, crc8} from './flac-crc';\r\n\r\nfunction writeUtf8Integer(dv: DataView, pos: number, value: number) {\r\n  while(true) {\r\n    const byte = value & 0x7f;\r\n    value >>= 7;\r\n    if(value === 0) {\r\n      dv.setUint8(pos++, byte);\r\n      break;\r\n    } else {\r\n      dv.setUint8(pos++, byte | 0x80);\r\n    }\r\n  }\r\n  return pos;\r\n}\r\n\r\nexport interface FlacFrameOptions {\r\n  index: number;\r\n  blockSize: number;\r\n  pcms: Int16Array[][];\r\n}\r\n\r\nexport function encodeFlacFrame(params: FlacFrameOptions) {\r\n  const buf = new Uint8Array(10000); // todo\r\n  const dv = new DataView(buf.buffer, buf.byteOffset, buf.byteLength);\r\n\r\n  dv.setUint16(0, 0b1111111111111000); // sync + fixed block size\r\n  // blocksize=\"get 16 bit (blocksize-1) from end of header\" (for simplicity)\r\n  // Sample rate=48khz (opus decoder always uses 48khz)\r\n  dv.setUint8(2, 0b01111010);\r\n  const channelAssignment = params.pcms.length - 1;\r\n  if(channelAssignment > 7) throw new Error('Too many channels');\r\n  const sampleSize = 0b1000; // we ask opus decoder to spit out 16 bit pcm\r\n  dv.setUint8(3, (channelAssignment << 4) | sampleSize);\r\n\r\n  let pos = writeUtf8Integer(dv, 4, params.index);\r\n  dv.setUint16(pos, params.blockSize - 1);\r\n  pos += 2;\r\n\r\n  const crc = crc8(buf.subarray(0, pos));\r\n  dv.setUint8(pos++, crc);\r\n\r\n  // subframes\r\n  for(const channelPcms of params.pcms) {\r\n    // channelPcms is Int16Array[]\r\n    dv.setUint8(pos++, 0b00000010); // verbatim subframe + no wasted bits-per-sample\r\n\r\n    let currentBuffer = channelPcms[0];\r\n    let currentBufferIdx = 0;\r\n    let currentBufferPos = 0;\r\n    for(let i = 0; i < params.blockSize; i++) {\r\n      if(currentBufferPos >= currentBuffer.length) {\r\n        currentBuffer = channelPcms[++currentBufferIdx];\r\n        currentBufferPos = 0;\r\n      }\r\n      dv.setInt16(pos, currentBuffer[currentBufferPos++]);\r\n      pos += 2;\r\n    }\r\n\r\n    // adjust the pcms array to only be the remaining samples\r\n    if(currentBufferIdx > 0) {\r\n      channelPcms.splice(0, currentBufferIdx);\r\n    }\r\n    if(currentBufferPos > 0) {\r\n      channelPcms[0] = currentBuffer.subarray(currentBufferPos);\r\n    }\r\n  }\r\n\r\n  // footer\r\n  const crc2 = crc16(buf.subarray(0, pos));\r\n  dv.setUint16(pos, crc2);\r\n  pos += 2;\r\n\r\n  return {\r\n    data: buf.subarray(0, pos),\r\n    duration: params.blockSize / 48000\r\n  };\r\n}\r\n\r\nexport interface FlacHeaderOptions {\r\n  blockSize: number;\r\n  channelCount: number;\r\n}\r\n\r\nexport function encodeFlacHeader(params: FlacHeaderOptions) {\r\n  const buf = new Uint8Array(38);\r\n  const dv = new DataView(buf.buffer);\r\n\r\n  dv.setUint8(0, 0b10000000);\r\n  dv.setUint8(1, 0);\r\n  dv.setUint16(2, 34); // length\r\n\r\n  dv.setUint16(4, params.blockSize); // min == max because we don't support variable block size\r\n  dv.setUint16(6, params.blockSize);\r\n\r\n  // min & max frame size (24+24 bit)\r\n  dv.setUint16(8, 0);\r\n  dv.setUint16(10, 0);\r\n  dv.setUint16(12, 0);\r\n  // sample rate = 48khz = 0b00001011 101110000000\r\n  dv.setUint8(14, 0b00001011); // 0-8 bits of sample rate\r\n  dv.setUint8(15, 0b10111000); // 9-16 bits of sample rate\r\n  dv.setUint8(16, (params.channelCount - 1) << 1); // 17-20 bits of sample rate (zeroes) + channel count + bits per sample first bit (0)\r\n  dv.setUint8(17, 0b11110000); // bits per sample (16 - 1)\r\n  dv.setUint32(18, 0); // total samples in stream (0 for simplicity)\r\n\r\n  // md5 (0 for simplicity)\r\n  dv.setUint32(22, 0);\r\n  dv.setUint32(26, 0);\r\n  dv.setUint32(30, 0);\r\n  dv.setUint32(34, 0);\r\n\r\n  return buf;\r\n}\r\n","import {findIsoBox} from './utils';\r\n\r\nexport interface Mp4Sample {\r\n  idx: number;\r\n  size: number;\r\n  chunkIdx: number;\r\n  chunkRunIdx: number;\r\n  descriptionIndex: number;\r\n  offset: number;\r\n  dts: number;\r\n  cts: number;\r\n  duration: number;\r\n  isSync: boolean;\r\n}\r\n\r\nexport function parseMp4Samples(trak: any) {\r\n  const stbl = findIsoBox(trak, 'stbl');\r\n  const mdhd = findIsoBox(trak, 'mdhd');\r\n\r\n  let stts, stsc, stco, ctts, stsz, stsd, stss;\r\n  for(const box of stbl.boxes) {\r\n    if(box.type === 'stts') stts = box;\r\n    if(box.type === 'stsc') stsc = box;\r\n    if(box.type === 'stco') stco = box;\r\n    if(box.type === 'ctts') ctts = box;\r\n    if(box.type === 'stsz') stsz = box;\r\n    if(box.type === 'stsd') stsd = box;\r\n    if(box.type === 'stss') stss = box;\r\n  }\r\n  if(!stts || !stsc || !stco || !stsz || !stsd) {\r\n    throw new Error('Missing required box');\r\n  }\r\n\r\n  const samples = [];\r\n  let hasSyncSamples = false;\r\n  let totalDuration = 0;\r\n  let totalSize = 0;\r\n\r\n  let chunkIdx, chunkRunIdx, lastSampleInChunk, offsetInChunk, lastChunkInRun;\r\n\r\n  let lastSampleInSttsRun = -1;\r\n  let sttsRunIdx = -1;\r\n  let lastSampleInCttsRun = -1;\r\n  let cttsRunIdx = -1;\r\n  let lastStssIndex = 0;\r\n\r\n  for(let i = 0; i < stsz.sample_count; i++) {\r\n    const sample = {\r\n      idx: i,\r\n      size: stsz.sample_size || stsz.entry_sizes[i]\r\n    } as Mp4Sample;\r\n    totalSize += sample.size;\r\n    samples.push(sample);\r\n\r\n    // computing chunk-based properties (offset, sample description index)\r\n    if(i === 0) {\r\n      chunkIdx = 1; // chunks are 1-indexed\r\n      chunkRunIdx = 0; // the first chunk is the first entry in the first_chunk table\r\n      lastSampleInChunk = stsc.entries[chunkRunIdx].samples_per_chunk;\r\n      offsetInChunk = 0;\r\n\r\n      sample.chunkIdx = chunkIdx;\r\n      sample.chunkRunIdx = chunkRunIdx;\r\n\r\n      if(chunkRunIdx + 1 < stsc.entry_count) {\r\n        /* The last chunk in the run is the chunk before the next first chunk */\r\n        lastChunkInRun = stsc.entries[chunkRunIdx + 1].first_chunk - 1;\r\n      } else {\r\n        /* There is only one entry in the table, it is valid for all future chunks*/\r\n        lastChunkInRun = Infinity;\r\n      }\r\n    } else if(i < lastSampleInChunk) {\r\n      /* the sample is still in the current chunk */\r\n      sample.chunkIdx = chunkIdx;\r\n      sample.chunkRunIdx = chunkRunIdx;\r\n    } else {\r\n      /* the sample is in the next chunk */\r\n      chunkIdx++;\r\n      sample.chunkIdx = chunkIdx;\r\n      offsetInChunk = 0;\r\n      if(chunkIdx <= lastChunkInRun) {\r\n        /* stay in the same entry of the first_chunk table */\r\n        /* chunk_run_index unmodified */\r\n      } else {\r\n        chunkRunIdx++;\r\n        /* Is there another entry in the first_chunk table ? */\r\n        if(chunkRunIdx + 1 < stsc.entry_count) {\r\n          /* The last chunk in the run is the chunk before the next first chunk */\r\n          lastChunkInRun = stsc.entries[chunkRunIdx + 1].first_chunk - 1;\r\n        } else {\r\n          /* There is only one entry in the table, it is valid for all future chunks*/\r\n          lastChunkInRun = Infinity;\r\n        }\r\n      }\r\n\r\n      sample.chunkRunIdx = chunkRunIdx;\r\n      lastSampleInChunk += stsc.entries[chunkRunIdx].samples_per_chunk;\r\n    }\r\n\r\n    sample.descriptionIndex = stsc.entries[chunkRunIdx].sample_description_index - 1;\r\n    sample.offset = stco.chunk_offsets[sample.chunkIdx - 1] + offsetInChunk;\r\n    offsetInChunk += sample.size;\r\n\r\n    /* setting dts, cts, duration and rap flags */\r\n    if(i > lastSampleInSttsRun) {\r\n      sttsRunIdx += 1;\r\n      if(lastSampleInSttsRun < 0) {\r\n        lastSampleInSttsRun = 0;\r\n      }\r\n      lastSampleInSttsRun += stts.entries[sttsRunIdx].sample_count;\r\n    }\r\n\r\n    if(i > 0) {\r\n      const prevSample = samples[i - 1];\r\n      prevSample.duration = stts.entries[sttsRunIdx].sample_delta;\r\n      totalDuration += prevSample.duration;\r\n      sample.dts = prevSample.dts + prevSample.duration;\r\n    } else {\r\n      sample.dts = 0;\r\n    }\r\n\r\n    if(ctts) {\r\n      if(i >= lastSampleInCttsRun) {\r\n        cttsRunIdx += 1;\r\n        if(lastSampleInCttsRun < 0) {\r\n          lastSampleInCttsRun = 0;\r\n        }\r\n        lastSampleInCttsRun += ctts.entries[cttsRunIdx].sample_count;\r\n      }\r\n      sample.cts = sample.dts + ctts.entries[cttsRunIdx].sample_offset;\r\n    } else {\r\n      sample.cts = sample.dts;\r\n    }\r\n\r\n    if(stss) {\r\n      if(i === stss.sample_numbers[lastStssIndex] - 1) {\r\n        sample.isSync = true;\r\n        hasSyncSamples = true;\r\n        lastStssIndex++;\r\n      } else {\r\n        sample.isSync = false;\r\n      }\r\n    } else {\r\n      sample.isSync = true;\r\n      hasSyncSamples = true;\r\n    }\r\n  }\r\n\r\n  if(samples.length) {\r\n    const lastSample = samples[samples.length - 1];\r\n    lastSample.duration = Math.max(0, mdhd.duration - lastSample.dts);\r\n    totalDuration += lastSample.duration;\r\n  }\r\n\r\n  return {\r\n    mdhd,\r\n    totalSize,\r\n    samples,\r\n    hasSyncSamples\r\n  };\r\n}\r\n","import type {OpusDecodedAudio} from '../../vendor/opus';\r\nimport {Mp4Sample} from './mp4';\r\nimport {encodeFlacFrame} from './flac';\r\n\r\nexport type OpusDecoderDelegate = (data: Uint8Array) => MaybePromise<OpusDecodedAudio>;\r\n\r\nexport interface OpusReencodeOptions {\r\n  decodeOpus: OpusDecoderDelegate;\r\n  chunk: Uint8Array;\r\n  samples: Mp4Sample[];\r\n}\r\n\r\nexport interface FlacFrame {\r\n  data: Uint8Array;\r\n  duration: number;\r\n}\r\n\r\nexport async function reencodeOpusToFlac(params: OpusReencodeOptions) {\r\n  const {decodeOpus, chunk, samples} = params;\r\n  const samplesPerFrame = 2048;\r\n\r\n  let pcms: Int16Array[][] = null;\r\n  let pendingPcmsCount = 0;\r\n  let totalPcmCount = 0;\r\n\r\n  const flacFrames: FlacFrame[] = [];\r\n  function encodePendingPcms(force = false) {\r\n    if(!force && pendingPcmsCount < samplesPerFrame) return;\r\n\r\n    const blockSize = force ? pendingPcmsCount : samplesPerFrame;\r\n    const frame = encodeFlacFrame({\r\n      index: flacFrames.length,\r\n      blockSize,\r\n      pcms\r\n    });\r\n    pendingPcmsCount -= blockSize;\r\n\r\n    flacFrames.push(frame);\r\n  }\r\n\r\n  for(const sample of samples) {\r\n    const {channelData, samplesDecoded} = await decodeOpus(chunk.subarray(sample.offset, sample.offset + sample.size));\r\n\r\n    pendingPcmsCount += samplesDecoded;\r\n    totalPcmCount += samplesDecoded;\r\n\r\n    if(pcms === null) pcms = Array.from({length: channelData.length}, () => [] as any);\r\n    for(let i = 0; i < channelData.length; i++) {\r\n      pcms[i].push(floatPcmTo16BitPcm(channelData[i]));\r\n    }\r\n\r\n    encodePendingPcms();\r\n  }\r\n\r\n  encodePendingPcms(true);\r\n\r\n  return flacFrames;\r\n}\r\n\r\nfunction floatPcmTo16BitPcm(floatPcm: Float32Array) {\r\n  const intPcm = new Int16Array(floatPcm.length);\r\n  for(let i = 0; i < floatPcm.length; i++) {\r\n    const sample = Math.max(-1, Math.min(1, floatPcm[i]));\r\n\r\n    intPcm[i] = sample * 32767.5 - 0.5;\r\n  }\r\n  return intPcm;\r\n}\r\n","import bufferConcats from '../../helpers/bytes/bufferConcats';\r\nimport {findIsoBox, isoBoxToBuffer} from './utils';\r\nimport ISOBoxer from './isoboxer';\r\nimport {encodeFlacHeader} from './flac';\r\nimport {parseMp4Samples} from './mp4';\r\nimport {OpusDecoderDelegate, reencodeOpusToFlac} from './opus';\r\nimport bigInt from 'big-integer';\r\nimport type {OpusDecoderInit} from '../../vendor/opus';\r\n\r\nexport interface Fmp4InitChunkInfo {\r\n  opusTrackId?: number;\r\n  opusInitOptions?: OpusDecoderInit;\r\n  data: Uint8Array;\r\n}\r\n\r\nexport interface Fmp4InitChunkParams {\r\n  opusToFlac?: boolean;\r\n}\r\n\r\nexport function generateFmp4Init(iso: any, params: Fmp4InitChunkParams) {\r\n  const {opusToFlac = false} = params;\r\n\r\n  let opusTrackId: number | undefined;\r\n  let opusInitOptions: OpusDecoderInit | undefined;\r\n\r\n  const data = bufferConcats(\r\n    isoBoxToBuffer(iso.fetch('ftyp')),\r\n    isoBoxToBuffer(iso.fetch('moov'))\r\n  );\r\n  const iso2 = ISOBoxer.parseBuffer(data.buffer);\r\n\r\n  const ftyp = iso2.fetch('ftyp');\r\n  if(!ftyp.compatible_brands.includes('iso6')) {\r\n    ftyp.compatible_brands.push('iso6');\r\n  }\r\n\r\n  const moov = iso2.fetch('moov');\r\n\r\n  let lastTrakIdx = -1;\r\n  const traks = [];\r\n  for(let i = 0; i < moov.boxes.length; i++) {\r\n    const box = moov.boxes[i];\r\n    if(box.type === 'mvhd') {\r\n      // Movie Header Boxes ('mvhd') MUST have durations of zero\r\n      box.duration = 0;\r\n      box.next_track_ID = 2;\r\n    }\r\n    if(box.type !== 'trak') continue;\r\n\r\n    const trak = box;\r\n    lastTrakIdx = i;\r\n    traks.push(trak);\r\n\r\n    const newTrakBoxes = [];\r\n    let thisTrakId = null;\r\n    for(const trakBox of trak.boxes) {\r\n      if(trakBox.type === 'tkhd') {\r\n        // Track Header Boxes ('tkhd') MUST have durations of zero\r\n        trakBox.duration = 0;\r\n        thisTrakId = trakBox.track_ID;\r\n        newTrakBoxes.push(trakBox);\r\n        continue;\r\n      }\r\n\r\n      if(trakBox.type === 'mdia') {\r\n        const mdhd = findIsoBox(trakBox, 'mdhd');\r\n        mdhd.duration = 0;\r\n\r\n        const stbl = findIsoBox(trakBox, 'stbl');\r\n        const newStblBoxes = [];\r\n\r\n        for(const stblBox of stbl.boxes) {\r\n          // (error if) The tracks in the Movie Box contain samples (i.e., the entry_count in the stts, stsc or stco boxes are not set to zero).\r\n          if(stblBox.type === 'stts') {\r\n            stblBox.entry_count = 0;\r\n            stblBox.entries = [];\r\n            newStblBoxes.push(stblBox);\r\n            continue;\r\n          }\r\n\r\n          if(stblBox.type === 'stsc') {\r\n            stblBox.entry_count = 0;\r\n            stblBox.entries = [];\r\n            newStblBoxes.push(stblBox);\r\n            continue;\r\n          }\r\n\r\n          if(stblBox.type === 'stsz') {\r\n            stblBox.sample_size = 0;\r\n            stblBox.sample_count = 0;\r\n            stblBox.entry_sizes = [];\r\n            newStblBoxes.push(stblBox);\r\n            continue;\r\n          }\r\n\r\n          if(stblBox.type === 'stco') {\r\n            stblBox.entry_count = 0;\r\n            stblBox.chunk_offsets = [];\r\n            newStblBoxes.push(stblBox);\r\n            continue;\r\n          }\r\n\r\n          if(stblBox.type === 'stsd') {\r\n            if(opusToFlac && stblBox.entries[0].type === 'Opus') {\r\n              const opusBox = stblBox.entries[0];\r\n              const dopsBox = opusBox.entries[0];\r\n              if(dopsBox.type !== 'dOps') throw new Error('Invalid Opus box');\r\n\r\n              // replace Opus box with FLAC. the re-encoding will be done by the muxer\r\n              const flacBox: any = ISOBoxer.createFullBox('fLaC', stblBox, -1);\r\n              flacBox.reserved1 = [0, 0, 0];\r\n              flacBox.reserved2 = [0, 0];\r\n              flacBox.reserved3 = [0, 0];\r\n              flacBox.data_reference_index = opusBox.data_reference_index;\r\n              flacBox.channel_count = dopsBox.output_channel_count; // opus box may contain incorrect channel count\r\n              // libopus decoder result settings\r\n              flacBox.sample_size = 16;\r\n              flacBox.sample_rate = 48000;\r\n\r\n              const dfla = ISOBoxer.createFullBox('dfLa', flacBox, -1);\r\n              dfla._data = encodeFlacHeader({\r\n                blockSize: 4096 / dopsBox.output_channel_count,\r\n                channelCount: dopsBox.output_channel_count\r\n              });\r\n\r\n              const btrt: any = ISOBoxer.createFullBox('btrt', flacBox, -1);\r\n              btrt.bufferSizeDB = 0;\r\n              btrt.maxBitrate = 48000 * 16 * dopsBox.output_channel_count;\r\n              btrt.avgBitrate = btrt.maxBitrate / 2;\r\n              flacBox.entries = [dfla, btrt];\r\n              stblBox.entries = [flacBox];\r\n\r\n              opusTrackId = thisTrakId;\r\n              opusInitOptions = {\r\n                preSkip: dopsBox.pre_skip,\r\n                channels: dopsBox.output_channel_count,\r\n                streamCount: dopsBox.stream_count,\r\n                coupledStreamCount: dopsBox.coupled_count,\r\n                channelMappingTable: dopsBox.channel_mapping\r\n              };\r\n            }\r\n            newStblBoxes.push(stblBox);\r\n            continue;\r\n          }\r\n\r\n          // other boxes are ignored\r\n        }\r\n\r\n        stbl.boxes = newStblBoxes;\r\n        newTrakBoxes.push(trakBox);\r\n      }\r\n    }\r\n\r\n    trak.boxes = newTrakBoxes;\r\n  }\r\n\r\n  // The Movie Box MUST contain a Track Box ('trak') for every Track Fragment Box ('traf') in the fMP4 Segment, with matching track_ID\r\n  if(lastTrakIdx === -1) {\r\n    throw new Error('No trak box found');\r\n  }\r\n\r\n  // A Movie Extends Box ('mvex') MUST follow the last Track Box\r\n  const mvex = ISOBoxer.createFullBox('mvex', moov, lastTrakIdx + 1);\r\n  for(const trak of traks) {\r\n    const trex: any = ISOBoxer.createFullBox('trex', mvex);\r\n    trex.track_ID = findIsoBox(trak, 'tkhd').track_ID;\r\n    trex.default_sample_description_index = 1;\r\n    trex.default_sample_duration = 0;\r\n    trex.default_sample_size = 0;\r\n    trex.default_sample_flags = 0;\r\n  }\r\n\r\n  return {\r\n    opusTrackId,\r\n    opusInitOptions,\r\n    data: new Uint8Array(iso2.write())\r\n  };\r\n}\r\n\r\nexport interface Fmp4SegmentOptions {\r\n  chunk: any;\r\n  seq?: number;\r\n  timestamp?: bigInt.BigInteger;\r\n  decodeOpus?: OpusDecoderDelegate;\r\n  opusTrackId?: number;\r\n}\r\n\r\nexport async function generateFmp4Segment(params: Fmp4SegmentOptions) {\r\n  const {\r\n    chunk,\r\n    seq = 0,\r\n    timestamp = bigInt.zero,\r\n    decodeOpus,\r\n    opusTrackId\r\n  } = params;\r\n  const chunkU8 = isoBoxToBuffer(chunk);\r\n  const moov = chunk.fetch('moov');\r\n\r\n  const file = ISOBoxer.createFile();\r\n\r\n  const moof = ISOBoxer.createFullBox('moof');\r\n  const mfhd: any = ISOBoxer.createFullBox('mfhd', moof);\r\n  mfhd.sequence_number = seq;\r\n\r\n  const truns = [];\r\n  let totalSamplesSize = 0;\r\n\r\n  for(const moovBox of moov.boxes) {\r\n    if(moovBox.type !== 'trak') continue;\r\n    const trak = moovBox;\r\n\r\n    const {mdhd, samples, totalSize, hasSyncSamples} = parseMp4Samples(trak);\r\n\r\n    const traf = ISOBoxer.createFullBox('traf', moof);\r\n\r\n    const tfhd: any = ISOBoxer.createFullBox('tfhd', traf);\r\n    tfhd.flags = 0x020000; // default‐base‐is‐moof\r\n    tfhd.track_ID = findIsoBox(trak, 'tkhd').track_ID;\r\n\r\n    const tfdt: any = ISOBoxer.createFullBox('tfdt', traf);\r\n    tfdt.version = 1;\r\n    tfdt.baseMediaDecodeTime = timestamp.multiply(mdhd.timescale).divide(1000);\r\n\r\n    const trun: any = ISOBoxer.createFullBox('trun', traf);\r\n    trun.flags = 0x1 | 0x100 | 0x200 | 0x400 | 0x800; // data‐offset‐present + chunk related flags\r\n    trun.data_offset = 0; // will be set later\r\n\r\n    if(opusTrackId === tfhd.track_ID) {\r\n      const flacFrames = await reencodeOpusToFlac({\r\n        decodeOpus,\r\n        samples,\r\n        chunk: chunkU8\r\n      });\r\n      trun.sample_count = flacFrames.length;\r\n      trun.samples = flacFrames.map((frame) => {\r\n        totalSamplesSize += frame.data.byteLength;\r\n        return {\r\n          __data: frame.data,\r\n          sample_duration: Math.round(frame.duration * mdhd.timescale),\r\n          sample_size: frame.data.byteLength,\r\n          sample_flags: (2 << 24), // sync\r\n          sample_composition_time_offset: 0\r\n        };\r\n      });\r\n    } else {\r\n      totalSamplesSize += totalSize;\r\n      trun.sample_count = samples.length;\r\n      trun.samples = samples.map((it) => {\r\n        let flags = 0;\r\n\r\n        if(hasSyncSamples) {\r\n          if(it.isSync) {\r\n            flags |= (2 << 24);\r\n          } else {\r\n            flags |= (1 << 16) | (1 << 24);\r\n          }\r\n        }\r\n\r\n        return {\r\n          __data: chunkU8.subarray(it.offset, it.offset + it.size),\r\n          sample_duration: it.duration,\r\n          sample_size: it.size,\r\n          sample_flags: flags,\r\n          sample_composition_time_offset: it.cts - it.dts\r\n        };\r\n      });\r\n    }\r\n    truns.push(trun);\r\n  }\r\n\r\n  const myMdat: any = ISOBoxer.createFullBox('mdat');\r\n  myMdat.data = new Uint8Array(totalSamplesSize);\r\n  let myMdatOffset = 0;\r\n\r\n  const moofSize = moof.getLength();\r\n\r\n  for(const trun of truns) {\r\n    trun.data_offset = moofSize + myMdatOffset + 8; // mp4 box header\r\n    for(const sample of trun.samples) {\r\n      myMdat.data.set(sample.__data, myMdatOffset);\r\n      myMdatOffset += sample.sample_size;\r\n    }\r\n  }\r\n\r\n  file.append(moof);\r\n  file.append(myMdat);\r\n\r\n  return new Uint8Array(file.write());\r\n}\r\n","/*\r\n  https://github.com/eshaz/simple-yenc\r\n  Copyright 2021-2023 Ethan Halsall, MIT License\r\n*/\r\n\r\n/* See https://gcc.gnu.org/git/?p=gcc.git;a=blob_plain;f=libiberty/crc32.c;hb=refs/heads/master */\r\nconst crc32 = (buf, init = 0xffffffff, poly = 0x04c11db7) => {\r\n    const crc32Table = new Int32Array(256);\r\n    let i,\r\n      j,\r\n      c,\r\n      crc = init;\r\n  \r\n    for (i = 0; i < 256; i++) {\r\n      for (c = i << 24, j = 8; j > 0; --j)\r\n        c = c & 0x80000000 ? (c << 1) ^ poly : c << 1;\r\n      crc32Table[i] = c;\r\n    }\r\n  \r\n    for (i = 0; i < buf.length; i++)\r\n      crc = (crc << 8) ^ crc32Table[((crc >> 24) ^ buf[i]) & 255];\r\n  \r\n    return crc;\r\n};\r\n\r\nconst decode = (string, crc32Function = crc32) => {\r\nconst stringToBytes = (string) =>\r\n    new Uint8Array(string.length / 2).map((_, i) =>\r\n    parseInt(string.substring(i * 2, (i + 1) * 2), 16),\r\n    );\r\n\r\nconst hexToUint8 = (string) => stringToBytes(string)[0];\r\n\r\nconst hexToInt32_LE = (string) =>\r\n    new DataView(stringToBytes(string).buffer).getInt32(0, true);\r\n\r\nconst htmlCodeOverrides = new Map();\r\n[\r\n    ,\r\n    8364,\r\n    ,\r\n    8218,\r\n    402,\r\n    8222,\r\n    8230,\r\n    8224,\r\n    8225,\r\n    710,\r\n    8240,\r\n    352,\r\n    8249,\r\n    338,\r\n    ,\r\n    381,\r\n    ,\r\n    ,\r\n    8216,\r\n    8217,\r\n    8220,\r\n    8221,\r\n    8226,\r\n    8211,\r\n    8212,\r\n    732,\r\n    8482,\r\n    353,\r\n    8250,\r\n    339,\r\n    ,\r\n    382,\r\n    376,\r\n].forEach((k, v) => htmlCodeOverrides.set(k, v));\r\n\r\nconst output = new Uint8Array(string.length);\r\n\r\nlet escaped = false,\r\n    byteIndex = 0,\r\n    byte,\r\n    offset = 42, // default yEnc offset\r\n    isDynEncode = string.length > 13 && string.substring(0, 9) === \"dynEncode\",\r\n    dynEncodeVersion,\r\n    startIdx = 0,\r\n    crc;\r\n\r\nif (isDynEncode) {\r\n    startIdx = 9 + 2;\r\n    dynEncodeVersion = hexToUint8(string.substring(9, startIdx));\r\n    if (dynEncodeVersion <= 1) {\r\n    startIdx += 2;\r\n    offset = hexToUint8(string.substring(11, startIdx));\r\n    }\r\n    if (dynEncodeVersion === 1) {\r\n    startIdx += 8;\r\n    crc = hexToInt32_LE(string.substring(13, startIdx));\r\n    }\r\n}\r\n\r\nconst offsetReverse = 256 - offset;\r\n\r\nfor (let i = startIdx; i < string.length; i++) {\r\n    byte = string.charCodeAt(i);\r\n\r\n    if (byte === 61 && !escaped) {\r\n    escaped = true;\r\n    continue;\r\n    }\r\n\r\n    // work around for encoded strings that are UTF escaped\r\n    if (\r\n    byte === 92 && // /\r\n    i < string.length - 5 &&\r\n    isDynEncode\r\n    ) {\r\n    const secondCharacter = string.charCodeAt(i + 1);\r\n\r\n    if (\r\n        secondCharacter === 117 || // u\r\n        secondCharacter === 85 //     U\r\n    ) {\r\n        byte = parseInt(string.substring(i + 2, i + 6), 16);\r\n        i += 5;\r\n    }\r\n    }\r\n\r\n    if (byte > 255) {\r\n    const htmlOverride = htmlCodeOverrides.get(byte);\r\n    if (htmlOverride) byte = htmlOverride + 127;\r\n    }\r\n\r\n    if (escaped) {\r\n    escaped = false;\r\n    byte -= 64;\r\n    }\r\n\r\n    output[byteIndex++] =\r\n    byte < offset && byte > 0 ? byte + offsetReverse : byte - offset;\r\n}\r\n\r\nconst results = output.subarray(0, byteIndex);\r\nif (isDynEncode && dynEncodeVersion === 1) {\r\n    const actualCrc = crc32Function(results);\r\n    if (actualCrc !== crc) {\r\n    const error = \"Decode failed crc32 validation\";\r\n    console.error(\r\n        \"`simple-yenc`\\n\",\r\n        error + \"\\n\",\r\n        \"Expected: \" + crc + \"; Got: \" + actualCrc + \"\\n\",\r\n        \"Visit https://github.com/eshaz/simple-yenc for more information\",\r\n    );\r\n    throw new Error(error);\r\n    }\r\n}\r\n\r\nreturn results;\r\n};\r\n\r\nexport { decode, crc32 };","import { decode } from \"../simple-yenc\";\n\nexport function WASMAudioDecoderCommon() {\n  // setup static methods\n  const uint8Array = Uint8Array;\n  const float32Array = Float32Array;\n\n  if (!WASMAudioDecoderCommon.modules) {\n    Object.defineProperties(WASMAudioDecoderCommon, {\n      modules: {\n        value: new WeakMap(),\n      },\n\n      setModule: {\n        value(Ref, module) {\n          WASMAudioDecoderCommon.modules.set(Ref, Promise.resolve(module));\n        },\n      },\n\n      getModule: {\n        value(Ref, wasmString) {\n          let module = WASMAudioDecoderCommon.modules.get(Ref);\n\n          if (!module) {\n            if (!wasmString) {\n              wasmString = Ref.wasm;\n              module = WASMAudioDecoderCommon.inflateDynEncodeString(\n                wasmString,\n              ).then((data) => WebAssembly.compile(data));\n            } else {\n              module = WebAssembly.compile(decode(wasmString));\n            }\n\n            WASMAudioDecoderCommon.modules.set(Ref, module);\n          }\n\n          return module;\n        },\n      },\n\n      concatFloat32: {\n        value(buffers, length) {\n          let ret = new float32Array(length),\n            i = 0,\n            offset = 0;\n\n          while (i < buffers.length) {\n            ret.set(buffers[i], offset);\n            offset += buffers[i++].length;\n          }\n\n          return ret;\n        },\n      },\n\n      getDecodedAudio: {\n        value: (errors, channelData, samplesDecoded, sampleRate, bitDepth) => ({\n          errors,\n          channelData,\n          samplesDecoded,\n          sampleRate,\n          bitDepth,\n        }),\n      },\n\n      getDecodedAudioMultiChannel: {\n        value(\n          errors,\n          input,\n          channelsDecoded,\n          samplesDecoded,\n          sampleRate,\n          bitDepth,\n        ) {\n          let channelData = [],\n            i,\n            j;\n\n          for (i = 0; i < channelsDecoded; i++) {\n            const channel = [];\n            for (j = 0; j < input.length; ) channel.push(input[j++][i] || []);\n            channelData.push(\n              WASMAudioDecoderCommon.concatFloat32(channel, samplesDecoded),\n            );\n          }\n\n          return WASMAudioDecoderCommon.getDecodedAudio(\n            errors,\n            channelData,\n            samplesDecoded,\n            sampleRate,\n            bitDepth,\n          );\n        },\n      },\n\n      /*\n       ******************\n       * Compression Code\n       ******************\n       */\n\n      inflateDynEncodeString: {\n        value(source) {\n          source = decode(source);\n\n          return new Promise((resolve) => {\n            // prettier-ignore\n            const puffString = String.raw`dynEncode0114db91da9b\u0014u\u0015\u0014\u0014\u0014\u0015*\u0017t\u0016\u0015t\u0018\u0015t\u0017\u0015\u0017\u001a\u0019\u0014\u0015\u0014\u0016\u0015\u0019\u0017\u0015\u0014$\u001a#\u0016\u0015U¤¤\u0018\u001f\u0014U¤¤\u0018\u001f\u001b3\u0017\u001ay\u0016\u0014\u0018zz\u0014\u0018\u001fss|yusvuy\u0017\u0015\u001eÚ&\u0019\u0015\u00184\u0014<\u001605\u00164\u0014<\u0016,5\u0017\u0017T4\u00154\u0016^\u0018T4\u00144\u0014<\u0016(6\u0018U\u0015~J\u0016(4\u00184\u0014<\u0016 ~A\u0014\u00145\u00194\u00144\u0016U\u001c~6\u0018J\u001604\u00174\u00194\u00165\u00174\u00185\u0016 \u0015\u001f\u001f4\u00144\u00164\u0015J\u001604\u00144\u00174\u0015J\u0016,4\u0017U4\u0015U\u001fÒ\u0016\u0015\u001a7\u0014U45\u001b\u00174\u0018U4Z\u00184\u0017U\u00144\u0017U\u0014^/6\u001c5\u00184\u00165\u0019\u0017T4\u0018\u0018T4\u00144\u0019B\u0015\u0014U\u0015~6\u001a4\u001aC\u0015\u0014U\u0015~O\u0015\u00144\u0018U\u00155\u00184\u0019U\u0016~5\u0019 \u0015\u001f\u001fU\u00145\u001a\u0016T4\u0014B\u0015\u00144\u0017Z!\u00144\u0014U\u0016~5\u0019U\u00145\u0018U\u00155\u001a\u0017T4\u0018U\u0016~6\u0017U4Z\u0018TU\u00145\u0019U\u00165\u0018\u0017T4\u00184\u001b~4\u0019O\u0015\u00144\u0018U2Z\u0018TU\u00145\u0018\u0017T4\u00184\u001cZ!\u00194\u0016B\u0015\u00146\u0014\u0018T4\u001b4\u0014U\u0015~6\u00144\u0014B\u0015\u00146\u0014U\u0015~O\u0015\u00144\u00154\u0014U\u0015~4\u0018O\u0015\u0014\u001f4\u0016U\u0016~5\u00164\u0018U\u0015~5\u0018 \u0014\u001f\u0014\u00194\u00144\u0018~C\u0015\u00144\u0019~5\u00194\u0018U\u0016~5\u0018 \u0015\u001f\u0014\u001f\u0014\u001f4\u00184\u0019~5\u001d4\u00175\u00184\u001aU\u00154\u001dB\u0015\u00146\u001aU\u0014b!\u0014\u001f\u001f4\u001a\u00194\u00144\u0018~U\u0014O\u0015\u00144\u0018U\u0016~5\u0018 \u0015\u001f\u001f\u001f\u0015\u0019U\u00165\u0016\u00174\u0016U4Z\u0018TU#\u001f4\u00184\u0014U\u0015$\u00144\u00176\u00174\u0015<\u0016\u00144\u0016~B\u0015\u00146\u0019^\u00184\u0015<\u0016\u00184\u001a4\u00184\u0017~U\u0015~B\u0015\u0014\u00194\u0016U\u0016~5\u00164\u0017U\u00155\u00174\u00194\u001a~5\u001a4\u00184\u0019~U\u00155\u0018 \u0015\u001f\u001f\u001fµ\u0017\u0015\u0019Uä#U\u0014J\u0016\u0014Uè#5\u0018\u0016T\u0017T4\u0017U0Z\u0018T\u0016TUX5\u0017U\u00155\u0018\u0017T4\u0017\u0018T4\u0017Uà#~4\u0018O\u0015\u0014U\u00154\u0017U $~C\u0015\u00144\u0018~5\u00184\u0017U\u0016~5\u0017 \u0015\u0019\u0017T4\u00144\u0015$\u00166\u0019U\u0014\\!\u001a\u0016T\u0016T\u0016T4\u0019U\u0013\u0015a\u0018T4\u0014<\u0016\u00146\u0017\u0018T4\u0014<\u0016\u001c6\u00184\u0014<\u0016\u0018Z!\u001c4\u00174\u0018~4\u0019N\u0014\u0014\u001f4\u0014<\u0016\u001cU\u0015~5\u001a \u0015\u001f4\u0019U\u0016Z!\u00164\u0019U±\u0016_\u0018TU#\u001f4\u00144\u0019U\u0016U\u00156\u0018UÔ\u001c~B\u0015\u0014$\u00145\u001a4\u00144\u0016$\u00166\u0019U\u0014\\!\u001d4\u0019U\u00156\u0017U¤#~B\u0015\u00144\u00144\u0017Uä#~B\u0015\u0014$\u0014~6\u001b4\u0014<\u0016\u001c6\u0017_\u0018TU#\u001f4\u00174\u001a4\u0018U\u001c~B\u0015\u0014~6\u0018~5\u001a4\u0014<\u0016\u0014Y!\u00144\u001a4\u0014<\u0016\u0018_!\u001a\u0017T4\u0018Y!\u00164\u0014<\u0016\u00146\u001a4\u0017~4\u001a4\u00174\u001b~A\u0014\u0014N\u0014\u00144\u00144\u0014<\u0016\u001cU\u0015~6\u0017J\u0016\u001c4\u0018U\u00155\u0018 \u0014\u001f\u0014\u001f4\u00144\u001aJ\u0016\u001c\u001f4\u0019U\u0016[!\u0015\u001f\u001fU\u0014#\u001f\u0014\u001f\u0014\u001f\u00194\u00184\u0017U\u0015O\u0015\u00144\u0018U\u0016~5\u00184\u0017U\u0015~5\u0017 \u0015\u001f\u001fU\u00155\u0019\u001f4\u0019\u001f\u0013\u001e\u0015 7\u0014U\u0004\u001e6\u00188\u00144\u00184\u0014J\u0016\u00144\u00184\u0016J\u0016 4\u0018U\u0014J\u0016\u001c4\u0018U\u0014J\u001604\u0018V\u0014K\u0016(4\u00184\u0015<\u0016\u0014J\u0016\u00184\u00184\u0017<\u0016\u0014J\u0016$4\u0018U´\u001e~5\u001f4\u0018U\u0004\u001d~5 4\u0018U¤\u001c~5!\u0016T\u0016T\u0017T4\u0018U\u0015$\u00145\"U5\u0014\u0016T\u0016T\u0016T\u0016T\u0016T\u0016T\u0016T4\u0018U\u0016$\u0014\"\u0017\u0014\u0015\u0018\u001c\u001f4\u0018V\u0014K\u0017,U\u00165\u00194\u0018<\u0016(6\u0014U\u0018~6\u00164\u0018<\u0016$6\u001d_!\u001c4\u0018<\u0016 6\u001c4\u0014~6\u001aA\u0014\u00145\u001b4\u001aA\u0014\u00155\u001e4\u00184\u0014U\u0017~6#J\u0016(U5\u00144\u001aA\u0014\u00164\u001bU\u0013\u0015[!\u001b4\u00184\u0016J\u0016(4\u001c4#~A\u0014\u00144\u001eU\u001c6\u001aUU\u001cU\u0013\u0015[!\u001b4\u001a4\u001b6\u00144\u0016~6\u001b4\u001d_!\u001c4\u0018<\u0016\u001c6\u00194\u0014~5\u001a4\u0018<\u0016\u00146\u001d\u0018T4\u0018<\u0016\u00184\u001a]\u0018TU\u00155\u0019 \u001e\u001f\u0017T4\u0014Y!\u00174\u00194\u001d~4\u00164\u001c~A\u0014\u0014N\u0014\u00144\u0019U\u0015~5\u00194\u0016U\u0015~5\u00164\u0014U\u00155\u0014 \u0014\u001f\u0014\u001f4\u00184\u001bJ\u0016(4\u00184\u001aJ\u0016\u001c \u0016\u001fUÄ\u001dA\u0014\u0014!\u0017U\u00145\u0016U#Uô\u001dJ\u0016\u0014U\u0010\"UÔ\u001dJ\u0016\u0014U#UÔ\"J\u0016\u0014U#U´\"J\u0016\u0014\u0017T4\u0016U´\u0016Z\u0018TU\u00145\u0016\u0017T4\u0016Uô\u0015Z\u0018TU\u00145\u0016\u0017T4\u0016UDZ\u0018TU\u00145\u0016\u0017T4\u0016U$[\u0018T4\u00164\u001f~U\u001cO\u0015\u00144\u0016U\u0016~5\u0016 \u0015\u001f\u001fUÔ\u001dUô\u001d4\u0018U\u0004\u0019~U´\u0016$\u0015.U\u00145\u0016\u0017T4\u0016UP[\u0018T4\u0018U\u0004\u0019~4\u0016~U\u0019O\u0015\u00144\u0016U\u0016~5\u0016 \u0015\u001f\u001fU#<\u0016\u0014U#<\u0016\u00144\u0018U\u0004\u0019~U2$\u0015.UÄ\u001dU\u0015N\u0014\u0014 \u001d\u00194\u00164 ~U\u001bO\u0015\u00144\u0016U\u0016~5\u0016 \u0015\u001f\u0014\u001f\u0014\u00194\u00164!~U\u001dO\u0015\u00144\u0016U\u0016~5\u0016 \u0015\u001f\u0014\u001f\u0014\u00194\u0018U\u0004\u0019~4\u0016~U\u001cO\u0015\u00144\u0016U\u0016~5\u0016 \u0015\u001f\u0014\u001f\u0014\u001f4\u00184\u0019J\u0016\u001c4\u00184\u0016J\u0016(\u001fU\u00145\u0014 \u0016\u001f4\u00184\u0018U¤\u0015~J\u0016@4\u00184\u0018Uä\u0019~J\u0016<4\u00184\u0018UD~J\u001684\u00184\u0018U\u0004\u0014~J\u001644\u0018U\u0019$\u00145\u00164\u0018U\u0019$\u00145\u0019U5\u00144\u0018U\u0018$\u00145\u001b4\u0016U1^4\u0019U1^!\u00154\u0016U\u0016~5\u001c4\u0019U\u0015~5\u001aU\u001d5\u00144\u001bU\u0018~6\u0016U\u00144\u0016U\u0014^/6\u00195\u0016\u0017T4\u0016\u0018T4\u0018U\u0017$\u00145\u001b4\u0018U\u0004\u0019~4\u0014B\u0015\u0014U\u0015~4\u001bO\u0015\u00144\u0016U\u00155\u00164\u0014U\u0016~5\u0014 \u0015\u0019U\u0014U'4\u00196\u00144\u0014U'_/5\u00164\u0019U\u0015U\u001d~5\u0014\u0017T4\u0016\u0018T4\u0018U\u0004\u0019~4\u0014B\u0015\u0014U\u0015~U\u0014O\u0015\u00144\u0016U\u00155\u00164\u0014U\u0016~5\u0014 \u0015\u001f\u001fU5\u00144\u0018Uä\u0019~4\u0018U¤\u0015~4\u0018U\u0004\u0019~U'$\u0015!\u00174\u001a4\u001c~5\u001bU\u00145\u0019\u0017T4\u00194\u001b\\\u0018T4\u00184\u0018U<~$\u00166\u0014U\u0014\\!\u00194\u0014U#a\u0018T4\u0018U\u0004\u0019~4\u0019U\u0015~4\u0014O\u0015\u00144\u0019U\u0015~5\u0019 \u0016\u001fU\u00145\u001dU\u00175\u001eU\u00175\u0016\u0016T\u0016T\u0016T4\u0014U$\"\u0016\u0014\u0016\u0015\u001f4\u0019Y\u0018TU5\u0014 \u001c\u001f4\u0019U\u00154\u0018~C\u0015\u0002\u00195\u001dU\u00165\u0016 \u0015\u001fU\u001f5\u001eU\u001b5\u0016\u001f4\u001b4\u00184\u0016$\u00144\u001e~6\u00164\u0019~\\\u0018TU5\u0014 \u001a\u001f4\u0018U\u0004\u0019~4\u0019U\u0015~5\u0014\u0017T4\u0016Y!\u00164\u00144\u001dO\u0015\u00144\u0014U\u0016~5\u00144\u0019U\u0015~5\u00194\u0016U\u00155\u0016 \u0014\u001f\u0014\u001f\u001f4\u0018C\u0015\u0004\u001dY\u0018TU5\u0014 \u0018\u001f4\u0018Uä\u0019~4\u0018U¤\u0015~4\u0018U\u0004\u0019~4\u001c$\u00156\u0016\u0018TU5\u00144\u0016U\u0014\\!\u00184\u001c4\u0018B\u0015æ\u00194\u0018B\u0015ä\u0019~[!\u0018\u001f4\u0018U\u0004\u0014~4\u0018UD~4\u0018U\u0004\u0019~4\u001cU\u0015~4\u001a$\u00156\u0016\u0018TU5\u00144\u0016U\u0014\\!\u00184\u001a4\u0018B\u00154\u0018B\u0015~[!\u0018\u001f4\u00184\u0018U<~4\u0018U4~$\u00175\u0014 \u0017\u001f\u0014\u001f\u0014\u001f4\u0018U\u0010\"U#$\u00175\u0014\u001f4\u00144\"Y!\u0014\u001f4\u00145\u00194\u0014U\u0014^!\u0015\u001f4\u00154\u0018<\u0016\u001cJ\u0016\u00144\u00174\u0018<\u0016(J\u0016\u00144\u00145\u0019\u001f4\u0018U\u0004\u001e~8\u00144\u0019\u001f\u001f­\u0015\u0017\u0014U\u001c\u001fN\u0017\u0014\u0018\u0014\u0019\u0014\u001a\u0014\u001b\u0014\u001c\u0014\u001d\u0014\u001e\u0014\u001f\u0014!\u0014#\u0014%\u0014'\u0014+\u0014/\u00143\u00147\u0014?\u0014G\u0014O\u0014W\u0014g\u0014w\u0014\u0014\u0014·\u0014×\u0014÷\u0014\u0016\u0015\u0014Uä\u001c\u001f;\u0015\u0014\u0015\u0014\u0015\u0014\u0015\u0014\u0016\u0014\u0016\u0014\u0016\u0014\u0016\u0014\u0017\u0014\u0017\u0014\u0017\u0014\u0017\u0014\u0018\u0014\u0018\u0014\u0018\u0014\u0018\u0014\u0019\u0014\u0019\u0014\u0019\u0014\u0019\u0014U\u001d\u001f9$\u0014%\u0014&\u0014\u0014\u0014\u001c\u0014\u001b\u0014\u001d\u0014\u001a\u0014\u001e\u0014\u0019\u0014\u001f\u0014\u0018\u0014 \u0014\u0017\u0014!\u0014\u0016\u0014\"\u0014\u0015\u0014#`;\n\n            WASMAudioDecoderCommon.getModule(WASMAudioDecoderCommon, puffString)\n              .then((wasm) => WebAssembly.instantiate(wasm, {}))\n              .then(({ exports }) => {\n                // required for minifiers that mangle the __heap_base property\n                const instanceExports = new Map(Object.entries(exports));\n\n                const puff = instanceExports.get(\"puff\");\n                const memory = instanceExports.get(\"memory\")[\"buffer\"];\n                const dataArray = new uint8Array(memory);\n                const heapView = new DataView(memory);\n\n                let heapPos = instanceExports.get(\"__heap_base\");\n\n                // source length\n                const sourceLength = source.length;\n                const sourceLengthPtr = heapPos;\n                heapPos += 4;\n                heapView.setInt32(sourceLengthPtr, sourceLength, true);\n\n                // source data\n                const sourcePtr = heapPos;\n                heapPos += sourceLength;\n                dataArray.set(source, sourcePtr);\n\n                // destination length\n                const destLengthPtr = heapPos;\n                heapPos += 4;\n                heapView.setInt32(\n                  destLengthPtr,\n                  dataArray.byteLength - heapPos,\n                  true,\n                );\n\n                // destination data fills in the rest of the heap\n                puff(heapPos, destLengthPtr, sourcePtr, sourceLengthPtr);\n\n                resolve(\n                  dataArray.slice(\n                    heapPos,\n                    heapPos + heapView.getInt32(destLengthPtr, true),\n                  ),\n                );\n              });\n          });\n        },\n      },\n    });\n  }\n\n  Object.defineProperty(this, \"wasm\", {\n    enumerable: true,\n    get: () => this._wasm,\n  });\n\n  this.getOutputChannels = (outputData, channelsDecoded, samplesDecoded) => {\n    let output = [],\n      i = 0;\n\n    while (i < channelsDecoded)\n      output.push(\n        outputData.slice(\n          i * samplesDecoded,\n          i++ * samplesDecoded + samplesDecoded,\n        ),\n      );\n\n    return output;\n  };\n\n  this.allocateTypedArray = (len, TypedArray, setPointer = true) => {\n    const ptr = this._wasm.malloc(TypedArray.BYTES_PER_ELEMENT * len);\n    if (setPointer) this._pointers.add(ptr);\n\n    return {\n      ptr: ptr,\n      len: len,\n      buf: new TypedArray(this._wasm.HEAP, ptr, len),\n    };\n  };\n\n  this.free = () => {\n    this._pointers.forEach((ptr) => {\n      this._wasm.free(ptr);\n    });\n    this._pointers.clear();\n  };\n\n  this.codeToString = (ptr) => {\n    const characters = [],\n      heap = new Uint8Array(this._wasm.HEAP);\n    for (let character = heap[ptr]; character !== 0; character = heap[++ptr])\n      characters.push(character);\n\n    return String.fromCharCode.apply(null, characters);\n  };\n\n  this.addError = (\n    errors,\n    message,\n    frameLength,\n    frameNumber,\n    inputBytes,\n    outputSamples,\n  ) => {\n    errors.push({\n      message: message,\n      frameLength: frameLength,\n      frameNumber: frameNumber,\n      inputBytes: inputBytes,\n      outputSamples: outputSamples,\n    });\n  };\n\n  this.instantiate = (_EmscriptenWASM, _module) => {\n    if (_module) WASMAudioDecoderCommon.setModule(_EmscriptenWASM, _module);\n    this._wasm = new _EmscriptenWASM(WASMAudioDecoderCommon).instantiate();\n    this._pointers = new Set();\n\n    return this._wasm.ready.then(() => this);\n  };\n}\n","/* **************************************************\n * This file is auto-generated during the build process.\n * Any edits to this file will be overwritten.\n ****************************************************/\n\nexport default function EmscriptenWASM(WASMAudioDecoderCommon) {\nvar Module = Module;\n\nfunction ready() {}\n\nModule = {};\n\n/** @param {string|number=} what */ function abort(what) {\n throw what;\n}\n\nfor (var base64ReverseLookup = new Uint8Array(123), /*'z'+1*/ i = 25; i >= 0; --i) {\n base64ReverseLookup[48 + i] = 52 + i;\n base64ReverseLookup[65 + i] = i;\n base64ReverseLookup[97 + i] = 26 + i;\n}\n\nbase64ReverseLookup[43] = 62;\n\nbase64ReverseLookup[47] = 63;\n\n/** @noinline */ function base64Decode(b64) {\n var b1, b2, i = 0, j = 0, bLength = b64.length, output = new Uint8Array((bLength * 3 >> 2) - (b64[bLength - 2] == \"=\") - (b64[bLength - 1] == \"=\"));\n for (;i < bLength; i += 4, j += 3) {\n  b1 = base64ReverseLookup[b64.charCodeAt(i + 1)];\n  b2 = base64ReverseLookup[b64.charCodeAt(i + 2)];\n  output[j] = base64ReverseLookup[b64.charCodeAt(i)] << 2 | b1 >> 4;\n  output[j + 1] = b1 << 4 | b2 >> 2;\n  output[j + 2] = b2 << 6 | base64ReverseLookup[b64.charCodeAt(i + 3)];\n }\n return output;\n}\n\nif (!EmscriptenWASM.wasm) Object.defineProperty(EmscriptenWASM, \"wasm\", {get: () => String.raw`dynEncode01a36c6f98c8\u00173ø%yã¯#6ïI\u0001Øh¼ÿ-^\u0001\u0003º\u001a*:8ÖJÒ#Á(¶3\fùs\u0002Õ\u0002ÿ\u0003\u0016§£/.*[v²¯\\\u0001õz\u0004ºÜá»(oBM×å ÊvmË1±Iü(\u0002&Øb?\u00150=MáPðxA%TÔÎ\u000e=} c×0ÓPùN:Ê\u0016£\u000bÌÓ±æQñÒ¥M_ªqA\u00141k\u0014ð\u0011¹¥ÊÇ@6u§­k¿Ä9Ó²FÒà\u0006(A£c\u001e£ \u0000)ìTÃ=M\u0004]+àaåÅBÃ±cÈ¼\u0019{±!Õ\u0010Õ_ò#²ßá'Ö«ñ\u0006Û.ò¿á(h¯Äò´ýÏ\u0014\u0011 ÆB\\0¬\u000fE¸\u000e?s*iê9)~QÄ\u001aõÿ6+º·=Ml½\u001dUÀ<i½í¤ìgà°Wå,\u001eµ$Ü®(m¬éz\fq§\u00026¥Ô\"±¬o1ÜG\u0014w¾Yüá¼¸Æ$)ÍÏ(!\u0004jÃä\u0010 »ãóª\fI,\fXÍÑãÈ_Ø±ã°=M6Ø\u0001JX½>«¥$´ª\u0005FÏó\t÷¨M/§=}\u0006WÃs¥FÈ$9»PsH0Ç3»P®Wq\u000böCðé~¥\u0010Ö}¸\u000b:taã/±©Ý\u000b\u0017×sôdv[<á\u000eëx[ôÿ\u001d0bñR\u0014\u000fºÊ½j\u0014\u001bËzh\u0002q¹J\u000e\"Ò\f'*¤0Ó34Þ¯rÑöv[B/\u001c¨\u001f¿ê9!ïr÷²\u001bÇn5ÉME\u0018k5Ú?7Úk,*dÔörÏk4\u001f\u000f\u001b\u001cVáÔÕÖÝjooooaú¼l^Û=}MQ\u001dï]½ßQ²lÂù[g=M9\t~êÃ3\u001b¨¨Ó 9ñ\u001fgGze\t¹©ulfÙ\t|¯Sà¦oÌt\u000f= ¶zÈ<Ã·ÿñºßÏÃh]9Í©:#Dãø»­3LeÙ\t¯\u0013\b©[¿)hÓ¯fó¦\u001bÛæþ?p9\nV\u000eïÈnÊ\u0000á$Ëµ¥Ö\u0012%Ú1Érn:fÓ¯æ¸©Õº£¬ó+\u001a \u000b|\u001e;ýoô:*W(©Jÿ+vOÄb7<\u000b×­ßëÙ\t[)o\u001fU89~ÚÇ3\u000eÍ¿\u0017\u0002\u0007V¡N¢&¿\u0002vlGÐäÝk©&M6»\u0000¡6!^\u000f°©äÞÔû\fÏ\u0007\u0000vÚÃBÆL¿\u0006,\u000fY\u0010+\u0005ÏÇj\u001dàìL£¡Rñ¤ekX\\ÍyF= \u001d1X1ªhýQ^úd\u0005ç@!G\n¥\u000f\u0000\u001aÑ)°\u0013+w±\f\u000eyÅIOiÇµ;gR#ó¨'%âfº£P\u0011¾\u0000S\bÃã[¥Eýc&0\u0003\u0001\u000fv¢\\G\u0011-ÌÏù\u0011Ù¡ÜpSX-\u001cUQ\u0011Ï <ÄJ#i\"Ú<Ùo;ðúÙ¡Ú6i¹\u0010|#òm·\u0017ÝßÝYÐÓ\t= ë$}¥Ö\nq_.Ä¾³}Êðÿ\u0003X\u0005i·xKQQK=MÎK\u001dÚ8ÏR«øé³M[§ÍôÛ§\u0006@\u00024åÁË¿Ç(=M\u0001ð2¦ù\u0000Í\u0018\u001dè\u0015\fÃÊÃ\n\u001fË'Çe\u0015Ü\u000f3£<ü\u0004¨Ü&lw\"j5i,¤{öÞØ~OcÒWØ®æÏ¦ë\u001e\u001bJòªéøX¦±n\u0011«rüÆ»g/\u0010Ò\tðlzd²IªÎ~¨\u001bÖ\u0000j=Mv0ª¬¢©Aí~DøÝõU\u0010±nø+møFÛæiáFU'\u0012ª³'ø^%np\u0004Â\u001bû\u0000d)\"~ßVÔÒY¿gò}Q7\u0017\"Ìæ]Â\u0007º¯eFZ\b0í\u0000î\u0012v ídc§ª^\u0012i\\Ò\tqÖáÏ¿û·Ã\u0010dý©Ä\fî-|7Ñ{\u0004à~\bUr\u0012ÂVÆ¯£ª/wYÒF\u001b',\fnÃæV¶\u0003ócyçiØç7µe$\u0000É~)\b&òûô$d1G5Sê=M@= \u0016ÓçÓ\u0006^=}Q²U¾µ:ã7ç4ÿît3?\u0011Âv\u0018sº\u0012ïÿ\nðëA¨ 4e\u0013\\WÓXÉ2¾Àl<U\u0019£\u0011{>f«#¬pªÔHê5\u0013_Ìî\u0011r³\u0016é\u0015Ä¼\u0016áõ,=}ËÖ\u0003õ7Â= = T\tq\u001aãM\u0016aÑ¤Ö)_;©T\u001c$¢¡k\"×b¢\"lë­}åëí\"ÐDã:Ôo5{\u0001Ïªæ6Nnû?=M)~9Î* ä@­Ä\u0004k¨c$ne&^3ÕÔ/\u0006Vì§\"ñ\u00191Ô¯»3Hæ}oTÏ{Ë\u001eZ= jùÔòó¡\u000b6_DÒKM÷ÞwÙ.tR\u0017c£I!\u0005f\u0019\u0007\u0019uWw¶YYT»°\u0000I ·®\u001cD=M5ß®ÆhÙðí=M¨þ­¹§«ùïËÔtëYÌìnÉ\u0003Ô~eóó\u0012Ì\níef\u001d»1öýÆì\u0006ôu)Àê±tõ¸p\f\u000bK\u000b*\u001dÄÕ;ñßé;\u001b{OtÑü;å\u001apñÞSØo¬\u0005\u00169<{\u0013\u0006\tÛS¼\u001cSúë!<q\u0011\u0005V»¶ã®Ôlù>Ä,(s³UÊ­Õ£õ5Éµ-û©^Üëã¶SÃC%(%^}3ùIã4}\u0011ý¼|\n^ëºhÜ*ßÓ{ðÕ¥r\u0007í¬Øz´cTd<xOZ¡5¾µÙ\u0001à?´àLs\u0006\u0003k|êLà; -«)rSXY\u0004»ûWf³Ü\u000f{J\u0012\u0010AÀÀÐ.pD×\u0014\u0000LØIÞoÉHö¤Í\u0010I§{®/¥õ\u0006= 'ç+é\u0015y¹¦\u00103ÁMjÌ:\fm\u001aÕP@²\u000eû×,Ö\u000e½0ù\t\u0006:Ò\u0010Á>!\\¼á0%ãôw\u001f¡\u000fAGi\u001e´à/X®¤k¯þ\u0016K\u0004²\u0013Ï\u0004:ÛÑýP\u0010Hõ\u0007·_rÊ¾²îrÈO¸û8u=}\u000fð\u000fè¡¸8ÐÑØQR5y)P/¿\u001b!5ÇZ#lõ;4°0­Å\u0005É±R\u000fµòòÁ{±«W¯üý²\u0010!¥ú\u0014\u0019\u000f¯×\u0001U1¼{\u0016gÏ\fTïìÑîu´&i\u0017FÀ7z\u0013ÅÐ÷îHÁªT÷°s©ãÞC\u000bu½\u000bPðìô»Y$í\u0018Ì?ËÜ*=Mq¤àþ?ðN\\ëÝ§Ñdñ+´ä°iyßÌzp´(õ¦Lvç\u000e»P~áÆí\u0006nÄÇ:Ñ\u0016= ×k\u000b¤\u0015\u0001\u000f\u0006Oæ\u0004~Ù¶Ï¦?¨¾Uh,a[SäÅP,æu«Nè\u000bÆÝýI<Ç}\u0003:«3;·Õ\u0000= ·@kj;@#G:ÓWÚ\u001f\u0018µ\u0006!­[>Y\u0006\u0007ÂyX×vF?êÀædø!¿ñ\u0007°×\u0010_o3¥\u001f)fÇ(LÝÙª±~O÷M\u0013{^=MuØ]§6áÊc$ÅT@\f{õI=M{÷¼d\tÛ\u0006³=}8>³LlÊUÕ\u0018\b\u001dmí(kx\u001f¾ý;çZÇâùÂÀ+·\u001c\u0005@Xª¥\u001b¡ò F@¨¾\th<FB+îQ BG¨= h©¢â\u0016cW\u000b\u001fIå\n21ä²¸´R»ç]rÁÓ·³ÖÜ}À^o³ô\u001c¤ðÚË'±\u000e<<äìqNun¬Ê%vu³\u000f\u00190îlS%Ç *þ5HV÷\u001aø9\u0019\u0007O\u0000t\u001aõn#he¤M·ÅÏKg³æÚ=M¥L&¬6\u00137°¬Òä\u000eªw+²¥Äq¼í\u0016°EW+\u001fð/¦MüÚù=}]Åz?H\u0017ËÂ+'·\u0013¸SÁ\u0000[\u0002ð9\b\u001cjÐ6Â\u0013ÈÏå ò%\u001bn3\u00108á\u0004ü-1t±)\tÅ,W¬­GÏ¸£Qå¤^\u0002P5«4w¥Ýx¾vÉ7\u0005ì\u0010¸0FI,´4§\u0015ó7-+¬öXdo6Ê\u0003Hî\u0005=M¤Ä.p\u0013U´ü$¶7÷þÔ±Bãÿ\u0006)(ö=MO/k4,NHEÊzØ\u0005qìß,\u000ej[I®i\u0019Èª\u001dÇ\u000fë[Ò¸îl¶uB×C°sÍ×\u0010Xµ{îw+\\;K½\u0018@\nM(¨Ll£v¬\fi?æÆQPê½\u001f\u0012²óÿ>¤Øf\u001eüÐ¬\u0010v;­R\u001cÐíM\u0010j\u0011\\Èìë¦\fæz-K{|xÐJt<aóñ/·}µ½þæF®|´h\u0011_Å ÂQ%<Ê\u0010Ù\u000eg2(e3ß/¡òm6Y/= s72õr7\u0000x\u0011¡Iuh\u0019zY\u0003_1nf>\u0001©Uc|zõ\u0017\u0010¥g¸¢}ÛOÕUéñ!%@Âíç\u0005\u000e¥ßm¹v9ôÈÚ+QÒ\u001ccÏ?\u001c'À4c£%%àAÛ'.¯«¸Q¸¶0dÜS³î\u000bC\u000e\u0005£÷Ý%$ô\u0002¼pÄ\u000b:¹(hLd¯<#hö1X3\u0006\u0001\u001f\u0007³¢ÏÅØèÐøå§²Íú¡.¨KqÏ¸eÿ¾H\u001d¯æîÎÜ\u00047³\u0018u= q/<ý\\ió\u0018Lñ$w£GÑ¹zÿôí©¶¦EØØ²HY7Rö\u001cÇNðBA\u0017Æ§8ÿ\b&.\u0003\u0012ði?\u0000\u0005°v°¶ìcøø¤ähá= D\u001aW×mclÜê<ô|­p7<#lïsV\u001e\u0016Ê°ä3*\u00015ÞHñ]Þ\u001aû5Gòqw,\u001cuhõÁuJ¸vJ?HËL*Ç,w\u0016ðB56T=}\u0002óíB×WîyM\nÒÂÌ±\u0002[¿m)i°­M\n¡Íãe§(¤7\u00108m}ô= Þw^\u000b\u0019kF#].âÂ'à\u00026\"7ï ª¢Ã*¾\u0013\u001b\t¾\u0006à·UóÝ71\\gÒ«k\u0002\u0013®ÿun\u0014\fÑH[[1Î3.'5à·ËßuCLB\u0006\u000eÔ\u0010g\u0010î­ïÖa\u0018äèûV3_×ÏævOqaçU\u0013Z<-KsZù~©\\\u0005!¼¾^Íô2^?\u0019*\\ÓRG\u0001+\u0014lÑ)\u0013ÀØËDÝ\u0002f|]\\xÂ\u001a\u0019ý$4ðÛþ\u0016w¸\u00069G\u000f\u001dÐ ý\u000eA·¶¶\u0012vpZºüX@@ø\u001bp\t4z\u001e&²Âj3\u001eÉ·=Må\u001e¯= v¾g\u0018U\u0010R¨Wdª­/x\u0006\u0006·+,ae*1ù¦v\u0002Îl\n^\u0017\u0015mºò\u000b¦Ó\"@×¥sô#ù  ;\u0001Êr[B\u0005¢êµ- [a\u0017|>\u0002]ê6¢JHXÎÒ\u0017@:{\u0011\u0019=}qá!ÍÌ³K¡ \"A=Mä\u0005= °\u0016zÞÆç*1z^5ºbÏÈ*mZUíí \u0013ÅÐá´\u0000çÏã){\u0004ÜÄ½\n8ApG\u001e× ¬·F¼EÌ1å9ÚbnX&>\u0002\f÷ÿ\u001bÉ\u0011~1$5@Òa,\u0010à¢'¹<i\f´Å?2U¸Ðá©´¡ª¬;pwÌ\u0013\u0000µÑËu\u0000ý¸\u0001Æ\u000b¸fæ­¾â@À\u0011\u0004\f2>Ðÿy2ûL¯×Vã\u0016ñ\u0011éÊ^sY8éí\u0016Í,\u0015FìQÖ§<uDR.´Oôùï\u001a\u0000lh%øiîcÜ\u0005Uª4Js\u0001\u0003\u0006á±\u000f|\"Vèhe\u0017jÙSqúcá5T©¶Ê¨^'Þl\u0012\u0000±ÞSÄ¬#ÂÀ\u0004\u0019Ã\"¼ôÖ£;R\"\u0004¡sÙáY\u001d¿±Y k Ç5wBY®\u001fz®³\nV\u0001\u00119\u001eÝ-\u0014[°,Ò\u000bÀ\\l\nþy\u0004ãÈËh8º\u001bÇ@´i1üÂ&qÙÖ-b:ê\u0018|\u0010Ï3 ¯\u001büÃ¹¦Ædù\"YèIÁ«_\u0019è;÷UÓ\u0018¬pÛC\u0005ôÂ»s]\f@Ç\u0010D ë\u000bT®\\,\"jif¨ \thg£> )[Ç9)Æ,3Ó©Î¼= ¸k@ÄÊÖH7¨Å9ywÐ¢W\u0010BÄ¨)*\u0005Ó\u001a/Û#:÷¤%ÛK\u0005u3f\u0016@¿\u0011Z(M=M°/ \u0007}àPC¡OCÿîòE\u000b?¥Æ±G(´\u0014MùcpÁ0¶YE$$IH®ô¼ÚXr§pþkÞå%\u0013\u0011>Ö\u0005Ún  ºó\u0019Ø@ýµÐú-\u0006\u0016²ø\u0003\\ø?L©}]NõqlÅiÑ3Ï³ì¥Ú½\u0006vëýô3?r+¬Áõ¥â4Û¥\u0000\b)H¤ë}ºæ\u0017Q´*\u0003Ã8¡x\u001c(ð\u0006ª=M\b=}¶wªf4¯\u000fFR!\"µö\u0013\u0013·\\VêT)jâßm8¨Û\u001dM¬¥úãcF\u0006ÁÏr\u0005H\u0004Ö¢8\u000b[á¦c\u0017@¡JÍûv\n\u000b\f\u0004T\u0012b!r~{%u·Û\u001fû3pC0¦wnP/{³¹½ \u001f\fÞs³¡å5!\u001eÜ\u0014\u001af\u001d\u001a^¦³Ó\"ì¼QÌ\u001e\u001a¦k\u001fú5µ-ðøD\u0002¿h6õ\u001dÈ þ©ªVàÍà©\u0016×ãG\bß¬H#þhïd\u001fiÊàÕ\\-´°3Tê¼Eû¤ .[fL\u000e¡Jü,ÉKÃ®ë\u0015BF³.Z*\u001dÌE¨V^\n¯ªf#ºuºY)êÜ£\bPñf×Z\u000e\tIº\u0002æ2\u0007ÞÆÔU\u0019Çx4\"BU®¯RÐú\u001cÖ:\fô·\feAAlD,[Oò0bÁ¡)\u0005{Ãuánò\\ a?Ála\u001cÇPæÌ+ê°\u0000?yw\u0019\u0006íÑî.Ùã\u0013ë3;\u001d+@ü\u000b>Õ= î}1võQ%n<_¸FÆï!ZµÑã}¡\"ÉS°É'íÔ\u0005¶¶)\u0017Þ\u0005\u0013Òü;?\u0003í÷LäIá¨\u0014H0Ô#ÁB§#J½¢=}\u0011\u0016î¥\"\u001aÉØ\\?rÚÃp®2\u0007q(=MY¯hµ ¥x\u00024ôË_·\u00052ögÉXP\u001c/_ÇF|Ë¾ÿfêÛ*Ó2\u0000\u0013q¸Ó®»\fc\u001eþëÝSÛ\u001d¹\nr\bÞ¤®Qb.©6®\u00038W\n³\u0011Ågz¦\u0005Û**\u0016ºYb\u001eY,ÒZð\u0002$æ\u000eÍ¸oíÁhóÃdrö #°ñ0Ì^kØâ\\Ìºå\u0000u\u001bmónÏxÂA5ÁkmW,iÖ\u0005L4aavw¹Ç°=M3ªë09WTÓ­¤Énýö§\u000b:Î\u0002â-\u0014* bÀi­%º²ÜÖ±bÝÏ\tÏna\u001d«è\nêÕw®ç§·ÁÂz\u0000\u000e\u0002~\tûµ/<4Ç¬Õf¢P{½}Ù\u000b®ÏI ä1Áb= Ðg\u0014çM$7G\f=}sd¹P\u001e»ì2U©B¿\u0004eM&%T\u001e\n5´iâgeú\u0013eù'ú\u0017¾\"Ie$ðW´K*\u0014¼ÚE\u0004=M\u0000T\t\f\u0000\u0015àýoC½7Äf*±²ýÔ\u000fLBÞûGW\u0001 ô õ¥s\u0001Ï\u0002Ä\u0002ûnüvw\u001c¢]×0LþQiÅK¿\u000f¬ÇÀ¤¬/´õ\t4tµb\u0002U,¢2\u001f¬\u0001 ÄtppåkJ\u001cÌ\u000fD·É7æýD\u000b8ªüMÀLbÝå?;¤$Â1½\\iJfÙèôA»ýMÝCu\u001f\u001aü)ÏUx}\u0002ê\u0019ßj¡4x¢âêä¯±%§^\u0003¸©\u0019ïÂõ\u0014¡´ÃÌã\u000bq\u000e§è&\u001f¾Þ\u0015\u0002°®\u000e÷\u0003á]9´F\u0014ñ Ý3+c¾ë60\\¹þ\u00177ú=MÑyÿ-)F¿ÑF¤2Ù­ÂgÍ=}2ÈHéº?é.½\u0003=MORèàl;U¸/wØs¯£à±:7p©\f\u0006:®¡ZLá*wE#vSh\u001bd\u0016\u0018äª¥JNóq¯BîÅó¡JVA\u0005v\u0014e7¿Á,´¦@\b0\u001dPôRC5aÚç\u0002\u0014¸\\·}x¡r6Ïpoÿ÷ÁÕ«G_Ü7d\u0001q\u0015é³wJÏ¯3\u0014\u0013Ë |FKcÈ¡´+/ÍN4Jðø\u0000VnÛ·ø= ¸\u001b«A,¬*=}óo@Ú¿ö»b\u001f=MAö\u0012\u001e\u0019f_ú³ï¢ÓÑ¢ÐÌJt\u0005S\u001eò²LI>Ix'\u001eáÎº°»\u0002â=MC¼\u0010Vé\u001d^>Ý\u0006¹V9§ãÉ-Ð|\u001b£CÖËÜ­ùC\u0005t[\nFg7WÚlÂ\u001d³\u0003ä¯Õsü÷±,d%¤\u0019Ê\u0015Òzjª\bGI®®&)AeQÞÈÇ.\u001aú\b:V\u0010Â$Éí\u0006ø\u001dßó¦²°Po{±\u001d]Êv,N\u001cXå¸P8Ý_#12·\f\u000eu\",\u0006Æ\u0003\f4bà\"¡\u001f\u001e&Úª\fGÊz§§\\üÝ½gò6Ñ&{àciÓÉ¯f»5[ \u000e=}#ÿ¼\\\u0004ëe}²¾~ªi~ÆÓa§\u0018N@væ\u00194L\u0006­lì=}Y°EQÆÈ©8÷_d*8\u001cM×ÿÐÉ\u0014øa=M­\u001b³«5nm'±ö\u0006q\\±/+â!4g\u001b,TN»ø P©0}[zñ\u001aZÿèr)\u0004¦EÏ;N¡ß$= ¢aÛÁÔdº\u000e®Ñ;Xò\\tIþ}T\u0005¾grGu<ï rB¯Õ}P\u0015ÞîãB=}iÓ5\u0006ÀÁ)Y.½Ãqó ÓS«N¡\u000fµaÜT,BÊõd'~²h\f%tüõÀíÖzô\u0006\u0016\u0001{D\u0017W\u0000\u0013Àþ=M\u0010\u0000\f«.v·õâñÉe6eR¾fµh¾ñ¼¶zõñè\u001aLLRYË\"&ÅÃ£z{èý4LÄ.\u001aH¬41~È\fdPîÏ\u0002À¼ð\u0000lröø\u0006*¿\u000epÇÃiz.aá^¹î/\u0012u ?a£e±lzZÚ>\\¦\u0010ê= ²Hõs\u0013ßÔ1/ô= F¨e´B{¸Û­ºÇû\u0016f©U8grÉ\u00194â\t²À\u0000¾Ï\b+Â\u001a§¹ò@YÆª´+\u001d\u0002±õ1½Ê'·³ó¯¼ô{\t\u00071ç£Ü½~ííÍñ\u0004Fû{M\u001b\\Îî\u0007Ö5h¼\u0005L+;Âf4Rs³++ôp¥\\±(KR{0ãÏýñÍ;&e¤\u0019»ïí\u001d\u00169ø\u0003l-Eî\u0011¦§â\u0002z{´ÈDÔ¬\u001cÌ@ìCÖt\u0000Hv¹\u0004é\u0007³ûé#= 1\u001eH/10ûÍX¬!L\u0017&Ì[(Ì£¸©äh´|®gû4×½Y~#¹øÿ'÷J\b×dF4¸T\u001a÷ ¥£b\u0017ÏçÜ\u0004þMªúSOÅú\u0014r0\u0003pÛG\u0004¯µ]LU³ÍÝH<äO³Åúª\"\u0014Nðå\b+/±\u0018#Ñ¸£¼Ä/\u0003]»ÀÎ0¾ôËÍDÍ½IæÇÀöàHÂ=Mæk\u0015é+ê\u0018évË|àÅ.UK\nôF1c§\u0010Ô+Î\u0001Ü¤¦\u0012$\u0005îP7ä¼ÕJ\u0016>ëC¸¬KX»N\u001d8\u001bü\u0011Ð\u0019À­\u000fG2¥g>}r°ùÊ\u0017æ.¨ä¸´&ÈWûq\n6\u0013¹ïÿ\u0002âî¨Ïº%Ú!ÜMÞÀU\u0018=}ð\"ÛZ­Ãj\u0018Ç=}âY<\u001fúÍì\b\u0018uõ÷p¿pÕ6âqäÔfÔÜá;ÀÛ\t)\u0005Û)%\u0006\t\t\t^e\u0006\tI!=MüíY¡\u0019\u0007NÈîRþ@/·°ÍmOÀÇ(óuWu!¸õVgÆ½ó5\f\u0017hí²\b¾8,ÚAÌr4Aöäfg\u001deÕ\"Zz\ni,òk¬SÎ%>6û¼u\nªùâ{rþJªÆ0³îêqvHÕS8\u001dí´öh\u001c\fm±hÜè¿ô<Ïj\u001cÛ\u0002\nËä\\\u0014rçÓ'\u0002ñmúÉgðB;9\u0012i¨\bÜÌ{î\u000f\u000fRxø+\u0010Tz\u000f®\u0006\nåÞ\u0015ë¥vì[JþæZmË\u000e[µ÷ª4}\u0013qRÒÜ4\u0014Ýf~ |1¬\u0017 9¹5lK/=M0JÓNuÏMüæ­Þû\u0010¸Y4\u0000\f#x|= >ÍÆZ\u0003¯:nR{ª$* \u001e¶¶\u000e2\u0001èÌ>%m ÿQd±P-\nÁoJä\u0011\u000bcNôK)÷è\u001d63\u0014W+¨¥nÆ¡A§\u001cáÆ§ßWqsÝ#ºF\n6]ä\u0006\u000bc&õîáÊæ:=}\u001aÂ|<f¥¢e£Àà\u0019^\tÌ4Öç\u001fã#s^MY=M:\u001f­uyg\u001emqEÊÑr«¢\u0001H·À\u000fY>?ÕAëé\u000bX\u001fjÖb&ù\u0000¡6â\u001dyÚÑ\u0004Ìú\u001dxô¬¼H\u0018'¬+5pP*þüGz\u0007ñè\u00187A)-\tÊ0BDmHÐ Þ+ª0®G±\u0014u\u0014RMGm/Y<¥g\u001bo³§\bÂ4Hð\u0010=}óç6À-\téàsó9\b\u0015\u0001uÉ\u001c+,â¥Ò.Ø\u0001öÑü0k5­Ñ¦.\u001c&ëüýpz|\u0011\bÚ¦Zdh\u0002æ\u0016Àùè\u0001íü<\u0006\u000e= é!gaô·îØµÈ\u001eIC;­|°Ëo~)ñ{P\u0003ö<\u0002FÑ\u0013{D¸ðÓe9?\u001ehBê\bÀ-\n²×öÞ1ûWD\u001b\u0001\u001aPzö¡j÷ßøÆZ\naDM¹}éO7\u001d\u000b\u0014\u00110ÈÓÔ\u00172?A,Æ¨\u001ed«OãÚ÷\u001eY\u0007TKmæ:¸ÆÜÆhàèd\u000eUo·æ}\u001c\u0011Æm\u000eßwMå¾!UìxøCGHFG\u001bfnØk:\fe\u0013\u0016±Æ)ùTÂÊ¬o¥ü·Hp×Û\u001acI#º|&ûß4qYêæwA¼íE£0Ôx\u0019²'Õ'=}æ»DÄêóÈâ6\u0011jÅ^p·~Pa\u0004ïw\u0017\n¸°N¼\u001bí\u0011\f7­×\u0019~j:ÎG\u0000H\u0011\u0000\u0011smâmá«7\u0003-°í =}mÙi'pë\b*K2¡Þ\u001a\fâV\u0010\u0005^É\u000e%gg~lç½Ò\u0004\n°oã)k\u0011Ë*c¦ÿJø_µ\u0000³Üéß\u0019Ò\u000eïÔ=M°I°j,KCÌ}}P¥Øs._ÆõZ¬´äê\u0017N\u0016­\u000e»ö²¸Ã#ÊG?­UÙ­Je\u0005jzûË(}®¨g\u0017ñ¬Ïº<õ6ë8e\u0010K\u0005>\u0016$Öæ\u001d3ù³²sæ+¿á]#[:ÜJ6ì@¡÷!U£ i{ê= =}iU,m0Ü±\u000bôú°ÿ×\u0013µßc\u001c¦\u001a¥ß¯S$V£N£Î®^7#Áv#I/\u0004ÙGu;ä\u001f©0xNð\u0014qßÜJd-\u001bcÅ;¿±n\t\u001d\u0011Ì\u0012ÇÕ\"à\u0013ÖQRs½BÜ|ÇI\u0000}¶à'ÛCÊ³\u0006@æ/\u0017¤Ôw\u0006+aAå©çI2ä\u0017Ä+1á±TOòãÇÇçOòäÏ³z®³Ð ´ß£V\u0013TIn¸èÕ²º\b=}ga;v8\\GTÑwax¨\fh{Ôdqª_j±¬\u0019Í\u0003Jß\u0019Êdñ©Gjy¨Þ´S¶ÁÞË{#À»¬\u0019Ë\u0003*ß\u0019ãS\u0006¤ÞT4\u0003¾¤~\u0013©n\u000fvZmo\tåt]ÒPJDwâÌ¶\u000f¿STjÝ%¸¤Îß9«9ªÏ{5\u00036#ðßyµ\u000f»SDv\u001f¨aÅ°w1¨jÉ[§\u00132¿8¸´ÌÝÐx\u001e8Ü\u0000EýÜKv»\u0019|U¼\u0014\u0006ø\u0011h\u0001Ìeñë(Ã£U\u0014\u0001Y\u0016çúçDSLîù_õúÇÿ(\u00134¿º¤Ot=}w|é8HÛ\u0006í\u0010s\u000ef\u0004mc\u000f[DÒoêûtPW½\u0012]=}ÇsK\u000f\bê\f¼LV²6kòfÄx(&«ÁA\u000ezq1Q+j\u0013'ÕA\\BZd\u0000;W¼Ñèü*Å[À×\u0016$ì|µ±uûÈe«&G{¬öoa³F°ôî³\u0007\u0016=}C\"|pzJ8ÀD,eO\u001b\u00192f:\u0006·®¨À¯8\u0002ÂOÏÛÈ\u001a\u00145\\\u001fTöFsP¼+\u0012½#5[k0E¼ù{! ¢W=MéØ\u0015=Mx¢\u000b+áGê,?\tæåh\u0016¯tgÁw´%uu¦Ån\u0014ëåÐ/Þ\u0016ê%Åï=}P\u0015JKqÝ\u0006CG=}¹ØæS·\u001cí£\u00007{\u0007ï¿\u001a8ïã¶\u000f<·<ûk\u0000e&\u0018f\u00130½Ñ&\u001dÞ´=}ÄéN¢ØhaÄá\u0005T\u0012ü%5í\u0016ÀÛìl\u0013¿dU|ïp\u0000\u0003\u0007\u0003&4\u000e^Æv2{h÷\u0000\u0010Å7+x®\u001eîß¸Hd\u0010j\u0018\bô@m«hÑß,Ìf9øâP^ú¦\u0019\"e¥wkWx\bWÞ6¦¾?i²þéC»TNô&\u0012¾p\u0019Hß´Â5=M:d´R, N»¸½\u0011:\u000bzÃÊú4\bËB¡Öþ\u001cZ@  Ã2iÒtÅ/© FÆÉXÕÓO³¾\u0006Ûs0\u0013æ\u000b³(é»R\bÅ¢:zuwçÕ?½d\u000f÷8¿òÃ\\\u0001¡\u0014\u0015°Q/Ý¿¡\u000b\u00119/p_2WÚ\fGy3f8øIëV9I.\\êÿöG =M9Uý+ ÷Ü}J\u0017~@»o¨\u001dq§_>Ëd1\u0012ÕüI\fÃ=}=}µ¶I\u0007^pãÕñó+k#càñõ­´ö¥t(ÛC³\u0006= ­Ôuà+DÁå½çòòÃÕ= ±tx§tt>³nÝ*ë\u0017¤´TÇPJ³z°+9áÉÄ¹\"ïÊ\u0007¢§2?]°¼&\u001cKiÖN\u001crï/À¶\u000f½SLj±¬Ù±{{\u0006\u001aµO«ûT\u0018d#ÁÞË{\tcÙàé%ôck\u0006ª§þ²{]jé%ð¥Ù\u0014äÊ61ïë*åfa×ÿ®°zæÕd)¤¾\u001dOÆûÒ\u0003à2È%P©\u000fx\u0006î%¦yûîS\u0011c]ñ\u001cuD»\u0017G¦:$\u0017\u001b3\u0014ß\b&m¿=}JÀ*¥¹\u000b* ñ\u000b*1·Môþy61ÇoÕ*\u001bø\u001c±\u0005úx£~ì\u0012d\fScäçZj.=MeäM\u0013L\\òc>@\u0010Òf7ý~¬ñ¥ãÜ{ \nYåQ\u0014dÙ°ï0·u\u0016ØÛ&q\u0015a¡Ê¦\u0018Wg\n\u001e1.\u0011µ{]1\u000ennÃeþï¤;Ö\u0007DÉYR¦\u000bYjòæv§é²µ\u0007-õ\u001ea\u000bRÛÈ\u0005\u0005\\²ò¤¥Êè¦ð=MVÂ¬×MANdYËÑúa¶mà\u0017+ÂßgH»hI.Ú@ÚbLÚb%ðPðPðºo\u0012ýÄlIs\u001b,w/æ\u000eÃ²Ù*Ø%\u001c~@n4Î½nN\"-3Õ5<i©tú\u0011\u000bQm\u0007ø­ÊJà³q'ØÙ¬î÷µ-¡:]R­2ÆîyOï\bø\bøIG÷îYíÑ|1\u0016Ç~Õn9\\dQ©~\u0006\u001eàÖ5¯°fÖø\fK\u0004\\bao\u000bzÕfn\baZB:ÑvnÕÖÖ\"gl\u0017íoÕrù\bÁ1¶ÊÅ±èçM%m_ÛKæØÈJ±A¼kâ\u0019bÎû)3ÍL= õ§\u0016q Î°dËøÂ½]:}x-Ü¸\u001f£-Ì(= ð*f\u000b\u001c¢×Q ]µÈsFØdþmZ·,À^\u0014þdH!7\bd=}¨õè\u00036Áè\u0015E\u0013Á\u0014\n-ÚØ\u0005Û/o= ã\u001dÕ-  P=MQ\u0018ÿ°ÑÕDºYÈ\u0017äÃ\\ÇªÚ¸ç=}\u0014ì.s[ërGJÊDàoâ«»bÙÔÊ«!S_pðùô\u0014G¥\tÛH¿×TùË3®³ddú vê\u0015KÎ®[ï\u001dºYMÃrcÃu\u0011Ô\u000eOñw¾²PYã\u0013M_ón,%Ùré¹\\,\u001dÖãrz%ám:±\u0004haMUNyºã=}òævS®bÃúaËPÀSºõ»\u001fN\u0003Êc­Ü¬¡Ëi\u0006ôFnÎ;?]\tØsþiÄß=}KS=}íÅahGØ|ú,éfõÐ\"Ý\u001d'd­N\u0018\u001bÍÍÉ\n3\u0001\"A}Çó\u001f©ÍøU/¾äÊºå\u0004.mÌIÛÜ\u0011ÎbÐ5\nëËm§ãO\u001aÑô\u0000 [wmó 3IL#Wõ¥Õ\u0012)_·\b¿Ðk4Eö±Kd§%#Í4wÆ:ì¡\u0000:;ÇÐ7­ýw§æù\u0006ù\u0003\u001cY|Ìq7-\n\\Ôo­\u001d¿+\u0018V~QÀwD}ÉÒK¹h\u001bÓ¹\u0014\u000bÅD¡)ò\u0011ÅÅ£\u0018à¬üÆÏdjc¤\u000e±0ùÙª,ØÔ·}çÿÙôý½;)¾jÈ\u0017Åw3x·þÇ|¬\u000f= Iï$xiÌKSÍ\u0017ÉL<mó<Åoª7q]o2\nhþð= üIÕ®)õ\u0018MÑ÷v×¨Â*\u0002ñ;©v/oæ¨\u001dK\u0011®»ÌE\u001dþÑ\n¡F\u001eÔÆVí\u0005V=}% Erð¥Y\bSH\u0005\u001ey\bG9ÿ*Ðäyï9)!,\u000eä5d/î×Ñf\u001f\u0016\u0003VÛ>6t\nFtCÜ5¿½= x¡\u0013K±\u0011û\tp=MÌìóÁèÞ÷(\u000b\u001a+~Èðð=M\\¹\u001cÐÑ\u001d»É:(ù5X\u0006àV=MÏ\u0012\u000f¬á²Ü u\u0013SÓ%$ik<d-oÓ\b¿¬å5®5\bÇÔàÎ³oþ!LtÜ\t+4\u0004L\u0013JfI×:ïæ=}ëâÉîÒhÒ\\\u001c$8%?å}¸ÿé\u0002¦ÝÅ¬ºÙÔ^¤Ö(;°\u0019¦®ë½\u0015¨ßõÚ¢Ó¨LG´èçÙ;\u0017ü1j¯Á#\by\u0017ï\u001a¤Æ:\u0017ÎàæpQRE1 îWøM\u000bûG9\u0003­\u0002çuwG\"}\u0003õ¦îNÈfÔëI%uåzÜzoüj\u0006)²9ÁíC>ìojóy-¢Mù¯»w8,Ë1B¹³&\u0012¢­Õ¢!'!}uå\u0005³\b17¬\u0014\u0017HMm+Óí\u0003é\tÉ¦]Ý·oÿQÕp§/<bC2ê\u0006ÌØ|~d\u0014r´<ø.:a4ëTCã\u0016ð\u0017Emóiï3âTÀÑì7p#¿Ì\u00051Äð¾Ì\u001e_ýä\\mñguiz$§|äÔLèPÀñz¯\u0015u]Áç[dÍ\u001b\u0018\u0006àæ­=}\u0002+\u001aA­qS¼\u0005ô£cÂó£'£¨uÇ\tÙ81Ï=}Yü,2k#ÑÍC.¢ËØeË\fa¬¶¸7¼ªêGªå7Dä°ëî±Å3Õú\u0001ôÕ»l@ë÷¾ÃæÃ¬xÍnN¼)]è¦ì§µDÃÃ\u0011Ë!\u001bUgÆsèMpÑ9\u0005'ë±\u0011BËÏ×Ä\\¤þ·ÿ#5LkÏ\u001c¬Âjyû4\u0013[/ÿëî¯¨\u0010ôR#»¯Iün¦^ÀPZmý\b\u0006ÿó70\bø\u0006]ºD\\\u0007àYÇR¸B÷\u0013×ÈAº1Ý\u0015\fFÒ¡6.¢¡ââ\"\u0012\u0002¡fèf7É¬J\f7!ªPÝ\u0017Ù= ¤×\\ØQäz¯w%È\u0011Éï±uUí±t¢IÍ>_Èî\u0017k\u0019Ñ!ô½OÐR·iX]\u0013GF\u0015²\u0011\tìâhØbo\t\"\u000b\u001a_\u001e\tÏ\u0015'²ëç\f9ÊMê\u0007,ÎZÈ¥*IO³I¸&+ì1aã¶vÐ»]8uÁ9ëÛÑË1â\u000eFc=MÆ\\#PüóCÄj\f&Y7\u0004T´Eø\u001cè:v&¬5I}ÑÄ\u0004Ì©Ý\u0006)S/cëtÁv\u0017y×.iu8\u0017¯Iî«³ú°ü\t>4¿vyÆ%âKiÝVÅ@ñ1¶¶\u0019 ñÚX3\fª£w\u0014ØÃÀÞ,\u0016E\bÜ\n\u0019~ðF¼ÜÃj\u0013\u0013W²C«¸GüPcA,\"s(\\«[1²\u001cI\u0017¥8@\u0013n\u000f°øBK\t«Ùtj5·eÕÖ¥t~ÿú;ïd=M,\u0016ë¿ðÇü?JuùJîÏó\u0004(¹\u0010\u0003è'>i7åkõ:Ø8Åg4HÅUHIá\u0006h\u001aÛ)ïH<ÕOûAJßJ!\u000bÌ}mÔ\u0007ëöW=MÒ\nøzxåß=M/\n\u0006N+v©·-ÖýI.'Ü_Hýò\u0004h\u001d©rÖ©r¨×ù&%ü§ß\u0000Ôë\"u\u001cI%\u0005T%OÊ°Á\u0000\u0011v\u0007ïÿæGÞmF7Æ%2c=M\u0004 ;\u001föæx/äÛ#\u0010Ígã/\u0004}óTáI²WÄÑú\u001bt\fB(\u0019# \u0017\u0011éIÁñ#Z3l*\u000bÆ:æP\\J\u00052M°\u001cýÕ¾æ\\ø Ý½\bjGø= ÊÛ/qY\fß\u0013ÇTÉê~¡³FqnÄéÐDRnd\u0000±n,ÐÕEÑÛÌÐò?9Þ+ßg)Æ{\u001bP :OmÑÜcÑ¼|cSPÕ{ÀvD0Å¦a\u000fAÅÒÍ\u001aB\u0005A= \u00153¬V\u0006á,ö-×·åsB\u0004/×¼àØ6W éLº\\IÂÄ´£hªWB0¨zÇ*á\u001e£/8\u0005ÏVuä[fØlûIG0ã=MFhÔmÌfB5²ñlEÜÁÝÏÀP·ÍrÛÁsA\"Ð¼1ªnÐ8óÃxô3·Ýî\u0015\u0003«'À7æ-g&\u00155F\u0016õ9ð¿\t\u0013»N[ñ&¡WLÉ\u0013{Ó=}n\u0015=}fWI\u0006$1^ü¾ì1z\u001cüFØôÂÒ%²Cd\b1\n(æ¿Jå±ì\u0004»B¿~«okÄá+Î]7ß²ã<ß\u0010æ<2\u0010\u000böÜ\f;Ú¯\u0016,\u0016|§Ry=}Cy<ÔSg¤k×ôA®j,ËR\u0015¾]¬è7Y¹ù\u0007A7üh»\u0010ÀÍ\u0016?÷3Õ(\u0004ÓñsÅvÈ°pZ¼WÝeÓWíR¼¡ÌêÁÉG¸ò* úÀ\n\u0017!ÙNÏ\u001b¾æ\u0019)¦SMk§8AoôµUëàD\n¬®U­^â\u0006?ÕAþfF,¤NÖ{¬Ü\bè\u0010+\u000fIÝL\u0012ªkþ§=}\u0006±\u0016­Ð|\u0011\u0002Ìþ~\u001b£T§ÃßÛ;VÉ6iu\u0005=}UGÁ¾aá\u0010=Mh3Ì\tÓ~c.}ÏUÂ\u001d7Z«\u001cÊ0Æö@4f/<u/pÕ\u0017k;Öø\u001c8·Á§\u0011~Ê\u0001\u00190\bñ<XÎóU¼nE\u0014Í\bgO#Ñ®ìlO»\u00173×Ü:õ\u00165ø3j.6(To./Âßã\u0007åsÎ@\u0003LK§t%ç\u0010¸#ÉÐöoï\f3$'ÐÁ|.\tiHóÛ/©^í\u0004*\\;sy±\u000b\u000e\u0006üSy]ÕðºÇàl¬Ô~ã9wMn«×¾W}C,/&­ºÖÂw\u0007P4ù²näá±m¤á±ë62\tìjYùÌhiÌ)ñl¼®ÀÖÝjo/\u0002q9Ê(ä\"õÑ{\u001dÊ3²-\u001eHD¿ºj¯ùÛëÞºýÎ\u001fIÞyþÔ\u0005¥\u0016ïùØ¡2ÇêiVUçSé8¾¥Ãæ\u001fæÑO\u0003èÈ¦ò\u001føÇ;QíOP\u001eîz÷\u001f\u001fñàYÇd\u0004Ï\u000e?ã\u0019ºµù{Ö(ZÎ\u0014\\ñ\u0007´fç\u00100\u001b'fm9^©ì!62[§Ãõ£UB+EñP¤Ç_¸ãóÿv9pdp0üÌ]ÙÂ,ÍaV·ÍVT$#Ê6×@ÚòÂLÝa:Ë[\u0004T¿%\u0004Ö±ñà¹xÌqý¢ÖA´DÚ\u0014r#Î~Ò= ,BZ\u001fö °1ß¡£@w;\u001aãì·¡BHÆ>,\u001aÈÙ±\\gÆÙu+ø²óíØ©ãzÄÐ#ãËïW»£æ´Úá¼:x\u001c«¶úHt\u0002L®³²wNÓñÒeG\u0004\u0005\u000e&ðõwüÖ0¢A\týÚNhég[JK(Ô\u0004 ¿¬ûñÚM/o·=}\u0013¬Há>{øN-pÆ¯ÁLúÂÓÐ«æG¶~ã»\u0003¥\u0013%S|\b¬\u0001ûä&\b48\b¾Ï~3'\btG90x\u001e¯Â«DÇjð0-\u00066'\"Jb¿SBn¤%Âwf®¤\u0005¢\u0002éÞ\u0005#i§&= þõ\u001a\u0007¦¢wÚ\u001f¬C2êt'!ã@m'qa$äUjKÇ¡k¶D2áò\u0015\u0000Yç$nNÓlã búB´\u0017ôï¶2èé:P\u0012bìb!Â÷Êæ4!\u0003\u0005ÝÎê0\u0014Pi[O4*\u000eK¶1)Ek=MgÓ\bâh,~p_¾ y\u0003\u0018Én\u0004à³Tr¿ÆÀ_ºÕ\u0013\t0Züoì&aÄÈ©%{g\"+ñ \u0011jÂ¦\u0018ýòÕÌj\u001bvwÁ]\u001b\u001cÍrdG\u0013\u0001ÕÆq\u0007nxp<^L\u0005\u0003*Î\u0000OãÈá1LjK= ßÎ\">g'èø:¬S>·\u001dBq\u0006\bA¢sDý§ÐÖÆãÚs~K²æ\u0001³Z\u001e\\âIÿÔ´{¹$êþ¿È\u0005S6K¾e\u001b\u0017ó\u0000\u0003±am+TÏfcoÒ~\u0002§×¡øÚn\u000f¹Î\u0013_?zyúGÃYÿîÄ\u0013NõK]Ì¹¶\u0012\u0003ì§gÀÆ\u0018vH¶¢çªb)'Å5Idj>µç¢W¾í¥­:øiµe=}Æk¸ÖJ¥=}(+%\u000b°9g¯?d(xÄo\u00187¨¯\u0002s&K\f±øÇÒl\u001c¾ä\u001d\"zÉ\u0007ÜøYÜíÀ\u0018Ú\u000fk\u0007v±#m\u0001\u000eO*s\u001cüÂGçìR@\u001e¼3'Mý\u00183\u0018\b.BB]Ï= a~S\u0016ÀQ\f9\u000e,xìÄ\u000fê\u0004ð!Ç\u0010@¶Ú\u0018u50*!\u0000y\b!p°ûó¿VäW\u000fvËLý\u001f4rI\u0012P2Î\u001c6jè\u0010ßë!o\u0004-ÿ<ØoÉuá¼¤É@¤;|Y1H\\êÏt3î÷âÿÍç«8n¬~\u0014;\u001b:q\u0019B\u0011@uJ>ð²\u0019ÚlÅQñø5\u0000\n*j\u0015$^örÁ\u001f\\Ì \\\\Ml@1kë+Ì°¯îÐ÷ó2\u0010(Þgã+Y:ÉXÚ\u00075Î%j\u0015Ôi^ußò|\u0000Q¬Ñ¤bO\u0005¹È^[)t+J\n÷%j­fÜM@\u0003\u0014\u001dV\u00102ñ\u0004¹M\u0017îx9V¨\u0013ø­Ú8­N\u0017a)ÝÁðà\u0012¹\u00024Ý\u0018Ê·øf#çTÆps!K \u000bþôP Ê¥Sü¦ôM\u0011»Wï\u0012æq¯\u001b¨5#ÀAJ'gdk®zÉaÕ)IÓK×6ò¯×þ\u000e\u0011í'MÚ¨j\u0002\u001b=M<T¿n\u0004°¥Vi=M&6\u0005hß¢À×O]M6\u001a\u0002o\ná&ÆC^é¯X,¸ìnI]ÀÁ^z»\u000f\u001ed®¯I¡QHm¦©\u00065Õb áÍ9þ6âi0\u0019}AàÙ+\nîÇRliû3^\u0006äÈ\u0006»]ÊR6i¦v)^\u0011æ\\^UlÝó\u0015Pc\"¾Z´nGQm*\u0011\u001dLô\u0001\u0007\\@¯a\twÞ×@@ðªZr&b}ô\b5êl\u0013½r,uàþ\fº\u0005ÙTfÐ\u0006¡G?\"\nÅ«>ë]ËÙàô\u0014û]µ|ÞCë*hôóÀ&ÙõaX\u000f_[jz|#\u0015(Bä£NÁ \\}ÓBa&¬þ\u0010WnGÕ$GEÏC=}¶ÀG9$p1øA.\\öj=MV' \u001a©Náõsò5è¨\u000eùÅª·¶ÿ\u0011ÅÞåDê¦\u0010h{ª\u001f+2®¿\u000e-'«ËºU,sØK-*uÓ\u001cY(XXXnÚó\u0013¶Õ\u0000y\bF/EîO\u001cmõ­ýEÇÖè@\u0005vð¿×éÿqRÍ\u0016(ûQLW;\\\u001eË½\u000ebnl=M\u0004<Ç\u0006©a°Þ·½ñ\u000b¡MçUÓ\u0017VÉU?\u0005ä{2âÆÔ\u001aö^Ü>°þÄÅSe[cãqØP\u0019\u0007*_ÏkaUpvÇÙ|fN^Øý:7.6x7\\ûñ<Üß$\u0014s=M\f;Û­ãêtçÚ@íd¦\u001dû<ìç·ÿæRz[¯Ølß%Ëûm½/HpyS;;\f\u0003g\"Ús;= d Ç2ý\u0006®ÝÒ\fÞ\u0001î¥S\u0001TåiÃc\u0010Q.½þb·Íá/3ð´\u0017i3oÇ\f8uCj]$§\u001eÃßÉé¢¼»xèO¼\u001eÇµ×h\u001eÙë£\u0019.s~·\u0001xÅ¶\u0012Uw3ÔÂZí×IFÔBs;ë\u0006ý½ì\f÷!eÆ-dòìej\u0000¸L\"ðµá\u000eÓRîejj×{\u0012ëejêj\u0014íÎWÌäyz§¼\u0001ºçbä¬ð§uáiW2Õ0õ2U6=}ìGÄ½e3\f>ë«_M\fR¥ò¨^Á´ljs\u0004-g\"Ýë\u000blb]ÔD_MÎ¬a õè¶ádZ\fa ?\u0012\u0010¹%\u0004ÄñÀJSy\u001c'÷tUDd\u0001ÓMù\u000bì\u0000/Wï/\u000fßã\u0010æ<UL°\u0010-t\u000b$t¼MßÐ-\t\u0013ó\"*\u0017\u0011R¾\u0015X_èþéhJé2R\u0019»\"XÁ\u0012°¾ ÅLW\u000fofEå4aë\tK)@Êúe\u0005-¿\u0015òÙ±¢\u0001n@;öôr¬\\c\u0014Ü$øY¯NxúóßHL´¡)¥pÌ\u0002I\u0011é\"¯T©\u000eÎØ\"H®\tÞ\u0018ô7÷IËo\u001a\u0017Ì#á¶\u0017\f\u000fÌÊ'çÅ+¿\u0019\u001cª¾5ò\u0013èÒ|ic@¬\u001f;MVï7¾\u0010m¦­\u001dûxy±t¢FÜ\u0012¦È[Ê8Y@(KlXS\u0006ü©éälã\u0006+7¼\u0006¼Õ :=}r´\u0019Öú=}Ú\u00192/Æ\u0006Æ\u0015\t\u000b¿\"éuÀ¿r;\u0010¿r;Ê\u0015\u001fzÇj¾©1Bµ\u0005í\u0001øo¶Îi¡4\u001fõ\u0001x\u0006\t?P\u0011Å´\u00056,>9¬|¯,9ÎäQ\u0018íHfÿ9UÁ\u0015üGoA)\\ïú|ð±ìZWôBÔ4\u0015i)VÀçíþÆ\u0004U\u0007\u0014\u0013JÓ\fn÷Ìï{¿ÛC\u000fQ¿\u0001Íp{è\\3´\nÎ´WÊôJ1\u001e¹\u0015\"\\\u000bK\"5liýI³õÜÏ\u0000Å\u0007b\u000b¹ÅD¹\\FÒ\u0012)¾Ä_×»jÒùk)à\"~\u001a\u0006çp\f\u00193Ì²]¤ö\u00165À¹(°n5k½\u0004¥çY%½zaTìd= ]­V\u001dµ,XAG?\b\u0016\nÔ/ùÌ$\u0007äÑìdX-ØIÙq.iÖ9²ýÿhÄx;sÄa÷eú¤ÙÎ´t\u0001lã÷Wê¶µüs+}]å\u0019¾g.¯Ðm-(-d\u001aäþJÚ±\u001dké¼I%i¼-Äj¨ü<3= ÕsðKß¨ÙäDB*\u0001x\bgÕ\u0016I&¡·òÖATfÕ+k\u000eÁ\u000e6¦Ñ\u0017\u001fs×Ò^÷^H!ÜÆx\u001cÕ@¯m²ãRÊ0ýþY\u001aÄÌk©Êí¥4°Q9îÅ6\u0006}¸v\u0002O\u0012Üê(ÞGô~q\u0002Wrd½S«½1Þ\u001a]\u000bþÒ('+µÀ§\bøKÔ<ÿ·;É-!ÝÅ5Fo@ä²øe+'.ßÔdë.ô+Ç£¥lPrÆÑnë\u0011Õì\u00137kÐ§*E(\u0006fë*\u0007sÍIHLê¨¨y}µ\u0014Jµ\u001c4Di.}®P{ÊBÀ±0ã§ë ]î&[ëêå6<ùàß\u001c\u0019Ùx\u0004ÂxÕØÎrEÕ\u0005a\u0007Ó¤µøÊ=Må¬¢§bKÐ\u0007N|®ºÔvÐ+<Wug\u001eã¸\u000fb:Ças@®r<äï \"úøkDlBX/néÞ<§\u000f¤7ÆsÚ \u0002-\u000bæÂlÑ|\b'Ãd#ô\u0006[O\">~ÃÔ»Ú\\ÿ¯'K>^\u0010á­\t0ÿKDõæùVæQ\u0003J,Qü\u0016'ý\u001f¦\u0019^xâøöà,YÌhu\u001fÈU\u0014=M\"\u0001RÄ÷ÞÞië@= \fY8u\u0015L DÊEì¡\u0002è¡y\u000bnV¹´ã\t(\u001b\u001eu¥ÈêMDpªÈ®hKÑS~\u0015GúÞe\u001b§ÖÅÐ4Ùpê¬rðÖ#V.¾¦³bIç×}CÎ)Kú6VO¾*iÂ@ád7QHæ³¿AgL¨®¦Òþïô¼-Çöb½4I\u000bóH´Ì@Zo=}àyK?Ý«GáE:uÿ²D&&\u0018Â¨Ð¸[h¥¡w:z\u0006|êÖ>GmzÂë\u001e\u0000^ä4°Áè\u0003]XFª\u0006\tÞÎÎèyW¬L Y¶¸Üùþü ³Ô63ÖÈtÃ\u001e@-(¦¼²µ\\*Ãä\u0018Òv¿\u001aIH«y%ÏÓB±=}kÅÌ÷GÍ=M[\u0012íN\u000bî9rÆ.ÞÊÍá\u000b= 6ï2-\u0000N(¤ÁYÀÕÇ²\u0001d\b¹äã?%B=MÌëãÆ\u0007à(°#>ïOí]9¤ûÙÆ¥Íß¾=}Ji1\u0006z6.~C\u0001¯õ¾Ò°=}3ÅàC)÷!jSnS\\©u\u0004Ñxù\u001a<\u0011ÝÒ= ]ï\u0018Qf*÷²\u000ex´ýÅ\u0000ý&LJÎc2¿Yf÷E7#øÑ\u001eµ?§:É\u0007ÏhÞ­^.å.\u0005ÝÈ¶£\u0017=M\\\u0004/@ ¹ØõóYêbÊ\u0013\\ïu¦²\u0010a´7vÒf\u0018 op´bÈ_&¹rzl¡jÔ¿öß$YÜN\u0013\u0010a\u0015fä.p,¿±&1I¿Y= }·Ïx{Òì¿]%z\u0019\u001bÀTÚ6CæµÆ1l÷ùPõ\u0014òÖ\u0011Z\u0017[1ìû\u0000+WzÁzÁNp!\u0018n!\u0004bK Y= \u0002´Ñe+wç\u0011væ°\\Jª>÷¢0?cc6­ÚA_d\u0015´\u001e­«\u0007vr¹Þ\u001dN2¤k<6ã7z\u001f,\tµYô¶¶\u001a¨×åþÍ­HxDôxZ\u0001½WäøÀ>>Õ(æ8ÿ),Ü/>2¤üÿµ:G\u000bËj*&\"fDÃ\u0018øT\u0002È\u001e\u00015Î\u0018õ0é¡üóiV%:õs88\u0012^V_|§Põ³~)ÕÛZ\nÐÒÕhþ\u000fÿø¯\u0012KBàÆÂÖ9ûcþÉµ¥\u0015Ð/ôÈíZ\u000f¡g&= »ìJ\"øÒhL\u0001eLKï0û©nõ ¥mý~öÿýÒâ%àY D6Û[sn¬o\u0005|¼Üd½eÐ<aúÌ±£3§ç\u001aIðõ=}n0 Ëlp\t'\u0002å\u000f&ÀÞqDÑ,@Ýùq }µbâV&¬5Íô3_FzêÖOÎ\u000e\u001dm>q¹W%\bÚaÄ±ÕnÅtx¡+Ü~\u000bÑ@ã¿'\b¸xÎÃ÷ï0^ªw)WS®o\u0015iFq»Ä\b© ´<ÑD\u0012öÛNO\f%9\u0005÷Sr¼Ío÷!U6ÝØç¦^ä\u0018w»\u0016ð^ñ=}57= iæÌÞÈÍù\u0015î§Õfd\u001fµé:òÓA¥×Ó\u0006wp¾ ¾kÜhf/axr®\u000e·º]àßãþ¸«\u001as¥âòFä½\u001fWÁ\u000bCêèc¹}h~¤ÉÑÎ½1÷jly\u001a\u000bú\tiO\u00011ý­\u000fSZáÑÂP¹oV\u0015#¡²ú Ê¾Öýqo¤;j3wÁ}\u0015ê4wéLj\u0015gfêO­0n-? gi¾þ÷§@Ï²HP-iUÕ7 ¢Kù_<UòÎnÈH¶L5)[gÅ\u0018æRâ´.ß\u0013\u001cÉ^sIþ¾7\\}\u000e~J1p\u0010aõÏ\u000bËQ,wJªÁ\býÞSÓ.¸áäÃÀ·t\u001c/ÅÝ$ÅÃÛbµègÙ\u001e¤9üÆ*[A­\u0001u\u0013jr$µcñ£\u0017ñ¸wÄo·UÏã{ù«à-¾ûZçn<ßÞ77£\u0019\u0002\u000bnÒäy\u000bZîr>ç\u001fM®jµß&aæË°\u0002©íñÂÒj3\u0002ê÷¢Èh¤\u0019<U²\"p\u0013)Ü%;Ùªe;^þð0!8\u001dáÑ&VÆÝèÁe'=MüSß_òZÃv\u0013¿= 2= k)U>'(åó\u000b¿ì]ø\u000f\u001du½ñ÷ÂÏøÞ?ÜåJîMl«ûìêkh]¿h\u0004mVï\u0004\u0006¶zg[\u0012]UÒ/¿Py0\u00014\u001aÛ5Ù;þ:\u0011-6\u0005ce0CÆÔH=MT\u0017²aÃê*;Öã\u001cë6;ï\bmÂm7dî®,Wrû!'CçfEÊÐÓ¯UÖ6±¹Õ$\u001a¸ºÛ?Òy^\u0016\t+\u0011=MÈ<7¯>9eXe\"\u000f\u0015i¥|±£~±\u0017úi\f\nù£Â= (­´ÇzuRh|\u0013ã½L\nâ÷\u0007êÍ\u000efcar\u0005æ@âóÍÙPNÒ\u0002æl\u0018õ\u0010ÃÀ½Ô\u000f@\u001d0¦ÏlÿíTùV.\u0014Ó\u0003PÜ;²e3 Oò\u001bT\u0007]w<\u0011\u001bQõÿ06lÂN­Ý¬5fÝ|}Ià\u001bælNÉû¬KLâ¼P6ä0®gÂ\u001a5®&t¹Ê\u001aåLáK9\u0006\u0014Då¡³Â· õ¬@ÞV¨Ëí\u0014³ëçÔG³üö»~%cv¬é\n­ûå GDK\u0007fêá¦\u0007sö«Ù\u0000å/CX\u001aóùI\u0007í ØÀ@\u0001Ó= 0ÊÝ\u001c!K<ô>WÓÈ\u0005-è4\u0006\u0007\t\u000eG{)öL8«?BP»«·lrõn·Éy¼\u0007a8_jÌ¾Gy./\u0018êÝ¥öAÝû¯Î;Ý\u000bû@F~ÏR\u0006½\\gÑö= ÐÞV\u00040ö×¬:î\u0019»\u001dhëFæùãí\u001d=M]¼Ùûü\u000f£\u001a{3 ¤ùp<\u001bût?\u0000ÅJÆ(2X}}äèqÉïëXå\u0002ew}56Ãæv«ÄúºÃvn\t\u0002çv\u0012ø±úÎ_n²©t\u0003íO-t~Öd(Ô6!õZhÞ\u000fr/\u0010í³â'u=}m³çRÍ\u0002ìUæÔ+\u0003¥9\u001fr\u0019 NtD\u0006þ¡\u0013\\Gb0Áé]ut\bÆ\u001eZkêë?ý<Ð>ùL\u0018ëé\u0002{Rôãhr®d\u0012g½º\u0011Òî\u0002\u0001\u0003_Á'gf«\bUÉS\u0019 ë1ÆjúSJÊQ$×=M_ÑT_³íD+¬®'J\u001cÁ¸Ææ8\u0002î6¯òÖ\u0016¢ÐAÕ²~³¡\u001c)BeêéÕv>0´ïOÆj¶%Nô¡ÑVh\u0013\bd\u00054Q+õBÙüÚßU\"þ\u0011X ÀB´a.'}_AÜ£¶ã¾\u00101¯\u00057\u001cHñDò²\bíJvwSÂ£¹ñ2%ÉM×3qC2°\t\u00029\u0003=}Ç\u0012] gs\u0000sl{\u0000½_ÊK[®e«\u0016ØäÜ$ xï\u0001S\fcBÛzÃ,C\u00156\f!r]?;¥f\u0004&\t^a¿\u0004?]²0B_b1oÁäïîXh&ý\"GísÚ³ÿúR\u000f\nH\u0000QÏú\u0017¶}i»7\u0019¢\u0016æatæ\u0016 ÖÉÔîe\u0000o°\u0015= ¡8®À\tg(N \u0018Z\\\"\u001eíò\u000eéÇË7lÎëÕ\u001dÜK\u0017orÐvíGõ7aÕ\u0005÷*ê&¸®<\u0015GÖá4ûö4\fkDÿ\u0002FØ.?6þ4â/¦Í\u000f{\u0003rÍzL0sæ\u001cìðÏZþáëÏóJÂ\u0005Në\u001e-6-\u0002½_\u0017pr\u0003´/\u0006[F÷]·ÏË(èLJÚ|®5(´èæÒ²¬\u000f°0ê×ØkÖ= Æ\u000eý\u001añ/h]\u00070h?ØÆø¼=M\u001c\u0018\nSHn];9\fÐXTêðpßq=}g\u0004sK9XÔ\u0007íÍÊ\u001b§+\b¹ânßª÷@ì5)'q@ ¤/î©¸\u0010\u001e#(aÞÇVUo:ÈÑå°r\u0010<Zr H»}:\u0010_%Ö¦·í&÷\u0011õØo©¨rªIÆù^smî¦¾ùj¦ñ7à=M¾çß^öM²!ád~°Á~&h/ y3\u001b#\u001bñàÙ'nE¦»Ñ\u001eÐÜ\f£h¤¸¾sÝÈã³\n)ù(\u0007øqùå\u0011;LbaHóÛê\t|ÿd8Ú¤õÌ\u0017¯ DÖ3MoXaþ\u0003F¯%E\t#^èÖÈà[ã¥)ð²ÒOà_#øcÃõñ\t\u0010[ÂSÒlï\u0014,@|r6@V\u001f\u0013 [Â¨;\u0003\u0014«£r7³$S#\u001c¶G SØ\u001a¯È\báæ\u0016\u001192eDüù\u001a?ðM¥Äf.¿\u0001YÆ&«S\u001e3¥s>\u0012tÌm+i\u000f»t\u0013 DþOü'±¬\u0001\u001dGJ\u00139ê\u0015lôü\u0018¼Rù.3×\u0001\u0013\u00143= Þ.:oÐE>K<?Ï£ÖÈm·ÿ1q=M\fäÌUû×U\u0012Ô\u000eÏØ8\u00060ë«Þ\u0018K¤x Xª\u0006QÕ3ÓªÃ\u0001:ÈI°Iü3\f8°<J%ùÐð0qÏÐ9\u0004PÉØÕ\u0006ê·$ðá\u0015ºªß¥\u0012ÿ¬\u0006\u001e»_I¡Fã?-uÙd.hÚÆvþ$¥_GÞT4¦¾3]Ý¡TØt½ìí\u001cs¾\u0014oýþ²^×ÜÚsv\u001düúõâñtÚI\\\u001eÌÎ\u001bß®\u000eZIn]ê\u0018Íýx£ý ¿Ý\u000eÅ®¦tÓ¥Rªðì)x\u001cI(z\u0010î?*³'l5Í}\u0014¦³ÁUîyª±få\u0010%\u001e²= ¥ë_å\u0001d£R2 Ý\u0015^\u001bbrÿÁ$0ºá$= :\u0001Jc@ªæ»õìz>Îð\u0005gNÛV1\u000fãhQ= Q\u0018fß²4-ÇÒ8X¬¸£,¤wà\fm5è*í\u0015T8\u001e£*$cm\u0014Chý\u000eSMrÝ¶öpÅªp\u000e]\u0000U3\u0016Þè1lÜ¶Ü;ós·ï)è,\fYW\u0018\u0015£È~åð>¼Ghc\u0011ÏÌ¼\u0005¸\u0012ÿþh\u0007\bk\f)\u001b\u001ed´QÞGb%è¼MlKìjý·\u0013=}k:#Ì\b\u0010ÏðH3\fÜÌú\u001c\\\u000bN>Ì= ¾\u0000ÒÚí¨\tüU\u0010:.cÜá9ëFS¬=}r×½\\¶ûN­1k.\u0019\"T½¹\u0013W¿\u001c\u0011|\u0015;ZäÐ\u001aúüß\u0002\u0018V]:0\u0017Ó|\u0000Cþ;\\Yëæ\u001eßÙ ÁB\u0019öÌ¶~ Û#ð\u00131b\u000fB|jèj\u0010¤#þ_ñ\u0010\u0015\u000e5\u0016Ä\u0000ÍnZ\u0010û\u001dse²¡$Â£D¨_ºxxi¹£Õ±S¾»T®\u0000ÙØ4íA½\u0001kTÄ\u001e=M\u001a\u0011f××íRë\u001dG²3\\ï£NQÇô\u001f½FÙN¶ ý}§\u0017\u001d?¶Ôìvâ\u0003X±>boÎgV \u0010¾÷³Ùøl2NæäÑÞÇªýÇ9Á¬\u0001ò\u0019o§/gK~Xh#¼|ã\b\u0016~ðª¦\u0007+Cät~Ikbi3g\u0007K(5D¹ÎV¥î\u001cÿtÑ÷Wo­¹X]\u0017m|FÖë+.\u001d\\Oÿs¿\u0004ëwéR]ÜÈ6¡\u001a³\u001f\tº\u00003\u0015Á_õ\f\u0003¯\fú@bX\u0019T\u001b;xUq=Mq&\u001fO¼¡\u0000&¶©\u0015üÉlÖ(e&­äJ¦ú/\u001béü\n=}Z\u0005\u0017¶µ\u0005R÷T\u0003ÎO\u001djÉYÄ4ýÏìë\u001f@âÒU{Î\\h'\næhÄ!ð\u0016LyOgæyM0mØ|Îtk­\u0011ýL2÷U~Q¹Ä¿oy´T\u001c$°õ¢]¹\u0019Kùá\u0015ÑéÂ¨³¦±\\i³£ÉÓ)(Qþe8O\u0007»v\u0017°\u0005ñàý\\\bGKÍ¯Ú)ÚI-6ÛÛª\u001eq×ÎE]¡Sç\u00035tÙÃø91^\u0015\u0000ÅíM@»~d\u001e\u000bs½=M_3 uu\u0016n¼\\-=}\fX:i÷}}\u0013Ct:Yäå¸ÐU\u0016À70jäl©ô\u001cãÒ\u001e\u0019#\u0004nØOý%È6æNz1\bÅ\u001cÔ³A(ARO ¨;Àê5\t\b¹a:N!0¹çx\f\u001c\u001b*lÑ\u001cêÎ\u001eðj\u001fZ \u000eIj59ÏX)<Ô\u001b\u001bß\u0016o\u0004\t\t\u0001\tØÿ´üø ý\u001d9á®\u0001\bøééé\u0015\u0007\u0007ç\u0007y\u0003ÑW¾1´Êý\u001f×¢j+)õ*p¹+&\u000bæ\u001e¦é®9·8M­x\u0012øDM­HÐÂ\u0002BÐ6|äù¶ñ«°TÔ\u0017/FR-öÿ«ºçÈHi=}VtÙ\u0011½IÇq\u0012Xaå\u0011ÔwB?lÞàoSÛ)Kùÿ\u001d&ö\u0016à\u0007ïÞ\u0006KÊ¿.qÐÌÎT²=Mÿ\bîý:4Bêp= ñ¯üæ\u001d´­\u0012Nõ¦ýs\u0005ô\u0004¬Ù¶²t\u001aVM²\u0018ó\"aÂ\u0010%\u001c*ú¼W¥qïí\u0018\u001döh¡oÏOÂ3Î¶n;f·FK-«lg&ÙJE+vÜ·= QË(á6ÿ°òOÆÈ+XTÝj\u000fëì8·pÀ¥\u0007_C\u0001;7¯ÈûîÑî/Ò,üõÏ|pÉ8&ÅQZ»*\u001e.XYÜÎ\u001a(\u0016.7±ÄMÙØáË8Þ\u0014×ÄàÌõ²\u0005òª¬Êíæ|éZ}²C´\u0007\u0004Z\u0005Ôv\u000bÒ«ËÐC;õÕTK#»ìCw\u000e¿­Â\u001e/e¼ør\u000eB4³³¯¨\u000foÕ±3©^ÃÕ¨Ð!ÍËô ïï²x?¬.ó\u0006\u000bK@¾÷Å·ã½ÜÈº³§Mt¼úíF2\u0012/T=MY1-aÀÁF×ù= ç\u0005_o\u0005\u001b%\u0000A\u0017ÑÖç\u0012æó\u0006ÿ\b\u0003_\u0011\t¾ðuxÖ¨O4ªÐã8ò%ç@ò\u0016\u000fz$0k-ÒH¢bt)tüV\u0010Ñ2mÃ¦ü\u001f/x_\u0000;<þ\u0002ÓûAsvü¤\u0011kx\u001a7¬N5aÛ\u001d¢ØÞ¢FÓH\u0002z6^]òÊ(l\t¼ù_MÐÝÁ½Õ\u0005/#¡çy4ä\u0018Ä<\u0001¡BN¸\bé\"Quú)K>èZ~\u0013í|¤è8ëÍzÙýÛ\u000eÍùÿL¹èE\u0005ÈÚjmr= \u0005èÀ®ýB×æus~\u0007\u0007òåà¥£\u0000F­dcæz\u0014]¨äüC)q©y[VÖü\u0012ox\u0007à÷6\u001bÑW-4íü0ªßª«$D\u001bot;VÀ¶\u000e= $ü3dCç2eióW[\u0013)°ÂªÄaðï\u0004Ë_wÉá\u0017Ä§/Z,Ú@ð_L<,[P-wÉá=M\u0010ð\n¶\u0012f'\u001b.iÉ3ô>»ÙIT,ª¨=M¶\u0012_ð_4#'¯D ÙT}gFßË1t5îÄWogD×+39c\u001c,^»Q\u0016\u0001=M:Dçã\n0£è®ZñxR¬ò1w1\u0004.¢.Â= Ý~5eâ±Ô)R³ivÊK\u001cÿ\u0005Bal!§%%ö£\u0015Â|\u000f~?\u0006uèÎ\u0001\u0007Dýx­{\u0013N!ðiÒh°Ø¬CSx\u0013KVv¿QÀïMÁ\"3\u000e©®\u0011-üL¿\u0004èg#5\u000f-b,ìÀMÂ\u0002à{¤å\u0011\fØS\u0006âJI¯Ü£o\u001f¬^³z7RùÚ³\t\u0015EÍ\u001aô\u0015wàû¯HüHN¤44¬¶D 4¬÷MÛÙqp÷Ü­Â\u0012&\u0016jéÒÜ\tß\t\u0001= \b^= HæO\u000bNó]º(­å\u0015ý\u0015:ì &µÔh½\u000e/\u00167µÌ£<ÍõþI\u001fâ-¤þ)Ä!õÌP[Ãä¾«È\u00026~°ÒÐ\u0005ÝögGÎ\u0001\u001dh¤fùßIÝ¨\u0000\u0015ÖR\u001fq\u0002-Òâý)\u001b\u0006ýN¼&±G\u0007x!5­NGÄ(ÖÛ\u000eµWÜÔ'¶³,ó&U¶Ã$ò³=}\u0013ù\fæÀ5ó{Õ®Áðw#dJÌ¼\u001f÷Røwü\u0003é=}mç}^¦\nÂ= ¶Èª\u0004æº¨§eüÆ¦»¿BtþÞÍÏ\u001cK\u001c\u0014ýbÂ§zu\u0007©rþÙÛ\u001d\u001b-Äû\"\u001bMF\u000e¥m6vt0©ÉÒsMUcä4\u001ef\u001eðÆá²÷éT*Ýf®6ÞMW\u00043ñô\u0017\fY=MöÎ)Íø¿¸«hèIWÞ\u0007;\u0002gÈt·Í\u0019úèk£ Öi\u0002ÖüìÐî\tkkm/\u0001ß\u0019#1Ù%\u0006­÷¨çdFì\u000b\u0000\u0001XtýC\tÞ|ùÈVA4ÿ'9Õ%ÜËèþ\tmÜ¶\u0011&9Ì}ç¸«ÏU\u0011ÞþÍÉàâ\u0005V¼\u0017ql¯i:Ïwßô«Çª\u000bSâ\\\u001eaØYífF¯­¯\\ÃaU\u0018\u001fU-S\u000b'õ-\u0002§\nÆ³\u0002¤§êÌZ þ×¶:rg¸KÕ\u0012»2ô<\u0012¶\u0016.}3hêõÝC7.ä\"ôv?â¾PûU2ÙK\f\u0001ë\u001a,FÏ9\u0005ÎúÉü\\Â¥ä·£©±K÷éº«ô¹\u0000\tçöÄ\u0002ç0.D¼\u0005ÒEÿÓq°µß-Õù:Émî7àßÅà4ùÌùÏ¿\u0006Fç*^^Àèoï#Oß¤\t«Ã®ä3ø_¶§|Ô\u0002¢!vg'Så¯hÎ÷-úPy² ç5²YIæ»QÊxKá#P4\u0017êKÙ\u0012èyËw \u0005só*C@d*\u0012\u0002ªä¦#SåG\u000fÖðàïKÀø®Ç\u0012\u001f~\\¹Á\u0004HMzõ¨øL5ó\u001aÞÛ0Sô-÷\u0018\u000fãæL#UB¶N\u001a3àÌt®ETp¶\u0004Vt\b­!CfFJ!\"õ\u0018\u00117$ô\u0016\u0002üT OÙë~\u0011Ã¾\u0014ñ\u0010\u0017Sw&Æ|=M_¤´\tÏúLÌª\\§½\u0017&=MD|\u0012\b\u0002Å>\u0005wkÈJ\nz\u001aµJ(ZÄ¢A·øF¥J¿\u0005·l-'g\u0002\u0014ÖálÈ¡jAEúN¦<ÌÍ-ütµæù±J=Mæ³ãÏ[ä±Éº3ß\u0002«*÷\f\u0005¯zî\b±n#ý´8Î\t]\u001cþqP?CÚ\u0003þnn=M0åus\u0000x¤Û2þaóÑv½P\u0001Û\u001b\u001d^c«= MëÊ|¯¤1ÂW¼«õ9\n\u0002-å÷?¬\u001de±¿Ü­¤ÖGü-)\u0013ÄüdãnRP{õ!J[zí¤M8®z y(^mbpî%\u000f7\u000b¸\u0002úÜ\u0010j\u0002\u001dÉ\u0013[\u001f~ÆRä;&âx^¼^+tÀñk\f9¨¿w\u0016?#Æoä¨\u0002\u0004\u0013ä\"¤b¢j\bs\u001a\\\u0001Êx\u0014f\u0000\u001bøX\u0015'\u0011~S \u001bÀÍíq\u0014ó\u001eiX[P¿Ã½TagÅÈ­çSUíÏõÔNÎôKÐe«¦\u0006ZXh\u0010\u001d¸ãø3Éw\u001b\f\u0011¡X½ª[²¶*åm\u000bä\t!¯(M+©Åú¨Zú¨\u0011l\u0001çed\f½}±¯¶±÷¦!\"xB9ºBo§\u000epJÒ©¶\"¢:d­UÕö©Hä®å\u001fø¬É*ÞK{Hh\u001dSÎAUîô@Õ7<Ùt/gÃÈ²¦*öy«wô£îjÆ\nW\u0005Óbà:ÚÎbß§òñ[=}wÖ:¿\u0002©Ehã¤ºÉQ·9¶W6z×v\u0006uX/¹RÙ®D\u0016¹SÙçØÃÉ\u0005-rà©È!Z¯ù¿\u0005KÌCb= WÃîÝæ!þ\fÌR®U¼¹s¼å¯ùÝf¥(V@Äz¼Ã\u0007«<ÂõöÄHô@('>ã(ì[ZÍ#\u0000\u0004)0Í\u0015Ã­\u0011z¥\u000b|Ì\bFØ\u0000ËG\u0011®\u001e{+ÝÉÜ7eñ\t®=}\u0012\u001eúó!ò.ô\u0016kg>X<¾ã}Ã£ÄÃWõj\u0010%Gó@G|ð1ôEeî,¥*ü¾\u0007°É$x0Ë\u0013g±¼ò,Å·tÀ\u001bÄÔ$\u000f\u0012\u0016à4s¦;G\fL¥È³.@®};FéÛÑ*\u001d=}oè/j\u0004lð£Ìú¯Ëø=MÑy[Ú@'n?¬íH\u0006ðQ9O(nÄk%ò9O\u0001U)k½%Oÿ¸,åH°\u0007(\u0005¶D×Ú38Ù9}r¿\u001dåb±SOãÓ\u0018ô¿gdU\u0019³{Sà<0\u001e²\u0010Æ\u0010é\\oÈë·c0d´·r3ÈW¿Ò\u001c\b¿µXz\u0004= £i_9ë\u0002\u0007mwvGàöýÔ\b{ËÈ(Hèòn\u001f~æ\u000f*Ú4^|ùç*ëÏØ+ô´ÀµK+Ñ§Ë\u0001¾´À\u0001\tè\u0017ùÿì\u0019ÅÝ\u00155\n\u0010.wìhµ/\u000bnã'\u001f;¥Å¥\u0010\nÀYË\u0012³\u0018nc\u0001õÚK4ß\u0017uß}rtèó:-/Õ»Øsn½K¼E´iÇ\tÑÞ4¹0Ô³5I¨´¹*?³EV*p+p\u0005ÌNíxH]µVênão\u0017×\u0002T\u0001M8¡­ÐóxÐ<ú¶ê­\u001bù­ÔÎü\bªÝÜ¨\u000bn|llµI- ¼{¹\u0000«\u0017Dê:Ç\u001aÌ]5\\\u0011¹ÀI\u001c3(\u0014Ï\u001e¦®0\u0001\"i\u00064µÕ\u0011Ì\u0019ÌßU/èÓZÄºc¥¹EÓËÇ:KüXÆUû¶×«\u000e\u0005ÓVÉEQ\u0015°®ý³­½©4^·z&*²\u0006EÍ|=M¢ÙA:ÄÚ\u0011»\bS°(ÍçLªóª©iKoØjÁñò%/YÑè\u001fFu{ç\u001c³2Xl2Ã$\u0019\u0011Ã÷¢R³/ïË\tP¯¿X\u000fÞo\u0019\u001d´áª\u0011ÖÝf?ôàõdñy«\u0019ÛöS\u0018ã¬\u0005¦3n\u0005×ñ8¦(Q5ÿ½{\n¶\u0000\u0016\u0005\u0004m¡¹WÍ~óãÓ\u001b°Ík©\u0004'>Ò\u001b\u0010ýÁCØµ\u0005øq\u0012ó²ªòÐ_HÕ¢öóÇ|Ì®ñP°z}ZÔñÿSÄ\u0006À9á±y¡ÉA\u000e?4ÈÎ¼\bOIOÅðÍioBÅ&WlÃÌ:Ëx¯\u0010<ayaP3D°rá:\u000bo&p®½\u0014= \u001c¼còù¥þ!KQÎCÌK\u0005éü°e¬\u001fïäæ\u001b9²ä\u0015fÊ\t!\u001b¤´1©¿¿Æ;fjØeÙ¯<¬\u0007hqNÕýY×C´pÅ¡¹\u0012Î¡þ#'åc(y\u001cCÿG?l\u0019{F8q«è)&!^\u001f\u0006¡ðQZYÔPA*f'C\b~×Ð\u0014YvíòÞÛ\u0019øíÎ3ø'\u001dÚ\u0016tøúwyÀ\u001d\u0005úNãxy\u001aQ¸Ì%¤p\\ÃwíG]\u0005mHQñ´o:Ö9Õ\u0015\u0017Ì\u000bðÜøEXÙ|1qM¦@aÒ\u00044+È[Ûà\u001fÞ\u0002\u001f7\u001bËõà d×rXu\u0010X\u001d·mË0}¹é\\ù5EÑÓ3\u0011_7£·Ùç×ïÂ£0[cf\u0002\u001b¨Q\u001d\u0015Î¹°Ô´\u0017\u000e\tÎVJxÝn!\\ÿul¡N\u001d\u001a-â\u000bJÊmV\u0017g\u001d3¸7D#\\FÁxHµ÷áî=MnT\u0018~FV·L*E«Á-\u0015ÉáàÀ\u0019·n#Ât¬±\b½¦zÍQ\u0016Ül(E¥2K¿´7\u000eý&.·+%òMRîûyj-áùè:\u001b(Xò\u0017#µß±«=M@µß±l\u000e÷\u0010ó%j%´ 3Gíù\u001c{\u0004Ç\u00139ª+äz,¤{e£®à´Ze\u0014®+þèÿ$[ÔYT+þ[ø1f\nÝ2@5gÐiøÌÌÁÔÐ7\u000e\u0017;î\u001fK¿Úái©Ê_t8¶ÊïÈèÿ\u0005MçÑ\u0017ç%e¨Ä¬Ï«¤k äUæ\u00010²\u0010ßµ÷ßà8¬¹àËößyý7NÐmEèÜù7åÇFôo±FòHéì.\u0011ÏßU\u0014Îi»¦Ð3\u0014Kó\u00079÷VTr¾¶ý\u0011\u0001Õ!ü\f\u0001\u0015!ü\u000fWIMÁ×v\u0018\u001býH­¿åDÎ8]\u0013(IºÅ\t_¸òCYç±êG\u0000å\b\u0014$$\nØËÏJEµ~ ½9\u0003¿µ-©#då¼pïÛRñ_\bjE]¥.\u000b]bÁð\u0007\u001asPbYü\"Ðy\u0002Ê5Hmído·êÃ\u0019¼äÀÙKx¢\u001e*½\u001e1ëÍtuÔS<\u0019RTeÆÂ´wÅ½h|\u0005P;´\u00013íÓÁ\u0018¢e}Ï6Âlhh6O=Mj¬,AW¼x^\u000eyÑíÑÃytØ5\u001b\u0018.Õ³;MæGdï²¤§ð8ÎEi¤·Y\u0006\u0018ÂBR$À\u0000¼4¤\bÞ+U~ûrAÞÀo°Ã{§2ÞÃTA\u00163gØ¦\u000f6ÜÑ$Á1ö\tmBé¤\u000bg}<\u0005ðQ®\u001b«c;|þ×\u001a\"kÅ níá\u0002ÔM¹wG¡\\PmÊ7ÎÏm1ø2 s#s=}#¼ûõ\u0001'Sëaúð°Nh\u001d>ìªÑ­ã_\u0018¸rvupC¡)Æ]ã'[,³\t?= bÎ\\F\u0006\u0015ÃfìÔ,ày%àwS«_¦à\u000f+Èå²\u0014\u001b1VüVx[EÚA6÷ûF5\u0001¡R\n{ùd»ÎÚ·-¸R¸û ;&Ý±2,NÝ¯3Ð\u0002\u001d\u000f2)°Q\u001b\u000fÂT Û{Á¹:¿~êVjdÈjýËÜå1ÆmAsÕÊÛÁ&æéj=}²biß¬_Ô÷õzáÂL¦´»¯ú\u001b/´ù]±Ó¹(F¡\u0001ßu(±\u000f4&\u0005| ÔØ\u0011>j¢«Ï*9*±ê ÊÒ­é\u0011&&1üä³m\u001cc±a´FCU\"ü\u0018£òº¨±¢\u0004»©iÝ³ùþ\u0004\u0000©óÁ*\u0016©Èþ?\t\tÎ\u001f'Ã³+ðÀÏ:<õk\u0010#ÏPÖZ\u000bî\u0000â+»ÑêÉ»öïã\u00115xÖd/\u0015É)äÉñÂÅ+?¬\u0011ó\u000e¾~ªLÅÁwz\u000føü\u0013\bêcä©;9©¾\u000fXroÄ3\n$âQºhÛ\nÇ;=}c\u0010Õ¤æ ÔÓÂOÉe?ÃÎÍÜõ\u001aÉ\bkÃÂFÝPotÅª\bT1Lå¬ôN{[Ý³Tc :RÑ\u0018mÄ\bkº±V ´/R>¯hí=MNK\u0001'»54¦üw+wð2»çv(ÒêÐ°{\u0018\u0001\f½\u001a¡),÷EÓTeÖÓ\u001cs\u001buf;åÕ\b)ûó=Mûå¤ê¥>[\u0010Ç8%¯\u0005H\u0002ßÑ«ÌKÊWU9Ó\u0014ÅR÷ç\u0001c§/E¶ÀÄÆvÇ¤¹J\bYý\u0001N%½Ð\u0016{9:~®Øêù2öÖÕõ\u0001oë\u001dËÈ6ù]ìÔD÷w¶ô4\u001cIÙ\u0001ãR¸\u001a_.WÉsß\u0019\u001dø\bBTFÖn\u001c¼]@ÆQ= Ò\u0011îBRê#L\"úÛLµêÔù»ÿ\u0014­T*NÞÊìiB÷$\u001fà°¹,{9?%n)ç·\u0005äJ%:\nûÝ\u0016\u0011Æ0,?ìjV·Nç÷Û\u0019\u0014Å«IÁ\u0005²\u001cMÃ¥\u001a\u0006J\u001e±Jx%õ\u001f¶\u000eÃÚãÁ9KocÆ²\t3*4^\u001eOìÄÈ.\u0017\u0018òò\u0003\u0014ø\"cÄplh(SZ\u0015+ovß±h¹ó²d¬e´jÇv¸\u000f\u0014y= \t}\u0001=}\u000e<w¬]bU¬Ý1\u0001ÐLèì¬wê\u0006-02Ù»³C@DÚ=}M.Í»qÚJP\u001dà\u0007!­\u0019T­ÚF*\u001ex\u00108|¶kºI\u0019SÀBV~ü^;)\u0016í83=Mù-Ãy&a§÷_;à;A{D®Â\\\u0004\u0003z\b0,m4q¤ÁÏ\u0019ÿRVöY\u0016\u0005BF\bF\u0002\u001fd\u0017ýb\u0016VR*Gü$¨\f\u001d=MÉ\t¢ºqÀÆùLeÚô\u0016j±bGý_Ùúü >ìñ¯\u0005ë\u0004¯¹%+Å\u000fÓ\b@cK%%ë+bO°ö=}\u000eJZø\u0016íqNÇ81Ì|ç2Ý¸?çøAQXl%'öE>Äj¯ïùc÷1û \\Ú \u0016Ü9öàHû]Ñ7\u0000>ð³\u0002>óGf0Iõ8ïÎï73\u0007ÓD\u001d¡\u001aªìû]°ñmr'æþ[h7Ød\u000b\u0017QÏÜ.àh´T5 Ö\"Ý\tAòhÔÞNå=}ÄÞÎ2\n¢°ºõsh5.h¢H¤gNhÖøP\u0010Â\fs4§\fÀ\fÿÒKÕÄp%ÛÈ°'X\\\u0003X\u001f\u001bsùYÌAè±ËE^G¯))=}<ÚT»\u001b¬\u0018À+\u0001D.¬\u000b\u0014ðÜ¸ê.jSÂàb¿,´ïª\u0019HA¬Jc°Ú~öt|rè#H£ÝÏa¢Ù\u001d\u0003Vjh×åHz­ñ>Ú?^+\u000e*\u0007±=MüÿFRÍ·ÛTTÊ\u001c[¤ôFfæ´9Õë÷Cäs~w\u0018É?ÃµAãJMTÔßÐ\u0011äR4\n\u0019ð¢¿1jô<Ù\u0014\u0015ì\u00051Ûh\u0010&g©,ôRM©2V«ãlÙz  pÁ\u0005èï­\u0013Æ\u001f(} JÈÍ®>¦tkJÈ\"~ÌÊÿÈÒ\u000b\u00113* ª\"\u001cÁP_ö#\u000e¢7Ê<²4OêßÔT¦2·Ô³\u001cr[­¸\u000bUj\bf¥êÒCû:TÉã1\u000b4×Û\n\u001f*DÝgBMfo ¦|ie¡Ñð;ÆÙÃú^Ú]º\u001f³î ÊÅ\t Ý/\u0013ìè\\m²m^I­9l0¸øûíÉÞ\u0006O×æµ¢[½Dâ-N<+©}¨yL*ö?$=}GÜ\"x&ópê\bB\u001býÊ\u0016T?a\u0019Î§?\u0017,S\tåù^\u001ap'®èy(h\\5Q¾«\u0018)­¹\u0017»,\u001aô»7N\u0012ô«àè)J%\u001aKèíJ%\bóWiD¡ç\u0001\u0015= >æ=MÀ\n\u001b»Ä2jr6òÔ\u001c¶0Ç¤;¢i¦\u0006\u000b\u001d«bC·&i°÷èõRÃEÕuYL\u0005_¢>\u0014 Þ\"½¹8[ÉÇ¢LÝ#¨2:+\"Ax¢Í¶ÀÂ[vkwN¶­·,\u001a-%Ô /Éä©j<\u001fý\n=}È^äC|,p[?g=Miz]÷>YÚdÐsBÎ$G¡¤-\u001aTÓ\u0014i0p\u001d\u001bIjèY9c+±·2¨«D½w'Ð7Zd¼ÍÙèöùº?å½³+­D\b¦\\@z]Ýå\u0006âù»ÌåÂE=MLñ¾Á$\u001d!ýý\u000f4Ùzò=}­nJïl\u0006\u000738øi&b\u0000ç\\\u0013Äìg®x\u0010xóùs¯Î\u000b\u0017U\u0015^;Ý-Êm\u0017}½\u0018Î\u000bç\u0011r­\u0007¨0Û9\u0004³±_\u0017³>£¤\u0012NÈ~7)3ÉrcÀ<Q´wºhÙËþóÉb ö\\\u001aÛ?AihÜÀ#\u001d\u0018\u001fe\u0006¬,¶\u000b«ØÎ·9 Äå»e(y\u0018;ÝbD\u0002åzÁ*à=M)Cæ]½\u001cø\u0016&öðÀéé+¢\u0014ã\u001cÂçnO\u000f« nú/ê\u0004Bömd\u0004%aKõ/\u0000w\u001b¬§Þ½\u000b\u0006Z¿ÃK¿¼Íº·8n\u001b!%m¸ßâéÅÿ\u00016'õÁlHMú¾8ß±Dç3Zñ~{¸×'éR×tüº= èÒÚt\u001cº= {èÒÙtèºàEj½pa¿¢52\u001f<²Ç\"àaÚ?÷ê3A\u000e\u000euI½\u0017L©5­¶IÝõxüÒÔIØWn=}Z¨õÔ=MÖËtðcúRæt¸¶}GÈKÎaÝGH¬*4ºçbÔ5pö2¼2ÈÏéw°C5[èk¤Èòè¨Ó¹02G¨ØàQ­\u0001XÓ\u0004D0\u001cÔË\u0015ä:P=Mì\n¦ã'ÎÐ9¾OæÝ_n¶òËö8àßK¿\u0014[¿\u0014Sÿg\u0006= ß'jý\u001c»28\u0015¼2H\u0015¨2\u0014\\-êôQÔ\u001d\u001aå]û{\u0019)=M\u0000ûtJ\u000eQ\u0010õy=}Y­já\\Ï\u0010=M¾Ü\u0000¨\u00142<vò³«0ÞhÀ\u0011aú±\u0018\u0014*}[F\u0016Ýº\u000b\u0001r%Ò{Ü ª\u0014\u000e½z\u001dµúiMÿõsÝÇÙ \u0017Å@³^|£_[\u0015¢òyv\u001buo\u001a4êwo¶ª½âcü\bëuj¯\u0017°ÉÔÏ¿T§÷ØúÅ{t\u001bÇÑ¹Å4wlÑ\u0005sáû\u0003O»ÝÈZÓw)¶H{k>FoO¡õu&;f)\u0000\u0014²óíÂõä[Ü2JÈ\u0012­º(ËZ\u0017\b\u0017gãÒË\u001c'\u0000ø8\u0011dF\u0011U\u000f\u0011Ä\u0006¢o¦\u0017Ä(AÂÍnRâ_¯\u0012u3 b._rmµ:ÿkU\nÿUE¼´º£î´ÍùÀÅ¦hç¸rÍúj>3jW?Výß\u0007¶\u0010tÂøé¹äGùD3_\\]blÔ2Ùâ×Æ­Þ\n!÷[ãçÙm <L§µ\u001bé\b]ïî!;Ï\u001aÐ½A{¥¿Ey£Y:c¹wBÅ0Eÿ\"³ï\u0014Æ\"µÿâ£ºâZô¼mû*;q\tkræJøÉ\u001c\u0014\u0016×ä!CÜ}he¦\u0005\n\u000eVï\u0015^2Ý\u0001\u0006\"æ\u0014\u0010sä\u00044 ¸Ë\u0002å,ö!/¯Ú^\u0002m Ìâ'Æ#:»GP ÙÎîCïµË~ñ\b^æóvz^ÐÙìÃ­õþèöi®á7Â¯ÝIã±Q\u0005È#\bUúKo\u0005öÖ'ã¼8ÈÙ)ì\u0014÷å\u0003;Ï-JÊ\u000eDÅ;¹êàCò\u001dësÊY¦ æ%á¼-£íxo&v\u001dYKawd÷¥Â_g{\u0010= .Ô´\u0001Æn¶ô°Bx¼\u0005y½Ff-ºöbþ¯Ô=MÞl -V¿V(àA/ì\\ÃW­ \bt'SMÀÒõ.2åÅÃS»øºh\u000eFÉkäÇÖ\u0012®\u0005U_?[J©ÑÚÃï\u0011It\u0019?W{3í4¥A bÕÜõ8\u0012ý)DëÄÀ²ù)Â\u0001©æÌ<ÍL,o{°Ë6øß±c\u001d»K= {m\f¸Rµ­;§Íµþ\n\u0015ôã\u0012r\u0006Ìc÷¸±>zÝ¶¼\u0014æ§lÔ93éI°Â\u001bÐ\u001b\u0017ÿ1\tâË\u001bÝ\u0015õ= øëÑì¸C=MXJé¯·x:i½×à2´­\u0014ÕJíÍ\u0014 ¤ÃIt\u000e_¾ðÎk=}äLg÷ë\u0017\u0001µô/\u0000ÜZIq©©Âá×9Ktÿ\u0019ìl+B\u0002¾\u0006õå0¦\u0006\u0006\u0010»\u0007Ô\u001fOá=Mbë<]=}h\u0014G¡2=}´dj9dS «À\u0012\u0002i\u0000ijÜäÇÙ/ À}º¤ÎXõ­üdè\u00197«]áÄÇ\u001f\u0000#W= \u0014àGfa\u0014»¦»yæjÃ³\u000en=}:.26)8NµEv·\u0019>E¶6ÑzGÁ4p\u0006\u0014ÚÏ­$ö/[\u0014|w;í= Êe\u0014ø\u0004­Û\u000frù¢ÎdQ4\u001dàý\u0002¦ÛüCAñÿ\u001b\\=  øÐI\u000bêª!$~þ°\n4×8-¦JOôÕG{\u000eëÊ}¡¬D\u0002\u001e5{N\u0001\u001fEJ§þ\u0007Zí¼éôCæ£×\u0010ã\u001cå®=}¥×*\u0003½ÑS¬Cì3Ú¬qâað3ö/ÇU|¹Kô¦Ø\u0002º<Ûñ(4ôï¼ñÐ»v\u00118¬p\u001dt¡Ç\u0011m¬f¦\u000eð%Eõ-÷Ë(õ9Ì\bÌ³oõ)ßH-õ\u0007Ì¨¥\u0018¼mSâNwöªð^\fãíQFq\u00001]§w°ôJ<¿\\×·å-Wu6\u001dë]R-äú%I¦ø\u0011\u0012Øºý»3\t®¦µn¯wÄ,·Ç¨w!M\u001daÃ\u0006« A\t­\u0007tØ\u001d*á= W©Ûx-¹\"¬SË­½XZJUz]\u0011s>H²ÜNU­Õ\u0011\f\u00001igv[Ñ8ªGCUÎÞ¦nõ\u001aûLÞË\u0016<­TI2åÂüFz/Ï¸A£q_ N=Mðõ/Ù2¶@õ=}æAw\u001bs\u0004GÎùÂ\u0014\bb\u001e¡Í\u0003à\u001e÷åacp£7+R\fYÊ(5#>¼±ÑÆ;K\u0016·n\u0004ê'(§YMÍø÷\bÍ®\u0007(öóPDw\u0007Éè1¶5yê4É,<óÓ^êYçLÑ\\\bæ\b_æ\b'TqìÄæ\u0001×èëk!Ë\u0018pô3)ÿ¦ûº½yøî)1ÌÀjûRi¼ïnòæv\u001cZ-ÔÞ,zmÀ,´kØHW¡ 9C\u000bÃDØ\u0013\u0018ãö4ØY\u0017ÝL­*¶â\u0012\\vK\u000blHÿ²øMWþ¾\u0015xÜY8PT¿éEÝC\u0007r>g\u0002¦-ß°«ëf¬e¬Ö³ÿGÌS_\u0011£Ïà~¦zSèÛzS¿\u0015}¸Yõ©í£é\u0017\\MOô®®\u00143ÁÙp»3²§\"B°G!+æ¼o=MâÐPyQË<\u00069=Mõ»ìT)è\u0000õ³[\u0000¡lEüã^\u0007Èÿ\u0019d\u0016jù\u0007ù¯£ÿÆ\\Ç».[¿£\u0018YmÃ\u0000¼éýó|\u0017zçp­Ýóå½\u0006m·J5ïÉÁM -÷Æ8-\u0017ñ\u0011S\u0018µ¾¦Rl%¨½\u001bMEa²5\\÷\u001b­«ºÄGw®ÅõÀs%~ÃH¿\u0002¸l\u001b&k÷<n=MLHÁx\u0006Ó\u0019F\u001d0Ø\u0001\u0014÷Òç\u0003¿EºÓ~\\[tN§È\u0006p¬Î'À­ÉÅâ{g¬\u001aÊéê-çÒ%\u001e,#è­y]6¹Ñö[º«ÿÙÂQR\u0013¨ÑB²:Î@Ì&°¸V×ÂOóSöÅÍ<²ÙùS\n.W\bá{5%\u0010*&PË{r+o\ná{=}% G+0&PÎ{2-\fá{ä¨þÅ_=}²\u0019ûd¡=}kb&4% È´DpªN·ùß á{ô¨^´âzqªÍ¥g¬³\u001aõ¨.íF­-¤!\u0015í\f$j4ññÅ´³\u001c-ëÏ\u001089¨©oÃ¼¦î\u001e³ô<49¬ÚK¿y\tGU¯&ÕÜ-)¯\t©ëÊá=}ÿ®³ÌãÙºÃô#\u001fÑãI£hÿ#a¥Ïp¨k¸\u0003\u0010Ñcó¤±q¨ËM«£W²Ãõ#ÔßLäÿxø\u0003ÂâW²_ø>¥ÿÞºÃõ#Jr¨ë·l\u0016¤Õ¨\u001bÿ#a¥ß\tÑãQ£2;®Ó÷#@®N\u000b8Íã\u001d!@õM ½Dî\u0018/!À!\u0010ÿÚªúA¢yøð\"b\u0017\u0018v PúÚ~\u001b\u0018V ,N>\"\t\u000eR\u0011Y\"xpòa]|¡ú?Æ<d\u0018Y\"{ãÓ\u000bæÓ\u000bEÙ#YYÓÓÆ=}¯í\bn7úÍ\u0006\bÖm\u0017)ðþ]ÇÅÖ\nJgÆÀ¨ZøoòòLí¾×)pþÛë×b\u000eÖ\t à\u0006E¨®=}\u0012ÿ¬\tÑ7\fDI\u0002¾\u001bû·b\u0018¬Áª8÷ðð¬øsï§Ã3ê\tÿ\u0007ÐÃ¸þ¬Yß=M9J~Û\u0015P\u0006Þ\u0018¹$B¸= \u001c\"JÔß\u0017ÝU[ÜÖ~5Þ.\u0006FäN\u0012«®Àã\\\"\u0010ð©YØ\u0005Mç\\ïÀ¶yF\u0019Út+Ø\u0010Æ\nÓ±mÐä'bÿç¤©À£Ò<:ò\b¡ó×h\u0001\u0006\u0016\u001e¿\u001c\\¼Úà@ÄXþ ÂÑ\u0013ðTÒPåqï·;µ\u0014y\n×\"\u001aá¢ú\u0001bRê\u001b\u0002²\\È\bÖ¬\u001cÒÑð¨>.laé¸pá6\u001cÿ\u0005\u0015c¤Ïßnr\u0004q«=}{½[â\u0013ØÔíºñ\u0016OlÇ!1\u001dèõ(ó«\"¯l&N{h\u001aÜ7faç\u0017z4Î£ï¾âºï-ÔñaÎ qcÞæ°\u0014U]Ëg¢_QáÎ¾.¿\u0002\tï]÷ð\u0011r:\u001dz÷ÀÃcÒa.\u001e '¬-3Ë/yçBw¿ºò0jí¿'áÞã9ßÕK¸\u0013Í|6 v\u0002ùâ2wä4PFay»¨ô¼Dy½·;=}ý®>ý\u0006E¨E±\u0004\u0000Pzö#èå<¿,Î©\u0010ªÔ@yçù´!ô ]  ð\u001bÞ¡íß\u0000Â2cµËt \u0019q¾¶AHûýM&¹\u001dPeã\u0010ª¬1ÃÌã»Ä\u0018!\u0015XOu^\u0004\u0016åãJ8è2¥K8Ke]ëFw}ü\u001a\u001e\u001a.Z\u0003]µ?Sù\u0002\u0003à¬\u0011>ùyÎþñsºëí¿ùÓ[ûí>ÐUh\u001anÔB\u0001äpR*\u000eÅ¾@hÓÒ@7À\u0010c¦)\u0011\b-ªI«8\u0015Ów|íà&M¢ì\u0018·Mú7NFúÛ$7ÓÇ\u001d2Áú&®ÿ´\u001d¸§ÑÒ³Ô\u0010à\u000ea.1\u001bên\u00193\u0001B6Kå= \u000eâ\u0006k4NèD÷¸Ò\u0003[AgØÉ\u0007^\\M¿«DÍ_8ýÂMf\u0018T>¸bÓÃ'ê[Ôõ\u0018Lu^[3©N]\u001bvòý(7UHe3¤Ö\u0007(sQf+\u0012s÷\u0011²ÅR×ßÝïë\\Rµiµ²Ú¯Ýñ\u0006rípuÜCë&ctJ+=}.H)\u001b¾\u000e¡â\bï\u0012þXTGíä\u0018¿wc´MÌK\u001d\u0001;Î\u0016ÍFÂ+YHÏQÁ\u0007¢²ø¿Q\u000bR¶JNøäÆX;¬\fsq\u0007K\u001b^ ø>\u001dãcy\u0000-(DsbÜx:ÊÚ($E\u0015ê\u0011Å3\u0018Vz0¾õQYÁwj:^\u0006vf\u00059:î5\u0016\\Kà\u001cã\\û[\u0014\u001e\u0005¬È¼ÚÎÿ!÷P~_Þ~\füw©ó®KÀÿþÙG´¥æàªsä6³eÃnÌçn(\fQÛ+\u0006Ñû {6ËÖj1.[mtp@ÿ=}\u000f'D2Le¿G\u0006_×w¹°cw°KC\u0001ThBÍµ8×Ü\b#u_UnIô\u0016ðÒ¦â±çj\u0004±Æñôõ\f÷\f½ZI3K4Åçtµý7:<Õ\u001d¼Rø\u000b\\·»Z'ÐFÓúÉoØEqWÄ¶XóÉ:Pû\u001f¾¬aGP­Z[Bá3fCÍd÷=}\u00178\\úà-\u0011IÀòÌ\u000eW-÷\u0007aJh\t\u000e¡=M®[gf1XÄÞ3¹D\u0010©!;÷ï¾-ÃÕ\u001aÓ½DµOx}{¡ðÛ\u00157úcùH;|ç¤Lz£ÿÞiË 8¶ã4ó%¹ª,ØL}.\u001d9é\u0011'Ë\u0004ë= \tò¸©#¼d \tkêDØÎpm\u0006\u0005U>N\u000fÑï\tæ¦à¹c/\u000eÈ\u00047èa¹Tß>µÛè¢\bþ·ÈÚ\u0010ïi8æsÂp\tÄñ½\u000ekçßú;Jó°\u0017A¨ùf\u0003-ÜoÛË=}¾û£K2¶ñ$ed¹*÷¬\u0018\u0012\u001f>yIeÕúûTôî.E¥^,¤~Ã\u001cè«q¢$ÇçGdÆøb·ï@Q³¼\u001d\u0013I\n¬ó)\u000fêç\"º\f\u0007rþÓÙA\u001fèÒû§àüZm??(£ÓæIá¸Ú\u0006KÚ\u001a^\u0007ÌË\t\u000bJñKõÌ\u0005)å: ,\u0017Ô'LÿúÜHhÊ\u00048R\u001a»kXä?W<NäÂY\u0013åÆ±Pý\u0003¾¯áX<:Ýå=Ms©ññQi²w·÷Ïù(æN,>%\u0002x|ë ²±wëEaé)\"óPõx@\báÝYn\u0013zÃþÓ= \u0015Ô\\¥\u0002LuM\"·*Ä x\u0017\u0007)Üõ\u0001\u0002È éP]Á&Fu\nyô\u0006\u001d¬©kwë¯Á\u001b_%ÂÔ+\u001e'ãOúùç¶¡ãÑú?¿ã{*ßXÞÜ+ò\u001b@©k7ÌØ\u000bl7°À4\nùÂÛ¬\u0001)¯\"\u0004x}W±~°~EuûÑîVQ\u000bB*é\u0019L=}Æ¿_V/3\u0016÷Üà2e\u0013égÝ<&\u001dÛÌ\u0002i&Òª\u000e©òµi\u0012Ä\bËÁÒ ó¿iÜÝvüªkÊhFM«FÃW~óSRZ$ªq¾tò>0ã)¦k\u0013\u000e»|ÃÓ$NÍìsÒcÙÓã_\u0004Æò\u001bÆ*f>äÚÝÍ+5ð\u0004$²\u000fu+)°Ó«æ\u0002Ñæßè±.¤÷fÖ¹Ó+¬[\fÂÎ/uk<A¶~\\·gCïÎ©(/Ç¿\u000bX\u0007O\u0005k\u0010«¡ö9'\u0004«³w´Müßjcü\u001dóÁK÷@7ÿô\u0003iI;ªôö\bi Z¦Ô<)Ôaõ\u0015C»2Á]Êÿ\u0010\u0013 Ó8Øêdõ¾£\u00158a\u0019£\b\u0007½\u0019xï.èÌ¼ió\f\u0007êè4;ÂmïÓ×ñ£ ãÊMÿ\u000fô¹_ÿ&À}hMswI1«?áeNo*Ü²ô(\u001bù\"/f\u0018TXä\u000e?¯Z­Ï&ï÷¬¿\u0007º÷Ý= m1iR\u0014¢»z<\u0014k×*O×ÃçÑ\\\u0007þ1?A{\u0010EÔS{Û\u000fwg\u0018\\[b=}yb5UÒ\u0015p¹Ýc¤QJh= ^YÙ½\u0010\u0006sZ\u001fÐ\u001c\nð(tÍß= ×:ä\u0001\u00188)¶Å¤6{§:ÞPðíSatt;>÷©\u000e8m¤ºoÖcàA{v\u0003)4c\u0017±^´?Úûâ×gC&\u0017®7Ù= ³}Rh;«Y¬To\u0003^Ôr6=}ó3ÍVÞb\u0010\u0016s,\u001f\f3ªJ[·òó\u001bµh\u0016\u001f³t5UøXÿÏ\u0002Ï×¦Å\u0013$\u0014.ð?\u001f¯õ\u0011\u001fì\\áÂÍSl~WpÁ Ô¯\u0016\u001bPè¢½d]ï*OÂÚ8Ç©\u000eÖö\u0006S§Òérï<ÿî)ÃC7â\u0004§BjD^C¥HÆJîêÍ*?{¢Æ\u0005>Eû{Fë\fWÁZ\u0004Ö?¥±º\\K+¯0â\u0018HdzÿØr§#*À¥YùàÑöD\u001e)¥eE'ÚÇ¿u®ïM¸|\u0015~¨\u0002×_%\u0010Ó¥Ô¦;ÐØd÷öëÍ×þJ\u001d\u0019£÷w4¯Z(\u0010ýÉÛz\u001d±ÄÁô,é|É=M&À|Ù\u0019\u0000\u0005³£Rª¤cä\u0006\u0018è\u0000hMb\u001cÿ.)¶\u0004£Ýý|.¬+©¤Jª²\u0014ã|j\u0018+¤o\u0001¤D\u0018KËF¸8ÌÂî¬>póUØ´I÷µ\u001f\u0016\u0004àW§´HÀ%ßåÁ´£wßR$íÑªHÈ=MYv[\u0017±×ÿ¬\u001c\u0011ó\u001ffÓÓ¡ø5öñRj{O¥bt³\u0000ó«\nø&®%M«« ðãv\u0011MU@¿¶m1\u0013ò³Y¬ÆÇ¯AË;ð»\u0018¬¨\u001f¥BòÓÚÂ÷¢2\u000bdã\u0012\u0001ÌùÌËùØÉiñD\u0016DÄ©¢4¦\u0015x:é¶ùÜºNW.s\u0006-êOÞBá\u0005aÊKB>\\ÂÁ\b\fs±\u0014u¾=}C:'ô?¼>¡z\u0016¢¢r¢ò¢z\u0016â\u001bê\u0003%ã¡C\u001csá\u0003Â«Ò¿:$Ó\bm }ûÁÏ¯e´­ s&yÃÝ£;\u0005fbª°Æ\u001fc\u0012f®.Eâ.¢r5âì2}\u000f¼iæÆ\"3cìÏÊ\u000båc£m%Í³\tÂ¯Â\u001b#\fæ§ëh¤¡¹èj::g\"9 B ìÒ¬eÃ\b[!\u00036\u0014â2¥n«\u001eô½¨\u0004AIO»\u001aº-¢nåÜ#ÚUè¤/Ei\u0019!\u000ew\u000e~Y\u0010~Y\u0010~Y\u0010ÎM¸ñuÇ\bz¢}ÛëÝ|¾÷ºÇÓ£fgd¦³B\u001fNÚg%Ás¼\u0000ª¸o\bMbYÍäât\u0003Û%ôöO¼fh\tf¢Ï\u001c5OÑo(hË©=M\u0004³\u000b-ú2\fw+Â4e\u001b·$Pã\u001e»@\u001béÍ÷Ó·ºßHôßGf\u001e\u0017µð(NË\u000b°3·LK¾ \u0012ßÚæú¾C¨­o¶\u0005óà±s ÛÆ=M*ú\txàæ¨YÑwÆ¥?K»Ü³±½+°ÈÞ])ÙD\u0016K½g\u0003\u0006r§*]íä¨¾ê¯\u001cË¤á\u0013åBêFå\u0007äIóñã­¯'F%Ï\u000f¹\u0019­\u001e%ä¨Z\u000b\u0003»á\u0007mÇ*¢ïO¤bËà\u0014×&Ç\u001bDÖ\nþçÎ*\u001d@èn+ì\bO±^sî\u0005!|É>s¶\u0005(àá\u0006¾=}î\u0016AQ\u0017«ôg¾\u001aK\u000e\u000b£ar^øÁÀfÒ)äçÓ?±Ò¯¢½!â\u000bu¡_Ri= i¡iËòfýæ æL!Vá\u0000¢øÚ\u0001jvwÉ\fÒ=MuØÚx<nMíM= íT\u0015YÅ\u0002ý!ùÉ909á8»È¶h2èítã\f$2\u0002:bÓÌ2j\u000eq\u0000q\u001coi||OLw\u001cU3+Å]T£ó®0±Á±\t7ïbî n&a\u0017\u0007\b=}G\u001d\t]]ÛQq@1å\u001e] \b<H×X\u0017 ,= [\u0010Å\u0018tå\u001eä%pÂØo\u001e?~Õ\u0016qc¿}Y}9\u0003\u001e\u000fÀ\u00118ý\u0012þiý\u0005Ïbp^p p¬\t}{W~×xwx7\u0010íÓÌðß¶\u0011¥v(¤sÇØ|KVÃg6æ\u000e\n1~TìùG«8+¦±*ÊÚq¿Y\u001d/f\u0019\u0010~W\u0011ýX7[ë&ýÑ\u0016Ì¿ÑT¤)u~óªlõVÌJ\u001f E#-5×åÏ;@H\u0006Ô'BOr,(\u0014$ëKãC/úôï\u0000@b?úÞü%\u0004¿¯\u0006\u001c=}z]\u000eZ\u0017\u0016¥çÒÀF0rÃ\u001fÛW­7Ì!\u0019¥úî\u0013n&mìe:G¨ê\u0007æÿ¸O\u0000ÌËÅ3å?z\bhöAGQÇ¹oOj\u0005s\tL;úy~¨¡£¹lÌ¼ÿl¸\u0015î§qÐ{Wwö\f\u000bÄê½úè¨iÀ-eËrÇHrR=}É«\u0002Âàì.ý\bÝ³Ü¶\n+[1ßÿ3Ç«úÓL8³-\u001158z\u0018ml\u0019øP\u0015\u000bä7ô7AáÏC\u000f·6I¾+¼¯ö\u000e¢\u0017HïÊ~ô\u0004§¾ª\"\u000fþªÿ6ìv³m6JÇ$s4Ågéô¯uÏ×L-\u0000g\u0001\u0016¤d\u0001cÑ= |ÎxÍÃªõ÷ÏT¥*¸ôg6É­E7Ê\u0015õp)_ °Þrqo\"\tzX4.´$3Ð\u0013§Ó\u0011Whw¨¾\u0005q¸b0\nÛ* l(r>¨9ÁîYÈ\u0001]²}ã^\tzLNr½°P= 9\u0011.bóÿ|o}r°,mËQ0\n\u0003Y\u0017t?2¥ :\u0000Ê\u0015ÁazØ¸p¬}8?þN1T0\u001ekaV\u001cðÉ¶\nQ| ×>¨©6_úÛ9\u0000õ\n\u000bÕ\u0016ð{,Î\bØ©Æ@_:\u0010à9øK\u0006\u0011^\t,_2}iEî\u001aÁr\u001cC\u000e=MT=Mì+Dâu\u0011y1[hr=}\u0017é\u001bª)Þ6þù\u0006Ûu\u0010dq7:péNÙçIº_\u0010yÙ\u0000ZØÝPü@\\xW|ÎYH\u0002N\u0000r{\u0004paGnÚ\u0011Õ}\fìûrý\u0018/Ê]©\u000fá\u001d\\F4OC{Úm\"\u0007ß\u0004i] lèòÞéýñ\u0002TÞ= \u0018VT 9'Wøb>ïý» Ù\u0011hF\u000f¹©*\bÿ\u001e¡jß-\u0003Å]«5Öã$î\f6îÜQÓ}å¯vìÙê«×\u000f®µ\u000bè?Îµn{ÑB[ã÷&\u0000©Êº\u0017î*¬GÃsÉÖÕ=M±* Ûxgþ}.iôAÍ\tA§Ã³\u00020:òïÈJ5\u001b¹A\u0010ë'sú\fúñátn,õç­ª\u001e5\\k\u00076Ê,=M+É¥N®'àÄks\u0006m£ÊQ°Ú-v«µ1Þ£\u0014³\u0014.ñHöì¶»û²³¦Óá*\u001bç¢é:5àÔcøðß(´\u001ee<mEëc²´ñe{öc:íJ ë\u0010U(+È£Ús­czìº¦\u0001\b\u0011-ß_\n\u0017©*$R\u0015+ ¾3jµÚ;Z×lÜï©5-ãÑ\u0016+øo\u000eÆÈF©+½mÖF<Ôgäu<%/c\u000eÑJ@ög= k?z³6KéèøÕ£Þ¼gH-l³\u0005±ç]®+Ù\u0016 [\u0010½zcÓCÏúwÆA±\u0003çóê\u0002m:µ¥9JçÛäå¯¶MAw'\u0003o#;ÄC½3øÛSÎj2ß¯w®\\êäN¸<­¤p§» ë\u0000H\u001eÃ\u0011Ñ'\u000e·M²Ù»¦qY0\u000f&xv)]Ðé\u0015µØ\u0005,õÕ>ía$ø=MÆºv|z'\u001d¦¸ü­\u0005,\u001azòê\u0011ûÀÓ\"qO\fö?@É}}û1¾Þý\u000b\u0011­ªÍl\tÄZY=}-*è(\"Þ6S\">\u0007|ßBL6OÏé\u000b®W\u000bí°ëÝ\u001fÝï=MÀvòüÎ\u0001U¿\\ú¼õPÏá%YqæË×º=}æþÈ?\u0007aæüÇ×\u001a²ÿË\u0014Çó\u0011o= ÞÂµ\u0006\u001d\u0016G*%È\u0005òrXõ\f\u0011*\u001e\u0015^Nî­íbÆð\u0014ÞàÈÄIq@o=}_æâ4\t!\u000bOð\u001d\"!\u0010ñ4'?G]æ<\u0018ÒáÇ4Á}ÄP6É,h\u0014\u0005,\\JJ{ÖJEDÙíýåS\u001a\tò\u0001Dg}]æDdñÑþ¨Õ¿½KX»¹MIKÍ'AÕÂµ®¦Z¶­îõðÏ\u001f\u0012mþ\u0006E-\u0010}ú0u\u0003d¶\u0015§xlk\u000b¶\u0015}úùÎ'U¨©á°û[\n\u0014¬ZªO?ä\u001baj\u0019\u0015·«|>?\u0000%m \u001eÀàh\u001c\u0015G\u000f +0w$ÔLÍí¹å\t+ç}hÏþ±åþë'\u0007×åY¯å\u0016$\bc\u0011ÿ'1¦\u000e0\u0019­³+á\u0018\u001d\fø\u0006º\u0006Óqt\u000ed}Ðª2An^úôq&V\u0015}ÄªµõQëÎ>\bG1óÝ\nxI¦êqâK\u000fswÁ\bÚ\b5s= \u0014\nÖ÷ÙlëA<\u001cNZçÁàB¢\b ÞDÖmq q}Pª5u\u0016\u00117_LH\u001c1QV¦Ú'èBaÅPK\u000e®o'ñ\u00169\u0010«îën^Ua&½\u0004Ø\u001ci5^r\t¸:¢JÝ\"LÖ:*ðoô ÖÈÓT\u0019©&Ìâ ô<¹»2\u001aüÏ¸\u0016Ýyv²\u0010=}\u001d¹@\tÐ²|¾ª\u001b\u0002!=M}{^qÿµ]àÉÜ¡N©¼*\u0012ßyl\n\u0014ó\u001b\u0005ý&m2À\u001f$sy|â\u0013 ûo|ÎuºXWIT&r_8dªµq\u0007\u001dsd¾Ôd\bq=}4êv\u0016-nM½Þ¬Q,0n8>²Á^óû]Tîv\u0007En?DÔÊÑ¹ß\u001fü¢(Î³}ï\u0002Y\u0004\u001aõ}øì\u000e<}ï\u0002¹]ÚÌÐn)\u0019évwm\u001eäsYÖ3\" *IQ(|ÎÙâ7A\u001e¢ø6/<.IÒûZàÇOj>IÑ)âqf\u0012tMp´,\nÒ!xJIdKìQÖ:îe\u00061\u0002Ï\u001fQø\u0003Ýt $\u001b\nLb¸\u001eù ¢\f<ñÿ¿Wãu<nzÓáa'\f¡îæedC«l\u001bÝ¹E\f!.y\u000f­2ßõGYf2^4\u0002\u0017­\u000bÆ\båÀJ¼Ý&5¤8\u0004eÖ¦±Ì¶C\u000f\u0015ÑR#:èhv\u0017»È&´´ÿ¦\u001b÷Ûál0w \tâ\u0000é<u¸Óæ¾GböÌóó³é \u0006?\u0004\u000b\u001fÏ)\u001b\f7eR\frâï95¼³¸pEÍ¡ª®\\¸wÓá\nM*7¤ùSLFÏM6ÑGåXr­}ÜÇ'\u0014©Ç]WÐ6èf Ã¿#ÉwùUéCPDR<d<êXåÁ\u000e&\u0007Ô,V¦àû-\u000b\u0002k\u0002N¥Ò\u0015«âÁÅ<å1a-¯Ö£*»Ó\u0005_\f\nM+þg= í>%°ye\u001b»\u001biaT= ;å \fÿXÓ+2àÕ×1àï}G½òiÖ\tÖ]\u0013,7dÿ´°\u001dãº«Ü;ãié}É%÷ý0Z8üærF¥;= ¯aõYå±C(]Ôí\u0011Àw\u0017Fµ\u0002¾\u000b#*´#è°wb8M\u0004Qu[¡´3lß[MÓ\u0004·öl=M!Ø½QV\u001bK?ÐfI|sn\u0013\u001f+5°¡\b3\u0010²aCE\u0003\u000fCóè¼Î\u0003JJ\fl&{Ã\u0004ù\u0007P½ÁpEgãüãÕkÛoiÖÖ·W´_i@W#dø{\u0004ÿ»À³ëÕKÂQa\u0015êË!Í\u0018#MAws=Mwÿæ\u0012\bÍpFáå¯/·¶Qd\u0004uAB²¸\t6Çé)\u0006\u0006²{¥\u001e«ZÓHâ4¢ÖmÓÅª\u0010\näØ´o÷\u00156¼¤\u0006¥\u001eÑ<<°Øo#Î_·¢\u0001ªQ«AÆi¯\u0000»¨¡¸¨VÄåÞÿ~ü³TÎ%\u001a\u0013°$ÃÎsèóq\u0003,t8ôdï°\u0006/ú­zùüb­S;ª#¾\u0007ös$¹\u000e7ë±mË¿¢Û\u0000ª7o\u0011(êüÏßlWl¬\u0007n\u001a\u0011ºAòî0²a\u0018vi\u0018\u000eúp?ÇUXTÕÖØuÅ|ë¢2\u001arn\u0012\u0000la??W\u0012öu|¡\u0001qÙÝ7]=}Í¾¸Aaû\u0017àbÃýäPÊÈZß\u0000ßI¯û½93\u001ft\u0017!~5Íô\u0004,È\u0013:®pú\n)A:¹î²ìßQêÏVMæêÁHëv&ú¨\nîÇ5»¹%iF\\¾\n*í²¨ ókDw= äåG\u000bÏ~oÖ!\u0012\u001b\u001b3zýrC\u0000\u0004\u0004µBX\u0014¬íà·ú8 &\u0006^æpÉ=}&\"ð8Z\u0002±8ÉQ2þ¾Â\u001fî\u001fÞÒñ\u0004Á9Ð·eÐÀª= \\\\êo^A*åæ¦È] \u001eµf%\u0005YhÊQr®´<\naâ\u0015ï=}_ÞKg\u001fÛ!xi¼\u001dÒÇíÙH(¨¡³¡¦õäåD*Jhï,û+÷é\u0001ìÍ3+ºMK+æ\u001a(®ÂÆ\u001bÞ\u0017vmZæv\u0004D¢0VMå¡lîÄ\"]VóæÔÅ^^+N³]QÒÖô¦Rzg¥»$bØF\u0011V\u0015\u001c)=M=}¿Z\u0002È_­D\u001d$a\u0012Þ¹q2\u0017 ² fVO¿HÃ\u001fîT=}\u0015«NEàçÁD\b+{\u000bb\u0002ÑêmÉé\u000f×¹»6½¥4+¥<ã¿G¤ ÕhÞ%2ÇFûøÿ'Mc}«\u0018³UhO.ó§\u0013¸Ó\u0011ðþO\u001cÛjD15»\u0012àøÇÂ\u000bìBéLÃ2~÷ÚN~­Â4\u000b.4IiÆ/¯°\u0017\u0018\u0010Kl\u0014¼=}ÅÜ'©\u000fËß\u0000|9b\u001bù\u0006ýîiÂ^}\u0017b¿;g1Fµ§\u0005¦,¯Ö2Ô<= \"\u001f¡h\n2®ò\u0014\u0015\u0017»R.\u000bÃÚ÷\u0014¹ ö¡ð´Wßà'­#\u001aD«Úß,¡ã\u0002¾í\u0011åÕ\u0007©âÎJÅþ\u00079º#íã\u0002<ÉTæx\u001c´¤ùKL\u0005g=MÚS»nz\u0003¦MdaY\u001aZqé}WÙc\u001agT\t©¥Áæ ¶~Mú¸òî\u0012¿°AÔ\f74Ù:÷úhL~õ\u0002ü0r\u0012\u0002ìì}Z\u001cÜÑñÅÔ¹IéÝý\u001fÑðµ-l.u6ezïZÕÇôù\f¶Ïc¤ê¸\u0010\u0018è[ZÖw þ0AOZt 4îÞ¹ïTÕvªæ±/Tøóz= Àöé¢xI.ï§¯ìËê\u001db÷îÖÅ%¹\u001b{þ1×wt\u0007ë×wø\t{Oé\u001fõ\u0006{éá{~ø¢ËÆßc\u001c7Á²\n¨Æ àÀ0¸ÚõP@Ûyû**Ú\u0002:åIþ1sEÜÛÈkÿç\f¡\u001dï/\u0014ÿwû\u001d\u0013+»Ð\"ÛL\u0007ù§\u001d\u0012,açCÞa·¡áeõ¦ \u0012q@\u000eC)~B¿\u0013s\u0005FaqBÒoZLDay-?+h©\u000bC&©BTýM\u000b\u000ev+HqI¯¾°W= ^ =MFBXÁ¬s\u00070òãÖ\u001cÇ\u0002ÀC\u001aZa= \u001c\u0015vo©W½q\u001e\næ\u001c\tgL¹ý§þ4|¢ \u0001ø\u001f\u00156bP´ºÒÕøãº,\u0001.ó\u001eGÙÉÈô\u0012\u0018GHÝ\u000eÔsë¸Z8è\\\u000bNEazºzðs\u0007Æ\\Où_\u0014·®íså×\u0010ÿTYú\\´.ç\u001d½Ã\u0018yà= d\u001e/¹iÖX¼C\u0016Õ\u0004÷zZyÚÛ§¦íø$QFQ\u0015g­:ô¥¨]DaâþÍR@{ßjq'J±\u0011\"¯ÎsøÛCr4\u001d~Àâµ µÜñ°°\u001fm\u0002Gré&U\n4ñß¸×{\u00006\\\u0015×lå&ýÁg»\f#wvý\u0014\u0004= 6Á© î0{#¬¥Ø¿\u000eæ|(@F\u000b¸ \u0016¸ þ\u0000åè´\u0001ù¢ï\u0017Ä\u0002 \u0016c\u000boK°B\u000bàBN\u0014P\u0017ìø/Qg¤sèD\n6ô\u000e7ÄOOâ0\u001dêüL\u0006\u0017$»B¸tñÿ¸ûR)ÎÎÐ«¹\u000fXòHô\u001d»é\"zr:y|÷TX\u0011/4·þôCâ\u0001?\u0002ORcÖz:Ú\u0005¹ý®×7½nÒ\u000fµ)t°åÐ.µùÛ½ô$Q)UÞ ÐX÷|»\u0000.Æhöô\u0013X0ÏOÀ\nÐ°±2*\u0019EÁV)ÉñBØ\"h]Ê79aLséá\u0006\u0019mÍQ1<H@*\u001f\biÐ~fa~\u001ep\u0000_í%)¾.hõ\u0004V|\"\ngI\u001cY\u0019ö\u0000î!\u001dý\u0018ãqõ=}T8= ­ÓÁvó!NÍ\u0018m\u0014ØH°òLÊ7YWu1õqÍÜm\\/\u0015ÁL¡i<\u0017\u001e\bÒBÂXi}îDN\u001aÅ\u0017q¨\\P\u0017äÈMÑËE¦çº'þ,bÎå8vS«XÔsöäª(\u0012¯¿ÊÖ\u00126Lx\u0015\u001a½\u0005Ä9¿°Dä¸\br)áe»ÄÛ¾t£ÿ/hFò~jÅG\u0012(ó\\°åy¶³§_¿\u0011?¢\nBÁWWÜ&Ó£qY\u0010O\u0010~Y= T\u0010~Y\u0010~Y\u0010~Y6]/\u000brLx!]âÅë\u0018@«¥\u0002©\u0015\u0000dwºz=MËJ¢iÕA,ï\tÍv<l\u000fÕB(Ï\tÌnül=Myµì×Tg6ëÕLG6ìÙ\\öëÔH7öìØXwvëÖPWvìÚ= ÖkÓFOn\u000fki\u000fm\u000fly\u000fnkqmln¡¿kd¿m¿lt¿n?kl?m?l|?nÿkhÿmÿlxÿnkpmln ßkfßmßlvßn_kn_m_l~_n\u001fkj\u001fm\u001flz\u001fnkrmì»=}â<k\u0007IÕ@<o\tÑük\u00059U?8O\tÐ4ç¶îß,Ç6íÝ<\u00076îá(·öíÜ8÷öîà0×víÞ@\u0017vîâ&¯Öàó¶T·uly¿pkìòq\b\u0016q\u0010ù2TÖÿqrw1ØöaJ\u0018?\\Ô\"_à\u0006\u001dÊ;¬8¶p/uì\té\u0007Ö\u0004ÌÕL\u001dA\t\u0011\u000fâ\u0000ñÖo7@\nm\u00079Ü\u0014\u000f\u001eÞê\t\u0016p,>|^\u001dýÃJ(Õ\u0002\u0007\u0011ßRT~:{LH\u0011<@ÿ\u0011òú{|8O=M¢þ}ýç[ÚuÖôA0±$\u0007i\u001c\n_\u001aÊÛÆtüìqï\u0014\u0019M½uw5QIïX\bLÔþP\\=Mqö\u001eaÁ'\u001c\u001f4A-ùMjÕ= ù\\õxÕK4è@ï\bvËFÉüXkOð\u0019Õ7\b:ï\u001e\u0007~Ê!ü²m\u001fûF\tS1üO\nÉ¾;pé\tW,ü\u0010=M\t>>9\t\u000b+@~=}\t^F¼\u000fy^}vA  \u0012\"z±\u0017rdàwÖ*\u001eëÛ}^1q= Ç\n?Ov?\u001c)Vrõf\\=MÜ\u0002ðºM\u0005Ø\u0001IyÎw\u001f8}Rxf\u001d\\ìòZÙàLz^\u001fBÂ3dfU\u001b÷ÉòkÌ¼àÎN\b5\u00018U\u001fîIm ¼\"Çò\b¡\\bU$¼ÄÞ*¡Y&H\u0019ã\u001eZ{A ÜtöÿZêâ~@à]\u0011ïÿ]\\\fq\u0004EAr\u001a\\]½ßÒh\u0016Ö\"]\u001f!9fB[\u0002\u0002¶\u0016 ¨  b^áÊ¯\u0019DÐäÏ®&¦Z®&hê(dB:tbûW­SÙUé\u001eç\u0012¥´ßã\u0013¾H'ðJ\u0011[Þ\u0018õ=M\u0017Y\bLÎõò\bH\u0017A]!\u0012^ø\u0001Íoÿ\u001aÚ¥Ö%2í©øD¯¯©U¯\u0017\u0018¯½2ÓÃ»;Å÷\u0019·D\u0014'«eÝ´É¹ä\nÎéø\u001eÔ§\u0001¯ÑÔá!SF\u0006ÇÃfÇ3\u0010:ãè¥\u0006®Ì\fõ;ÒíôÌ&\u0014#¯?Ãf\u0007ÞÜ\u0017= \u000bµÿÌofÌá\u0001DKíó#\u0002M#ïO'QRµ0ú8Ã\u0010P\u0003\t(mÃ\u000e×Ùûæ\u0013ù\u0004ß¸\u00179pÿxßXèR$\\ä&2äý×\u0010z%WZ$I°\u0017&\u000f\u0004÷}$\u0002\u0010ª\u0016¾\u001e÷áX*T}¤ÿ_ÆÉâ\u0017'\u00111¶=}}c xd_x¼Âª^CÍ}¸\"Q3væÚ°0ÃdÁÓ¶ò÷ç\u0019Ò«91Û\u001c/²\u0017 ô8ªDHâo\u0014¤»iEÌËsá«U\u0003æ\u0003\u000f¸­áÎ¯ÁKÆ\u0003O0§z»\b,â½ÝøÏ=}µc.*\u001cè¥á\f)Í\u001a¦qì3P¢°]2é×\u0019ã½ýc\\ÈÍ®þFTT°'#\u00199Z*1\u0019çx{ñ³aÇfßÝ¸Âè\u000b=}<¤A¨|\u000fõ\u0015\u0004\u001f<ªaI£\tè9ºf[W·ÿñ\\HÞæ\u001aX®=}^$¦¹= tH²Má¨ê£¶¦ó¬Ãk¤ñ¨óªc¤«D££Ù²Cæ¤!$â£s²£¾ðãé´«\n«ï¯\u000bà¦q\u0000§Ò´\u000bI»É(§ø¬àõS^\bC:Ãy­3qísù\u0003*Kcê\fcÜ~c·\u000bª}¤eÜÊ\u0013 \u0000ã°\u0011ÓØ'Ó}ª\u0002\"S&ã:*$b¸¨aÇÁ7ð¥~_¨kY³m5\u0004½3\f¬ÖÂÿ ¼'fävfwE¥ÿ\u0000¸\u0001öcQL¤Ðý¯Õ\u0010ÈëC\u0000\u0019$\u0018Ý¥á¥Û^Ó0\u001e¬ý¼%åäÛ&1ó¾9;¡ëÃe±'ÏÑÅ\u000f\u001b\"å\u0014'BØ2àz´M·«Þ­Ä\u0002´A7Ô\u0018\nd§)Nl\u0005'¤¯\u0010=}d;yQ\b[?\u0006¯Ò\u001emSªL+q­µ4-·´L¿ÇEXè.àÅaÆ´Mµ>·\u0005=}{üÏ\u000fM¹\u0016Æ+%º\u00056éÒ´AJëëÛ¬\u0013N'M\u0002í\u0010áõ¡\u0004T7Ñ\u0000Ã\bBÿ75öÙÕÄÆæ\t½ÞþéîÑn[\u001aq\u0015Dø\\?¹>I¹zËâ\n©\bØÚÌÀÁEÃºjÍë\b¨@µE\u0007ïõ ÎÜì\u0016Îv¡ÝÎ]$û®Ê^ý\u0016$ÊP\u000b8\f\u0002@íóûNl9ô=MÎØðOÞ\u0000z\nÕXq¼ÐÞÄh)¿à\u0006Æ\u000fmWØH\u0000ZH\u000eÝ~\u0014ª\u0001~¬i{v½ª6\u0005H¦Újk\u000eRÛUÖ)Ûô8= 1×\u000fz4wõ\nè\u0000ûBPÑ\u001f\fÚúYñ\u0012ý\u001eùòrï\u0016¶U~\\\u0016Lª\u001fmf÷âzös8\u001e4c\u0013\u0012Éæ¶R>\u001f\nî$yÍã­\u000bF#eÿc\u001dÉó\u0014®ëëÉ;\u0003É©%«A\u001d¬y\u00004¹æÄ~GgT\u0012ÍçØ|t¼ê'ø´ô&r\bd{SÚ©¾=}ÆâÑ¼E\"­´vU²/!øpäj®Ô}Ë2àiöªíÑ·)4,ÒìM÷5\u0018²üOã5JjÕ~}2\u0005Í¿\b9:]-Ñ üÄÍ°^ÄÍù\u0011TakÃ\f~S'\u0019Ï7±\u0019 Å\u00115bzüáS\u0000ÓðÏ¶Ì\u0001a\"M[\u0015Q\u0015@ÊùÐÔMD¢)LN\u0011±sî±\u000eJjé}|[|Q^\nM¦^;\u0014Uq±¼\u0019[÷~NR4\u001ab4\"6\u001fáWùû]4 s\u0006ïS= #S]3L4°,;C}['\u0005V)l@Ø\u0012Ò>t=MvT0]Ví¡cE\"98/\u001f\u0000÷»U\u0013ñ<Å\u001cZ\u000eÂ\u0019Á\"\u0003fcÐ]ª¸0\u0001h\u0006cc\u0007C\t¬x2CN¸&J¸ÅÏÿÉäo\bÜå©ûæþ\u001bÁ\u0013hn\u0010¤»ÝÎÁ5d!±¢IÅk\tGàfâYdyô\u0007^~ûéÙVÆ¤\u0006\u0012Úæ7Ïrµ®¦0µÑ×ö\u001d=M¡¿|¼7É÷\u000fúWr\u0000\u0006ÈÜ!úø\u000f~î¾B\u000f\u001a\u0011\u000fjà!ÿù¾\u0011=}¾\u0016\u0010ì\u0002¢\u0019\u0007'àÛI\u0004øåõÜúw\u001dæ\u0000üm9ú\u001c]<è@\u001e]1¢\u000bHôð\u001e£U)C]Z«\u0012\u000eHÓ\u001dþäëUêù\u0012_ 5#Iå3òvDÁ\u001d±¦¾Æ,\u0014t\u0019ÅnKr7-©qO¸Ú0ï55P<È\u0002·\u0012n÷ixÖ\u000f§æ1x\u0000F\u0019!ðBú*4Èpµx¢=Mâ\u0013ua\u001fW\u0014 (_ª¶+í/½ò­\u0010SÐ[úaõ~EIû\u000bâ¥\fÖ;3ü¨/9\u000fºxg9\u0013xN?W8\u0019\u0005>½Å\nßo:\u00175èzwYxÑ\u0000\u0002iPM= vÀ\u0013kÕ:Û0(¢\u0001èLgÚi@GìßR\f÷B\u0013H\bÎ?ù\u001a:V\u0002ê¾é\u0011ÔºÎö¢M²ÜY\u0004ëï OÆ¬í;Ç*NÐ@Î= #fýòôWjs\u0019ê9Ø¹¡hú HÂÉ7ûâ YdH=Mû!~FÁ1EÈ%\u0003xGíØtîMIÆâßKÙÁp=}ÞÀ+þ£×P§gþ#*#yú£|rºC\u0006\u001a¤f¤{¢TË+Â»\u000e¡b,£ç£ñ¬cÆµsç¤pÐ¢û|ò\u001e2».aÊÓCº³s¾ËVJ³. Ýó9¤_lgÒ³Ó³ä¯¬G3ä±¨OC%©\u0019\u0013%Î_³#\u0013»3%ÑYß'ßÌë{}»Â´HZVôº\u0018Ìkí\fnØ.­\u0013YV\fÛO\u0002?W1\u0010[g;S£\u001aêX»£i÷¯ô=}B<uQ(ÄÙoæJXÅcGM&]:º\t¢×\b= 1½¨\u0006[ô¦\u001e\u001aÐpnwI\u001c%È\u0007ò\nØüóÖ\u0010ekD \u001e¡RËÊPænG[+ÃÂÞU\u000f?<¶NÍªùù38yµ\u0002K¾übU\u0019äwF*°xHÇÚ \u001eEæ1¡e\u0004\u0004Y0¾yÏR\u0000Û*¤Q¡Ô7\u0018\u0005Ü!õ&¹Ýä²ÒÊ\u001d\\¡ÁBTnP<_p\t\u0001Éñ_Ôô·ËÔ'ïÓ\u000f¡Pe]_y\u0013ÄfZì\u0012°.z\f5Ç¾¥6É\u001267[î5\u0019¢¦(£\u001d¢%à*B6ànUHàta[àÝboà÷Rà·-à±Èªá|µá\u0002ÔÂá\u000bzÎá-ÛáÓõéá7Â÷ábê\u0005á1i\u0013áS:\"áõþ*á\u0003²2á;9á\u001c~Aá\u0013Iá{¾Rá\u0003Zá´^báéÊkáZEsá\u001bÍ|á7^á¯öáá©,áa³¥âÂý©¯>¦ã@\u0000»#\nþ\u001cÙVlY\u0010\u000eÚ/übÜ~Y\u0010~/V0{®éq)r\u0001ï»wÂþêØéH\f4Þ\u0016«\nésûÖ)ßh§«>%i\u000b¦=}½rï\u0016¯þ\u0016G}9eº±«\u0016ºi\u0007]\u0016Yw.)õ\u0002\u0001\b§ó\u000e½ï=MîË1Å%rBEk°0\b?\u001b±¿ð\u0007Áò\u0017UEÖÓ8Z\u0018Õ½~SÊÕ:Ä®{\u001aÉBj¨O\u0012ËR.èßýøï\u0011ñ¬\u0006ik\fÝÌ\nñ7¥Fê­¡²øUC5uÄÍm÷O}Iþ¸Fj¬í¦¨\u001eî§\"¡ÆÛ= ôÓ;ã=}\u0003iÆd@J%P\u0012§8Â¨jb«Q!¶\u0017¡ÄûÅ\tì\"6WWØ[ÒPgUÑ¹âÇtTð/WÐ)í¾F.WäÝëõ£?\u00118ÛéªëþËçe\u001dëA¶IâG_X5ñÑN÷\nL1õÀR¨]rÈ^üâ7e\u0012î:¨J¨\u0018*G\u0019­O¶¿þÏsêSbýS\u0001«A\t®­¨¤%Ïªd\u0000¦dbf¨.«á\"öÔJøèpø¸J±K«ýP\u0005BÍ(-FlÍí= ø\u0011O(Y-b~LK\u000eõ\u001575G\u0018í?!ø5:JøC5iíQ¯õ\u0005\u0001dn­\u0012÷ýRì)%þÑ­WéÍû\u0000ñ|\u0018Ü>ÚktP7Øù1=}<?¼= ûØ7UV'(XÈ\u001biì\u0011Fµ!ÿ%0\u0005\u0017ù¹¶ùõï.\u000eÔjx.wû'\u001f\u0016´\u0001v.kÏEø= +02­ÜVI³eåáôëZÑ(\u0007@Î\u0003wB¨ï,ËC\u001dû¤90{OoRo\u001f\u0017T @j>SknfgÓ2UÚ\\ï;n\u000büÑ¨6\u0015t\u000fp\u0004cu¿µ\u0005\u0016I@æjN|§z\bviÈ>Ââ\u0007§\u00116tÑîéJ4Õ\u0011ï\b\u0003÷)}ð\by^ÏûA(\"û¹^\nô]Þ6È¼<\u000b\n\u0007©ýh¼Ï»@dWîµïëj=M½xvusÂB)tH÷!6JÜÅ8'6Ìÿ:HS\u001fó­ú\u0019È¶¶6/î*\u00079È\u00049'vç¡MìÇ\u001b\u0015Å(\n¶\u001b:<cÁ¬þ¸r©:\u001byÚgt\né¿º\u0017\u001bVà9å¢ûÅAhS[×©RÄÔ'\u0012.7ú×\u0016¾E[Å2åyÚ-OH4ÿ×2V´¿00Ã\u0010ÛaHOø®Ê\n\u001c»\u0016ïf;\u001fß7ÔdD7Ø'@¾%\u000b¶%ýðÓ½doû¿çs7Ã!~´+\\ ÃJ¦Û¹³c}~¡Wð\n\u0002NÂÐÕâg\u001e\u0002\tk \u001c f*\u0016Ö sfh­\u0012á\u001aIai.\u001e\u001ctXq6\n= ßTPC\u0006ò²ÏM\u001csh@òV;|q°D\u0015Êºq\\Ó(Örõ?¼s,>\u0004ñW\\k\"\u00111Oá#aL¦öy}V\u0013'àØ\"~E*ÀjJ|Ey))Ç¾i#©Ús}\u0010p,y\u001f-ÜàO{ÎZÇEx%³®]ÀØêjc?Øo{x¯åö\u001fÂ=}\u0013vf'êþ0ìÂ=Mï\u0001(´\u0001¼uÜo3±»Ó\"O¤]\u0018{= v\u001d;ÁRõÞõ:\u0018ö«\u001fÝ<6tÛ,w¤6»öÓ4\u000e¶ÓÔ@ãxì¡Û1vd{\\\u0018Ï¦j\u00053Þ) ê\u0016\u0018u\u000b-ÎêTO\u0014ÇT\u0019ÆüÔ\n§m2f\\Ú?\u0016N*|\f»tæ[\u0010«F¯\u0004\u0003\u0017s\n3±vÖW<\u0018ó®ð\u0018ÐÖØ\f\u0016ó¦ä½»JLV\u00042½ªK4¿â+èþ©õs\u001cÃ²å©\u001bè\"g!\u000f\u0015jW\"uwu*\tváoÍpQÎ= KÀt.UA\u0017~~&ð\u001dÜKÞ¹\u0019Æ¡\u001cúíp]ÝN®Nr\u0019\t@\u001d\n¥ÝM1o\u001f~$ùÀS=}A\n}ôÝCÀâ¬%ª£ÄC£#\u0005|Y\u0010~¢\b~Y\u0010~QV\u0010~Y\u0010~YX\fA_¡EùJ¢Æ~tâ~i#e¹_ÁÚz}k{°\u001b±Ojìa9Á¶\u000eÓsPå\u0010\u0011ÈÈ¹ëÑÒæeT'%\u0018hË\\º\u0005[T#\u001cG\u0012qH:òÙ5>V\u001b8äc)\u0017\u0001[H\n\u0010­à¿5kþ=}k¥\u001bu\njtKÀf~t6.Ç\u0007ã§e+=M°6\u0003·.¥<\u001cÄ#üT!K:NÚÈ._v\u0003«\u001aa^Õbt<m>ñÏì\u0015C\u0015Jà®À\u0010Ì>\ffåÜÎM]ýUDÜuïÜYn'(\u0019éëïÙxÂ m\u0017ÌbCf>ÃÐ:=MUäè@úw{\u0015ê¨p\u000bÈÇzËÕåöAèàk_ÆfËÌQ7^\"w}¢\u0015ÂW!ÄÜÊ6¡\u001fã|úI¿%_ÊÏ)\u001fÇÐÀ)Ra¡%(ÖBõ93\u0011Ý\u001b\u001fÙÉõu¸­\u0007Òµ!¿\u0006AÉgÛ\u001c\u00122\u0013\u001ehäq9h\u0000\u001aºõ\nY6×\u0007®¤¾«\u001eÎS\u0007°\t\u001cÎÛNW7b\u001eºTLv\u001fýp\tv8¼ë±Bmàb,Çâ¾êu/t0¾1ezÄ?\u0001Ù³JOa{î«4ÌïhEùtú@\u001b;øÑ9QÌ·ÈVç\u001b!US¸À§d¦ãÉä£©sV\u0010~Ù¢Ü~Y0\u000f~Y\u0010~\u001f|\u0011V\u0010~\u0001á<\f;ìE¾6ërh»\u0005H¾ä=M¥¬z\f\u0012\u0005Lå\u0001¹~µ~¦çéu#¯G\f5(>7,=MD·\\ÈeîáQé­\u00023êZlUyG\u0001³=U\u0006ÎÜç:6#zVë\u0013\u0010Þný9Æ\u0015Ò/Vó}=}\u0016eú$Öµ;ÖT\u000e¦cu7.QºÒÁ4Ñ«r= hÂüô¾EX:4¢4L¡Iq{À\u0016\u0005}id§I¹ÖøÉ o\u0014¢\\w\u0013p=MMÈ\\&QOÝíZÃw|ÁX\u0001)ñ\u0013 Gk·CÐ\u000ei\u0007¸}ÑMðâØE®Ï[5à\u0016u0¹úsÝd×¥æÊ½\u0005L*ä­ðÉ|èö¤= \nóñ@Ñyt2\u0018Ð÷ãN>9B¿E¹È¶ü¯/P;&~âçÅçoþ)ZÎ\u0004T©ÐÆ4 \u0012Ö\u0011þ\u000ffF@Ká^ºv÷±c(à¯\u0019~\u0014Ë\u0015Bå\u0013ü? ´)òÑ%ø_Nb$QÆ\u001aÓÏ\u001dÂåt2\u0014Ö§á!¬ä6ÚSÍ\u001e2¦Þá\u0006\u0012,P@\"\u0013§º/'\u001bÅç£¢©(dA¸*YK·ïå\u0007ÄÏÄ2>¸´ÁM':ÍóøèXAÝí±\u000e%Òø®ñb\u0017Ã×æ²8yKÞ\n«\u001cy«ÄÉ3B\u000e)½Þ\u0016·AZgÿÎ+¢Vdq¼\u0019\u0007\u00112àj¿Ä@'ÒÂÿ3|-ç¸\u001a,Êa\u0001K]&¡\u001f\u0002¡*ë£Á=M¨$\n\u0016«9'{H\u0013\u0007\bçC¦¦(ù­ÆË\u000f@¾&@éTS¹² R§¯@ð¥¾>/À²öôö3)8\u0002Õ³7,§a\u000fÿ¾md\u0004ü¹-V\u0014\u0000V£n-Ó\f÷/\u0018H\u001b\u000eø)pþÎ\u0013naµ1=MgÛy\u0003|QÝcTÁÞ½\u0014qa¬vYY\u0003:øÎ¿yXæeK¦Aî^\u0013õF¾Î\t9\u0017ÂUdà+]Ä_\u001câ% ÜF;Å«Á£ã³£­iY\u0010~Y\u0010~Y<}Yz}\u001dØqú~YP<Gr\u001eZUÚgû)\u0000¢6y×üÙilô1ð_\föÃñ4-_AFçë5Õ9B7\u0004&­ê>÷<\fQiV¢M\u0015%Ý®%Ø¢¦°¡ýH,æ1¹Ä\u0015}~G0\u0002F±Éé]ÏÜEnÄà@ü\u001eýB\u001c¶°sÚg]Äj\t¾Dµ\u0004o\u001eiGÏÕÄÈy7î2ïôû=MiaÛ\u0016WÂ>\u000fT¨Ô9WZnßÎ¿fO\\\u0017½\fÙ\u001fYH/Ð\u001cÅÞñ|}\u0016+àu\u0019ª!x\u0019G\u00056ÆN-?\u000b\u001c§Î?Ñu¨NÑ\u001f8]ÅY\u0014\u0006eáÚ\u0017\u000e\u0014¡qDøÁ®\u0007¡\u001cò±±\u001cÔMp\u0018JS1²u\u0014av2\bþ\u001b3rA^¡0¨\u0013rÛ3\u0018$»È¨t\u0018Ì+ga\u0003ùÍ*s^Õ'fáDÏá·m@ÓÙá«6Ë?¦ý´k\"ºd!Bëá.?ËÑ\u00010\u0005åú×â\"-É\t\u001d¯iTÿÔ9þ\u0014w-ÆâÌA= ¢.\n\u0018ü¥\u0012\u0011É\u0013CÆ´hz,¹È\u0014òá<\fv6üH6%·\u000foö<= É8\u0011×¢5i\u0007z\u0017\u0019¢<ñ= \n©%X¼k\u001c\n\u0004\u0010É\u0018\u0001ü'¡@(gà¾¢VÌ\u0017mq²ÜUmÈ\n\u001cÑÑ)\u001c\u0017qlfíØB¿3rYa¥/Á·\u0013XI³= V(OrË\u0005~¡Å?&-4F;ÛnµÁpÌ.\u000fÌÆ H7Í*%Õ\u0015²8t\u0002q0nÜK\u0000$=}[%\u0010ÎÛùûìw¡íïßMË\u0001ÿhRø\u001f\u0010LI¢x*yó\u0000°Ò8=M\\ôî{,ýA¨xDUE1TÒ\u00187yyÖ¢\u0003àÁ1°Ûñ\u0011ã\u0015J$GéU!\u0011S\u001f¶n\u000e>ÉMo>l¿\u0011\t,\tµßþëBue}\u000eÐ\u0017*YÕ\u0006\u0001Î­þÜÂ)Ù¹á\u000fæ»vq(7\u000eÊÞ_&\t\u00183!X&\u000fBñ¡ÁG\"@¯ý\u001a\u0014XV.\u001a\u0018TîH¾Re\u0011 z0F\u0011¹¨sßyfà\u000b\u0015JWº \u001eü\u0015Z:\u0001ráaf\fþÂUÂ.\nûâ®²\u0016ë!#w'¤É±3\u0016\u0013#¶U&¹àk¬tÃÜÞ©T àëEr³\u001e});v³bÿÁek\u000b;<fß@ÛïQ\u0004\u0017B²\u0006×%C\u000f§Z|Æ[Âä\u0015§þjô/-éL;ßm.ÐFÿ[Ø-Aa#Ô¥Þ¨OýÉcS#Nò¨_Ö¸õ¾ÒgOæ+åÄ%\u0000å\u000f\u0011«Ôù´ôÌüQ+6&Å·:,;_îç\b´ \u0002çÿXµVßío28\u0005á«hOüÉ\t¡ùÔÊò+L\u001eÅÉýøåN= '´µ!Ð7SVö%Ç¬júëÛWä%ô¬âÿ7ÓL'Ð\u0015õ¯H\u001f\u00155EÂÅ\bËè-\u0016,·*\tÌ\u0000&õ·Êë\\Úê-íÌ.aÔ\u000f÷¤øWî7¹4W63©þ¤|\u0012Û\u0017Z\u0017fL¸R{@\u0006\u001a¥0ðÚ{7Pû\u00036zJ\u001c?Aµ¹fÒV;\u0000qªÏQM\nT´.8Ï)a\t4kURÏaqLÏ9¢V¾\u0005¡â\u001f'h¡´¹o)üÛ:¨:á¹\t_\näÜ®$ØÏ\\lå\u0014¹ÙSC>qå3Ú®Û2(#\u0014Ïo!Ò©À·æk\u0019Ô÷i+Ä\u0014$»OéçôÌ%\u0000>èCÐ%½ø´7Ú­©Ä[|­\u0002¤w@¸c*³¤{/´ãøáÿ²ævËá;·ºã= ð¤ÿm*º\u001f\u0013øpªL5ß3ÕnÖº\u0001ef1¿¸>¦ÜÂVdÙÜ¾\u0005\u001eUü\u001f¹¿q'^¤<\u0003ù:¤3¤®rJæ|7\u0017ÛUÕ°\u0001Ge\u001dr÷{!Ü¨éLIãþ=MÕK÷Èd0üìó8V¯?Í¶d\u000fõÅ2ð#W.óÊ±'Ç±\u0011¹iå}»Ë9+$Ã.\u000bËm,¥zV4S\\Î¥¥øÆ_øÛ·H)$ó3^¶¥ê©æ&\u001fÓÔ«%¤jã»-¬#f\u0005\"\u001bV6ª0J Ã=}(F\u0018áS\\Úa%?\u0012Aó~¦¹±]f<\u0004Ú¿\u0019(yäº{j¼iÜ$ªê+\u0013£*É\u001e»[\u0006ªÎÒ}e>¦ÙÓ\u000e0Ø;JüdåâîóÖ¦\u001bÕ(c}!®s\u001cU·Q\u0001Ô*h>oå/Ì\u000b=}Ò$-.ä]\u0016Ä«rÒ#b%Se\u0004Áïù<®\u001aB;£\u001ek»\u001bôéK\u0010«äR\u0004Ôà¬v(/lÝÓ^ü¾z\f$¹t'?üÃ\u0018\u001fÉ×\u001er#zµv$ÜÚ¸] Jã.g\u0007;\u001f\u0015Åÿ\u0018>£J\u001ex\u0004\u000b^½ÿ\u0001K­XÐm<D§y-C[\u0007Ï«Ð¸CTßî4&²F\u0007$~Ä°6\u0018Gã\u000b³~1%\fjêë=MÃR¢îM^!4z\u0002b¶Rd\u0012\u0007-oºC{æ]÷6r=M\u0012ëA}îUé\\6\u000bÎ_Ã¤5ò,dÙõL<wXÚ3®XXgù¸d²l)\u001e\u0007õ\u0010Õ$j´¬võuØ©!\u0001Äê>Ñ5@\nq4\u0006¢Þð½¥î+QìÔ\\Ï\u00147·×ÀÇN1Æ@Ì^l¹VÀ+\u0007´<õ^,ë\u0012\u0002ò5¥y³W8GQ\u0006Ü\\±¥E/|G\u000f\fÍL]¹ò/ÆìTÃÕEî_ù\\4gá5Ëù<4\\®ky\u0000éÇV\"Ùü´Õ6×:òÅ\\öø¬>RãéXí4Ä&ïIúéb_>,î\u000b\bøÎ»=uþopVoílfoY¶è/O íéXÝ(îÓèg7Ìq<q¯AÁp÷\u0016°¹ßP ¹4?ÏÁ77Ð\b_õ\u001cÕx\u0015rÈù}RåÜÐà\u0010\u0011zÚe\u0000²áV\\Ì*y\u0013yæÞ[mC\u0006ºÛ\"\b1>3ópÁ\u00167\u0013,4 ÿ(´qüÇæ¶×·\f¢àØÜ\t­Ø4uC\n2õÂi'Íâ\u0001ë>ö:uxõy\u0017ÁêýCä\u001aFß^³\u001daÄ-QòG2\u0001Gt\\×böë rºueA8w÷\u001aÐp/ãX\u0010I\u0019ðèWñ\tÊ= \u0005a*!ìòV²ÁEïô=MZ;\t\fBG°\u0011\nKöq\u001c\u000fÈ=}òRuL\u0000Ú\u000bëÌ\u0018<ñ\f(ÀÝ~á°ñOC4=MÝZK19Â\u0010Gµºþ\u000b\u0012|Æ]dö\u00040¹Ù N¸þ\u0001uöÐ\u0012\u000b\"\u001emxs2asþ= ×²]c\u0012Ý\u0010 âoÁEÌÉµË\u001c\u0017·½Ní~åÌ×É0 ÄUýÌ*Ö2d ­Û\"7ÅÉj0f,xí\u000b\u000fG%\nÚMyÁØ\u000f\u0016¿2\\h¶Ó\u0006\u001bÅðiK\u0016ös\u000e×ÿÚÀî\t\u0003pR<û\u000eN$è=}Ë\u001fQ(}}V\u0014\u000b<±1aK.\u0016bm(©{B\b+þÑ¼Ä\u001fÙéüÜÍ\u000fÑÙ;*x8Ta\"¤áÖû'¦¹8î\u0013¨ö7 \u000f)5æ{Þn¥¾O¼ºès\u0006Ü* 9;\u0013p­ÂyýK:ÙÛJÐím{ \u0018ª\fÛ\u0018æÊ\u0001/P\tÑ[,\u0014è\u001c\u0013æþ1oõ²Yk¶&ï_Sã~¾@Ê\u0003X_Ò¡¡.\u0012sP4*Ú \u0014lD£ßó»+êE%3û¨\u0006q³WÀ%jæ\u0014jÓ÷r°êð«Ïø.gJÀ4k9çL7\u000b@º&a»w\\·.ñÌ\u0014éÊÁ¢Wj\u0010¬ËSðg¶4\bÛyÈ¬\u0012È\u0004j\u0007/Ôòär\nÌ\u001bÇÒ¸ ÷vÓ\u0017½á(\u0017ßx?1\u0010ô¼»Ð¦p¨<;Ä<(æ\u000eVSæÄ¾øÙ\tÑ¿ïý<&þ©\u0016óÅÖº\\z\\sÚ²Êpfné[ êá9 pê= 3¥\u001fýù#\u00186ÛÝ.2¨x\u001f?Öö#}¼¥¯[ÐcMTåo¬ÔC³ú\u0017®Tîö'\u001c4Å\u0017ÛËå2êÅßù/õ9\u0005_;Ñi\u0010*g\u001bMí/â\u001eh;Ö4è \u0016¹8&û×o\u0006Ôb+hâÊüßpT[H$h¶ÀÏ!¡k\u0005²¹ø©¡fÏ!¿\u0004pÂ¹¡\u001en%\u0014¸®eÆÏï\tDc;¨Fú\u0005[Wì¯­i\u0005#ÞÅ\u0019¹$\u0006H³9­Ô¤\u0013Æ\u001fûhªjà¨ÓFØÂHäpÓ²\u0016ÏÒªæUdwâ®\u0015ÀÕäpÛ¦IlHfDÊL\u0013ó­û©È&ûÄ¬5ÑÊe\u00072§{xÀª ,Tãêf)3ËÓ¥õ\u0017fäê¿­\u001dØdS=Mÿ³Û©c\u001fÁ\u000fÛ®VÛ\u0012k\u0010'Ò$\u0013(2@äPu´'ºd\u0007VÐûhûæ ßî.::9%\u0018%¼?ö\u0002¥mZ¹e=MbC¢\u0014±/rÖ){ä¦ûgz&F\tff\u0013Ð[\u0000Ô®qp#öÎIå\u000e~Ç\u0013y?£©¬=MS= ç¼-^·äCI£\t9\u0015Ó·Ê°y/©\u0006´µ?:ÑñWîá¶^n+h8\u0011\u001dÜÌéM§°'MëJà5úñ\u0011ÿ\\ñ©5Ò5e¼JlYmÇÎÃì9ðÁ¿{íÍ¯z6þú¢êÍuçÆÌ(K'ç³ ¾ÂÕ×nAo\bí\u0017¼5XÖ+T&­Â4ÇLtB<^ÿÖ\u000fðIf¢ÃÖS\u001a¨ö!y&,@Ù(|ÞImeC\u0007Lh@êHiY¼¡2\u00028^¹\u0015Þ7å\\q[Ã<\u0005ÑH/\u0015=}¬òÜ\u001a(ÂÎÒüÝ\n2Ý  û&AóAæ¢VUCÔn?K~\u001dÁPÞµðàrHö^®ÅMV-ÁMã¸ðZôxF\u001e\u000b?\u0004-\u0004Ê6n\n\u000bkÈ=M\u000b\u001e6áüñLdX\u001cúØàÄ|çIâIÜiW\u001adÎ=}Þ¦= P8\u0011½6\"zòþåÇswõµBò:d âÓKå¤\"\u0012¾*a¤ÍÜôÀ½É|el{\u000b×°J×pc7÷°ßÆH0ÚY\u0003÷ O{\u0012+~xðS\u000fxÿwÝÂ\u0012\u001bÑåbvîx#¼Ý~ü\u0003=M%îsµÚ\u001fXéB,\u0019;V{¤B\\Ý\u0004õ3®Í*^8Ã²Ç\u0011\u0001[\u0012T²\u0001<*<B\u001cC×£\u001a-&St×§Fá'Ey\u0013W×1g~ô\u001bcÌ©Î\u0006T*,júÊ¶Sç!¼éÇD|\u0007?È¨VvÓcÞÀr\u0007\n\u0003iï\u0007\t^ |[\u0016\u001e±-:QKß\u000fØnjÜÕ¨\u001bKE£Ê-[æ\u0002#-x¥*®T&³ÊÈ-3W.su\u0001/v-hûî/\u0011'h¦\u001f¹RB\u0004\u0014\u0012¶.ÙBû_Ýc\"ÆÏ\u001bhe$ Ïw=MV\u0003]å¯æ:è£Ú'\u0003Sè£psý=}²Íí\u001c\u000eì±WÐm¥Ü¯= 7­\"Éfyx,Óí¿+)8~ÆcÔ·Á¨%Ç$\u0015\u0012+à±\u0004^?DÙlÁ9pS)b¼S?\u0004©-Ì®\u0004¡$ÜSO¤¿=}°3à®õ/Jå\u0007p\u001bóó)'þ\u0006Ãìä½ïÙ±6yáu~9SB4¢\u0011w6Xô\u001a,\u001erØ\u0005\u001e-\u001bÀáã)Z37ÚÎë øµ,Ýè\u001dÑÄÐ\u0000vëR\u000bµ8sc«ÈÔ}¦1owÕ.\u001c_U»IZ_\u0019×ºÂýeL\u0016ÒÛl¤Ü=}h=Mt(»ý\u000f¿ã\u0018ÖLM=M]ñ\u001dÞ\u0000{\u0013;Y¬ru¨\u0006\u0012tÌ%ª×[E,y \fJA\u0002âs-*âyþµKöÃ&}½\u0006\u0014vè¸/v<+H(v\u0013rÀ°¿¢éª@\u001e¯4zÕº&²Ïe¢|<óÀdd(Ùû\u0001#E Ñ[\u0015RªqodF]¡» à«Âq«f\\´4Kg2dÊìË^\u000b¼q\u000fîiöÑ\f[\u0007ò©é8\t\u0004xH¿?Ãqf\u0002Ö­ó\u0006ªÂ }¨»{Òg¡2Å¿\u001aä/|ÏÍ\u0000\u0005T¡®.¢\n÷Á#\u0007ì¥Ã¯\u001a@\u0010~ÖSY\u0010~Y\u0010~Y\u0010~Y\u0010~Y\u001eÚ»]²\n¢ª¥AµåVéõ3±\u0007±\u0004Oí©é£¿?OBíäÞã¤¥¯ÿ¡q½\u0019#\u001cª³¥Ýc¤§£ÿ¡!c«d\u0006\u0017\u000bãÁK¤À£:\"âsgB5êÖ¥¹c±Û¦'\u0014Ä¨_þ½p¢¬: n\u0012\"\u0003\u0013rAb\u001b,*2òëçïåíéññìèðæîêòrkgoemiq1 \n¿¤ÌÈÐ¦¶ÎÞÊÚ²B#3K[GW/?%5M]IY1A$4L\\HX0@¦î¯Ô°ÖÊbS[W?E-=}IYaT<H0@FV^Z\u0002\u0003ëû\u0007\u0017\u001f\u0015ý\tñ\u0001\u0004R´ÕìÍ\u000e¾ü{\\\u001b©)éiJ\tº7÷yÙW±òoÏQ\u0011B\u0001\"¡Ö¸bE$P\në\u000fý\u0001ü\u0010\u0016\n¢jbu.\fü\u001eêG¹ùZ0pP\u0001  ÆÜZWIL&úó÷\u0005é\u0001ì\b\u0000jcd êbÔíÜ§gùYòÑ\u0010À\u0000= .õ\u001a«rLÂÿß_\"ÜbAú\u0015ø¢|\u001e»\u0019\b#7UYT8f~Z\u0002«½\b×/\u0010bìË\bBóâ\u0016¡©T_þùy>yt¸Æ^\u00123Ë\u001d°¿_ñL¸S¡ÝX!ÿzdx®Rv»É\u0000_i\u000b8b½V |¹¥Ðã¬KmmmEE¯Ú}ºC¦÷\"\"\"þþ\u001c£¶Ù¤MçØÙÙ9:\u001bÔ\u0014£F\u001d\u001d\u001d½¾î<S8óÆ­á¼Ô ó²MVVVIIc:¬~²ððð¸¸\\/;ÁK¶xyyù\u0000 ã³ß£©$££· âzU\u0010\u000f|\u0011mY\u0010~\u0001yU\u0010~Ð~\u0019|YR1é)ªµY\u0006b¤ôäà[í!Æoò§Â³Ùæ|©MÌ»c\u0000¥@\u0012Ã%©V¤ë£=}A´ßHOnÏnÕ!C(j\u000fdÔuÞeJ\t\n¥\u0012LÝNU1âÜÞ\u00131ñPìfð­Þ~eo¶[nÝÅ, _\f=M)35éý5ëaD,*\u000feÄõÞg*\t\t¯ÒLÍÎU-\u0002\u000bÌ~\u0013-o1H\\<åÏØ\u0007ðÙ²\u0000_\u000bºÑ5~ÌiÍà\\é¤\nû#¼\u001fë;~°\u0006Þ}v\u000eI\u0007Ã«\u0015$äÏî½])ÊH¦= \n©é/\u0015ÑZ¿n49ÁZÈjlëB<&,_F=}Pi\u001d¡GFô\u0019Ç-¿ñ@ìnÐ-ÛjÅoö]~]ÉL = \b½)+õÑY·.9IÁYÌ*ìóÂ<(T_E5NPg=M!HPJ\u0010n\fUÛyú\u0004Í\u0014w\u0015VX{ob\u00175\u0000\\çÁJ½\nÅ\u001d\u0014@%qWÃÖ+\u0013\u001a»q±µ|nI\u0005³Ìå.V3R\u000b¤¾\u0014#÷±a¼¼h\u0016m^eOÊý\u001ceù?ÃFF\u001f\u0011ñÉ´ð\u0018Úû@°èÊr~,\u00175tÉFÂZÌÿ.Õ:rKÁT*\u0007Y\f¼i\u0006í^guÏÞ=}\u001cg\t¿ÄPf\u001f\u000fùi=}mQTÕ\u000e0\u0019ATÀ\nkÛ\u0002>:\fg¶¹&|e\"\u0017U[ï\u0001J¼\u0012\u0005\u001d\u0016&åqU³V;}WÙÞì\u000f\u0012\u0012»c\u0003Áóeè9\u0003´\u0002v{&ÙÃ¤±$<»p®Í[u­O\ný\u001euy?Ç6F \u0004ÑÉ¶æ°Úý&0ð\nÒ{<®\u0015UÔÉJâ\u001aËß.Ô2rL\u0001V:1»q¶m[wÕÏ\u001e=}\u001ew¿È@f \u0005Ùi)ÍQX­\u000e@AXà\nl\u001b;2Ç³ùæ{m¢\u0017-\\åáJ>Ãç'_Js=}¥/\u0005{\u000f~YÐX\u0010Z\u0010pY\u0010><\u0010~Yaw\u00105å(­ÜV¢lÿ[Ññ»o$ÕMn%7¦òñÚ\u0005À:ÞsÊÐ1\u0010sÛó= 2 ã>°®ü8ú\u0019\u0017pf!pWFûxnï\u0010*\tjþ¹\u001ei)8Î.v,ç¾_LåpRü4uL´*ýìwA\t\u0011Zf?áçxÏ{\"kB>\u0014\u0014¯8\u000b%\u001aÉ\u001e\bç\u000bÜ¨\u001c¾½ÔZE8A¼}ÈæYÁ¦a2IÁÝÀ\u0017ìwlMèkh¼GÕ=M\u0003ÜB--x{Ô\bÌ /óä\u001b]=}e~ÎÔKjÉ=Mê1eyÀGâÏfb(ä\fÁÌMbÜãò]î\u0013^\u0014=M\u0013þ'\u0006ÛîøO¨;?\u0017<Ñùojªlðuqmh=Mp ÍÿÞªÍxö½Úá®È\u0016\u0002öN¼\u000b¼4ÁÊJ\u0006\u0005^\u0017\bî¢-èõó\u0004´asÒ¬) h\u001fú¥árÑh\u0012,&äù9\u001aa´&= ÎÚE¡|úu-4ÛqN\u0015ùÚ¿XïØz©DÛxYÙùÞ»jRwÆn§@X¤Òd²pÙq²(bõ¢ È\u0013[rì\u0010¢­ªjJ×XVVút©\u0019\u0014PÂÂxRWluAte\u0003¢'\u001b\u0016wèéâV;¥»C²¥#$»)$o\u0005E9²²p@¼nOl}|6= F´Pt/\u001bg\u000eßà¼5\bÕÈ~\u0007ïyl?vÄ\u0000Iö]ðj\u0017@qá¯e\u0005;'pÓ­N\u0004¹\u0019fÓÏ²vSà/fÓ²\n;±«££$Ã'¸RÝxÿ©i×ë.\f5ÙvËPIü}ðfW?I\fÞ0v\u001d=}J »+(Ô´¾\u0006Çùiï/Dû½öTØi\u0005\u0010oh»/hÔ¼>\u0006×ùj\u000f1ûÁvTài\u0006 oj¡ß3º,_Ô28ïÜ²H÷Ý2XÿÞ²h\u0007\u001fÁpNrV -&S¥Ë'¤Ã\u0005³#ô×\u00040ÿ\u001a¢\u001b&=MYf{â^A\nz|!\u0019PjQ|XÂ^\nz\u001c{\u0018á\u0019@:\u0000\nz {\u0018â\u0019:\u0000\nzß{ØÂ\u0019p.\u0000\u0006zß|Ø\u0002\u0019p>\u0000\núÁm*\u0000\u001cTÎâ\u0019lQ\u001f|8Ú^\núÂ{x²\u0019(\u0000 \u0004úB{xÒ\u00190\u0000 \u0006úÂ|xò\u00198\u0000 \búB|x\u0012\u0019@\u0000 \n:ª\u0019\u0003:º\u0019\u0004:Ê\u0019\u0005:Ú\u0019\u0006:ê\u0019\u0007:ú\u0019 ~\u0006A½RÁX)XO\f\u0010\u001e{nA\u0019©\n\u0014É\n\u0016é\n\u0018\t\n\u001aª\u001a\u0014Ê\u001a\u0016ê\u001a\u0018\n\u001aÚ¦VÓ¶VÔÆVÕÖVÖæV×öVØ\u0006VÙ\u0016V:$Ï\u0007Å¾¼lí\tU6DÏ\bÍþ¼nýUz¤\u0000s¬s´\u0000t¼tÄ\u0000uÌuÔ\u0000vÜvä\u0000wìwô\u0000xüx\u0004\u0000y\fy\u0014\u0000z\u001c\n#¨É{\u0003'¸\t{\u0004+ÈI{\u0005/Ø{\u00063èÉ|\u00077ø\t\u0006Ú)BèÝY¥³)$»Ý¤¾WÐ\u001eIÈ²ë\u000fì_âr¢\u0016?âp Öro:\u001cÖ\"l!|Ú*ê'ú(\n)\u001ajêgúh\ni\u001aJ*4\u0001uò\u001dí\u0002Ð à¹#©£³©\u0005ÃqÍ¥0\u001bäyUßRnàá\u0016R\\\u0016ÞArÁU2ÈlAURÐnÁVrØpAVà2ªÄ\u0001g2\u001bµ\u0002ð,êÌ\u0001hR\u001b¹\u0000.*Ô\u0001ir\u001b½\u0002\u00100jÜ\u0001j\u001bÁ ò²u*Å ëòu:É ì2uJÍ íruZÑ î²vjÕ ïòvzY~Âý2vÝ ñrvá Â9C££³«%óÔ\u0012J\"ÎâW#\u001bÃá+º*\u001bÅa+Ú2\u001bÇá,ú:\u001bÉa,\u001aB\u001bËá-:J\u001bÍa-ZR\u001bÏá.zZ\u001bÑa.b\u001bÓá/ºj\u001bÕa/Úr\u001b×á0úz\u001bÙa0\u001a\u001bÛá1:\u001bÝa1Z\u001bßá2z\u001báa2¢\u001fÃâkº*\u001fÅbkÚ2\u001f\u0007!Õ\u0002<bo\nÚ@r\u001f\u000b!×\u0002=}âpJúPz\u001f\u000f!Ù\u0002>bp\u001a= \u001f\u0013!Û\u0002?âqÊ:prtvxz|~^¶§²«$£££c\u0019Y\u0010~Y\u0010~Y\u0010~Y\u0010~Y\u0010\u0007'Ùm\u000eP^uM\u000eO= mNP\\qÎD-©}D/½=}C2­\u000bD.¥Èøxóþà8øööÀøô\u0000Ð\u0018øK7=M½\fJ:\u0015=M\fI6!ÍLJ8\u0011-·òÜ O\u0016òÝ/VrÞWÖrÜ¢ÇõlÃ>ß5ìÆ6¿ìÄ@Ï\u0015ì3\u0007M¼\t>\nU\f\t=}\u0006aÌI>\bQ¬6íÐFíÑPo\u0015mÒHUmÐôÎRbîRa\u001eÒbÞbgÍ¾\u000fVjÕ\u000e\u000fUfáÎOVhÑ®9ÿ\u0018f\u0010ÿ\u0019pð\u001a\u001ah\u0018Z\u0018õN\u0010W\u0001nPX|ñPWù^Ðý¥¸¯Sd¦¼×Ód¤Â·sd¥º§ëE-ÄY\u001bÅ.ÉIÛ.Å]û-³ÌwÓe±Òse¯Êóå²Î³Ä0Ýi{0ß};/âm\u00060Þ\u0005gÅ1\f\u001eëûÓ­cË\u001f\u0012~Y\u0010~Y\u0010¾fÓlÞ\u000b¸ÇQEè\u0017\u00156/àrW}\u0004l ÏytÛj§2¢[\u0010ÕÜ\"ê\u0010:l]K¥t$¨Y¸\u0011>$§MÂÅ©lÁÏ\u0012SPä\u001aª¿ï\nó ­Ô\u0000çØ´läÏÂT\u0010ç³û×\u001d[hJ¹D\u0000/\u0015\u0014<èº8Åÿ93ìå\u0006«2Ê\u001f=}³ÝeËñ7U)ï½½\u0006\u001b_v)s¼ét÷InXëIÓðB\fï\u0006ÝjöHBÑ\u0017MJwáPÖòD\",æPÙ\u0004ÇmúJãçêÁ1ÕÞLF\u001fzTgÇöï°(\u0005Kõå:ÁáBæL¹ýì9¸UP6\u0002m\u0007\u0010Æ\u001e¶|ûlmä!Ø00\u0018O/\u0006ü¼~{=}j}Ùé.\u0017ùwVÆA\u000eÒü6rA\u0019¹0°êE ú<ÅE&ú\u0013ìò¼£\u0006j¶©£\u001f\u001f²\n~Y\\ÝàbV\u0010~Y¢K\u0010~\tó~ùû^0MY\u0011ÊÈB©T*þ^\\? Z\u00189eSk\u0011\u0007ÐU·<.2ïÅ4<k÷\u0012\u0017\u0007:¼k\n\"z¡0á\"°aù³s ïÒîµ«x>Ìn7\nmu0q°ññ&É&ÉöW:Ù\u0016Y\u00130Y\u001c0ª/§¯²ª°¨±©±)zê-õhLÌE×ÉÆEÓWuJxLárø6Ãî/î¸Ê.õ\u0005u(üEÏô8ö= \u00006ð6p\"}ö\u0017IÑP\u000føàC\u0015ó\u0010.]y#©U;l2Í³Hh\u0007«Ö\u0007\flT<ï¹ø¿ýµù½yzÙ\u0011Þ\u0007<Ã\u0018²òr­Î\u0016L\u0013Q\u0019\u0012\u0017K\u0016K\u0018×¼×Àx@w>JTë\u000eDqý¡¹qáXfÍ>wº\u0014Z)ùjÇ.6µ¶Õ;÷\u0004-Ãö?ÒË®L«\u000bN²O°À\u0017=}\fà\fA\u0012Î\u0018\u0014\fn\bÍ\u0000\u000e?=}ÝOýýO\u001eO*\u0010ÉJ¼qyþ\u000bßz\u0007H¡©P?<¬ð&P\u0007= ËáÔÄÖa'k¸é·¬Î§\u0018$p!\u0000!p!ð$Æ\u00061®OI;üî@ÓO;gÓ¬#\u0003ÇÙÿäETìO£$@:³ä(>Ûzí0RHN\u0012\u000b\u0007\u0005=M\t\u0011\u0004\f\b\b\u0010\u0006\u0006\u000e\n\n\u0012R>XþÛz\u001e Ûªöt\\ï£+|½ »XP÷\u0016QVÈû³JºÆ+Y÷9Z}\u001d¥@\u0015¾Ý= ÿcA\u0005Ü'£³æpóCè\u0001A^5£Ë)öt[zçHÍÞQá!+£³æp\u001eq\u0006\u0005E\u0015'¨Zá\u0015ª2{ürÞn¬£ÔwYßÛä\u001b\\7TÃa\"\u0002yR\u0016SIbâmiÖZñµ\u001e=M\u001d\u0005\u000b£\u00022\u001c]ÑqøG}Ò`});\n\nvar HEAP8, HEAP16, HEAP32, HEAPU8, HEAPU16, HEAPU32, HEAPF32, HEAPF64, wasmMemory;\n\nfunction updateMemoryViews() {\n var b = wasmMemory.buffer;\n HEAP8 = new Int8Array(b);\n HEAP16 = new Int16Array(b);\n HEAPU8 = new Uint8Array(b);\n HEAPU16 = new Uint16Array(b);\n HEAP32 = new Int32Array(b);\n HEAPU32 = new Uint32Array(b);\n HEAPF32 = new Float32Array(b);\n HEAPF64 = new Float64Array(b);\n}\n\nfunction JS_cos(x) {\n return Math.cos(x);\n}\n\nfunction JS_exp(x) {\n return Math.exp(x);\n}\n\nvar _emscripten_memcpy_js = (dest, src, num) => HEAPU8.copyWithin(dest, src, src + num);\n\nvar abortOnCannotGrowMemory = requestedSize => {\n abort(\"OOM\");\n};\n\nvar _emscripten_resize_heap = requestedSize => {\n var oldSize = HEAPU8.length;\n requestedSize >>>= 0;\n abortOnCannotGrowMemory(requestedSize);\n};\n\nvar wasmImports = {\n /** @export */ b: JS_cos,\n /** @export */ a: JS_exp,\n /** @export */ c: _emscripten_memcpy_js,\n /** @export */ d: _emscripten_resize_heap\n};\n\nfunction initRuntime(wasmExports) {\n wasmExports[\"f\"]();\n}\n\nvar imports = {\n \"a\": wasmImports\n};\n\nvar _opus_frame_decoder_create, _malloc, _opus_frame_decode_float_deinterleaved, _opus_frame_decoder_destroy, _free;\n\n\nthis.setModule = (data) => {\n  WASMAudioDecoderCommon.setModule(EmscriptenWASM, data);\n};\n\nthis.getModule = () =>\n  WASMAudioDecoderCommon.getModule(EmscriptenWASM);\n\nthis.instantiate = () => {\n  this.getModule().then((wasm) => WebAssembly.instantiate(wasm, imports)).then((instance) => {\n    const wasmExports = instance.exports;\n _opus_frame_decoder_create = wasmExports[\"g\"];\n _malloc = wasmExports[\"h\"];\n _opus_frame_decode_float_deinterleaved = wasmExports[\"i\"];\n _opus_frame_decoder_destroy = wasmExports[\"j\"];\n _free = wasmExports[\"k\"];\n wasmMemory = wasmExports[\"e\"];\n updateMemoryViews();\n initRuntime(wasmExports);\n ready();\n});\n\nthis.ready = new Promise(resolve => {\n ready = resolve;\n}).then(() => {\n this.HEAP = wasmMemory.buffer;\n this.malloc = _malloc;\n this.free = _free;\n this.opus_frame_decoder_create = _opus_frame_decoder_create;\n this.opus_frame_decode_float_deinterleaved = _opus_frame_decode_float_deinterleaved;\n this.opus_frame_decoder_destroy = _opus_frame_decoder_destroy;\n});\nreturn this;\n}}","/* eslint-disable */\r\nimport { WASMAudioDecoderCommon } from \"./WASMAudioDecoderCommon.js\";\r\nimport EmscriptenWASM from \"./EmscriptenWasm.js\";\r\n\r\nexport function OpusDecoder(options = {}) {\r\n  // static properties\r\n  if (!OpusDecoder.errors) {\r\n    // prettier-ignore\r\n    Object.defineProperties(OpusDecoder, {\r\n      errors: {\r\n        value: new Map([\r\n          [-1, \"OPUS_BAD_ARG: One or more invalid/out of range arguments\"],\r\n          [-2, \"OPUS_BUFFER_TOO_SMALL: Not enough bytes allocated in the buffer\"],\r\n          [-3, \"OPUS_INTERNAL_ERROR: An internal error was detected\"],\r\n          [-4, \"OPUS_INVALID_PACKET: The compressed data passed is corrupted\"],\r\n          [-5, \"OPUS_UNIMPLEMENTED: Invalid/unsupported request number\"],\r\n          [-6, \"OPUS_INVALID_STATE: An encoder or decoder structure is invalid or already freed\"],\r\n          [-7, \"OPUS_ALLOC_FAIL: Memory allocation has failed\"],\r\n        ]),\r\n      },\r\n    });\r\n  }\r\n\r\n  // injects dependencies when running as a web worker\r\n  // async\r\n  this._init = () =>\r\n    new this._WASMAudioDecoderCommon(this)\r\n      .instantiate(this._EmscriptenWASM, this._module)\r\n      .then((common) => {\r\n        this._common = common;\r\n\r\n        this._inputBytes = 0;\r\n        this._outputSamples = 0;\r\n        this._frameNumber = 0;\r\n\r\n        this._input = this._common.allocateTypedArray(\r\n          this._inputSize,\r\n          Uint8Array,\r\n        );\r\n\r\n        this._output = this._common.allocateTypedArray(\r\n          this._outputChannels * this._outputChannelSize,\r\n          Float32Array,\r\n        );\r\n\r\n        const mapping = this._common.allocateTypedArray(\r\n          this._channels,\r\n          Uint8Array,\r\n        );\r\n\r\n        mapping.buf.set(this._channelMappingTable);\r\n\r\n        this._decoder = this._common.wasm.opus_frame_decoder_create(\r\n          this._sampleRate,\r\n          this._channels,\r\n          this._streamCount,\r\n          this._coupledStreamCount,\r\n          mapping.ptr,\r\n          this._preSkip,\r\n          this._forceStereo,\r\n        );\r\n      });\r\n\r\n  Object.defineProperty(this, \"ready\", {\r\n    enumerable: true,\r\n    get: () => this._ready,\r\n  });\r\n\r\n  // async\r\n  this.reset = () => {\r\n    this.free();\r\n    return this._init();\r\n  };\r\n\r\n  this.free = () => {\r\n    this._common.free();\r\n    this._common.wasm.opus_frame_decoder_destroy(this._decoder);\r\n    this._common.wasm.free(this._decoder);\r\n  };\r\n\r\n  this._decode = (opusFrame) => {\r\n    if (!(opusFrame instanceof Uint8Array))\r\n      throw Error(\r\n        \"Data to decode must be Uint8Array. Instead got \" + typeof opusFrame,\r\n      );\r\n\r\n    this._input.buf.set(opusFrame);\r\n\r\n    let samplesDecoded =\r\n      this._common.wasm.opus_frame_decode_float_deinterleaved(\r\n        this._decoder,\r\n        this._input.ptr,\r\n        opusFrame.length,\r\n        this._output.ptr,\r\n      );\r\n\r\n    let error;\r\n\r\n    if (samplesDecoded < 0) {\r\n      error =\r\n        \"libopus \" +\r\n        samplesDecoded +\r\n        \" \" +\r\n        (OpusDecoder.errors.get(samplesDecoded) || \"Unknown Error\");\r\n\r\n      console.error(error);\r\n      samplesDecoded = 0;\r\n    }\r\n\r\n    return {\r\n      outputBuffer: this._common.getOutputChannels(\r\n        this._output.buf,\r\n        this._outputChannels,\r\n        samplesDecoded,\r\n      ),\r\n      samplesDecoded: samplesDecoded,\r\n      error: error,\r\n    };\r\n  };\r\n\r\n  this.decodeFrame = (opusFrame) => {\r\n    let errors = [];\r\n\r\n    const decoded = this._decode(opusFrame);\r\n\r\n    if (decoded.error)\r\n      this._common.addError(\r\n        errors,\r\n        decoded.error,\r\n        opusFrame.length,\r\n        this._frameNumber,\r\n        this._inputBytes,\r\n        this._outputSamples,\r\n      );\r\n\r\n    this._frameNumber++;\r\n    this._inputBytes += opusFrame.length;\r\n    this._outputSamples += decoded.samplesDecoded;\r\n\r\n    return this._WASMAudioDecoderCommon.getDecodedAudioMultiChannel(\r\n      errors,\r\n      [decoded.outputBuffer],\r\n      this._outputChannels,\r\n      decoded.samplesDecoded,\r\n      this._sampleRate,\r\n    );\r\n  };\r\n\r\n  this.decodeFrames = (opusFrames) => {\r\n    let outputBuffers = [],\r\n      errors = [],\r\n      samplesDecoded = 0,\r\n      i = 0;\r\n\r\n    while (i < opusFrames.length) {\r\n      const opusFrame = opusFrames[i++];\r\n      const decoded = this._decode(opusFrame);\r\n\r\n      outputBuffers.push(decoded.outputBuffer);\r\n      samplesDecoded += decoded.samplesDecoded;\r\n\r\n      if (decoded.error)\r\n        this._common.addError(\r\n          errors,\r\n          decoded.error,\r\n          opusFrame.length,\r\n          this._frameNumber,\r\n          this._inputBytes,\r\n          this._outputSamples,\r\n        );\r\n\r\n      this._frameNumber++;\r\n      this._inputBytes += opusFrame.length;\r\n      this._outputSamples += decoded.samplesDecoded;\r\n    }\r\n\r\n    return this._WASMAudioDecoderCommon.getDecodedAudioMultiChannel(\r\n      errors,\r\n      outputBuffers,\r\n      this._outputChannels,\r\n      samplesDecoded,\r\n      this._sampleRate,\r\n    );\r\n  };\r\n\r\n  // injects dependencies when running as a web worker\r\n  this._isWebWorker = OpusDecoder.isWebWorker;\r\n  this._WASMAudioDecoderCommon =\r\n    OpusDecoder.WASMAudioDecoderCommon || WASMAudioDecoderCommon;\r\n  this._EmscriptenWASM = OpusDecoder.EmscriptenWASM || EmscriptenWASM;\r\n  this._module = OpusDecoder.module;\r\n\r\n  const MAX_FORCE_STEREO_CHANNELS = 8;\r\n  const isNumber = (param) => typeof param === \"number\";\r\n\r\n  const sampleRate = options.sampleRate;\r\n  const channels = options.channels;\r\n  const streamCount = options.streamCount;\r\n  const coupledStreamCount = options.coupledStreamCount;\r\n  const channelMappingTable = options.channelMappingTable;\r\n  const preSkip = options.preSkip;\r\n  const forceStereo = options.forceStereo ? 1 : 0;\r\n\r\n  // channel mapping family >= 1\r\n  if (\r\n    channels > 2 &&\r\n    (!isNumber(streamCount) ||\r\n      !isNumber(coupledStreamCount) ||\r\n      !Array.isArray(channelMappingTable))\r\n  ) {\r\n    throw new Error(\"Invalid Opus Decoder Options for multichannel decoding.\");\r\n  }\r\n\r\n  // libopus sample rate\r\n  this._sampleRate = [8e3, 12e3, 16e3, 24e3, 48e3].includes(sampleRate)\r\n    ? sampleRate\r\n    : 48000;\r\n\r\n  // channel mapping family 0\r\n  this._channels = isNumber(channels) ? channels : 2;\r\n  this._streamCount = isNumber(streamCount) ? streamCount : 1;\r\n  this._coupledStreamCount = isNumber(coupledStreamCount)\r\n    ? coupledStreamCount\r\n    : this._channels - 1;\r\n  this._channelMappingTable =\r\n    channelMappingTable || (this._channels === 2 ? [0, 1] : [0]);\r\n  this._preSkip = preSkip || 0;\r\n\r\n  this._forceStereo =\r\n    channels <= MAX_FORCE_STEREO_CHANNELS && channels != 2 ? forceStereo : 0;\r\n\r\n  this._inputSize = 32000 * 0.12 * this._channels; // 256kbs per channel\r\n  this._outputChannelSize = 120 * 48;\r\n  this._outputChannels = this._forceStereo ? 2 : this._channels;\r\n\r\n  this._ready = this._init();\r\n\r\n  return this;\r\n}","export default function clamp(v: number, min: number, max: number): number {\r\n  return Math.min(max, Math.max(min, v));\r\n}\r\n","import type {OpusDecodedAudio} from '../../vendor/opus';\r\nimport type {GroupCallRtmpState} from '../appManagers/appGroupCallsManager';\r\nimport type {VideoStreamInfo} from '../calls/videoStreamInfo';\r\nimport {InputGroupCall} from '../../layer';\r\nimport {DcId} from '../../types';\r\nimport {RTMP_UNIFIED_CHANNEL_ID, RTMP_UNIFIED_QUALITY} from '../calls/constants';\r\nimport {Fmp4InitChunkInfo, generateFmp4Init, generateFmp4Segment} from '../rtmp/fmp4';\r\nimport ISOBoxer from '../rtmp/isoboxer';\r\nimport {serviceMessagePort, log, invokeVoidAll} from './index.service';\r\nimport bigInt from 'big-integer';\r\nimport {IS_SAFARI} from '../../environment/userAgent';\r\nimport {OpusDecoder} from '../../vendor/opus';\r\nimport deferredPromise from '../../helpers/cancellablePromise';\r\nimport {logger} from '../logger';\r\nimport assumeType from '../../helpers/assumeType';\r\nimport clamp from '../../helpers/number/clamp';\r\nimport pause from '../../helpers/schedulers/pause';\r\nimport {ActiveAccountNumber} from '../accounts/types';\r\nimport {getCurrentAccountFromURL} from '../accounts/getCurrentAccountFromURL';\r\n\r\nconst ctx = self as any as ServiceWorkerGlobalScope;\r\n\r\nconst pendingStreams: Map<string, RtmpStream> = new Map();\r\n(ctx as any).pendingStreams = pendingStreams;\r\n// сафари прекрасный браузер - перезагружает плейлист даже после ENDLIST\r\n// костыль чтобы не было проблем с перезагрузкой мертвого стрима\r\nconst lastKnownTime = new Map<Long, bigInt.BigInteger>();\r\nconst floodRelease = new Map<Long, number>();\r\n\r\nconst BUFFER_MS_MIN = 8000;\r\nconst BUFFER_MS_MAX = 10000;\r\nconst BUFFER_MS_START = 5000;\r\nconst OFFSET_MS = 1000;\r\n\r\n// seconds to consider stream to be still alive when using hls\r\n// (since the last time manifest was requested)\r\nconst HLS_TIMEOUT = 30000;\r\n// seconds to consider stream to be still alive when using fmp4 streaming\r\n// (since the last controller has died)\r\nconst STREAM_TIMEOUT = 5000;\r\n\r\nconst MP4_MIME = 'video/mp4';\r\nconst HLS_MIME = 'application/vnd.apple.mpegurl';\r\n\r\nfunction scaleToTime(scale: number) {\r\n  if(scale < 0) return 1000 << -scale;\r\n  return 1000 >> scale;\r\n}\r\n\r\ninterface BufferedChunk {\r\n  time: bigInt.BigInteger;\r\n  seq?: number;\r\n  iso?: any;\r\n  segment?: Uint8Array;\r\n}\r\ntype HlsWaiter = (chunk?: Uint8Array) => void;\r\n\r\nclass RtmpStream {\r\n  private _generation = 0;\r\n  private _retryCount = 0;\r\n  private _destroyed = false;\r\n\r\n  private _controllers = new Set<ReadableStreamDefaultController<Uint8Array>>();\r\n  private _waitingForBuffer = new Set<ReadableStreamDefaultController<Uint8Array>>();\r\n\r\n  private _deadTimeout?: number;\r\n  private _timeouts = new Set<number>();\r\n\r\n  private _hlsWaitingForBuffer: HlsWaiter[] = [];\r\n  private _hlsWaitingForChunk = new Map<number, HlsWaiter[]>();\r\n  private _pendingRejects: ((error: any) => void)[] = [];\r\n\r\n  private _opusDecoder?: OpusDecoder;\r\n\r\n  private _time: bigInt.BigInteger;\r\n  private _cutoff: bigInt.BigInteger;\r\n  private _lastFlushedTime: bigInt.BigInteger;\r\n  private _lastRequestedTime: bigInt.BigInteger;\r\n\r\n  private _scale: number;\r\n  private _chunkTime: number;\r\n  private _buffer: BufferedChunk[];\r\n  private _bufferSize: number;\r\n  private _dcId: DcId;\r\n\r\n  private _clock: number;\r\n\r\n  private _initChunk?: Fmp4InitChunkInfo;\r\n  private _lastChunkSeq: number;\r\n\r\n  private _replenishTempId: number;\r\n  private _lastReplenishingPromise: Promise<void>;\r\n\r\n  private _rtts: number[];\r\n\r\n  private _decoderInitPromise?: Promise<void>;\r\n\r\n  private _log: ReturnType<typeof logger>;\r\n\r\n  constructor(readonly call: InputGroupCall.inputGroupCall, readonly accountNumber: ActiveAccountNumber) {\r\n    this.decodeOpus = this.decodeOpus.bind(this);\r\n    this._log = logger('RTMP-' + (Date.now() + '').slice(-2));\r\n    this._log('constructor', call.id);\r\n  }\r\n\r\n  private updateRtt(rtt: number) {\r\n    if(this._rtts.push(rtt) > 10) {\r\n      this._rtts.shift();\r\n    }\r\n  }\r\n\r\n  private maybeAdjustBufferSize() {\r\n    if(this._rtts.length < 3) return;\r\n\r\n    const log = this._log.bindPrefix('maybeAdjustBufferSize');\r\n\r\n    const avgRtt = this._rtts.reduce((a, b) => a + b, 0) / this._rtts.length;\r\n    const targetBufferSize = Math.ceil(clamp(avgRtt * 3, BUFFER_MS_MIN, BUFFER_MS_MAX) / this._chunkTime);\r\n\r\n    log(`avg rtt=${avgRtt} target buffer size=${targetBufferSize}`);\r\n\r\n    if(targetBufferSize !== this._bufferSize) {\r\n      const diff = targetBufferSize - this._bufferSize;\r\n      this._cutoff = this._cutoff.minus(this._chunkTime * diff);\r\n      this._bufferSize = targetBufferSize;\r\n      log(`adjusted buffer size to ${targetBufferSize}`);\r\n    }\r\n  }\r\n\r\n  private async processChunk(iso: any, seq: number) {\r\n    if(!iso) return new Uint8Array(0);\r\n    return generateFmp4Segment({\r\n      chunk: iso,\r\n      seq: seq,\r\n      timestamp: bigInt(seq).multiply(this._chunkTime),\r\n      opusTrackId: this._initChunk.opusTrackId,\r\n      decodeOpus: IS_SAFARI && this.decodeOpus\r\n    });\r\n  }\r\n\r\n  private async fetchChunk(time: bigInt.BigInteger, ignoreRequestedTime?: boolean) {\r\n    const log = this._log.bindPrefix('fetchChunk-' + time.toString());\r\n    if(time.isNegative()) {\r\n      // chunk does not exist (e.g. stream has just started)\r\n      log.warn('negative time');\r\n      return;\r\n    }\r\n    if(!ignoreRequestedTime && this._lastRequestedTime !== undefined && time.lesserOrEquals(this._lastRequestedTime)) {\r\n      // this chunk was already fetched, likely due to resync\r\n      log.warn('last requested time is greater or equals', this._lastRequestedTime.toString());\r\n      return;\r\n    }\r\n\r\n    this._lastRequestedTime = time;\r\n    log(`starting fetch time=${time}`);\r\n    const now = Date.now();\r\n    const info = await serviceMessagePort.invoke('requestRtmpPart', {\r\n      dcId: this._dcId,\r\n      accountNumber: this.accountNumber,\r\n      request: {\r\n        _: 'inputGroupCallStream',\r\n        call: this.call,\r\n        time_ms: time.toString(),\r\n        scale: this._scale,\r\n        video_channel: RTMP_UNIFIED_CHANNEL_ID,\r\n        video_quality: RTMP_UNIFIED_QUALITY\r\n      }\r\n    });\r\n    const rtt = Date.now() - now;\r\n    this.updateRtt(rtt);\r\n    log(`ended fetch time=${time}, rtt=${rtt}`);\r\n\r\n    // empty chunk (e.g. stream has just started)\r\n    if(!info) {\r\n      log.warn('no bytes');\r\n      return;\r\n    }\r\n\r\n    if(info.container !== 'mp4') {\r\n      throw new Error('Invalid container');\r\n    }\r\n\r\n    const iso = ISOBoxer.parseBuffer(info.bytes.slice(info.contentOffset).buffer);\r\n    return iso;\r\n  }\r\n\r\n  private async generateInitChunk(iso: any) {\r\n    if(this._initChunk) {\r\n      return;\r\n    }\r\n\r\n    this._initChunk = generateFmp4Init(iso, {\r\n      opusToFlac: IS_SAFARI\r\n    });\r\n    if(this._initChunk.opusInitOptions) {\r\n      await this.initOpusDecoder();\r\n    }\r\n    this._retryCount = 0;\r\n  }\r\n\r\n  private async initOpusDecoder(ignoreExisting = false) {\r\n    if(this._decoderInitPromise) {\r\n      await this._decoderInitPromise;\r\n      return;\r\n    }\r\n\r\n    this._log('creating opus decoder');\r\n    if(this._opusDecoder !== undefined && !ignoreExisting) {\r\n      this._opusDecoder.free();\r\n    }\r\n    const decoder = new OpusDecoder(this._initChunk.opusInitOptions);\r\n    this._decoderInitPromise = decoder.ready;\r\n    await this._decoderInitPromise;\r\n    this._opusDecoder = decoder;\r\n    this._log('opus decoder created');\r\n  }\r\n\r\n  private async decodeOpus(chunk: Uint8Array): Promise<OpusDecodedAudio> {\r\n    if(this._opusDecoder === undefined) {\r\n      await this.initOpusDecoder();\r\n    }\r\n\r\n    return this._opusDecoder.decodeFrame(chunk);\r\n  }\r\n\r\n  private hasEnoughBuffer() {\r\n    return !!this._initChunk && this._bufferSize && this._buffer.some((chunk) => !!chunk.segment);\r\n  }\r\n\r\n  private sendBufferToController(controller: ReadableStreamDefaultController<Uint8Array>) {\r\n    this._log('sending buffer to controller');\r\n    controller.enqueue(this._initChunk.data);\r\n    for(const chunk of this._buffer) {\r\n      if(!chunk.segment) break;\r\n      controller.enqueue(chunk.segment);\r\n    }\r\n  }\r\n\r\n  private removeStaleChunks() {\r\n    do {\r\n      const chunk = this._buffer[0];\r\n      if(chunk && chunk.time.lt(this._cutoff)) {\r\n        this._buffer.shift();\r\n        this._log('removing stale chunk', chunk.time.toString());\r\n      } else {\r\n        break;\r\n      }\r\n    } while(true);\r\n  }\r\n\r\n  private async _replenishBuffer(maxChunks: number = 1, lastReplenishingPromise = this._lastReplenishingPromise): Promise<void> {\r\n    const log = this._log.bindPrefix('replenishBuffer-' + this._replenishTempId++);\r\n    this.removeStaleChunks();\r\n\r\n    const thisGeneration = this._generation;\r\n\r\n    // fetch upcoming chunks\r\n    const chunksToFetch = clamp(this._bufferSize - this._buffer.length, 0, maxChunks);\r\n    if(!chunksToFetch) {\r\n      log('skipping replenish - buffer full');\r\n      return;\r\n    }\r\n\r\n    const shouldSkip = () => this._destroyed || this._generation !== thisGeneration;\r\n    const lastBufferedChunkTime = this._lastRequestedTime;\r\n    const tasks: Promise<BufferedChunk>[] = [];\r\n\r\n    log(`replenishing buffer chunksToFetch=${chunksToFetch} lastBufferedChunkTime=${lastBufferedChunkTime} bufferLength=${this._buffer.length}`);\r\n\r\n    for(let i = 1; i <= chunksToFetch; ++i) {\r\n      const nextTime = lastBufferedChunkTime.add(this._chunkTime * i);\r\n      const chunk: BufferedChunk = {time: nextTime};\r\n      this._buffer.push(chunk);\r\n\r\n      const fetchChunk = async(ignoreRequestedTime?: boolean): Promise<BufferedChunk> => {\r\n        try {\r\n          chunk.iso = await this.fetchChunk(nextTime, ignoreRequestedTime);\r\n        } catch(e) {\r\n          assumeType<ApiError>(e);\r\n          log('error', e.type, nextTime.toString());\r\n\r\n          const retry = async(delay: number) => {\r\n            await pause(delay);\r\n            if(shouldSkip()) return;\r\n            return fetchChunk(true);\r\n          };\r\n\r\n          if(e.type === 'TIME_TOO_BIG') { // * can happen when we're ahead or the stream is ended\r\n            if(ignoreRequestedTime) { // * we already tried to refetch it\r\n              throw new Error('stream ended');\r\n            }\r\n\r\n            const state = await this.fetchState();\r\n            if(shouldSkip()) return;\r\n            const channel = this.findChannel(state); // * will throw an error if channel not found\r\n            const delay = nextTime.minus(bigInt(channel.last_timestamp_ms as number)).add(this._chunkTime).toJSNumber();\r\n            if(delay < 0) {\r\n              throw new Error('stream ended');\r\n            }\r\n\r\n            return retry(delay);\r\n          }/*  else if(e.type.startsWith('FLOOD_WAIT_')) {\r\n            const wait = +e.type.split('_').pop();\r\n            if(wait > 10) {\r\n              throw e;\r\n            }\r\n\r\n            return retry(wait * 1000);\r\n          } */ else {\r\n            throw e;\r\n          }\r\n        }\r\n        return chunk;\r\n      };\r\n\r\n      tasks.push(fetchChunk());\r\n    }\r\n\r\n    let newChunks = await Promise.all(tasks);\r\n\r\n    if(shouldSkip()) return; // resync happened while we were fetching\r\n\r\n    this.maybeAdjustBufferSize();\r\n\r\n    // * wait for previous requests to flush if got new chunk faster\r\n    await lastReplenishingPromise;\r\n    if(shouldSkip()) return;\r\n\r\n    // remove any chunks that are now too old\r\n    newChunks = newChunks.filter((chunk) => chunk.time.gt(this._lastFlushedTime));\r\n    if(!newChunks.length) {\r\n      log.warn('skipping flush - no new chunks');\r\n      return;\r\n    }\r\n\r\n    if(this._lastFlushedTime.notEquals(bigInt.zero) &&\r\n      newChunks[0].time.minus(this._lastFlushedTime).notEquals(this._chunkTime)) {\r\n      log.error(`chunks are not continuous, lastFlushed=${this._lastFlushedTime.toString()}, newChunks=${newChunks[0].time.toString()}`);\r\n    }\r\n\r\n    this._lastFlushedTime = newChunks[newChunks.length - 1].time;\r\n\r\n    newChunks = newChunks.filter((chunk) => {\r\n      if(!chunk.iso) {\r\n        this._log.error('empty chunk?', chunk);\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n\r\n    if(IS_SAFARI) {\r\n      // notify pending manifests\r\n      for(const waiter of this._hlsWaitingForBuffer) {\r\n        waiter();\r\n      }\r\n      this._hlsWaitingForBuffer.length = 0;\r\n\r\n      // notify pending chunks\r\n      for(const chunk of newChunks) {\r\n        await this.prepareChunkForFlushing(chunk);\r\n\r\n        const waiters = this._hlsWaitingForChunk.get(chunk.seq) || [];\r\n        this._hlsWaitingForChunk.delete(chunk.seq);\r\n        log(`sending chunk to waiters time=${chunk.time} seq=${chunk.seq}`);\r\n\r\n        for(const waiter of waiters) {\r\n          waiter(chunk.segment);\r\n        }\r\n      }\r\n    } else {\r\n      // notify active controllers\r\n\r\n      for(const chunk of newChunks) {\r\n        await this.prepareChunkForFlushing(chunk);\r\n\r\n        log(`sending chunk to controller time=${chunk.time} seq=${chunk.seq}`);\r\n\r\n        for(const controller of this._controllers) {\r\n          controller.enqueue(chunk.segment);\r\n        }\r\n      }\r\n\r\n      // notify new controllers and move them from waiting to active\r\n      for(const controller of this._waitingForBuffer) {\r\n        this.sendBufferToController(controller);\r\n        this._controllers.add(controller);\r\n      }\r\n      this._waitingForBuffer.clear();\r\n    }\r\n\r\n    log('buffer replenished');\r\n  }\r\n\r\n  private replenishBuffer(...args: Parameters<RtmpStream['_replenishBuffer']>): Promise<void> {\r\n    const lastReplenishingPromise = this._lastReplenishingPromise;\r\n    const promise = this._lastReplenishingPromise = (async() => {\r\n      const originalPromise = this._replenishBuffer(...args);\r\n      try {\r\n        const result = await originalPromise;\r\n        await lastReplenishingPromise;\r\n        return result;\r\n      } catch(err) {\r\n        throw err;\r\n      }\r\n    })();\r\n\r\n    if((this._bufferSize - this._buffer.length) > 0 && this._lastRequestedTime.geq(bigInt.zero)) {\r\n      return Promise.all([promise, this.replenishBuffer()]).then(() => {});\r\n    }\r\n\r\n    return promise;\r\n  }\r\n\r\n  private async prepareChunkForFlushing(chunk: BufferedChunk) {\r\n    if(!this._initChunk) {\r\n      this._log(`will add init chunk to time=${chunk.time.toString()}`);\r\n      await this.generateInitChunk(chunk.iso);\r\n    }\r\n\r\n    const seq = this._lastChunkSeq++;\r\n    chunk.seq = seq;\r\n    chunk.segment = await this.processChunk(chunk.iso, seq);\r\n  }\r\n\r\n  private async fetchState() {\r\n    const promise = deferredPromise<GroupCallRtmpState>()\r\n    let retries = 0;\r\n    let timeout: number;\r\n\r\n    const retry = () => {\r\n      if(retries > 3) {\r\n        promise.reject(new Error('Failed to fetch state'));\r\n        return;\r\n      }\r\n\r\n      if(timeout) {\r\n        clearTimeout(timeout);\r\n        this._timeouts.delete(timeout);\r\n      }\r\n\r\n      timeout = ctx.setTimeout(() => {\r\n        retries++;\r\n        retry();\r\n      }, 1000);\r\n      this._timeouts.add(timeout);\r\n\r\n      serviceMessagePort.invoke('requestRtmpState', {\r\n        call: this.call,\r\n        accountNumber: this.accountNumber\r\n      }).then((state) => {\r\n        clearTimeout(timeout);\r\n        promise.resolve(state);\r\n      }).catch((e) => {\r\n        this._log.error('error fetching state', e);\r\n        retries++;\r\n        retry();\r\n      });\r\n    }\r\n\r\n    retry();\r\n\r\n    return promise;\r\n  }\r\n\r\n  private clearClock() {\r\n    clearInterval(this._clock);\r\n    this._clock = undefined;\r\n  }\r\n\r\n  private setClock() {\r\n    const log = this._log.bindPrefix('clock');\r\n    const clock = this._clock = ctx.setInterval(() => {\r\n      this._time = this._time.add(this._chunkTime);\r\n      this._cutoff = this._cutoff.add(this._chunkTime);\r\n      this.notifyTime();\r\n\r\n      log(`tick ts=${this._time.toString()} cutoff=${this._cutoff.toString()}`);\r\n\r\n      this.replenishBuffer().catch((e) => {\r\n        if(this._destroyed || this._clock !== clock) return;\r\n\r\n        log.error('error replenishing buffer', e);\r\n\r\n        // if there's still some buffer, we can ignore this error and keep going\r\n        if(!this._buffer.some((it) => it.segment)) {\r\n          this.handleError(e);\r\n        }\r\n      });\r\n    }, this._chunkTime);\r\n  }\r\n\r\n  private findChannel(state: GroupCallRtmpState) {\r\n    const channel = state.channels.find((channel) => channel.channel === RTMP_UNIFIED_CHANNEL_ID);\r\n    if(!channel) {\r\n      log.error('no unified channel found', state);\r\n      throw new Error('No unified channel found');\r\n    }\r\n\r\n    return channel;\r\n  }\r\n\r\n  private async _start(): Promise<void> {\r\n    const log = this._log.bindPrefix('start');\r\n    log(`starting ${this.call.id} generation ${this._generation} -> ${this._generation + 1}`, this);\r\n    this.clearClock();\r\n    this._initChunk = undefined;\r\n    this._lastChunkSeq = 0;\r\n    this._buffer = [];\r\n    this._lastFlushedTime = bigInt.zero;\r\n    // this._lastRequestedTime = undefined;\r\n    this._replenishTempId = 0;\r\n    this._lastReplenishingPromise = Promise.resolve();\r\n    this._rtts = [];\r\n    const generation = ++this._generation;\r\n    const check = () => this._generation === generation && !this._destroyed;\r\n\r\n    const [state] = await Promise.all([\r\n      this.fetchState(),\r\n      floodRelease.get(this.call.id) && pause(Math.max(0, floodRelease.get(this.call.id) - Date.now()))\r\n    ]);\r\n    if(!check()) return;\r\n\r\n    floodRelease.delete(this.call.id);\r\n\r\n    // state.channels = [{\r\n    //   '_': 'groupCallStreamChannel',\r\n    //   'channel': 0,\r\n    //   'scale': 0,\r\n    //   'last_timestamp_ms': 0\r\n    // }];\r\n\r\n    const channel = this.findChannel(state);\r\n\r\n    log(`started, last_ts=${channel.last_timestamp_ms}, scale=${channel.scale}`);\r\n    this._time = bigInt(channel.last_timestamp_ms as number).minus(OFFSET_MS);\r\n    this._lastRequestedTime = this._time;\r\n    if(IS_SAFARI) {\r\n      const lastKnown = lastKnownTime.get(this.call.id);\r\n      if(lastKnown && lastKnown.gt(this._time)) {\r\n        this._time = lastKnown;\r\n      }\r\n    }\r\n\r\n    this._cutoff = this._time.minus(BUFFER_MS_MIN);\r\n    // this._lastRequestedTime = this._cutoff;\r\n    this._scale = channel.scale;\r\n    this._chunkTime = scaleToTime(this._scale);\r\n    this._bufferSize = Math.ceil(BUFFER_MS_MIN / this._chunkTime);\r\n    this._dcId = state.dcId;\r\n\r\n    this.notifyTime();\r\n\r\n    this.setClock();\r\n\r\n    await this.replenishBuffer(Math.ceil(BUFFER_MS_START / this._chunkTime));\r\n  }\r\n\r\n  private start() {\r\n    this._start().catch((e: unknown) => this.handleError(e));\r\n  }\r\n\r\n  private notifyTime() {\r\n    if(IS_SAFARI) {\r\n      lastKnownTime.set(this.call.id, this._time);\r\n    }\r\n\r\n    invokeVoidAll('rtmpStreamTime', {\r\n      callId: this.call.id,\r\n      time: this._time.toString()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @returns whether the request should be retried\r\n   */\r\n  private handleError(error: any): boolean {\r\n    if(this._destroyed) return false;\r\n    const log = this._log.bindPrefix('handleError');\r\n\r\n    if(typeof(error) === 'object' && error && typeof(error.type) === 'string') {\r\n      assumeType<ApiError>(error);\r\n      if(error.type.startsWith('FLOOD_WAIT')) {\r\n        const wait = +error.type.split('_').pop();\r\n        floodRelease.set(this.call.id, Date.now() + wait * 1000);\r\n        this.start();\r\n        return true;\r\n      }\r\n\r\n      if(error.type === 'TIME_TOO_SMALL' || error.type === 'TIME_INVALID') {\r\n        log('rtmp stream need resync', error);\r\n        this.start();\r\n        return true;\r\n      }\r\n\r\n      if((\r\n        error.type === 'GROUPCALL_FORBIDDEN' ||\r\n        error.type === 'VIDEO_CHANNEL_INVALID'\r\n      ) && this._retryCount < 3) {\r\n        log('retrying rtmp stream', error);\r\n        this._retryCount += 1;\r\n        this.start();\r\n        return true;\r\n      }\r\n    }\r\n\r\n    log('rtmp stream error', error);\r\n    this.destroy(error);\r\n  }\r\n\r\n  public destroy = (error = new Error('destroyed')) => {\r\n    this._log('destroying rtmp stream', error);\r\n    pendingStreams.delete(this.call.id as string);\r\n    this.clearClock();\r\n    this.clearDeadTimeout();\r\n    for(const timeout of this._timeouts) {\r\n      clearTimeout(timeout);\r\n    }\r\n    if(this._opusDecoder !== undefined) {\r\n      this._opusDecoder.free();\r\n    }\r\n    for(const controller of this._controllers) {\r\n      controller.close();\r\n    }\r\n    for(const controller of this._waitingForBuffer) {\r\n      controller.close();\r\n    }\r\n    for(const reject of this._pendingRejects) {\r\n      reject(error);\r\n    }\r\n    this._destroyed = true;\r\n    this._generation = 0;\r\n\r\n    invokeVoidAll('rtmpStreamDestroyed', this.call.id);\r\n  };\r\n\r\n  public createStream() {\r\n    const log = this._log.bindPrefix('createStream');\r\n    let controller_: ReadableStreamDefaultController;\r\n    return new ReadableStream({\r\n      start: (controller) => {\r\n        log(`added rtmp stream controller call=${this.call.id} gen=${this._generation} destroyed=${this._destroyed}`);\r\n        controller_ = controller;\r\n\r\n        if(this._generation === 0) {\r\n          this.start();\r\n        }\r\n\r\n        this.clearDeadTimeout();\r\n\r\n        if(this.hasEnoughBuffer()) {\r\n          this.sendBufferToController(controller);\r\n          this._controllers.add(controller);\r\n        } else {\r\n          this._waitingForBuffer.add(controller);\r\n        }\r\n      },\r\n      cancel: () => { // * when tab with stream is closed\r\n        if(this._destroyed) return;\r\n        log('rtmp stream controller died', this.call.id);\r\n        this._controllers.delete(controller_);\r\n        this._waitingForBuffer.delete(controller_);\r\n\r\n        if(!this._controllers.size) {\r\n          this.setDeadTimeout(this.destroy, STREAM_TIMEOUT);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private clearDeadTimeout() {\r\n    if(this._deadTimeout) {\r\n      clearTimeout(this._deadTimeout);\r\n      this._deadTimeout = undefined;\r\n    }\r\n  }\r\n\r\n  private setDeadTimeout(callback: () => void, delay: number) {\r\n    this.clearDeadTimeout();\r\n    this._deadTimeout = ctx.setTimeout(callback, delay);\r\n  }\r\n\r\n  private generateHlsPlaylist(baseUrl: string, end = false) {\r\n    const chunkDuration = this._chunkTime / 1000;\r\n    const playlist = [\r\n      '#EXTM3U',\r\n      '#EXT-X-VERSION:7',\r\n      `#EXT-X-TARGETDURATION:${Math.ceil(chunkDuration)}`,\r\n      `#EXT-X-MEDIA-SEQUENCE:${this._buffer[0]?.seq ?? 0}`,\r\n      '#EXT-X-INDEPENDENT-SEGMENTS',\r\n      `#EXT-X-MAP:URI=\"${baseUrl}?hls=init\"`\r\n    ];\r\n\r\n    for(const chunk of this._buffer) {\r\n      if(!chunk.segment) break;\r\n      playlist.push(\r\n        `#EXTINF:${chunkDuration},`,\r\n        `${baseUrl}?hls=${chunk.seq}`\r\n      );\r\n    }\r\n\r\n    if(end) {\r\n      playlist.push('#EXT-X-ENDLIST');\r\n    }\r\n\r\n    return playlist.join('\\n');\r\n  }\r\n\r\n  private onHlsTimeout = () => {\r\n    const log = this._log.bindPrefix('onHlsTimeout');\r\n    log('hls playlist refetch timeout');\r\n    if(this._hlsWaitingForBuffer.length || this._hlsWaitingForChunk.size) {\r\n      log('still active (some fetch is pending)');\r\n      this.setDeadTimeout(this.onHlsTimeout, HLS_TIMEOUT);\r\n      return;\r\n    }\r\n\r\n    log('destroying due to inactivity');\r\n    this.destroy();\r\n  }\r\n\r\n  public async getHlsPlaylist(baseUrl: string): Promise<string> {\r\n    const log = this._log.bindPrefix('getHlsPlaylist');\r\n    log('getting hls playlist');\r\n\r\n    this.setDeadTimeout(this.onHlsTimeout, HLS_TIMEOUT);\r\n\r\n    if(this._generation !== 0) {\r\n      return this.generateHlsPlaylist(baseUrl);\r\n    }\r\n\r\n    this.start();\r\n\r\n    return new Promise<string>((resolve) => {\r\n      const reject = (err: unknown) => {\r\n        log('hls playlist fetch error, returning empty+end', err);\r\n        resolve(this.generateHlsPlaylist(baseUrl, true));\r\n      };\r\n      this._pendingRejects.push(reject);\r\n      this._hlsWaitingForBuffer.push(() => {\r\n        const idx = this._pendingRejects.indexOf(reject);\r\n        if(idx !== -1) {\r\n          this._pendingRejects.splice(idx, 1);\r\n        }\r\n\r\n        resolve(this.generateHlsPlaylist(baseUrl));\r\n      });\r\n    })\r\n  }\r\n\r\n  public getInitChunk() {\r\n    return this._initChunk?.data;\r\n  }\r\n\r\n  public async getHlsChunk(seq: number): Promise<Uint8Array> {\r\n    const log = this._log.bindPrefix('getHlsChunk');\r\n    log('getting hls chunk', seq);\r\n\r\n    const chunk = this._buffer.find((chunk) => chunk.seq === seq);\r\n\r\n    if(chunk && chunk.segment) return chunk.segment;\r\n\r\n    // either we're not ready yet or the chunk is too old\r\n    if(this._buffer.length && seq < this._buffer[0].seq) {\r\n      log('hls chunk to old', seq);\r\n      log(this._buffer);\r\n      return;\r\n    }\r\n\r\n    return new Promise<Uint8Array>((resolve, reject) => {\r\n      const interval = ctx.setInterval(() => {\r\n        if(this._buffer.length && seq < this._buffer[0].seq) {\r\n          // chunk is now too old\r\n          log('hls chunk fetch timeout', seq);\r\n          resolve(undefined);\r\n        }\r\n      }, this._chunkTime ?? 500);\r\n      const rejectWrap = (err: unknown) => {\r\n        clearInterval(interval);\r\n        reject(err);\r\n      };\r\n\r\n      const waiters = this._hlsWaitingForChunk.get(seq) || [];\r\n\r\n      waiters.push((chunk) => {\r\n        const idx = this._pendingRejects.indexOf(rejectWrap);\r\n        if(idx !== -1) {\r\n          this._pendingRejects.splice(idx, 1);\r\n        }\r\n\r\n        clearInterval(interval);\r\n        resolve(chunk);\r\n      });\r\n      this._pendingRejects.push(rejectWrap);\r\n\r\n      this._hlsWaitingForChunk.set(seq, waiters);\r\n    });\r\n  }\r\n}\r\n\r\nasync function getRtmpFetchResponse(event: FetchEvent, params: string, search: string): Promise<Response> {\r\n  const call = JSON.parse(decodeURIComponent(params));\r\n  let pending = pendingStreams.get(call.id);\r\n\r\n  const isHls = search?.startsWith('hls=');\r\n\r\n  // if(pending && !isHls) {\r\n  //   pending.destroy();\r\n  //   pending = undefined;\r\n  // }\r\n\r\n  const client = await ctx.clients.get(event.clientId);\r\n  const accountNumber = getCurrentAccountFromURL(client.url);\r\n\r\n  if(!pending) {\r\n    log('creating rtmp stream', call.id);\r\n    pending = new RtmpStream(call, accountNumber);\r\n    pendingStreams.set(call.id, pending);\r\n  }\r\n\r\n  if(isHls) {\r\n    search = search.split('&t=')[0];\r\n    const baseUrl = event.request.url.split('?')[0];\r\n    const chunk = search.slice(4);\r\n\r\n    if(chunk === 'playlist') {\r\n      return pending.getHlsPlaylist(baseUrl).then((r) => new Response(r, {\r\n        headers: {\r\n          'Content-Type': HLS_MIME\r\n        }\r\n      }));\r\n    }\r\n\r\n    if(chunk === 'init') {\r\n      const init = pending.getInitChunk();\r\n\r\n      if(!init) {\r\n        return new Response('', {status: 404});\r\n      }\r\n\r\n      return new Response(init, {\r\n        headers: {\r\n          'Content-Type': MP4_MIME\r\n        }\r\n      });\r\n    }\r\n\r\n    const seq = Number(chunk);\r\n    if(isNaN(seq)) {\r\n      return new Response('', {status: 404});\r\n    }\r\n\r\n    return pending.getHlsChunk(seq).then((r) => {\r\n      if(!r) {\r\n        return new Response('', {status: 404});\r\n      }\r\n\r\n      return new Response(r, {\r\n        headers: {\r\n          'Content-Type': MP4_MIME\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  return new Response(pending.createStream(), {\r\n    headers: {\r\n      'Content-Type': 'video/mp4'\r\n    }\r\n  });\r\n}\r\n\r\nexport function onRtmpFetch(event: FetchEvent, params: string, search: string) {\r\n  const responsePromise = getRtmpFetchResponse(event, params, search)\r\n  event.respondWith(responsePromise);\r\n}\r\n\r\n\r\nexport function onRtmpLeftCall([callId, forever]: [Long, boolean]) {\r\n  const stream = pendingStreams.get(callId + '');\r\n  if(stream) {\r\n    stream.destroy();\r\n  }\r\n  if(IS_SAFARI && forever) {\r\n    lastKnownTime.delete(callId);\r\n  }\r\n}\r\n","export const get500ErrorResponse = () => new Response('', {\r\n  status: 500,\r\n  statusText: 'Internal Server Error',\r\n  headers: {'Cache-Control': 'no-cache'}\r\n});\r\n","import assumeType from '../../helpers/assumeType';\r\nimport {Document} from '../../layer';\r\nimport {logger} from '../logger';\r\n\r\nexport const QUALITY_FILE_MIME_TYPE = 'application/x-mpegurl';\r\n\r\nexport const ctx = self as any as ServiceWorkerGlobalScope;\r\nexport const log = logger('HLS');\r\nexport const swLog = logger('SW-HLS');\r\n\r\nexport function isDocumentHlsQualityFile(doc: Document | undefined) {\r\n  assumeType<Document.document | undefined>(doc);\r\n  return doc?.mime_type === QUALITY_FILE_MIME_TYPE;\r\n}\r\n","export class RequestSynchronizer<Key, Response> {\r\n  private ongoingRequests = new Map<Key, Promise<Response>>();\r\n\r\n  async performRequest(\r\n    key: Key,\r\n    requestFn: () => Promise<Response>\r\n  ) {\r\n    let request = this.ongoingRequests.get(key);\r\n    if(!request) this.ongoingRequests.set(key, request = requestFn());\r\n\r\n    const result = await request;\r\n    this.ongoingRequests.delete(key);\r\n    return result;\r\n  }\r\n}\r\n","import deferredPromise from '../../helpers/cancellablePromise';\r\n\r\nimport {getCurrentAccountFromURL} from '../accounts/getCurrentAccountFromURL';\r\nimport {ActiveAccountNumber} from '../accounts/types';\r\nimport CacheStorageController from '../files/cacheStorage';\r\nimport {get500ErrorResponse} from '../serviceWorker/errors';\r\nimport {serviceMessagePort} from '../serviceWorker/index.service';\r\n\r\nimport {ctx, swLog} from './common';\r\nimport {RequestSynchronizer} from './requestSynchronizer';\r\n\r\nconst cacheStorage = new CacheStorageController('cachedHlsQualityFiles');\r\nconst requestSynchronizer = new RequestSynchronizer<string, string>();\r\n\r\nexport type HlsStreamUrlParams = {\r\n  docId: string;\r\n  dcId: number;\r\n  size: number;\r\n  mimeType: string;\r\n};\r\n\r\n\r\nexport async function onHlsQualityFileFetch(event: FetchEvent, params: string, search: string) {\r\n  const deferred = deferredPromise<Response>();\r\n  event.respondWith(deferred);\r\n\r\n  try {\r\n    const docId = params;\r\n\r\n    const client = await ctx.clients.get(event.clientId);\r\n    const accountNumber = getCurrentAccountFromURL(client.url);\r\n\r\n    const result = await requestSynchronizer.performRequest(\r\n      getHlsQualityCacheFilename(docId),\r\n      () => fetchAndProcessQualityFile(docId, accountNumber)\r\n    );\r\n\r\n    deferred.resolve(new Response(result));\r\n  } catch(e) {\r\n    deferred.resolve(get500ErrorResponse());\r\n    swLog.error(e);\r\n  }\r\n}\r\n\r\nasync function fetchAndProcessQualityFile(docId: string, accountNumber: ActiveAccountNumber) {\r\n  const file = await getHlsQualityFile(docId, accountNumber);\r\n  const fileString = await file.text();\r\n\r\n\r\n  const replacedContent = await replaceQualityFileWithLocalURLs(fileString, accountNumber);\r\n\r\n  return replacedContent;\r\n}\r\n\r\nfunction getHlsQualityCacheFilename(docId: string) {\r\n  return `hls_quality_${docId}`;\r\n}\r\n\r\nasync function getHlsQualityFile(docId: string, accountNumber: ActiveAccountNumber): Promise<Blob> {\r\n  try {\r\n    // throw '';\r\n    const file = await cacheStorage.getFile(getHlsQualityCacheFilename(docId));\r\n    swLog.info('using cached quality file', docId);\r\n    return file;\r\n  } catch{\r\n    swLog.info('fetching quality file', docId);\r\n    const file = await serviceMessagePort.invoke('downloadDoc', {docId, accountNumber});\r\n    cacheStorage.saveFile(getHlsQualityCacheFilename(docId), file);\r\n    return file;\r\n  }\r\n}\r\n\r\nasync function replaceQualityFileWithLocalURLs(fileString: string, accountNumber: ActiveAccountNumber) {\r\n  const regex = 'mtproto:(\\\\d+)';\r\n\r\n  const match = fileString.match(new RegExp(regex));\r\n  if(!match) throw new Error('Wrong Hls quality file format');\r\n\r\n  const targetDocId = match[1];\r\n\r\n  swLog.info('targetDocId', targetDocId);\r\n\r\n  if(!targetDocId) throw new Error('Wrong Hls quality file format');\r\n\r\n  const doc = await serviceMessagePort.invoke('requestDoc', {docId: targetDocId, accountNumber});\r\n\r\n  const params: HlsStreamUrlParams = {\r\n    docId: targetDocId,\r\n    dcId: doc.dc_id,\r\n    size: doc.size,\r\n    mimeType: doc.mime_type\r\n  };\r\n  const pathname = `hls_stream/${encodeURIComponent(JSON.stringify(params))}`;\r\n\r\n  const targetFileURL = new URL(pathname, location.origin).toString();\r\n\r\n  const replacedContent = fileString.replace(new RegExp(regex, 'g'), targetFileURL);\r\n\r\n  return replacedContent;\r\n}\r\n","import readBlobAsUint8Array from '../../helpers/blob/readBlobAsUint8Array';\r\nimport pause from '../../helpers/schedulers/pause';\r\n\r\nimport {ActiveAccountNumber} from '../accounts/types';\r\nimport CacheStorageController from '../files/cacheStorage';\r\nimport {serviceMessagePort} from '../serviceWorker/index.service';\r\n\r\nimport {swLog} from './common';\r\nimport {RequestSynchronizer} from './requestSynchronizer';\r\nimport {StreamFetchingRange} from './splitRangeForGettingFileParts';\r\n\r\nconst CHUNK_CACHED_TIME_HEADER = 'Time-Cached';\r\nconst CHUNK_LIFETIME_SECONDS = 24 * 60 * 60; // 24 hours\r\n\r\ntype RequestFilePartIdentificationParams = {\r\n  docId: string;\r\n  dcId: number;\r\n  accountNumber: ActiveAccountNumber;\r\n};\r\n\r\nconst cacheStorage = new CacheStorageController('cachedHlsStreamChunks');\r\nconst requestSynchronizer = new RequestSynchronizer<string, Uint8Array>();\r\n\r\nexport async function fetchAndConcatFileParts(\r\n  params: RequestFilePartIdentificationParams,\r\n  ranges: StreamFetchingRange[]\r\n) {\r\n  const fileParts: Uint8Array[] = [];\r\n  let totalLength = 0;\r\n\r\n  for(const range of ranges) {\r\n    const bytes = await requestSynchronizer.performRequest(\r\n      getChunkFilename(params, range),\r\n      () => fetchFilePart(params, range)\r\n    );\r\n\r\n    totalLength += bytes.length;\r\n    fileParts.push(bytes);\r\n  }\r\n\r\n  if(fileParts.length === 1) return fileParts[0];\r\n\r\n  const result = new Uint8Array(totalLength);\r\n\r\n  let currentOffset = 0;\r\n\r\n  for(const part of fileParts) {\r\n    result.set(part, currentOffset);\r\n    currentOffset += part.length;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n\r\nasync function fetchFilePart(params: RequestFilePartIdentificationParams, range: StreamFetchingRange) {\r\n  try {\r\n    // throw '';\r\n    const filename = getChunkFilename(params, range);\r\n    const blob: Blob = await cacheStorage.getFile(filename, 'blob');\r\n    const bytes = await readBlobAsUint8Array(blob);\r\n    return bytes;\r\n  } catch{\r\n    const {bytes} = await serviceMessagePort.invoke('requestFilePart', {\r\n      ...params,\r\n      ...range\r\n    });\r\n    saveChunkToCache(bytes, params, range);\r\n    return bytes;\r\n  }\r\n}\r\n\r\nfunction getChunkFilename(params: RequestFilePartIdentificationParams, range: StreamFetchingRange) {\r\n  return `${params.accountNumber}-${params.docId}?offset=${range.offset}&limit=${range.limit}`;\r\n}\r\n\r\nasync function saveChunkToCache(bytes: Uint8Array, params: RequestFilePartIdentificationParams, range: StreamFetchingRange) {\r\n  const filename = getChunkFilename(params, range);\r\n\r\n  const response = new Response(bytes, {\r\n    headers: {\r\n      'Content-Length': '' + bytes.length,\r\n      'Content-Type': 'application/octet-stream',\r\n      [CHUNK_CACHED_TIME_HEADER]: '' + (Date.now() / 1000 | 0)\r\n    }\r\n  });\r\n\r\n  await cacheStorage.save(filename, response);\r\n}\r\n\r\n\r\nexport async function watchHlsStreamChunksLifetime() {\r\n  await pause(20e3); // wait some time for the app to fully initialize\r\n\r\n  clearOldChunks();\r\n  setInterval(clearOldChunks, 1800e3);\r\n}\r\n\r\nfunction clearOldChunks() {\r\n  return cacheStorage.timeoutOperation(async(cache) => {\r\n    const requests = await cache.keys();\r\n\r\n    const currentTimeSeconds = Date.now() / 1000 | 0;\r\n\r\n    await Promise.all(requests.map(async(request) => {\r\n      const response = await cache.match(request);\r\n      if(!response) return;\r\n\r\n      const savedTimeSeconds = +response.headers.get(CHUNK_CACHED_TIME_HEADER);\r\n      if(!savedTimeSeconds) return;\r\n      if(savedTimeSeconds + CHUNK_LIFETIME_SECONDS > currentTimeSeconds) return;\r\n\r\n      swLog('deleting cached stream chunk', request.url);\r\n      await cache.delete(request);\r\n    }));\r\n  });\r\n};\r\n\r\n","/**\r\n * Fetching file parts are implemented based on these restrictions:\r\n * https://core.telegram.org/cdn#restrictions-on-uploadgetfile-and-uploadgetcdnfile-parameters\r\n */\r\n\r\nconst STREAM_CHUNK_MULTIPLIER = 4096;\r\nconst STREAM_FRAGMENT_SIZE = 1024 * 1024; // 1048576 (1MB)\r\n\r\nexport type StreamFetchingRange = {\r\n  offset: number;\r\n  limit: number;\r\n};\r\n\r\nexport function splitRangeForGettingFileParts(lowerBound: number, upperBound: number) {\r\n  const lowerBoundChunkStart = Math.floor(lowerBound / STREAM_CHUNK_MULTIPLIER) * STREAM_CHUNK_MULTIPLIER;\r\n  const upperBoundNextChunkStart = (Math.floor(upperBound / STREAM_CHUNK_MULTIPLIER) + 1) * STREAM_CHUNK_MULTIPLIER;\r\n\r\n  const lowerBoundFragmentStart = Math.floor(lowerBound / STREAM_FRAGMENT_SIZE) * STREAM_FRAGMENT_SIZE;\r\n  const lowerBoundNextFragmentStart = (Math.floor(lowerBound / STREAM_FRAGMENT_SIZE) + 1) * STREAM_FRAGMENT_SIZE;\r\n\r\n  const upperBoundInThisFragment = Math.min(lowerBoundNextFragmentStart, upperBoundNextChunkStart);\r\n  const diff = upperBoundInThisFragment - lowerBoundChunkStart;\r\n  const limitForFirstPart = snapLimit(diff);\r\n\r\n  const alignedLowerBound = Math.max(upperBoundInThisFragment - limitForFirstPart, lowerBoundFragmentStart);\r\n\r\n  const ranges: StreamFetchingRange[] = [\r\n    {\r\n      offset: alignedLowerBound,\r\n      limit: limitForFirstPart\r\n    }\r\n  ];\r\n\r\n  // Most likely this `while` will never happen unless the data from the quality file is crazy\r\n  let currentOffset = lowerBoundNextFragmentStart;\r\n  while(currentOffset < upperBound) {\r\n    //\r\n    const nextFragmentStart = (Math.floor(currentOffset / STREAM_FRAGMENT_SIZE) + 1) * STREAM_FRAGMENT_SIZE;\r\n    if(nextFragmentStart > upperBound) break;\r\n\r\n    ranges.push({\r\n      offset: currentOffset,\r\n      limit: STREAM_FRAGMENT_SIZE\r\n    });\r\n    currentOffset += STREAM_FRAGMENT_SIZE;\r\n  }\r\n\r\n  if(currentOffset <= upperBound) {\r\n    const diff = upperBound - currentOffset + 1;\r\n    const limitForLastPart = snapLimit(diff);\r\n\r\n    ranges.push({\r\n      offset: currentOffset,\r\n      limit: limitForLastPart\r\n    });\r\n  }\r\n\r\n  const lastRange = ranges[ranges.length - 1];\r\n  const alignedUpperBound = lastRange.offset + lastRange.limit - 1;\r\n\r\n  return {\r\n    alignedLowerBound,\r\n    alignedUpperBound,\r\n    ranges\r\n  };\r\n}\r\n\r\nfunction snapLimit(limit: number) {\r\n  return Math.max(2 ** Math.ceil(Math.log2(limit)), STREAM_CHUNK_MULTIPLIER); // limit must be power of 2, minimum 4096\r\n}\r\n\r\n/*\r\n// If you make changes in this function, use this snippet to analyze the output\r\nimport {logger} from '../logger';\r\n(() => {\r\n  const log = logger('test-splitRangeForGettingFileParts');\r\n  const cases = [\r\n    [0, 4], // [offset, limit]\r\n    [0, 4095],\r\n    [0, 4096],\r\n    [0, 4097],\r\n    [4095, 90],\r\n    [4095, 1024 * 200],\r\n    [4096, 70000],\r\n    [0, 5 * 4096],\r\n    [2 * 4096, 5 * 4096],\r\n    [0, 1024 * 1024 * 3],\r\n    [0, 1024 * 1024 * 3 + 1], // should be 3 chunks of 1MB and one of 4096 for 1 Byte\r\n    [1024 * 1024 - 3 * 4096 - 7, 1024 * 1024 * 3 + 3 * 4096 + 7 + 1], // should be 3 chunks of 1MB and last one of 4096 for 1 Byte\r\n    [0, 1024 * 1024 + 349],\r\n    [1024 * 1024 - 5 * 4096, 12 * 4096],\r\n    [1024 * 1024 - 5 * 4096, 1024 * 1024 * 3 + 12 * 4096],\r\n    [2287329, 2815347 - 2287329 + 1]\r\n  ];\r\n\r\n  for(const c of cases) {\r\n    const start = c[0];\r\n    const end = c[0] + c[1] - 1;\r\n    log(\r\n      'start, limit, end, splitRangeForGettingFileParts(start, end)',\r\n      start,\r\n      c[1],\r\n      end,\r\n      splitRangeForGettingFileParts(start, end).ranges.map((c) => ({\r\n        ...c,\r\n        offset_div_4096: c.offset / 4096,\r\n        limit_div_4096: c.limit / 4096,\r\n        log2_limit: Math.log2(c.limit)\r\n      }))\r\n    );\r\n  }\r\n})();\r\n*/\r\n","import deferredPromise from '../../helpers/cancellablePromise';\r\n\r\nimport {getCurrentAccountFromURL} from '../accounts/getCurrentAccountFromURL';\r\nimport {get500ErrorResponse} from '../serviceWorker/errors';\r\nimport {parseRange} from '../serviceWorker/stream';\r\n\r\nimport {fetchAndConcatFileParts} from './fetchAndConcatFileParts';\r\nimport {HlsStreamUrlParams} from './onHlsQualityFileFetch';\r\nimport {swLog} from './common';\r\nimport {splitRangeForGettingFileParts} from './splitRangeForGettingFileParts';\r\n\r\nconst ctx = self as any as ServiceWorkerGlobalScope;\r\n\r\nexport async function onHlsStreamFetch(event: FetchEvent, inParams: string, search: string) {\r\n  const deferred = deferredPromise<Response>();\r\n  event.respondWith(deferred);\r\n\r\n  try {\r\n    const {docId, dcId, size, mimeType}: HlsStreamUrlParams = JSON.parse(decodeURIComponent(inParams));\r\n    const range = parseRange(event.request.headers.get('Range'));\r\n\r\n    const client = await ctx.clients.get(event.clientId);\r\n    const accountNumber = getCurrentAccountFromURL(client.url);\r\n\r\n\r\n    const [lowerBound, upperBound] = range;\r\n    const {ranges, alignedLowerBound} = splitRangeForGettingFileParts(lowerBound, upperBound);\r\n\r\n    const filePart = await fetchAndConcatFileParts({docId, dcId, accountNumber}, ranges);\r\n\r\n    const headers: Record<string, string> = {\r\n      'Accept-Ranges': 'bytes',\r\n      'Content-Range': `bytes ${range[0]}-${range[1]}/${size || '*'}`,\r\n      'Content-Length': `${upperBound - lowerBound + 1}`\r\n    };\r\n\r\n    headers['Content-Type'] = mimeType;\r\n\r\n    const resultingBuffer = filePart.slice(lowerBound - alignedLowerBound, upperBound - alignedLowerBound + 1);\r\n\r\n    deferred.resolve(\r\n      new Response(resultingBuffer, {\r\n        status: 206,\r\n        statusText: 'Partial Content',\r\n        headers\r\n      })\r\n    );\r\n  } catch(e) {\r\n    deferred.resolve(get500ErrorResponse());\r\n    swLog.error(e);\r\n  }\r\n}\r\n","import type ENVIRONMENT from '.';\r\n\r\nlet environment: typeof ENVIRONMENT;\r\nexport function getEnvironment() {\r\n  return environment;\r\n}\r\n\r\nexport function setEnvironment(env: typeof environment) {\r\n  return environment = env;\r\n}\r\n","import {getEnvironment} from '../../environment/utils';\r\nimport assumeType from '../../helpers/assumeType';\r\nimport {Document, DocumentAttribute} from '../../layer';\r\n\r\nimport {isDocumentHlsQualityFile} from './common';\r\n\r\nconst QUALITY_FILE_NAME_PREFIX = 'mtproto:';\r\n\r\nconst FALLBACK_BANDWIDTH = 1_000_000;\r\nconst FALLBACK_WIDTH = 1280;\r\nconst FALLBACK_HEIGHT = 720;\r\n\r\nexport function createHlsVideoSource(\r\n  // message: Message.message\r\n  altDocs: Document.document[]\r\n): string | null {\r\n  // const altDocs = getAltDocsFromMessage(message);\r\n\r\n  let qualityEntries = getQualityFilesEntries(altDocs);\r\n\r\n  if(!getEnvironment().IS_AV1_SUPPORTED) {\r\n    qualityEntries = qualityEntries.filter((entry) => entry.codec !== 'av01');\r\n  }\r\n\r\n  if(!qualityEntries.length) return null;\r\n\r\n  qualityEntries.sort((a, b) => a.bandwidth - b.bandwidth);\r\n\r\n\r\n  let hlsFileSource = '#EXTM3U\\n';\r\n\r\n  for(const qualityEntry of qualityEntries) {\r\n    const {w, h, bandwidth, url} = qualityEntry;\r\n\r\n    hlsFileSource += `#EXT-X-STREAM-INF:BANDWIDTH=${bandwidth},RESOLUTION=${w}x${h}\\n`;\r\n    hlsFileSource += url + '\\n';\r\n  }\r\n\r\n  hlsFileSource += '\\n#EXT-X-ENDLIST';\r\n\r\n  return hlsFileSource;\r\n}\r\n\r\nexport function getQualityFilesEntries(altDocs: Document.document[]) {\r\n  if(!altDocs?.length) return [];\r\n\r\n  const videoAttributes = getVideoAttributesFromAltDocs(altDocs);\r\n  const qualityURLs = getQualityURLsFromAltDocs(altDocs);\r\n\r\n  return Object.entries(videoAttributes).map(([id, attr]) => {\r\n    const {w = FALLBACK_WIDTH, h = FALLBACK_HEIGHT, duration = 0, video_codec: codec} = attr;\r\n    const {size} = altDocs.find((doc) => doc.id.toString() === id);\r\n\r\n    const bandwidth = (duration > 0 ? size / duration * 8 : FALLBACK_BANDWIDTH) | 0;\r\n\r\n    return {\r\n      id,\r\n      w,\r\n      h,\r\n      duration,\r\n      bandwidth,\r\n      url: qualityURLs[id],\r\n      codec\r\n    };\r\n  });\r\n}\r\n\r\nfunction getVideoAttributesFromAltDocs(altDocs: Document.document[]) {\r\n  const result: {[docId: DocId]: DocumentAttribute.documentAttributeVideo} = {};\r\n\r\n  for(const doc of altDocs) {\r\n    const videoAttribute = doc?.attributes?.find((attr) => attr._ === 'documentAttributeVideo');\r\n    if(!videoAttribute) continue;\r\n    assumeType<DocumentAttribute.documentAttributeVideo>(videoAttribute);\r\n\r\n    result[doc.id] = videoAttribute;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nfunction getQualityURLsFromAltDocs(altDocs: Document.document[]) {\r\n  const result: {[docId: DocId]: string} = {};\r\n\r\n  for(const doc of altDocs) {\r\n    if(!isDocumentHlsQualityFile(doc)) continue;\r\n\r\n    result[getTargetDocIdForQualityFile(doc)] = getURLForQualityFile(doc);\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nfunction getURLForQualityFile(doc: Document.document) {\r\n  return `hls_quality_file/${doc.id}`;\r\n}\r\n\r\nfunction getTargetDocIdForQualityFile(doc: Document.document) {\r\n  const fileNameAttribute = doc.attributes?.find((attr) => attr._ === 'documentAttributeFilename');\r\n  assumeType<DocumentAttribute.documentAttributeFilename>(fileNameAttribute);\r\n\r\n  const rawFileName = doc.file_name || fileNameAttribute?.file_name;\r\n\r\n  return rawFileName?.slice(QUALITY_FILE_NAME_PREFIX.length);\r\n}\r\n","import deferredPromise from '../../helpers/cancellablePromise';\r\nimport {InputFileLocation} from '../../layer';\r\n\r\nimport {getCurrentAccountFromURL} from '../accounts/getCurrentAccountFromURL';\r\nimport type {DownloadOptions} from '../mtproto/apiFileManager';\r\nimport {get500ErrorResponse} from '../serviceWorker/errors';\r\nimport {serviceMessagePort} from '../serviceWorker/index.service';\r\n\r\nimport {ctx, swLog} from './common';\r\nimport {createHlsVideoSource} from './createHlsVideoSource';\r\n\r\nexport async function onHlsPlaylistFetch(event: FetchEvent, params: string, search: string) {\r\n  const deferred = deferredPromise<Response>();\r\n  event.respondWith(deferred);\r\n\r\n  try {\r\n    const options: DownloadOptions = JSON.parse(decodeURIComponent(params));\r\n\r\n    const client = await ctx.clients.get(event.clientId);\r\n    const accountNumber = getCurrentAccountFromURL(client.url);\r\n\r\n    const docId = (options.location as InputFileLocation.inputDocumentFileLocation)?.id;\r\n\r\n    const altDocs = await serviceMessagePort.invoke('requestAltDocsByDoc', {docId, accountNumber});\r\n\r\n    if(!altDocs) throw new Error('No alt docs found for document');\r\n\r\n    const videoSource = createHlsVideoSource(altDocs);\r\n    if(!videoSource) throw new Error('Failed to create video source for hls streaming');\r\n\r\n    deferred.resolve(new Response(videoSource));\r\n  } catch(e) {\r\n    deferred.resolve(get500ErrorResponse());\r\n    swLog.error(e);\r\n  }\r\n}\r\n","import deferredPromise from '../../helpers/cancellablePromise';\r\n\r\nimport CacheStorageController from '../files/cacheStorage';\r\n\r\nimport {get500ErrorResponse} from './errors';\r\n\r\n\r\nconst backgroundsCache = new CacheStorageController('cachedBackgrounds');\r\n\r\n/**\r\n * Need the image element to fetch the background so the browser waits it, to avoid the background blinking when refreshing the page while the screen is locked\r\n */\r\nexport function onBackgroundsFetch(event: FetchEvent) {\r\n  const url = event.request.url.match(/backgrounds.*/)[0];\r\n  if(!url) {\r\n    event.respondWith(get500ErrorResponse());\r\n    return;\r\n  }\r\n\r\n  const deferred = deferredPromise<Response>();\r\n  event.respondWith(deferred);\r\n\r\n  (async() => {\r\n    const blob = await backgroundsCache.getFile(url, 'blob');\r\n    deferred.resolve(new Response(blob, {\r\n      status: 200\r\n    }));\r\n  })();\r\n}\r\n","import {getWindowClients} from '../../helpers/context';\r\nimport {IS_BETA} from '../../config/debug';\r\n\r\nimport {logger, LogTypes} from '../logger';\r\n\r\n\r\nconst logMtprotoBug = logger('SW-mtproto-bug', LogTypes.None);\r\n\r\ntype Args = {\r\n  connectedWindows: Map<string, WindowClient>;\r\n  onWindowConnected: (source: WindowClient) => void;\r\n};\r\n\r\nexport function watchMtprotoOnDev({connectedWindows, onWindowConnected}: Args) {\r\n  if(IS_BETA) setInterval(() => {\r\n    logMtprotoBug.debug('checking');\r\n\r\n    if(!connectedWindows.size) {\r\n      getWindowClients().then((windowClients) => {\r\n        logMtprotoBug.debug(`got ${windowClients.length} windows`);\r\n\r\n        windowClients.forEach((windowClient) => {\r\n          onWindowConnected(windowClient);\r\n        });\r\n      });\r\n    } else {\r\n      logMtprotoBug.debug('has-windows');\r\n    }\r\n\r\n    // const timeout = self.setTimeout(() => {\r\n    //   if(!connectedWindows.size) return;\r\n\r\n    //   logMtprotoBug.debug('triggered');\r\n\r\n    //   if(_mtprotoMessagePort) serviceMessagePort.detachPort(_mtprotoMessagePort);\r\n    //   else serviceMessagePort.cancelAllTasks();\r\n    //   logMtprotoBug.debug('cleared port ', _mtprotoMessagePort ? 'attached' : 'all');\r\n\r\n    //   const it = connectedWindows.values().next();\r\n    //   if(!it.done) {\r\n    //     sendMessagePort(it.value);\r\n    //     logMtprotoBug.debug('updated port');\r\n    //   }\r\n    // }, 0.5e3);\r\n\r\n  // serviceMessagePort.invoke('pingMtProtoWorker', undefined).catch(noop).finally(() => {\r\n  //   self.clearTimeout(timeout);\r\n  // });\r\n  }, 2e3);\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport {logger, LogTypes} from '../logger';\r\nimport {CACHE_ASSETS_NAME, requestCache} from './cache';\r\nimport onStreamFetch, {toggleStreamInUse} from './stream';\r\nimport {closeAllNotifications, fillPushObject, onPing, onShownNotification, resetPushAccounts} from './push';\r\nimport CacheStorageController from '../files/cacheStorage';\r\nimport {IS_SAFARI} from '../../environment/userAgent';\r\nimport ServiceMessagePort from './serviceMessagePort';\r\nimport listenMessagePort from '../../helpers/listenMessagePort';\r\nimport {getWindowClients} from '../../helpers/context';\r\nimport {MessageSendPort} from '../mtproto/superMessagePort';\r\nimport handleDownload from './download';\r\nimport onShareFetch, {checkWindowClientForDeferredShare} from './share';\r\nimport {onRtmpFetch, onRtmpLeftCall} from './rtmp';\r\nimport {onHlsQualityFileFetch} from '../hls/onHlsQualityFileFetch';\r\nimport {get500ErrorResponse} from './errors';\r\nimport {onHlsStreamFetch} from '../hls/onHlsStreamFetch';\r\nimport {onHlsPlaylistFetch} from '../hls/onHlsPlaylistFetch';\r\nimport {watchHlsStreamChunksLifetime} from '../hls/fetchAndConcatFileParts';\r\nimport {setEnvironment} from '../../environment/utils';\r\nimport cryptoMessagePort from '../crypto/cryptoMessagePort';\r\nimport EncryptionKeyStore from '../passcode/keyStore';\r\nimport DeferredIsUsingPasscode from '../passcode/deferredIsUsingPasscode';\r\nimport {onBackgroundsFetch} from './backgrounds';\r\nimport {watchMtprotoOnDev} from './watchMtprotoOnDev';\r\n\r\n// #if MTPROTO_SW\r\n// import '../mtproto/mtproto.worker';\r\n// #endif\r\n\r\nexport const log = logger('SW', LogTypes.Error | LogTypes.Debug | LogTypes.Log | LogTypes.Warn, true);\r\nconst ctx = self as any as ServiceWorkerGlobalScope;\r\n\r\n// #if !MTPROTO_SW\r\nlet _mtprotoMessagePort: MessagePort;\r\nexport const getMtprotoMessagePort = () => _mtprotoMessagePort;\r\n\r\nlet _cryptoMessagePort: MessagePort;\r\n\r\nexport const invokeVoidAll: ServiceMessagePort['invokeVoid'] = (...args) => {\r\n  getWindowClients().then((windowClients) => {\r\n    windowClients.forEach((windowClient) => {\r\n      // @ts-ignore\r\n      serviceMessagePort.invokeVoid(...args, windowClient);\r\n    });\r\n  });\r\n};\r\n\r\nlog('init');\r\n\r\n// setTimeout(async() => {\r\n//   const salt = new Uint8Array([1, 2, 3]);\r\n//   const passcode = 'ab';\r\n//   log('hello from sw started encryption');\r\n\r\n//   const wrappedPasscode = await crypto.subtle.importKey(\r\n//     'raw', new TextEncoder().encode(passcode), {name: 'PBKDF2'}, false, ['deriveKey']\r\n//   );\r\n\r\n//   const key = await crypto.subtle.deriveKey(\r\n//     {name: 'PBKDF2', salt, iterations: 1000, hash: 'SHA-256'},\r\n//     wrappedPasscode, {name: 'AES-GCM', length: 256}, true, ['encrypt', 'decrypt']\r\n//   );\r\n\r\n//   const enc = await cryptoMessagePort.invokeCryptoNew({\r\n//     method: 'aes-local-encrypt',\r\n//     args: [{data: new Uint8Array([1, 2, 3]), key}]\r\n//   });\r\n\r\n//   log('hello from sw data:>>', enc);\r\n// }, 1000);\r\n\r\nconst sendMessagePort = (source: MessageSendPort) => {\r\n  const channel = new MessageChannel();\r\n  serviceMessagePort.attachPort(_mtprotoMessagePort = channel.port1);\r\n  serviceMessagePort.invokeVoid('port', undefined, source, [channel.port2]);\r\n\r\n  const channel2 = new MessageChannel();\r\n  cryptoMessagePort.attachPort(_cryptoMessagePort = channel2.port1);\r\n  serviceMessagePort.invokeVoid('serviceCryptoPort', undefined, source, [channel2.port2]);\r\n};\r\n\r\nconst sendMessagePortIfNeeded = (source: MessageSendPort) => {\r\n  if(!connectedWindows.size && !_mtprotoMessagePort) {\r\n    log('sending message port for mtproto');\r\n    sendMessagePort(source);\r\n  }\r\n};\r\n\r\nconst onWindowConnected = (source: WindowClient) => {\r\n  log('window connected', source.id, 'windows before', connectedWindows.size);\r\n\r\n  if(source.frameType === 'none') {\r\n    log.warn('maybe a bugged Safari starting window', source.id);\r\n    return;\r\n  }\r\n\r\n  log('windows', Array.from(connectedWindows));\r\n  serviceMessagePort.invokeVoid('hello', undefined, source);\r\n  sendMessagePortIfNeeded(source);\r\n  connectedWindows.set(source.id, source);\r\n\r\n  checkWindowClientForDeferredShare(source);\r\n};\r\n\r\nexport const serviceMessagePort = new ServiceMessagePort<false>();\r\n\r\nserviceMessagePort.addMultipleEventsListeners({\r\n  environment: (environment) => {\r\n    setEnvironment(environment);\r\n  },\r\n\r\n  notificationsClear: closeAllNotifications,\r\n\r\n  toggleStorages: ({enabled, clearWrite}) => {\r\n    CacheStorageController.toggleStorage(enabled, clearWrite);\r\n  },\r\n\r\n  pushPing: (payload, source) => {\r\n    onPing(payload, source);\r\n  },\r\n\r\n  hello: (payload, source) => {\r\n    onWindowConnected(source as any as WindowClient);\r\n  },\r\n\r\n  shownNotification: onShownNotification,\r\n  leaveRtmpCall: onRtmpLeftCall,\r\n\r\n  toggleStreamInUse,\r\n\r\n  toggleCacheStorage: (enabled) => {\r\n    CacheStorageController.temporarilyToggle(enabled);\r\n  },\r\n\r\n  resetEncryptableCacheStorages: () => {\r\n    CacheStorageController.resetOpenEncryptableCacheStorages();\r\n  },\r\n\r\n  toggleUsingPasscode: (payload) => {\r\n    DeferredIsUsingPasscode.resolveDeferred(payload.isUsingPasscode);\r\n    EncryptionKeyStore.save(payload.encryptionKey);\r\n  },\r\n\r\n  saveEncryptionKey: (payload) => {\r\n    EncryptionKeyStore.save(payload);\r\n  },\r\n\r\n  fillPushObject\r\n});\r\n\r\nconst {\r\n  onDownloadFetch,\r\n  onClosedWindows: onDownloadClosedWindows\r\n} = handleDownload(serviceMessagePort);\r\n\r\n// * service worker can be killed, so won't get 'hello' event\r\ngetWindowClients().then((windowClients) => {\r\n  const length = windowClients.length;\r\n  log(`got ${length} windows from the start`);\r\n  windowClients.forEach((windowClient) => {\r\n    onWindowConnected(windowClient);\r\n  });\r\n});\r\n\r\nconst connectedWindows: Map<string, WindowClient> = new Map();\r\n(self as any).connectedWindows = connectedWindows;\r\nlistenMessagePort(serviceMessagePort, undefined, (source) => {\r\n  log('something has disconnected', source);\r\n  const isWindowClient = source instanceof WindowClient;\r\n  if(!isWindowClient || !connectedWindows.has(source.id)) {\r\n    log.warn('it is not a window');\r\n    return;\r\n  }\r\n\r\n  connectedWindows.delete(source.id);\r\n  log('window disconnected, left', connectedWindows.size);\r\n  if(!connectedWindows.size) {\r\n    log.warn('no windows left');\r\n\r\n    DeferredIsUsingPasscode.isUsingPasscode()\r\n    .then((isUsingPasscode) => {\r\n      if(isUsingPasscode) {\r\n        resetPushAccounts();\r\n      }\r\n    }).finally(() => {\r\n      if(!connectedWindows.size) { // * make sure that the promise is resolved not because new window connected\r\n        EncryptionKeyStore.resetDeferred();\r\n        DeferredIsUsingPasscode.resetDeferred();\r\n      }\r\n    });\r\n\r\n    if(_mtprotoMessagePort) {\r\n      serviceMessagePort.detachPort(_mtprotoMessagePort);\r\n      _mtprotoMessagePort = undefined;\r\n    }\r\n    if(_cryptoMessagePort) {\r\n      cryptoMessagePort.detachPort(_cryptoMessagePort);\r\n      _cryptoMessagePort = undefined;\r\n    }\r\n\r\n    onDownloadClosedWindows();\r\n  }\r\n});\r\n// #endif\r\n\r\nwatchHlsStreamChunksLifetime();\r\n\r\nwatchMtprotoOnDev({connectedWindows, onWindowConnected});\r\n\r\nconst onFetch = (event: FetchEvent): void => {\r\n  if(\r\n    import.meta.env.PROD &&\r\n    !IS_SAFARI &&\r\n    event.request.url.indexOf(location.origin + '/') === 0 &&\r\n    event.request.url.match(/\\.(js|css|jpe?g|json|wasm|png|mp3|svg|tgs|ico|woff2?|ttf|webmanifest?)(?:\\?.*)?$/)\r\n  ) {\r\n    return event.respondWith(requestCache(event));\r\n  }\r\n\r\n  if(import.meta.env.DEV && event.request.url.match(/\\.([jt]sx?|s?css)?($|\\?)/)) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    // const [, url, scope, params] = /http[:s]+\\/\\/.*?(\\/(.*?)(?:$|\\/(.*)$))/.exec(event.request.url) || [];\r\n    const [scope, _params] = event.request.url.split('/').slice(-2);\r\n    const [params, search] = _params.split('?');\r\n\r\n    // log.debug('[fetch]', event, event.request.url);\r\n\r\n    switch(scope) {\r\n      case 'stream': {\r\n        onStreamFetch(event, params, search);\r\n        break;\r\n      }\r\n\r\n      case 'd':\r\n      case 'download': {\r\n        onDownloadFetch(event, params);\r\n        break;\r\n      }\r\n\r\n      case 'share': {\r\n        onShareFetch(event, params);\r\n        break;\r\n      }\r\n\r\n      case 'ping': {\r\n        event.respondWith(new Response('pong'));\r\n        break;\r\n      }\r\n\r\n      case 'rtmp': {\r\n        onRtmpFetch(event, params, search);\r\n        break;\r\n      }\r\n\r\n      case 'hls': {\r\n        onHlsPlaylistFetch(event, params, search);\r\n        break;\r\n      }\r\n\r\n      case 'hls_quality_file': {\r\n        onHlsQualityFileFetch(event, params, search);\r\n        break;\r\n      }\r\n\r\n      case 'hls_stream': {\r\n        onHlsStreamFetch(event, params, search);\r\n        break;\r\n      }\r\n\r\n      case 'backgrounds': {\r\n        onBackgroundsFetch(event);\r\n        break;\r\n      }\r\n\r\n      // default: {\r\n      //   event.respondWith(fetch(event.request));\r\n      //   break;\r\n      // }\r\n    }\r\n  } catch(err) {\r\n    log.error('fetch error', err);\r\n    event.respondWith(get500ErrorResponse());\r\n  }\r\n};\r\n\r\nconst onChangeState = () => {\r\n  ctx.onfetch = onFetch;\r\n};\r\n\r\nctx.addEventListener('install', (event) => {\r\n  log('installing');\r\n  event.waitUntil(ctx.skipWaiting().then(() => log('skipped waiting'))); // Activate worker immediately\r\n});\r\n\r\nctx.addEventListener('activate', (event) => {\r\n  log('activating', ctx);\r\n  event.waitUntil(ctx.caches.delete(CACHE_ASSETS_NAME).then(() => log('cleared assets cache')));\r\n  event.waitUntil(ctx.clients.claim().then(() => log('claimed clients')));\r\n});\r\n\r\n// ctx.onerror = (error) => {\r\n//   log.error('error:', error);\r\n// };\r\n\r\n// ctx.onunhandledrejection = (error) => {\r\n//   log.error('onunhandledrejection:', error);\r\n// };\r\n\r\nctx.onoffline = ctx.ononline = onChangeState;\r\n\r\nonChangeState();\r\n"],"names":["Modes","DEBUG","ctx","MOUNT_CLASS_TO","USER_AGENT","IS_SAFARI","IS_FIREFOX","IS_SERVICE_WORKER","IS_WEB_WORKER","IS_WORKER","getWindowClients","postMessage","listener","args","err","notifyServiceWorker","all","listeners","notifyWorker","noop","_logTimer","dT","LogTypes","LOG_LEVELS","IS_WEBKIT","STYLES_SUPPORTED","LOGGER_STYLES","methods","logger","prefix","type","ignoreDebugReset","style","originalPrefix","originalStyle","log","method","logType","newPrefix","level","acc","v","prefixCache","_type","prefix2","pause","ms","resolve","CACHE_ASSETS_NAME","isCorrectResponse","response","timeoutRace","promise","requestCache","event","cache","file","headers","url","readBlobAs","blob","reader","e","readBlobAsArrayBuffer","readBlobAsUint8Array","buffer","bufferConcats","length","tmp","lastLength","b","deferredHelper","callback","value","deferredPromise","reject","deferred","_resolve","_reject","bytesFromHex","hexString","len","bytes","start","i","bytesCmp","bytes1","bytes2","readLengthField","buf","offset","size","byte","parseDecoderSpecificInfo","lenSz","parseDecoderConfigDescriptor","parseES_Descriptor","dv","flags","streamDependenceFlag","URL_Flag","URLlength","BROKEN_DSCI","FIXED_ESDS","ESDS","MP4A","findUint8ArrayBack","needle","found","j","fixMp4ForChromium","u8","pos","esdsOffset","esdsSize","mp4aOffset","esds","parsed","tryPatchMp4","debounce","fn","shouldRunFirst","shouldRunLast","waitingTimeout","waitingPromise","hadNewCall","invoke","result","_waitingTimeout","getValidatedAccount","input","CURRENT_ACCOUNT_QUERY_PARAM","getCurrentAccountFromURL","urlString","params","toArray","blobSafeMimeType","mimeType","blobConstruct","blobParts","safeMimeType","makeError","message","realError","StaticUtilityClass","_EncryptionKeyStore","key","exportedKey","EncryptionKeyStore","tabId","indexOfAndSplice","array","item","idx","EventListenerBase","reuseResults","name","options","_a","listenerObject","obj","l","error","collectResults","results","USE_LOCKS","SuperMessagePort","logSuffix","task","source","taskId","payload","previousResolve","ret","pingResolve","newEvent","id","innerTask","resultTaskPayload","resultTask","ackTask","isPromise","cached","port","lock","port2","portTasks","tasks","batchTask","ports","transfer","withAck","_void","timeout","interval","target","TransferableResult","transferables","SuperMessagePort$1","CryptoMessagePort","sendPortIndex","cryptoMessagePort","_DeferredIsUsingPasscode","DeferredIsUsingPasscode","MemoryWriter","saveFileCallback","part","endOffset","newBytes","saveToStorage","parts","cacheStorageDbConfig","_CacheStorageController","dbName","dataAsBuffer","entryName","fileName","rejected","res","fileSize","enabled","_clearWrite","storage","storageNames","storageName","encryptableStorageNames","encryptable","CacheStorageController","delay","deferredPromises","cacheStorage","CHUNK_TTL","CHUNK_CACHED_TIME_HEADER","PRELOAD_SIZE","clearOldChunks","requests","filtered","timestamp","request","match","promises","mtprotoMessagePort","getMtprotoMessagePort","messagePort","streams","Stream","info","serviceMessagePort","inUse","STREAM_CHUNK_UPPER_LIMIT","STREAM_CHUNK_MIDDLE_LIMIT","alignedOffset","limit","fromPreload","uploadFile","bytesPromise","end","alignOffset","range","possibleResponse","responseForSafariFirstRange","alignLimit","overflow","ab","sliceStart","sliceEnd","parseInfo","onStreamFetch","search","performRequest","parseRange","client","stream","toggleStreamInUse","accountNumber","index","SMALLEST_CHUNK_LIMIT","header","chunks","ranges","base","getCommonDatabaseState","getDatabaseState","NOTIFICATION_ICON_PATH","NOTIFICATION_BADGE_PATH","deepEqual","x","y","ignoreKeys","ok","tx","safeAssign","object","fromObject","_IDB","db","createNew","createIndexes","os","store","indexNames","indexName","createObjectStore","finished","calledNew","transaction","instance","preserve","IDB","IDBStorage","storeName","isArray","objectStore","mode","perf","_db","a","onError","onComplete","r","waitForTransactionComplete","callbackResult","left","onRequestFinished","entries","cursor","defaultBaseUrl","localNotificationsAvailable","SomethingGetter","defaults","getter","handlePushNotificationObject","copy","fix","_lang","muteUntil","settings","lang","windowClients","nowTime","userInvisibleIsSupported","fireNotification","tag","notificationPromise","closeAllNotifications","onPushEvent","emptyNotification","p","keysIdsBase64","keyIndex","keyIdBase64","isPasscodeLocked","isUsingPasscode","encryptionKey","onNotificationClick","notification","action","data","clientList","accounts","isLocked","_accountNumber","pendingNotification","notifications","onCloseNotification","removeFromNotifications","fillPushObject","peerId","title","body","messageKey","ignoreMessages","actions","notificationOptions","canSaveAccounts","onPing","canSave","resetPushAccounts","onShownNotification","time","_time","ServiceMessagePort","listenMessagePort","onConnect","onDisconnect","attachPort","listenPort","sendPort","downloadMap","DOWNLOAD_ERROR","DOWNLOAD_TEST","events","strategy","controller","readable","_controller","reason","chunk","handleDownload","onDownloadFetch","cancelAllDownloads","invokeVoidAll","parseFormData","formData","processShareEvent","clientId","checkWindowClientForDeferredShare","windowClient","arr","onShareFetch","RTMP_UNIFIED_CHANNEL_ID","RTMP_UNIFIED_QUALITY","findIsoBox","box","isoBoxToBuffer","bigInt","undefined","BASE","LOG_BASE","MAX_INT","MAX_INT_ARR","smallToArray","DEFAULT_ALPHABET","supportsNativeBigInt","Integer","radix","alphabet","caseSensitive","parseValue","parseBase","BigInteger","sign","SmallInteger","NativeBigInt","isPrecise","arrayToSmall","trim","compareAbs","createArray","truncate","add","l_a","l_b","carry","sum","addAny","addSmall","n","subtract","a_l","b_l","borrow","difference","subtractAny","subtractSmall","small","multiplyLong","product","a_i","b_j","multiplySmall","shiftLeft","multiplyKaratsuba","d","c","ac","bd","abcd","useKaratsuba","l1","l2","abs","multiplySmallAndArray","square","a_j","divMod1","divisorMostSignificantDigit","lambda","remainder","divisor","quotientDigit","shift","q","divModSmall","divMod2","guess","xlen","highx","highy","check","quotient","divModAny","self","comparison","qSign","mod","mSign","_0","_1","_2","exp","isBasicPrime","millerRabinTest","nPrev","next","strict","isPrime","bits","logN","t","iterations","rng","newT","newR","lastT","lastR","powersOfTwo","powers2Length","highestPower2","shift_isSmall","remQuo","bitwise","xSign","ySign","xRem","yRem","xDigit","yDigit","xDivMod","yDivMod","LOBMASK_I","LOBMASK_BI","roughLOB","integerLogarithm","max","min","gcd","lcm","randBetween","usedRNG","low","high","digits","toBase","restricted","top","digit","text","absBase","alphabetValues","isNegative","parseBaseFromArray","val","pow","stringify","neg","out","divmod","toBaseString","str","zeros","parseStringValue","split","decimalPlace","isValid","parseNumberValue","module","ISOBoxer","arrayBuffer","ISOFile","parser","ISOBox","parent","newBox","dataView","encoding","impliedEncoding","string","u","initialOffset","returnEarly","entry","untilEnd","hi","lo","s1","s2","char","pre","post","nbCompatibleBrands","sample_count","subsegment","subsample","sample","CRC8_TABLE","CRC16_TABLE","crc8","crc","crc16","writeUtf8Integer","encodeFlacFrame","channelAssignment","channelPcms","currentBuffer","currentBufferIdx","currentBufferPos","crc2","encodeFlacHeader","parseMp4Samples","trak","stbl","mdhd","stts","stsc","stco","ctts","stsz","stsd","stss","samples","hasSyncSamples","totalDuration","totalSize","chunkIdx","chunkRunIdx","lastSampleInChunk","offsetInChunk","lastChunkInRun","lastSampleInSttsRun","sttsRunIdx","lastSampleInCttsRun","cttsRunIdx","lastStssIndex","prevSample","lastSample","reencodeOpusToFlac","decodeOpus","samplesPerFrame","pcms","pendingPcmsCount","flacFrames","encodePendingPcms","force","blockSize","frame","channelData","samplesDecoded","floatPcmTo16BitPcm","floatPcm","intPcm","generateFmp4Init","iso","opusToFlac","opusTrackId","opusInitOptions","iso2","ftyp","moov","lastTrakIdx","traks","newTrakBoxes","thisTrakId","trakBox","newStblBoxes","stblBox","opusBox","dopsBox","flacBox","dfla","btrt","mvex","trex","generateFmp4Segment","seq","chunkU8","moof","mfhd","truns","totalSamplesSize","moovBox","traf","tfhd","tfdt","trun","it","myMdat","myMdatOffset","moofSize","crc32","init","poly","crc32Table","decode","crc32Function","stringToBytes","_","hexToUint8","hexToInt32_LE","htmlCodeOverrides","k","output","escaped","byteIndex","isDynEncode","dynEncodeVersion","startIdx","offsetReverse","secondCharacter","htmlOverride","actualCrc","WASMAudioDecoderCommon","uint8Array","float32Array","Ref","wasmString","buffers","errors","sampleRate","bitDepth","channelsDecoded","channel","puffString","wasm","exports","instanceExports","puff","memory","dataArray","heapView","heapPos","sourceLength","sourceLengthPtr","sourcePtr","destLengthPtr","outputData","TypedArray","setPointer","ptr","characters","heap","character","frameLength","frameNumber","inputBytes","outputSamples","_EmscriptenWASM","_module","EmscriptenWASM","ready","abort","what","base64ReverseLookup","HEAPU8","wasmMemory","updateMemoryViews","JS_cos","JS_exp","_emscripten_memcpy_js","dest","src","num","abortOnCannotGrowMemory","requestedSize","_emscripten_resize_heap","wasmImports","initRuntime","wasmExports","imports","_opus_frame_decoder_create","_malloc","_opus_frame_decode_float_deinterleaved","_opus_frame_decoder_destroy","_free","OpusDecoder","common","mapping","opusFrame","decoded","opusFrames","outputBuffers","MAX_FORCE_STEREO_CHANNELS","isNumber","param","channels","streamCount","coupledStreamCount","channelMappingTable","preSkip","forceStereo","clamp","pendingStreams","lastKnownTime","floodRelease","BUFFER_MS_MIN","BUFFER_MS_MAX","BUFFER_MS_START","OFFSET_MS","HLS_TIMEOUT","STREAM_TIMEOUT","MP4_MIME","HLS_MIME","scaleToTime","scale","RtmpStream","call","rtt","avgRtt","targetBufferSize","diff","ignoreRequestedTime","now","ignoreExisting","decoder","maxChunks","lastReplenishingPromise","thisGeneration","chunksToFetch","shouldSkip","lastBufferedChunkTime","nextTime","fetchChunk","retry","state","newChunks","waiter","waiters","originalPromise","retries","clock","generation","lastKnown","wait","controller_","baseUrl","chunkDuration","playlist","rejectWrap","getRtmpFetchResponse","pending","isHls","onRtmpFetch","responsePromise","onRtmpLeftCall","callId","forever","get500ErrorResponse","QUALITY_FILE_MIME_TYPE","swLog","isDocumentHlsQualityFile","doc","RequestSynchronizer","requestFn","requestSynchronizer","onHlsQualityFileFetch","docId","getHlsQualityCacheFilename","fetchAndProcessQualityFile","fileString","getHlsQualityFile","replaceQualityFileWithLocalURLs","regex","targetDocId","pathname","targetFileURL","CHUNK_LIFETIME_SECONDS","fetchAndConcatFileParts","fileParts","totalLength","getChunkFilename","fetchFilePart","currentOffset","filename","saveChunkToCache","watchHlsStreamChunksLifetime","currentTimeSeconds","savedTimeSeconds","STREAM_CHUNK_MULTIPLIER","STREAM_FRAGMENT_SIZE","splitRangeForGettingFileParts","lowerBound","upperBound","lowerBoundChunkStart","upperBoundNextChunkStart","lowerBoundFragmentStart","lowerBoundNextFragmentStart","upperBoundInThisFragment","limitForFirstPart","snapLimit","alignedLowerBound","limitForLastPart","lastRange","alignedUpperBound","onHlsStreamFetch","inParams","dcId","filePart","resultingBuffer","environment","getEnvironment","setEnvironment","env","QUALITY_FILE_NAME_PREFIX","FALLBACK_BANDWIDTH","FALLBACK_WIDTH","FALLBACK_HEIGHT","createHlsVideoSource","altDocs","qualityEntries","getQualityFilesEntries","hlsFileSource","qualityEntry","w","h","bandwidth","videoAttributes","getVideoAttributesFromAltDocs","qualityURLs","getQualityURLsFromAltDocs","attr","duration","codec","videoAttribute","getTargetDocIdForQualityFile","getURLForQualityFile","fileNameAttribute","onHlsPlaylistFetch","videoSource","backgroundsCache","onBackgroundsFetch","_mtprotoMessagePort","_cryptoMessagePort","sendMessagePort","channel2","sendMessagePortIfNeeded","connectedWindows","onWindowConnected","clearWrite","onDownloadClosedWindows","onFetch","scope","_params","onChangeState"],"mappings":"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","x_google_ignoreList":[50]}