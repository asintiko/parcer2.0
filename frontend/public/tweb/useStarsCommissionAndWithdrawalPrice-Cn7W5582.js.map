{"version":3,"file":"useStarsCommissionAndWithdrawalPrice-Cn7W5582.js","sources":["../src/components/sidebarLeft/tabs/privacy/messages/useStarsCommissionAndWithdrawalPrice.ts"],"sourcesContent":["import {Accessor, createMemo} from 'solid-js';\r\nimport {MTAppConfig} from '../../../../../lib/mtproto/appConfig';\r\nimport useAppConfig from './useAppConfig';\r\n\r\n\r\ntype Options = {\r\n  commissionKey?: keyof MTAppConfig;\r\n  withdrawRateKey?: keyof MTAppConfig;\r\n}\r\n\r\nconst useStarsCommissionAndWithdrawalPrice = (stars: Accessor<number>, {\r\n  commissionKey = 'stars_paid_message_commission_permille',\r\n  withdrawRateKey = 'stars_usd_withdraw_rate_x1000'\r\n}: Options = {}) => {\r\n  const [appConfig] = useAppConfig();\r\n\r\n  const commission = createMemo(() => (+appConfig()?.[commissionKey] || 0) / 1000);\r\n  const centsPerStar = createMemo(() => (+appConfig()?.[withdrawRateKey] || 0) / 1000);\r\n\r\n  const commissionPercents = createMemo(() => Math.round(commission() * 100));\r\n  const willReceiveDollars = createMemo(() => Math.max(0.01 * Number(!!stars()), Math.round(commission() * centsPerStar() * stars()) / 100));\r\n\r\n  return {\r\n    commissionPercents,\r\n    willReceiveDollars\r\n  }\r\n};\r\n\r\nexport default useStarsCommissionAndWithdrawalPrice;\r\n"],"names":["useStarsCommissionAndWithdrawalPrice","stars","commissionKey","withdrawRateKey","appConfig","useAppConfig","commission","createMemo","centsPerStar","commissionPercents","willReceiveDollars"],"mappings":"wFAUM,MAAAA,EAAuC,CAACC,EAAyB,CACrE,cAAAC,EAAgB,yCAChB,gBAAAC,EAAkB,+BACpB,EAAa,KAAO,CACZ,KAAA,CAACC,CAAS,EAAIC,IAEdC,EAAaC,EAAW,KAAO,CAACH,EAAc,IAAAF,CAAa,GAAK,GAAK,GAAI,EACzEM,EAAeD,EAAW,KAAO,CAACH,EAAc,IAAAD,CAAe,GAAK,GAAK,GAAI,EAE7EM,EAAqBF,EAAW,IAAM,KAAK,MAAMD,EAAW,EAAI,GAAG,CAAC,EACpEI,EAAqBH,EAAW,IAAM,KAAK,IAAI,IAAO,CAAO,CAAC,CAACN,EAAM,EAAI,KAAK,MAAMK,IAAeE,IAAiBP,EAAO,CAAA,EAAI,GAAG,CAAC,EAElI,MAAA,CACL,mBAAAQ,EACA,mBAAAC,CAAA,CAEJ"}