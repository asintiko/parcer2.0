{"version":3,"file":"loginPage-c7QmqPht.js","sources":["../src/pages/loginPage.ts"],"sourcesContent":["/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport PopupElement, {addCancelButton, PopupButton} from '../components/popups';\r\nimport {FormatterArguments, LangPackKey, i18n} from '../lib/langPack';\r\n\r\n\r\n// ! cant use PopupPeer/confirmationPopup because of awkward recursive dependencies\r\nexport class SimpleConfirmationPopup extends PopupElement {\r\n  constructor(options: {\r\n    titleLangKey: LangPackKey;\r\n    descriptionLangKey: LangPackKey;\r\n    descriptionArgs?: FormatterArguments;\r\n    buttons: PopupButton[];\r\n  }) {\r\n    super('popup-peer popup-confirmation', {\r\n      title: options.titleLangKey,\r\n      buttons: options.buttons\r\n    });\r\n\r\n    const description = document.createElement('p');\r\n    description.classList.add('popup-description');\r\n    description.append(i18n(options.descriptionLangKey, options.descriptionArgs));\r\n    this.header.after(description);\r\n  }\r\n\r\n  static show(options: {\r\n    titleLangKey: LangPackKey;\r\n    descriptionLangKey: LangPackKey;\r\n    descriptionArgs?: FormatterArguments;\r\n    button: PopupButton\r\n  }) {\r\n    return new Promise<void>((resolve, reject) => {\r\n      let resolved = false\r\n\r\n      const buttons = addCancelButton([options.button])\r\n      const cancelButton = buttons.find((button) => button.isCancel);\r\n      cancelButton.callback = () => {\r\n        if(!resolved) {\r\n          reject();\r\n          resolved = true;\r\n        }\r\n      }\r\n      options.button.callback = () => {\r\n        if(!resolved) {\r\n          resolve()\r\n          resolved = true;\r\n        }\r\n      }\r\n\r\n      const popup = PopupElement.createPopup(SimpleConfirmationPopup, {\r\n        titleLangKey: options.titleLangKey,\r\n        descriptionLangKey: options.descriptionLangKey,\r\n        descriptionArgs: options.descriptionArgs,\r\n        buttons: buttons\r\n      })\r\n\r\n      popup.addEventListener('closeAfterTimeout', () => {\r\n        if(!resolved) {\r\n          reject();\r\n          resolved = true;\r\n        }\r\n      })\r\n\r\n      popup.show()\r\n    })\r\n  }\r\n}\r\n\r\nexport default class LoginPage {\r\n  public element: HTMLElement;\r\n  public container: HTMLElement;\r\n  public imageDiv: HTMLElement;\r\n  public inputWrapper: HTMLElement;\r\n  public title: HTMLElement;\r\n  public subtitle: HTMLParagraphElement;\r\n\r\n  constructor(options: {\r\n    className: string,\r\n    withInputWrapper?: boolean,\r\n    titleLangKey?: LangPackKey,\r\n    subtitleLangKey?: LangPackKey,\r\n  }) {\r\n    this.element = document.body.querySelector('.' + options.className) as HTMLDivElement;\r\n    // this.element = document.createElement('div');\r\n    // this.element.className = 'page-' + options.className;\r\n\r\n    this.container = document.createElement('div');\r\n    this.container.className = 'container center-align';\r\n\r\n    this.imageDiv = document.createElement('div');\r\n    this.imageDiv.className = 'auth-image';\r\n\r\n    this.title = document.createElement('h4');\r\n    if(options.titleLangKey) {\r\n      this.title.append(i18n(options.titleLangKey));\r\n    }\r\n\r\n    this.subtitle = document.createElement('p');\r\n    this.subtitle.className = 'subtitle';\r\n    if(options.subtitleLangKey) {\r\n      this.subtitle.append(i18n(options.subtitleLangKey));\r\n    }\r\n\r\n    this.container.append(this.imageDiv, this.title, this.subtitle);\r\n\r\n    if(options.withInputWrapper) {\r\n      this.inputWrapper = document.createElement('div');\r\n      this.inputWrapper.className = 'input-wrapper';\r\n      this.container.append(this.inputWrapper);\r\n    }\r\n\r\n    this.element.append(this.container);\r\n  }\r\n}\r\n"],"names":["SimpleConfirmationPopup","PopupElement","options","description","i18n","resolve","reject","resolved","buttons","addCancelButton","cancelButton","button","popup","LoginPage"],"mappings":"sDAWO,MAAMA,UAAgCC,CAAa,CACxD,YAAYC,EAKT,CACD,MAAM,gCAAiC,CACrC,MAAOA,EAAQ,aACf,QAASA,EAAQ,OAAA,CAClB,EAEK,MAAAC,EAAc,SAAS,cAAc,GAAG,EAClCA,EAAA,UAAU,IAAI,mBAAmB,EAC7CA,EAAY,OAAOC,EAAKF,EAAQ,mBAAoBA,EAAQ,eAAe,CAAC,EACvE,KAAA,OAAO,MAAMC,CAAW,CAC/B,CAEA,OAAO,KAAKD,EAKT,CACD,OAAO,IAAI,QAAc,CAACG,EAASC,IAAW,CAC5C,IAAIC,EAAW,GAEf,MAAMC,EAAUC,EAAgB,CAACP,EAAQ,MAAM,CAAC,EAC1CQ,EAAeF,EAAQ,KAAMG,GAAWA,EAAO,QAAQ,EAC7DD,EAAa,SAAW,IAAM,CACxBH,IACKD,IACIC,EAAA,GACb,EAEML,EAAA,OAAO,SAAW,IAAM,CAC1BK,IACMF,IACGE,EAAA,GACb,EAGI,MAAAK,EAAQX,EAAa,YAAYD,EAAyB,CAC9D,aAAcE,EAAQ,aACtB,mBAAoBA,EAAQ,mBAC5B,gBAAiBA,EAAQ,gBACzB,QAAAM,CAAA,CACD,EAEKI,EAAA,iBAAiB,oBAAqB,IAAM,CAC5CL,IACKD,IACIC,EAAA,GACb,CACD,EAEDK,EAAM,KAAK,CAAA,CACZ,CACH,CACF,CAEA,MAAqBC,CAAU,CAQ7B,YAAYX,EAKT,CACD,KAAK,QAAU,SAAS,KAAK,cAAc,IAAMA,EAAQ,SAAS,EAI7D,KAAA,UAAY,SAAS,cAAc,KAAK,EAC7C,KAAK,UAAU,UAAY,yBAEtB,KAAA,SAAW,SAAS,cAAc,KAAK,EAC5C,KAAK,SAAS,UAAY,aAErB,KAAA,MAAQ,SAAS,cAAc,IAAI,EACrCA,EAAQ,cACT,KAAK,MAAM,OAAOE,EAAKF,EAAQ,YAAY,CAAC,EAGzC,KAAA,SAAW,SAAS,cAAc,GAAG,EAC1C,KAAK,SAAS,UAAY,WACvBA,EAAQ,iBACT,KAAK,SAAS,OAAOE,EAAKF,EAAQ,eAAe,CAAC,EAGpD,KAAK,UAAU,OAAO,KAAK,SAAU,KAAK,MAAO,KAAK,QAAQ,EAE3DA,EAAQ,mBACJ,KAAA,aAAe,SAAS,cAAc,KAAK,EAChD,KAAK,aAAa,UAAY,gBACzB,KAAA,UAAU,OAAO,KAAK,YAAY,GAGpC,KAAA,QAAQ,OAAO,KAAK,SAAS,CACpC,CACF"}