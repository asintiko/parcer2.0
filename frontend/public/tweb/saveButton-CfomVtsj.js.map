{"version":3,"file":"saveButton-CfomVtsj.js","sources":["../src/components/sidebarLeft/tabs/privacy/messages/useIsConfirmationNeededOnClose.ts","../src/components/sidebarLeft/tabs/privacy/messages/appearZoomTransition.tsx","../src/components/sidebarLeft/tabs/privacy/messages/saveButton.tsx"],"sourcesContent":["import {Accessor} from 'solid-js';\r\nimport type {LangPackKey} from '../../../../../lib/langPack';\r\nimport confirmationPopup, {ConfirmationPopupRejectReason} from '../../../../confirmationPopup';\r\nimport {PopupPeerOptions} from '../../../../popups/peer';\r\n\r\n\r\ntype UseIsConfirmationNeededOnCloseArgs = {\r\n  descriptionLangKey: LangPackKey;\r\n  hasChanges: Accessor<boolean>;\r\n  saveAllSettings: () => Promise<void>;\r\n};\r\n\r\nconst useIsConfirmationNeededOnClose = ({descriptionLangKey, hasChanges, saveAllSettings}: UseIsConfirmationNeededOnCloseArgs) => async() => {\r\n  if(!hasChanges()) return;\r\n\r\n  const saveButton: PopupPeerOptions['buttons'][number] = {\r\n    langKey: 'Save'\r\n  };\r\n\r\n  try {\r\n    await confirmationPopup({\r\n      titleLangKey: 'UnsavedChanges',\r\n      descriptionLangKey,\r\n      button: saveButton,\r\n      buttons: [\r\n        saveButton,\r\n        {isCancel: true, langKey: 'Discard'}\r\n      ],\r\n      rejectWithReason: true\r\n    });\r\n    saveAllSettings();\r\n  } catch(_reason: any) {\r\n    const reason: ConfirmationPopupRejectReason = _reason;\r\n\r\n    if(reason === 'closed') throw new Error();\r\n  }\r\n};\r\n\r\nexport default useIsConfirmationNeededOnClose;\r\n","import {ParentComponent} from 'solid-js';\r\nimport {Transition} from 'solid-transition-group';\r\n\r\n\r\nconst animateEl = (backwards = false) => async(el: Element, done: () => void) => {\r\n  const keyframes = ['scale(0)', 'scale(1)'];\r\n  if(backwards) keyframes.reverse();\r\n\r\n  await el.animate(\r\n    {transform: keyframes},\r\n    {duration: 80}\r\n  ).finished;\r\n\r\n  done();\r\n};\r\n\r\nconst AppearZoomTransition: ParentComponent = (props) => {\r\n  return (\r\n    <Transition\r\n      onEnter={animateEl()}\r\n      onExit={animateEl(true)}\r\n    >\r\n      {props.children}\r\n    </Transition>\r\n  );\r\n};\r\n\r\nexport default AppearZoomTransition;\r\n","import {Component, Show} from 'solid-js';\r\nimport {IconTsx} from '../../../../iconTsx';\r\nimport ripple from '../../../../ripple';\r\nimport AppearZoomTransition from './appearZoomTransition';\r\nripple; // keep\r\n\r\n\r\nconst SaveButton: Component<{\r\n  hasChanges: boolean;\r\n  onClick: () => void;\r\n}> = (props) => {\r\n  return (\r\n    <AppearZoomTransition>\r\n      <Show when={props.hasChanges}>\r\n        <button\r\n          use:ripple\r\n          class=\"btn-icon blue\"\r\n          onClick={props.onClick}\r\n        >\r\n          <IconTsx icon=\"check\" />\r\n        </button>\r\n      </Show>\r\n    </AppearZoomTransition>\r\n  )\r\n};\r\n\r\nexport default SaveButton;\r\n"],"names":["useIsConfirmationNeededOnClose","descriptionLangKey","hasChanges","saveAllSettings","saveButton","confirmationPopup","_reason","animateEl","backwards","el","done","keyframes","reverse","animate","transform","duration","finished","AppearZoomTransition","props","_$createComponent","Transition","onEnter","onExit","children","SaveButton","Show","when","_el$","_tmpl$","_$addEventListener","onClick","_$use","ripple","_$insert","IconTsx","icon","_$delegateEvents"],"mappings":"wOAYA,MAAMA,EAAiC,CAAC,CAAC,mBAAAC,EAAoB,WAAAC,EAAY,gBAAAC,KAAyD,SAAW,CAC3I,GAAG,CAACD,EAAW,EAAG,OAElB,MAAME,EAAkD,CACtD,QAAS,MAAA,EAGP,GAAA,CACF,MAAMC,EAAkB,CACtB,aAAc,iBACd,mBAAAJ,EACA,OAAQG,EACR,QAAS,CACPA,EACA,CAAC,SAAU,GAAM,QAAS,SAAS,CACrC,EACA,iBAAkB,EAAA,CACnB,EACeD,UACVG,EAAc,CAGpB,GAF8CA,IAEhC,SAAU,MAAM,IAAI,KACpC,CACF,EChCMC,EAAYA,CAACC,EAAY,KAAU,MAAMC,EAAaC,IAAqB,CAC/E,MAAMC,EAAY,CAAC,WAAY,UAAU,EACtCH,GAAWG,EAAUC,UAExB,MAAMH,EAAGI,QACP,CAACC,UAAWH,CAAS,EACrB,CAACI,SAAU,EACb,CAAA,EAAEC,SAEFN,GACF,EAEMO,EAAyCC,GAC7CC,EACGC,EAAU,CAAA,IACTC,SAAO,CAAA,OAAEd,EAAS,CAAE,EAAA,IACpBe,QAAM,CAAA,OAAEf,EAAU,EAAI,CAAC,EAAA,IAAAgB,UAAA,CAAA,OAEtBL,EAAMK,QAAQ,CAAA,CAAA,wCCffC,EAGAN,GACJC,EACGF,EAAoB,CAAA,IAAAM,UAAA,CAAA,OAAAJ,EAClBM,EAAI,CAAA,IAACC,MAAI,CAAA,OAAER,EAAMhB,UAAU,EAAA,IAAAqB,UAAA,CAAA,MAAAI,EAAAC,IAAAC,OAAAA,EAAAF,EAIfT,QAAAA,EAAMY,QAAO,EAAA,EAAAC,EAFlBC,EAAML,EAAA,IAAA,EAAA,EAAAM,EAAAN,EAAAR,EAITe,EAAO,CAACC,KAAI,OAAA,CAAA,CAAA,EAAAR,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAOGS,EAAA,CAAA,OAAA,CAAA"}