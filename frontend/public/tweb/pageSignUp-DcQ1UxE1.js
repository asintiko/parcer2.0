const __vite__fileDeps=["pageIm-L8AZDBuv.js","index-DkTXgRzn.js","index-D6yfGClC.css","page-DHZ4rwAT.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as u,g as P,K as w,L as v,B as y,q as k,_ as E,e as I,j as f,w as N,k as A}from"./index-DkTXgRzn.js";import{L as S}from"./loginPage-c7QmqPht.js";import{P as F}from"./page-DHZ4rwAT.js";import{P as M}from"./avatar-Cz4GXzaj.js";import{p as U}from"./putPreloader-B1AiiTEr.js";let d=null;const x=async()=>{const e=new S({className:"page-signUp",withInputWrapper:!0,titleLangKey:"YourName",subtitleLangKey:"Login.Register.Subtitle"});e.imageDiv.classList.add("avatar-edit"),e.title.classList.add("fullName");const o=document.createElement("canvas");o.id="canvas-avatar",o.className="avatar-edit-canvas";const b=P("cameraadd","avatar-edit-icon");e.imageDiv.append(o,b);let m;e.imageDiv.addEventListener("click",()=>{w.createPopup(M).open(o,a=>{m=a})});const g=a=>{const n=t.value||"",i=r.value||"",l=n||i?(n+" "+i).trim():"";l?f(e.title,N(l)):f(e.title,A("YourName"))},L=()=>new Promise((a,n)=>{if(!m)return a();m().then(i=>{u.managers.appProfileManager.uploadProfilePhoto(i).then(a,n)},n)}),t=new v({label:"FirstName",maxLength:70}),r=new v({label:"LastName",maxLength:64}),c=y("btn-primary btn-color-primary"),p=new k.IntlElement({key:"StartMessaging"});return c.append(p.element),e.inputWrapper.append(t.container,r.container,c),t.input.addEventListener("input",g),r.input.addEventListener("input",g),c.addEventListener("click",function(a){if(t.input.classList.contains("error")||r.input.classList.contains("error"))return!1;if(!t.value.length)return t.input.classList.add("error"),!1;this.disabled=!0;const n=t.value.trim(),i=r.value.trim(),l={phone_number:d.phone_number,phone_code_hash:d.phone_code_hash,first_name:n,last_name:i};p.update({key:"PleaseWait"});const h=U(this);u.managers.apiManager.invokeApi("auth.signUp",l).then(async s=>{switch(s._){case"auth.authorization":await u.managers.apiManager.setUser(s.user),L().finally(()=>{E(()=>import("./pageIm-L8AZDBuv.js"),__vite__mapDeps([0,1,2,3])).then(_=>{_.default.mount()})});break;default:p.update({key:s._}),this.removeAttribute("disabled"),h.remove();break}}).catch(s=>{switch(this.removeAttribute("disabled"),h.remove(),s.type){default:p.update({key:s.type});break}})}),I(),new Promise(a=>{window.requestAnimationFrame(a)})},B=new F("page-signUp",!0,x,e=>{d=e,u.managers.appStateManager.pushToState("authState",{_:"authStateSignUp",authCode:e})});export{B as default};
//# sourceMappingURL=pageSignUp-DcQ1UxE1.js.map
