import{dI as y,c$ as k,ah as T,b as t,i as m,bQ as S,a5 as d,a2 as C,a as D,t as x,c as j,bW as A,a_ as I}from"./index-DkTXgRzn.js";import{I as _,a0 as v,a1 as E,a2 as M,T as R}from"./appDialogsManager-BOFmQsZq.js";import{a as U}from"./wrapDuration-BzvpFTxS.js";import{I as p}from"./toast-Du-4fzOe.js";import{B as z}from"./emailSetup-B7XgbVnq.js";import"./page-DHZ4rwAT.js";import"./putPreloader-B1AiiTEr.js";import"./countryInputField-ChXEz7Bm.js";import"./classNames-CN4lTu6a.js";import"./htmlToSpan-DhAls8qz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./iconTsx-CzZ0kHhc.js";import"./fastBlur-Co-79rP4.js";import"./transition-FQI3RYKM.js";import"./scrollable2-BbNRxL9e.js";import"./avatar-Cz4GXzaj.js";import"./chatBackground-Chi5RRwr.js";import"./tracking-CAgwjojq.js";const B="_container_tjnis_1",K="_items_tjnis_5",g={container:B,items:K},L=x("<div>"),$=e=>{const[c]=_(),{rootScope:l,wrapEmojiText:n,wrapAdaptiveCustomEmoji:a,Row:r,i18n:s,confirmationPopup:f,formatDate:u}=y(),[h,P]=j(!1),b=()=>{const i=s("Privacy.Passkey.Created",[u(new Date(e.date*1e3),{withTime:!0})]);if(!e.last_usage_date)return i;const o=s("Privacy.Passkey.LastUsage",[u(new Date(e.last_usage_date*1e3),{withTime:!0})]);return[i," â€¢ ",o]};return t(r,{get disabled(){return h()},contextMenu:{buttons:[{icon:"delete",text:"Delete",onClick:async()=>{await f({titleLangKey:"Passkey.Deletion.Title",descriptionLangKey:"Passkey.Deletion.Text",button:{langKey:"Delete",isDanger:!0}}),P(!0),l.managers.appAccountManager.deletePasskey(e.id).finally(()=>{c.payload.setPasskeys(i=>{const o=[...i];return A(o,w=>w.id===e.id),o})})},danger:!0}]},get children(){return[t(d,{get when(){return!e.software_emoji_id},get children(){return t(r.Icon,{icon:"key"})}}),t(r.Title,{class:"text-bold",get children(){return n(e.name)}}),t(r.Subtitle,{get children(){return b()}}),t(d,{get when(){return e.software_emoji_id},get children(){return t(r.Media,{size:"abitbigger",get children(){return a({docId:e.software_emoji_id,size:42,wrapOptions:{middleware:I().get()}}).container}})}})]}})},ne=()=>{const[e]=_(),{i18n:c}=y(),l=k(),n=a=>{e.payload.setPasskeys(r=>{const s=[...r];return s.unshift(a),s})};return T(()=>{!e.payload.passkeys.length&&!p&&e.close()}),t(R,{get class(){return g.container},caption:"Privacy.Passkeys.Caption",get captionArgs(){return[U(()=>v(n))]},get children(){return[t(E,{sticker:{name:"key",size:100},get subtitle(){return c("Passkey.Subtitle")},subtitleSecondary:!0}),(()=>{const a=L();return m(a,t(S,{get each(){return e.payload.passkeys},children:$}),null),m(a,t(d,{get when(){return p&&e.payload.passkeys.length<l.passkeys_account_passkeys_max},get children(){return t(z,{text:"Privacy.Passkey.Create",primaryTransparent:!0,icon:"add",onClick:()=>M().then(n)})}}),null),C(()=>D(a,g.items)),a})()]}})};export{ne as default};
//# sourceMappingURL=passkeys-Ww4gRw3T.js.map
