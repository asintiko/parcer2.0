{"version":3,"file":"passcodeLockScreen-DAgVdbo3.js","sources":["../src/components/passcodeLock/passwordMonkeyTsx.tsx","../src/components/passcodeLock/simplePopup.tsx","../src/components/passcodeLock/background.tsx","../src/components/passcodeLock/passcodeLockScreen.tsx"],"sourcesContent":["import {Component, createRenderEffect, createSignal, mergeProps, onCleanup, Ref, Show} from 'solid-js';\r\n\r\nimport {useLockScreenHotReloadGuard} from '../../lib/solidjs/hotReloadGuard';\r\n\r\nimport type PasswordInputField from '../passwordInputField';\r\nimport type PasswordMonkey from '../monkeys/password';\r\n\r\nimport styles from './passwordMonkeyTsx.module.scss';\r\n\r\n\r\nconst PasswordMonkeyTsx: Component<{\r\n  ref?: Ref<HTMLDivElement>;\r\n  passwordInputField: PasswordInputField;\r\n  hidden?: boolean;\r\n  size?: number;\r\n}> = (inProps) => {\r\n  const props = mergeProps({size: 100}, inProps);\r\n\r\n  const {PasswordMonkey} = useLockScreenHotReloadGuard();\r\n\r\n  const [monkey, setMonkey] = createSignal<PasswordMonkey>();\r\n  const [monkeyLoaded, setMonkeyLoaded] = createSignal(false);\r\n\r\n  createRenderEffect(() => {\r\n    const monkey = new PasswordMonkey(props.passwordInputField, props.size);\r\n    monkey.load().then(() => setMonkeyLoaded(true));\r\n    setMonkey(monkey);\r\n\r\n    onCleanup(() => {\r\n      monkey.remove();\r\n    });\r\n  });\r\n\r\n  return (\r\n    <div\r\n      ref={props.ref}\r\n      class={styles.PasswordMonkey}\r\n      classList={{\r\n        [styles.hidden]: props.hidden\r\n      }}\r\n      style={{'--size': props.size + 'px'}}\r\n    >\r\n      {monkey().container}\r\n\r\n      {/* Prevent the monkey blinking when reloading the page */}\r\n      <Show when={!monkeyLoaded()}>\r\n        <img class={styles.MonkeyImage} src=\"assets/img/password-monkey-closed.png\" />\r\n      </Show>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PasswordMonkeyTsx;\r\n","import {Component, JSX, onCleanup, onMount} from 'solid-js';\r\nimport {Transition} from 'solid-transition-group';\r\nimport {Portal} from 'solid-js/web';\r\n\r\nimport pause from '../../helpers/schedulers/pause';\r\nimport {i18n} from '../../lib/langPack';\r\n\r\nimport ripple from '../ripple'; ripple; // keep\r\n\r\nimport styles from './simplePopup.module.scss';\r\n\r\nconst SimplePopup: Component<{\r\n  visible?: boolean;\r\n\r\n  title: JSX.Element;\r\n  description: JSX.Element;\r\n  confirmButtonContent: JSX.Element;\r\n\r\n  onClose?: () => void;\r\n  onConfirm: () => void;\r\n}> = (props) => {\r\n  onMount(() => {\r\n    const listener = (e: KeyboardEvent) => {\r\n      if(e.key === 'Escape') props.onClose?.();\r\n    }\r\n    document.addEventListener('keydown', listener);\r\n\r\n    onCleanup(() => {\r\n      document.removeEventListener('keydown', listener);\r\n    });\r\n  });\r\n\r\n  return (\r\n    <Portal>\r\n      <Transition\r\n        onEnter={async(el, done) => {\r\n          await pause(0);\r\n          el.classList.add('active');\r\n          await pause(0);\r\n          done();\r\n        }}\r\n        onExit={async(el, done) => {\r\n          el.classList.remove('active');\r\n          await pause(200);\r\n          done();\r\n        }}\r\n      >\r\n        {props.visible && <div\r\n          class={'popup popup-peer popup-confirmation ' + styles.Popup}\r\n          onClick={(e) => {\r\n            if(e.target === e.currentTarget) {\r\n              props.onClose?.();\r\n            }\r\n          }}\r\n        >\r\n          <div class='popup-container'>\r\n            <div class='popup-header'>\r\n              <div class='popup-title'>\r\n                {props.title}\r\n              </div>\r\n            </div>\r\n\r\n            <div class='popup-description'>\r\n              {props.description}\r\n            </div>\r\n\r\n            <div class='popup-buttons'>\r\n              <button class='popup-button btn danger' use:ripple onClick={props.onConfirm}>\r\n                {props.confirmButtonContent}\r\n              </button>\r\n              <button class='popup-button btn primary' use:ripple onClick={props.onClose} autofocus>\r\n                {i18n('Cancel')}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>}\r\n      </Transition>\r\n    </Portal>\r\n  );\r\n};\r\n\r\nexport default SimplePopup;\r\n","import {Component, Show} from 'solid-js';\r\n\r\nimport {useLockScreenHotReloadGuard} from '../../lib/solidjs/hotReloadGuard';\r\nimport {ScreenSize, useMediaSizes} from '../../helpers/mediaSizes';\r\n\r\nimport ChatBackgroundGradientRenderer from '../chat/gradientRenderer';\r\n\r\nimport {ChatBackground} from '../chat/bubbles/chatBackground';\r\n\r\n\r\nconst Background: Component<{\r\n  gradientRendererRef: (value: ChatBackgroundGradientRenderer | undefined) => void\r\n}> = (props) => {\r\n  const {themeController, rootScope} = useLockScreenHotReloadGuard();\r\n\r\n  const mediaSizes = useMediaSizes();\r\n\r\n  return (\r\n    <Show when={mediaSizes.activeScreen !== ScreenSize.mobile}>\r\n      <ChatBackground\r\n        themeController={themeController}\r\n        managers={rootScope.managers}\r\n        gradientRendererRef={props.gradientRendererRef}\r\n      />\r\n    </Show>\r\n  );\r\n};\r\n\r\nexport default Background;\r\n","import {Component, createEffect, createResource, on, onCleanup, onMount, Show} from 'solid-js';\r\nimport {createMutable} from 'solid-js/store';\r\n\r\nimport {useLockScreenHotReloadGuard} from '../../lib/solidjs/hotReloadGuard';\r\nimport AccountController from '../../lib/accounts/accountController';\r\nimport {MAX_PASSCODE_LENGTH} from '../../lib/passcode/constants';\r\nimport {usePasscodeActions} from '../../lib/passcode/actions';\r\nimport commonStateStorage from '../../lib/commonStateStorage';\r\nimport throttle from '../../helpers/schedulers/throttle';\r\nimport focusInput from '../../helpers/dom/focusInput';\r\nimport pause from '../../helpers/schedulers/pause';\r\nimport {i18n} from '../../lib/langPack';\r\n\r\nimport ChatBackgroundGradientRenderer from '../chat/gradientRenderer';\r\nimport type PasswordInputField from '../passwordInputField';\r\nimport {animateValue} from '../mediaEditor/utils';\r\nimport ripple from '../ripple'; ripple; // keep\r\nimport Space from '../space';\r\n\r\nimport PasswordMonkeyTsx from './passwordMonkeyTsx';\r\nimport SimplePopup from './simplePopup';\r\nimport Background from './background';\r\n\r\nimport styles from './passcodeLockScreen.module.scss';\r\nimport {ChatBackground} from '../chat/bubbles/chatBackground';\r\n\r\n\r\ntype StateStore = {\r\n  isMonkeyHidden: boolean;\r\n  isError: boolean;\r\n  tooManyAttempts: boolean;\r\n  passcode: string;\r\n  isLogoutPopupOpen: boolean;\r\n  gradientRenderer?: ChatBackgroundGradientRenderer;\r\n};\r\n\r\n\r\nconst MAX_ATTEMPTS = 5;\r\nconst MAX_ATTEMPTS_TIMEOUT_SEC = 60;\r\n\r\n\r\nconst PasscodeLockScreen: Component<{\r\n  onUnlock: () => void;\r\n  fromLockIcon?: HTMLElement;\r\n  onAnimationEnd?: () => void;\r\n}> = (props) => {\r\n  let container: HTMLDivElement;\r\n  let passwordInputField: PasswordInputField;\r\n  let passwordMonkeyContainer: HTMLDivElement;\r\n\r\n  let attempts = 0;\r\n\r\n  const {isMyPasscode, unlockWithPasscode} = usePasscodeActions();\r\n  const {InputFieldTsx, PasswordInputField, apiManagerProxy} = useLockScreenHotReloadGuard();\r\n\r\n  const store = createMutable<StateStore>({\r\n    isMonkeyHidden: !!props.fromLockIcon,\r\n    isError: false,\r\n    tooManyAttempts: false,\r\n    passcode: '',\r\n    isLogoutPopupOpen: false\r\n  });\r\n\r\n  const [totalAccounts] = createResource(() => AccountController.getUnencryptedTotalAccounts());\r\n\r\n  onMount(() => {\r\n    attempts = 0;\r\n\r\n    const lockIcon = props.fromLockIcon;\r\n    if(lockIcon) (async() => {\r\n      const lockIconRect = lockIcon.getBoundingClientRect();\r\n      const rect = passwordMonkeyContainer.getBoundingClientRect();\r\n\r\n      lockIcon.style.setProperty('--x', (rect.left + (rect.width / 2)) + 'px');\r\n      lockIcon.style.setProperty('--y', (rect.top + (rect.height / 2)) + 'px');\r\n      lockIcon.style.setProperty('--scale', (rect.width / lockIconRect.width) + '');\r\n      lockIcon.classList.add('passcode-lock-screen__animated-lock-icon--shift-body')\r\n\r\n      await pause(500);\r\n\r\n      lockIcon.classList.add('passcode-lock-screen__animated-lock-icon--disappear')\r\n      store.isMonkeyHidden = false;\r\n\r\n      await pause(400);\r\n      lockIcon.remove();\r\n      props.onAnimationEnd?.();\r\n    })();\r\n\r\n    const listener = (e: KeyboardEvent) => {\r\n      if(document.activeElement && document.activeElement.tagName === 'INPUT') return;\r\n      focusInput(passwordInputField.input, e);\r\n    };\r\n    document.addEventListener('keydown', listener);\r\n    onCleanup(() => {\r\n      document.removeEventListener('keydown', listener);\r\n    });\r\n  });\r\n\r\n  let cancelAnimation: () => void;\r\n\r\n  function rotateBackgroundGradient() {\r\n    cancelAnimation?.();\r\n\r\n    if(store.gradientRenderer) {\r\n      let progress = 0;\r\n      cancelAnimation = animateValue(0, 1, 200, (p) => progress = p);\r\n      store.gradientRenderer.toNextPosition(() => progress);\r\n    }\r\n  }\r\n\r\n  const rotateBackgroundGradientThrottled = throttle(rotateBackgroundGradient, 100, true);\r\n\r\n  createEffect(on(() => store.passcode, () => {\r\n    rotateBackgroundGradientThrottled();\r\n\r\n    store.isError = false;\r\n    store.tooManyAttempts = false;\r\n  }));\r\n\r\n  onCleanup(() => {\r\n    store.passcode = '';\r\n    (passwordInputField.input as HTMLInputElement).value = '';\r\n  });\r\n\r\n  const canSubmit = () => !!store.passcode && store.passcode.length <= MAX_PASSCODE_LENGTH;\r\n\r\n  const canAttempt = async() => {\r\n    const settings = structuredClone(await commonStateStorage.get('settings', false));\r\n    const canAttemptAgainOn = settings?.passcode?.canAttemptAgainOn;\r\n    if(!canAttemptAgainOn) return true;\r\n\r\n    if(canAttemptAgainOn > Date.now()) return false;\r\n\r\n    store.tooManyAttempts = false;\r\n    attempts = 0;\r\n    settings.passcode.canAttemptAgainOn = null;\r\n    commonStateStorage.set({settings});\r\n    return true;\r\n  };\r\n\r\n  let isSubmiting = false;\r\n  const onSubmit = async(e?: Event) => {\r\n    e?.preventDefault();\r\n    if(isSubmiting) return;\r\n\r\n    isSubmiting = true;\r\n\r\n    try {\r\n      if(!(await canAttempt())) {\r\n        store.tooManyAttempts = true;\r\n      } else if(canSubmit() && await isMyPasscode(store.passcode)) {\r\n        await unlockWithPasscode(store.passcode);\r\n        props.onUnlock();\r\n      } else {\r\n        attempts ++;\r\n        store.isError = true;\r\n        if(attempts > MAX_ATTEMPTS) {\r\n          store.tooManyAttempts = true;\r\n          const settings = structuredClone(await commonStateStorage.get('settings', false));\r\n          settings.passcode.canAttemptAgainOn = Date.now() + MAX_ATTEMPTS_TIMEOUT_SEC * 1000;\r\n          await commonStateStorage.set({settings});\r\n        }\r\n      }\r\n    } catch{\r\n      store.isError = true;\r\n    } finally {\r\n      isSubmiting = false;\r\n    }\r\n  };\r\n\r\n  const input = (\r\n    <InputFieldTsx\r\n      InputFieldClass={PasswordInputField}\r\n      instanceRef={(value) => void (passwordInputField = value)}\r\n      class={styles.Input}\r\n      value={store.passcode}\r\n      onRawInput={(value) => void (store.passcode = value)}\r\n      label=\"PasscodeLock.EnterYourPasscode\"\r\n      errorLabel={\r\n        store.tooManyAttempts ?\r\n          'PasscodeLock.TooManyAttempts' :\r\n          store.isError ?\r\n            'PasscodeLock.WrongPasscode' :\r\n            undefined\r\n      }\r\n      maxLength={MAX_PASSCODE_LENGTH}\r\n    />\r\n  );\r\n\r\n\r\n  return (\r\n    <div ref={container} class={styles.Container}>\r\n      <Background gradientRendererRef={(value) => void(store.gradientRenderer = value)} />\r\n      <div class={styles.Card}>\r\n        <PasswordMonkeyTsx\r\n          hidden={store.isMonkeyHidden}\r\n          ref={passwordMonkeyContainer}\r\n          passwordInputField={passwordInputField}\r\n        />\r\n        <Space amount=\"1.125rem\" />\r\n        <form action=\"\" onSubmit={onSubmit}>\r\n          {input}\r\n          <Space amount=\"1rem\" />\r\n          <button\r\n            type='button'\r\n            onMouseDown={() => {\r\n              onSubmit();\r\n            }}\r\n            class={`btn-primary btn-color-primary btn-large ${styles.SubmitButton}`}\r\n            disabled={!store.passcode}\r\n          >\r\n            {i18n('PasscodeLock.Proceed')}\r\n          </button>\r\n          <button hidden style={{visibility: 'hidden', height: '0', width: '0'}} type='submit' />\r\n        </form>\r\n        <Space amount=\"1.625rem\" />\r\n        <div class={styles.Description}>\r\n          {\r\n            i18n(\r\n              totalAccounts() > 1 ? // Gonna be `false` when undefined\r\n                'PasscodeLock.ForgotPasscode.MultipleAccounts' :\r\n                'PasscodeLock.ForgotPasscode.OneAccount',\r\n              [\r\n                <button\r\n                  class={styles.LogoutButton}\r\n                  onClick={() => {\r\n                    store.isLogoutPopupOpen = true;\r\n                  }}\r\n                /> as HTMLButtonElement\r\n              ]\r\n            )\r\n          }\r\n        </div>\r\n      </div>\r\n\r\n      <SimplePopup\r\n        visible={store.isLogoutPopupOpen}\r\n        title={i18n('LogOut')}\r\n        description={i18n('PasscodeLock.LogoutPopup.Description')}\r\n        confirmButtonContent={i18n('LogOut')}\r\n        onConfirm={() => {\r\n          apiManagerProxy.invokeVoid('forceLogout', undefined);\r\n          // store.isLogoutPopupOpen = false\r\n        }}\r\n        onClose={() => void(store.isLogoutPopupOpen = false)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PasscodeLockScreen;\r\n"],"names":["PasswordMonkeyTsx","inProps","props","mergeProps","size","PasswordMonkey","useLockScreenHotReloadGuard","monkey","setMonkey","createSignal","monkeyLoaded","setMonkeyLoaded","createRenderEffect","passwordInputField","load","then","onCleanup","remove","_el$","_tmpl$2","_ref$","ref","_$use","_$insert","container","_$createComponent","Show","when","children","_el$2","_tmpl$","_$effect","_$className","styles","MonkeyImage","_p$","_v$","_v$2","hidden","_v$3","_$classList","style","setProperty","removeProperty","undefined","SimplePopup","onMount","listener","e","key","onClose","document","addEventListener","removeEventListener","Portal","Transition","onEnter","el","done","pause","classList","add","onExit","_$memo","visible","firstChild","_el$3","_el$4","_el$5","nextSibling","_el$6","_el$7","_el$8","$$click","target","currentTarget","title","description","_$addEventListener","onConfirm","ripple","confirmButtonContent","i18n","Popup","_$delegateEvents","Background","themeController","rootScope","mediaSizes","useMediaSizes","activeScreen","ScreenSize","mobile","ChatBackground","managers","gradientRendererRef","MAX_ATTEMPTS","MAX_ATTEMPTS_TIMEOUT_SEC","PasscodeLockScreen","passwordMonkeyContainer","attempts","isMyPasscode","unlockWithPasscode","usePasscodeActions","InputFieldTsx","PasswordInputField","apiManagerProxy","store","createMutable","isMonkeyHidden","fromLockIcon","isError","tooManyAttempts","passcode","isLogoutPopupOpen","totalAccounts","createResource","AccountController","getUnencryptedTotalAccounts","lockIcon","lockIconRect","getBoundingClientRect","rect","left","width","top","height","onAnimationEnd","activeElement","tagName","focusInput","input","cancelAnimation","rotateBackgroundGradient","gradientRenderer","progress","animateValue","p","toNextPosition","rotateBackgroundGradientThrottled","throttle","createEffect","on","value","canSubmit","length","MAX_PASSCODE_LENGTH","canAttempt","settings","structuredClone","commonStateStorage","get","canAttemptAgainOn","Date","now","set","isSubmiting","onSubmit","preventDefault","onUnlock","InputFieldClass","instanceRef","Input","onRawInput","label","errorLabel","maxLength","r$","_ref$2","Space","amount","$$mousedown","LogoutButton","invokeVoid","Container","Card","SubmitButton","_v$4","_v$5","Description","disabled"],"mappings":"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"}